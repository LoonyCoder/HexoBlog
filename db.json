{"meta":{"version":1,"warehouse":"3.0.1"},"models":{"Asset":[{"_id":"themes/landscape/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/js/script.js","path":"js/script.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/images/author.jpg","path":"images/author.jpg","modified":0,"renderable":0},{"_id":"source/images/20180127210359151.png","path":"images/20180127210359151.png","modified":0,"renderable":0},{"_id":"source/images/2.png","path":"images/2.png","modified":0,"renderable":0},{"_id":"source/images/3.png","path":"images/3.png","modified":0,"renderable":0},{"_id":"source/images/1.png","path":"images/1.png","modified":0,"renderable":0},{"_id":"source/images/table.png","path":"images/table.png","modified":0,"renderable":0},{"_id":"source/images/mapperxml.png","path":"images/mapperxml.png","modified":0,"renderable":0},{"_id":"source/images/test.png","path":"images/test.png","modified":0,"renderable":0},{"_id":"source/images/vue2.png","path":"images/vue2.png","modified":0,"renderable":0},{"_id":"source/images/vue5.png","path":"images/vue5.png","modified":0,"renderable":0},{"_id":"source/images/vue6.png","path":"images/vue6.png","modified":0,"renderable":0},{"_id":"source/images/vue3.png","path":"images/vue3.png","modified":0,"renderable":0},{"_id":"source/images/vue4.png","path":"images/vue4.png","modified":0,"renderable":0},{"_id":"source/images/vue1.png","path":"images/vue1.png","modified":0,"renderable":0},{"_id":"source/images/String1.png","path":"images/String1.png","modified":0,"renderable":0},{"_id":"source/images/DomaticBind.png","path":"images/DomaticBind.png","modified":0,"renderable":0},{"_id":"source/images/stack.png","path":"images/stack.png","modified":0,"renderable":0},{"_id":"source/images/shiro2.png","path":"images/shiro2.png","modified":0,"renderable":0},{"_id":"source/images/shiro1.png","path":"images/shiro1.png","modified":0,"renderable":0},{"_id":"source/images/testResult.png","path":"images/testResult.png","modified":0,"renderable":0},{"_id":"source/images/vue12.png","path":"images/vue12.png","modified":0,"renderable":0},{"_id":"source/images/vue10.png","path":"images/vue10.png","modified":0,"renderable":0},{"_id":"source/images/vue13.png","path":"images/vue13.png","modified":0,"renderable":0},{"_id":"source/images/vue14.png","path":"images/vue14.png","modified":0,"renderable":0},{"_id":"source/images/vue8.png","path":"images/vue8.png","modified":0,"renderable":0},{"_id":"source/images/vue11.png","path":"images/vue11.png","modified":0,"renderable":0},{"_id":"source/images/vue7.png","path":"images/vue7.png","modified":0,"renderable":0},{"_id":"source/images/vue9.png","path":"images/vue9.png","modified":0,"renderable":0},{"_id":"source/images/vue18.png","path":"images/vue18.png","modified":0,"renderable":0},{"_id":"source/images/vue20.png","path":"images/vue20.png","modified":0,"renderable":0},{"_id":"source/images/vue15.png","path":"images/vue15.png","modified":0,"renderable":0},{"_id":"source/images/vue17.png","path":"images/vue17.png","modified":0,"renderable":0},{"_id":"source/images/vue16.png","path":"images/vue16.png","modified":0,"renderable":0},{"_id":"source/images/vue19.png","path":"images/vue19.png","modified":0,"renderable":0},{"_id":"source/images/execAfter.png","path":"images/execAfter.png","modified":0,"renderable":0},{"_id":"source/images/execBefore.png","path":"images/execBefore.png","modified":0,"renderable":0},{"_id":"source/images/execAfter1.png","path":"images/execAfter1.png","modified":0,"renderable":0},{"_id":"source/images/execResult2.png","path":"images/execResult2.png","modified":0,"renderable":0},{"_id":"source/images/execResult1.png","path":"images/execResult1.png","modified":0,"renderable":0},{"_id":"source/images/mybatis1.png","path":"images/mybatis1.png","modified":0,"renderable":0},{"_id":"source/images/mybatis2.png","path":"images/mybatis2.png","modified":0,"renderable":0},{"_id":"source/images/mybatis3.png","path":"images/mybatis3.png","modified":0,"renderable":0},{"_id":"source/images/mybatis4.png","path":"images/mybatis4.png","modified":0,"renderable":0},{"_id":"source/images/author.png","path":"images/author.png","modified":0,"renderable":0},{"_id":"source/images/nginx.jpg","path":"images/nginx.jpg","modified":0,"renderable":0},{"_id":"source/images/nginx4.png","path":"images/nginx4.png","modified":0,"renderable":0},{"_id":"source/images/nginx5.png","path":"images/nginx5.png","modified":0,"renderable":0},{"_id":"source/images/nginx6.png","path":"images/nginx6.png","modified":0,"renderable":0},{"_id":"source/images/nginx7.png","path":"images/nginx7.png","modified":0,"renderable":0},{"_id":"source/images/nginx3.png","path":"images/nginx3.png","modified":0,"renderable":0},{"_id":"source/images/nginx1.png","path":"images/nginx1.png","modified":0,"renderable":0},{"_id":"source/images/nginx2.png","path":"images/nginx2.png","modified":0,"renderable":0},{"_id":"source/images/docker1.jpg","path":"images/docker1.jpg","modified":0,"renderable":0},{"_id":"source/images/docker11.png","path":"images/docker11.png","modified":0,"renderable":0},{"_id":"source/images/docker10.png","path":"images/docker10.png","modified":0,"renderable":0},{"_id":"source/images/docker12.png","path":"images/docker12.png","modified":0,"renderable":0},{"_id":"source/images/docker3.png","path":"images/docker3.png","modified":0,"renderable":0},{"_id":"source/images/docker4.png","path":"images/docker4.png","modified":0,"renderable":0},{"_id":"source/images/docker6.png","path":"images/docker6.png","modified":0,"renderable":0},{"_id":"source/images/docker8.png","path":"images/docker8.png","modified":0,"renderable":0},{"_id":"source/images/docker9.png","path":"images/docker9.png","modified":0,"renderable":0},{"_id":"source/images/docker5.png","path":"images/docker5.png","modified":0,"renderable":0},{"_id":"source/images/docker2.png","path":"images/docker2.png","modified":0,"renderable":0},{"_id":"source/images/docker7.png","path":"images/docker7.png","modified":0,"renderable":0},{"_id":"source/images/math4.png","path":"images/math4.png","modified":0,"renderable":0},{"_id":"source/images/math3.png","path":"images/math3.png","modified":0,"renderable":0},{"_id":"source/images/math2.png","path":"images/math2.png","modified":0,"renderable":0},{"_id":"source/images/math1.png","path":"images/math1.png","modified":0,"renderable":0},{"_id":"source/images/math6.png","path":"images/math6.png","modified":0,"renderable":0},{"_id":"source/images/math5.png","path":"images/math5.png","modified":0,"renderable":0},{"_id":"source/images/thread.png","path":"images/thread.png","modified":0,"renderable":0},{"_id":"source/images/classloader.png","path":"images/classloader.png","modified":0,"renderable":0},{"_id":"source/images/mybatisflow.png","path":"images/mybatisflow.png","modified":0,"renderable":0},{"_id":"source/images/tcp1.png","path":"images/tcp1.png","modified":0,"renderable":0},{"_id":"source/images/kafka1.png","path":"images/kafka1.png","modified":0,"renderable":0},{"_id":"source/images/kafka2.png","path":"images/kafka2.png","modified":0,"renderable":0},{"_id":"source/images/deadlock.png","path":"images/deadlock.png","modified":0,"renderable":0},{"_id":"source/images/collection1.png","path":"images/collection1.png","modified":0,"renderable":0},{"_id":"source/images/linktable1.png","path":"images/linktable1.png","modified":0,"renderable":0},{"_id":"source/images/linktable2.png","path":"images/linktable2.png","modified":0,"renderable":0},{"_id":"source/images/linktable3.png","path":"images/linktable3.png","modified":0,"renderable":0},{"_id":"source/images/linktable4.png","path":"images/linktable4.png","modified":0,"renderable":0},{"_id":"source/images/linktable5.png","path":"images/linktable5.png","modified":0,"renderable":0},{"_id":"source/images/map1.png","path":"images/map1.png","modified":0,"renderable":0},{"_id":"source/images/hash1.png","path":"images/hash1.png","modified":0,"renderable":0},{"_id":"source/images/io.png","path":"images/io.png","modified":0,"renderable":0},{"_id":"source/images/thread2.png","path":"images/thread2.png","modified":0,"renderable":0},{"_id":"source/images/mybatis_logo.jpg","path":"images/mybatis_logo.jpg","modified":0,"renderable":0},{"_id":"source/images/spring_logo.jpg","path":"images/spring_logo.jpg","modified":0,"renderable":0},{"_id":"source/images/spring-framework.gif","path":"images/spring-framework.gif","modified":0,"renderable":0},{"_id":"source/images/spring-ioc1.png","path":"images/spring-ioc1.png","modified":0,"renderable":0},{"_id":"source/images/spring-ioc2.png","path":"images/spring-ioc2.png","modified":0,"renderable":0},{"_id":"source/images/spring-aop1.png","path":"images/spring-aop1.png","modified":0,"renderable":0}],"Cache":[{"_id":"themes/landscape/Gruntfile.js","hash":"71adaeaac1f3cc56e36c49d549b8d8a72235c9b9","modified":1577160919726},{"_id":"themes/landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1577160919726},{"_id":"themes/landscape/README.md","hash":"37fae88639ef60d63bd0de22314d7cc4c5d94b07","modified":1577160919727},{"_id":"themes/landscape/_config.yml","hash":"79ac6b9ed6a4de5a21ea53fc3f5a3de92e2475ff","modified":1577160919727},{"_id":"themes/landscape/.gitignore","hash":"58d26d4b5f2f94c2d02a4e4a448088e4a2527c77","modified":1577160919726},{"_id":"themes/landscape/package.json","hash":"544f21a0b2c7034998b36ae94dba6e3e0f39f228","modified":1577160919732},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1577159630439},{"_id":"themes/landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1577160919727},{"_id":"themes/landscape/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1577160919727},{"_id":"themes/landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1577160919727},{"_id":"themes/landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1577160919727},{"_id":"themes/landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1577160919727},{"_id":"themes/landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1577160919727},{"_id":"themes/landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1577160919728},{"_id":"themes/landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1577160919728},{"_id":"themes/landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1577160919728},{"_id":"themes/landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1577160919728},{"_id":"themes/landscape/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1577160919728},{"_id":"themes/landscape/scripts/fancybox.js","hash":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1577160919733},{"_id":"themes/landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1577160919728},{"_id":"themes/landscape/layout/layout.ejs","hash":"f155824ca6130080bb057fa3e868a743c69c4cf5","modified":1577160919732},{"_id":"themes/landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1577160919732},{"_id":"themes/landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1577160919732},{"_id":"themes/landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1577160919732},{"_id":"themes/landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1577160919731},{"_id":"themes/landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1577160919731},{"_id":"themes/landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1577160919731},{"_id":"themes/landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1577160919731},{"_id":"themes/landscape/layout/_widget/recent_posts.ejs","hash":"0d4f064733f8b9e45c0ce131fe4a689d570c883a","modified":1577160919731},{"_id":"themes/landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1577160919731},{"_id":"themes/landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1577160919731},{"_id":"themes/landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1577160919731},{"_id":"themes/landscape/layout/_partial/after-footer.ejs","hash":"d0d753d39038284d52b10e5075979cc97db9cd20","modified":1577160919728},{"_id":"themes/landscape/layout/_partial/archive.ejs","hash":"950ddd91db8718153b329b96dc14439ab8463ba5","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/article.ejs","hash":"c4c835615d96a950d51fa2c3b5d64d0596534fed","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/gauges-analytics.ejs","hash":"aad6312ac197d6c5aaf2104ac863d7eba46b772a","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/footer.ejs","hash":"93518893cf91287e797ebac543c560e2a63b8d0e","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/head.ejs","hash":"5abf77aec957d9445fc71a8310252f0013c84578","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/header.ejs","hash":"7e749050be126eadbc42decfbea75124ae430413","modified":1577160919729},{"_id":"themes/landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1577160919730},{"_id":"themes/landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1577160919733},{"_id":"themes/landscape/source/css/style.styl","hash":"a70d9c44dac348d742702f6ba87e5bb3084d65db","modified":1577160919750},{"_id":"themes/landscape/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1577160919751},{"_id":"themes/landscape/source/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1577160919757},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1577160919751},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1577160919752},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1577160919751},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1577160919754},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1577160919752},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1577160919752},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1577160919755},{"_id":"themes/landscape/source/css/_variables.styl","hash":"628e307579ea46b5928424313993f17b8d729e92","modified":1577160919737},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1577160919757},{"_id":"themes/landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1577160919730},{"_id":"themes/landscape/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1577160919730},{"_id":"themes/landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1577160919733},{"_id":"themes/landscape/source/css/_partial/article.styl","hash":"10685f8787a79f79c9a26c2f943253450c498e3e","modified":1577160919733},{"_id":"themes/landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1577160919733},{"_id":"themes/landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1577160919734},{"_id":"themes/landscape/source/css/_partial/header.styl","hash":"85ab11e082f4dd86dde72bed653d57ec5381f30c","modified":1577160919734},{"_id":"themes/landscape/source/css/_partial/highlight.styl","hash":"bf4e7be1968dad495b04e83c95eac14c4d0ad7c0","modified":1577160919735},{"_id":"themes/landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1577160919735},{"_id":"themes/landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1577160919735},{"_id":"themes/landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1577160919735},{"_id":"themes/landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1577160919735},{"_id":"themes/landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1577160919736},{"_id":"themes/landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1577160919737},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1577160919739},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1577160919740},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1577160919753},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1577160919753},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1577160919746},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1577160919753},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1577160919753},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1577160919754},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1577160919754},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1577160919745},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1577160919744},{"_id":"themes/landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1577160919750},{"_id":"public/2019/12/24/hello-world/index.html","hash":"fe0685d8397c8a18cd272b034decff57bb257809","modified":1577163273637},{"_id":"public/index.html","hash":"e0ca2e8d48c565c145ab855e08909d6d9c7dfbc8","modified":1582301853283},{"_id":"public/archives/index.html","hash":"45f820cbde6d3a9f26df8467c0a94a7a49b5e1ec","modified":1582301853283},{"_id":"public/archives/2019/index.html","hash":"0e47fbe862e94c188bb8cc696a5747b2630768e9","modified":1582298720532},{"_id":"public/archives/2019/12/index.html","hash":"6d62ea859d0332933ea09ad6f3bcd0f2b02452d2","modified":1582298720532},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1577163273637},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1577163273637},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1577163273637},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1577163273637},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1577163273637},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1577163273637},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1577163273637},{"_id":"public/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1577163273637},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1577163273637},{"_id":"public/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1577163273637},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1577163273637},{"_id":"public/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1577163273637},{"_id":"public/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1577163273637},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1577163273637},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1577163273637},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1577163273637},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1577163273637},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1577163273637},{"_id":"public/css/style.css","hash":"5f8dadd37d0052c557061018fe6f568f64fced9b","modified":1577163273637},{"_id":"public/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1577163273637},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1577163273637},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1577163273637},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1577163273637},{"_id":"source/.DS_Store","hash":"61e710ead872469fd4cda8f3cb87ee2a6158ca52","modified":1582298972207},{"_id":"source/_posts/.DS_Store","hash":"7a30ea39d58eae8685f381f73081d818bc39514c","modified":1582294261660},{"_id":"source/_posts/LoonyCoderBlog.md","hash":"1e6fb2c0e02d3749a6c586bd71a408dd79fec5af","modified":1577171599263},{"_id":"public/2019/12/24/LoonyCoderBlog/index.html","hash":"5ed753047678340ba9a98de7807ada96dee467c6","modified":1577174023888},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1577167056866},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1577167056866},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1577167056866},{"_id":"themes/next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1577167056866},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1577167056867},{"_id":"themes/next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1577167056867},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1577167056867},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1577167056867},{"_id":"themes/next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1577167056867},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1577167056867},{"_id":"themes/next/README.cn.md","hash":"263b74f1ac7c0f6f9424b8cced4b0b320ae61efc","modified":1577167056867},{"_id":"themes/next/_config.yml","hash":"010d2da51167dfa49a04c03d11b9561e3b9589f9","modified":1581579581967},{"_id":"themes/next/README.md","hash":"287c7e6b7a6ddf75d815dda0df8bd228e3f285c5","modified":1577167056867},{"_id":"themes/next/bower.json","hash":"0674f11d3d514e087a176da0e1d85c2286aa5fba","modified":1577167056868},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1577167056868},{"_id":"themes/next/package.json","hash":"036d3a1346203d2f1a3958024df7f74e7ac07bfe","modified":1577167056884},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1577167056866},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"50d48c47162817a3810a9d9ad51104e83947419a","modified":1577167056866},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1577167056866},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1577167056866},{"_id":"themes/next/languages/de.yml","hash":"057e7df11ddeb1c8c15a5d7c5ff29430d725ec6b","modified":1577167056868},{"_id":"themes/next/languages/fr-FR.yml","hash":"7e4eb7011b8feee641cfb11c6e73180b0ded1c0f","modified":1577167056868},{"_id":"themes/next/languages/en.yml","hash":"7e680d9bb8f3a3a9d1ba1c9d312b3d257183dded","modified":1577167056868},{"_id":"themes/next/languages/default.yml","hash":"44ef3f26917f467459326c2c8be2f73e4d947f35","modified":1577167056868},{"_id":"themes/next/languages/id.yml","hash":"b5de1ea66dd9ef54cac9a1440eaa4e3f5fc011f5","modified":1577167056869},{"_id":"themes/next/languages/it.yml","hash":"aa595f2bda029f73ef7bfa104b4c55c3f4e9fb4c","modified":1577167056869},{"_id":"themes/next/languages/ja.yml","hash":"3c76e16fd19b262864475faa6854b718bc08c4d8","modified":1577167056869},{"_id":"themes/next/languages/ko.yml","hash":"ea5b46056e73ebcee121d5551627af35cbffc900","modified":1577167056869},{"_id":"themes/next/languages/pt-BR.yml","hash":"b1694ae766ed90277bcc4daca4b1cfa19cdcb72b","modified":1577167056869},{"_id":"themes/next/languages/nl-NL.yml","hash":"edca4f3598857dbc3cbf19ed412213329b6edd47","modified":1577167056869},{"_id":"themes/next/languages/pt.yml","hash":"44b61f2d085b827b507909a0b8f8ce31c6ef5d04","modified":1577167056869},{"_id":"themes/next/languages/ru.yml","hash":"98ec6f0b7183282e11cffc7ff586ceb82400dd75","modified":1577167056869},{"_id":"themes/next/languages/vi.yml","hash":"fd08d3c8d2c62965a98ac420fdaf95e54c25d97c","modified":1577167056869},{"_id":"themes/next/languages/zh-Hans.yml","hash":"f9f0ba24ffaa0028245de3da9525958d6715281c","modified":1577253520909},{"_id":"themes/next/languages/zh-hk.yml","hash":"9396f41ae76e4fef99b257c93c7354e661f6e0fa","modified":1577167056869},{"_id":"themes/next/languages/zh-tw.yml","hash":"50b71abb3ecc0686f9739e179e2f829cd074ecd9","modified":1577167056870},{"_id":"themes/next/layout/_layout.swig","hash":"da0929166674ea637e0ad454f85ad0d7bac4aff2","modified":1577167056870},{"_id":"themes/next/layout/archive.swig","hash":"f0a8225feafd971419837cdb4bcfec98a4a59b2f","modified":1577167056878},{"_id":"themes/next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1577167056878},{"_id":"themes/next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1577167056878},{"_id":"themes/next/layout/page.swig","hash":"969caaee05bdea725e99016eb63d810893a73e99","modified":1577167056878},{"_id":"themes/next/scripts/merge-configs.js","hash":"81e86717ecfb775986b945d17f0a4ba27532ef07","modified":1577167056885},{"_id":"themes/next/layout/post.swig","hash":"b3589a8e46288a10d20e41c7a5985d2493725aec","modified":1577167056878},{"_id":"themes/next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1577167056878},{"_id":"themes/next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1577167056879},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1577167056886},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1577167056940},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1577167056940},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1577167056940},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056905},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1577167056870},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1577167056870},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1577167056870},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"665a928604f99d2ba7dc4a4a9150178229568cc6","modified":1577167056870},{"_id":"themes/next/layout/_macro/reward.swig","hash":"56e8d8556cf474c56ae1bef9cb7bbd26554adb07","modified":1577167056871},{"_id":"themes/next/layout/_macro/post.swig","hash":"b152ca6819b5ab126e39ba0d087638206cec8ec4","modified":1578128920555},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"39852700e4084ecccffa6d4669168e5cc0514c9e","modified":1577167056871},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"6a54c3c85ff6b19d275827a327abbf4bd99b2ebf","modified":1577167056871},{"_id":"themes/next/layout/_partials/comments.swig","hash":"4a6f5b1792b2e5262b7fdab9a716b3108e2f09c7","modified":1577167056871},{"_id":"themes/next/layout/_partials/footer.swig","hash":"2b1aedc521b7cc12bf7a76a6cacfef781f453e3d","modified":1578046000214},{"_id":"themes/next/layout/_partials/head.swig","hash":"6b94fe8f3279daea5623c49ef4bb35917ba57510","modified":1577167056871},{"_id":"themes/next/layout/_partials/header.swig","hash":"ed042be6252848058c90109236ec988e392d91d4","modified":1577167056872},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1577167056872},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"98df9cd472f255a283e2c72002a4a4f4dc84eafc","modified":1581576098862},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1577167056872},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1577167056873},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1577167056873},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"a266f96ad06ee87bdeae6e105a4b53cd587bbd04","modified":1577167056874},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1577167056876},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1577167056876},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1577167056876},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1577167056877},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"5fe0447cc88a5a63b530cf0426f93c4634811876","modified":1577167056877},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1577167056877},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1577167056877},{"_id":"themes/next/scripts/tags/button.js","hash":"d023f10a00077f47082b0517e2ad666e6e994f60","modified":1577167056886},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1577167056886},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1577167056887},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1577167056887},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1577167056887},{"_id":"themes/next/scripts/tags/label.js","hash":"2f8f41a7316372f0d1ed6b51190dc4acd3e16fff","modified":1577167056887},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"eeeabede68cf263de9e6593ecf682f620da16f0a","modified":1577167056888},{"_id":"themes/next/scripts/tags/note.js","hash":"64de4e9d01cf3b491ffc7d53afdf148ee5ad9779","modified":1577167056888},{"_id":"themes/next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1577167056888},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1577167056905},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1577167056905},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1577167056905},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1577167056905},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1577167056905},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1577167056905},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1577167056906},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1577167056906},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1577167056906},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1577167056906},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1577167056907},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1577167056906},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1577167056907},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1577167056907},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1577167056908},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1577167056908},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1577167056908},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1577167056908},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1577167056909},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1576588786000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1576588786000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056899},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056900},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056900},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056904},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577167056905},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1577167056872},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1577167056872},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1577167056872},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1577167056872},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1577167056872},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1577167056872},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1577167056872},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1577167056873},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1577167056873},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1577167056873},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1576588786000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1576588786000},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1577167056874},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1577167056874},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1577167056874},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"b04e4670b8744ba540b7b64fec0bcc3a88a67f24","modified":1581576185282},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1577167056874},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1577167056874},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"1cd01c6e92ab1913d48e556a92bb4f28b6dc4996","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"fc65b9c98a0a8ab43a5e7aabff6c5f03838e09c8","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1577167056875},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1577167056875},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1577167056875},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1577167056875},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"10160daceaa6f1ecf632323d422ebe2caae49ddf","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"aa0629277d751c55c6d973e7691bf84af9b17a60","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"8a2e393d2e49f7bf560766d8a07cd461bf3fce4f","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"fcabbb241f894c9a6309c44e126cf3e8fea81fd4","modified":1577167056876},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"8b6650f77fe0a824c8075b2659e0403e0c78a705","modified":1577167056876},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1577167056877},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"385c066af96bee30be2459dbec8aae1f15d382f5","modified":1577167056878},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1577167056878},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1577167056878},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"0f1cd21d5770e75518da48140a376e39e9ca6a97","modified":1578045222236},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"82f9055955920ed88a2ab6a20ab02169abb2c634","modified":1577167056900},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1577167056899},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"9ab65361ba0a12a986edd103e56492644c2db0b8","modified":1577167056900},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"0f45c255ae5408d29f1dcb61a52db8185133390f","modified":1581576682151},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1577167056904},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"f29165e36489a87ba32d17dddfd2720d84e3f3ec","modified":1577167056904},{"_id":"themes/next/source/css/_variables/base.styl","hash":"29c261fa6b4046322559074d75239c6b272fb8a3","modified":1577167056904},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1577167056909},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1577167056909},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1577167056909},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1577167056909},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1577167056910},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1577167056910},{"_id":"themes/next/source/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1577167056910},{"_id":"themes/next/source/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1577167056910},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1577167056911},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1577167056912},{"_id":"themes/next/source/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1577167056912},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1577167056917},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1577167056918},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1577167056918},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1577167056915},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1577167056918},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1577167056921},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1577167056921},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1577167056921},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1577167056922},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1577167056922},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1577167056922},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1577167056922},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1577167056922},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1577167056921},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1577167056931},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1577167056931},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1577167056931},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1577167056932},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1577167056932},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1577167056932},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1577167056932},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1577167056933},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1577167056932},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1577167056933},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1577167056933},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1577167056934},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1577167056934},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1577167056935},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1577167056935},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1577167056935},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1577167056938},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1577167056939},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1577167056938},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1577167056939},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1577167056939},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1577167056931},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1577167056877},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1577167056877},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1577167056896},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1577167056898},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"f7c44b0ee46cf2cf82a4c9455ba8d8b55299976f","modified":1577167056899},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1577167056899},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1577167056899},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1577167056899},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1577167056899},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1577167056899},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"18c3336ee3d09bd2da6a876e1336539f03d5a973","modified":1577167056900},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1577167056900},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1577167056900},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1577167056900},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1577167056900},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"3cf08d36232790e0470c9411c93eb1a1b1bd47ac","modified":1577174013887},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4aac01962520d60b03b23022ab601ad4bd19c08c","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9d16fa3c14ed76b71229f022b63a02fd0f580958","modified":1577167056902},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1577167056902},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1577167056911},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1577167056914},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1577167056913},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1577167056914},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1577167056918},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1577167056918},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1577167056918},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1577167056918},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1577167056920},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1577167056920},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1577167056920},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1577167056921},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1577167056921},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1577167056922},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1577167056923},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1577167056923},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1577167056937},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1577167056938},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1577167056914},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1577167056931},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1577167056939},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"7905a7f625702b45645d8be1268cb8af3f698c70","modified":1577167056889},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1577167056890},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1577167056890},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1577167056890},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1577167056890},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1577167056890},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1577167056891},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"25dc25f61a232f03ca72472b7852f882448ec185","modified":1577167056891},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1577167056891},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1577167056891},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1577167056891},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1577167056892},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"535b3b4f8cb1eec2558e094320e7dfb01f94c0e7","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"aea21141015ca8c409d8b33e3e34ec505f464e93","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1577167056893},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"d5a4e4fc17f1f7e7c3a61b52d8e2e9677e139de7","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"262debfd4442fa03d9919ceb88b948339df03fb0","modified":1577167056894},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"0a6c0efffdf18bddbc1d1238feaed282b09cd0fe","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"12937cae17c96c74d5c58db6cb29de3b2dfa14a2","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1577167056895},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"50305b6ad7d09d2ffa4854e39f41ec1f4fe984fd","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"37e951e734a252fe8a81f452b963df2ba90bfe90","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1577167056896},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1577167056897},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1577167056898},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1ccfbd4d0f5754b2dc2719a91245c95f547a7652","modified":1577167056898},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1577167056901},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1577167056902},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1577167056912},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1577167056912},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1577167056913},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1577167056913},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1577167056913},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1577167056919},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1577167056919},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1577167056925},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1577167056929},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1577167056930},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1577167056926},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1577167056917},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1577167056937},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1577167056928},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1577167173083},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1577167173083},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1577167173083},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1577167173083},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1577167173083},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1577167173083},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1577167173083},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1577167173083},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1577167173083},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1577167173083},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1577167173083},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1577167173083},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1577167173083},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1577167173083},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1577167173083},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1577167173083},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1577167173083},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1577167173083},{"_id":"public/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1577167173083},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1577167173083},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1577167173083},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1577167173083},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1577167173083},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1577167173083},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1577167173083},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1577167173083},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1577167173083},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1577167173083},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1577167173083},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1577167173083},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1577167173083},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1577167173083},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1577167173083},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1577167173083},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1577167173083},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1577167173083},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1577167173083},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1577167173083},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1577167173083},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1577167173083},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1577167173083},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1577167173083},{"_id":"public/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1577167173083},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1577167173083},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1577167173083},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1577167173083},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1577167173083},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1577167173083},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1577167173083},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1577167173083},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1577167173083},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1577167173083},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1577167173083},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1577167173083},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1577167173083},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1577167173083},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1577167173083},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1577167173083},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1577167173083},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1577167173083},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1577167173083},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1577167173083},{"_id":"public/lib/fastclick/README.html","hash":"b9e008af0866799103e596e2eda466a33d7dde18","modified":1577167173083},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"7eecc5e472416b9870580c53b7ed0c44474ed23a","modified":1577167173083},{"_id":"public/lib/jquery_lazyload/README.html","hash":"9c91bba4263a20004f2c10772d438cfa8312c308","modified":1577167173083},{"_id":"public/css/main.css","hash":"19b5e6767722577f889817bb048290cc989afe79","modified":1577167173083},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1577167173083},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1577167173083},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1577167173083},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1577167173083},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1577167173083},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1577167173083},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1577167173083},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1577167173083},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1577167173083},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1577167173083},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1577167173083},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1577167173083},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1577167173083},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1577167173083},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1577167173083},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1577167173083},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1577167173083},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1577167173083},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1577167173083},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1577167173083},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1577167173083},{"_id":"themes/next/.DS_Store","hash":"b7a93e5611c08730dac24fade174540958a9f6b8","modified":1581578250108},{"_id":"source/_posts/index.md","hash":"60369bd241e1e4d7538ae59b7f2bb3393b01c221","modified":1577175558143},{"_id":"themes/next/layout/.DS_Store","hash":"e3bfccf18081b9012fcc260f4e84735de2bed7ce","modified":1581576649168},{"_id":"themes/next/source/.DS_Store","hash":"ab3c2e7949b01cfa5bcca6daea440fc4016e3353","modified":1581578102861},{"_id":"public/2019/12/24/index/index.html","hash":"030e229432d4489fb3148489767b0f4c29f651da","modified":1577241719248},{"_id":"themes/next/layout/_scripts/.DS_Store","hash":"137b2b33df29f70c89991676eaa273572ab43828","modified":1578043972986},{"_id":"themes/next/source/css/.DS_Store","hash":"39d63c562f5530101d1c86cec448002f3df1732f","modified":1581578244985},{"_id":"themes/next/source/css/_schemes/.DS_Store","hash":"69cb863623e9e0a400e75e37175cd1b0877e4fea","modified":1577174282939},{"_id":"themes/next/source/css/_schemes/Muse/.DS_Store","hash":"d16a403c0d7ebc16e6589ed78ab6d7498c11a43a","modified":1577173807827},{"_id":"themes/next/source/css/_schemes/Mist/.DS_Store","hash":"94694524b02635304624ed506d64ebd71164a579","modified":1577174270266},{"_id":"source/_posts/blog.md","hash":"5c3da39ac9ec83c68f1fd5fc97d489d990c29267","modified":1577244811687},{"_id":"public/2019/12/24/blog/index.html","hash":"ed81b862596a9cf18eb9a7217d9d634e2dad7df0","modified":1577245069818},{"_id":"source/_posts/about/index.md","hash":"60369bd241e1e4d7538ae59b7f2bb3393b01c221","modified":1577175558143},{"_id":"public/2019/12/24/about/index/index.html","hash":"32afe66b9fbd3d50dc08d03b0bf8396d3e771ae5","modified":1577240791418},{"_id":"source/_posts/index/.DS_Store","hash":"881857a47ee12476811d89432479c1c00026259b","modified":1577240778444},{"_id":"source/_posts/about/.DS_Store","hash":"a906525de297e8b40766c156e6b9aa874c5ffa79","modified":1577240720589},{"_id":"source/_posts/index/blog.md","hash":"1e6fb2c0e02d3749a6c586bd71a408dd79fec5af","modified":1577171599263},{"_id":"public/2019/12/24/index/blog/index.html","hash":"ae813f568fa15d241af673259655e92ac1f80abf","modified":1577240791418},{"_id":"source/about/.DS_Store","hash":"a906525de297e8b40766c156e6b9aa874c5ffa79","modified":1577240720589},{"_id":"source/about/index.md","hash":"7c8f8a890993c88e11e336e10348d441116c8825","modified":1581600138748},{"_id":"source/index/blog.md","hash":"1e6fb2c0e02d3749a6c586bd71a408dd79fec5af","modified":1577171599263},{"_id":"source/index/.DS_Store","hash":"881857a47ee12476811d89432479c1c00026259b","modified":1577240778444},{"_id":"public/about/index.html","hash":"82c6ff5db052468d469109ddacc755ea326ff63f","modified":1582301853283},{"_id":"public/index/blog.html","hash":"e0b6b86369ef918de7646677b79c581472587e4e","modified":1577241719248},{"_id":"source/_posts/blog2_index.md","hash":"9d106aff94c2d00bec0ef9950fa2af3e0741b4d3","modified":1577708611886},{"_id":"source/_posts/blog_index.md","hash":"54b0172c2f9f3082b5a964763f19c793db7158a8","modified":1577708430769},{"_id":"public/2019/12/24/blog2_index/index.html","hash":"1f387df7d54add3b6fd00e120c88a663f051f91a","modified":1577708365996},{"_id":"public/2019/12/24/blog_index/index.html","hash":"63518d0c447fd5867e1c9a298b10aebd951412d9","modified":1577708544285},{"_id":"source/categories/blog_index.md","hash":"32a651c3bfd5a3de19ed2eaf79dcc97501e8fbfc","modified":1577246083571},{"_id":"source/categories/index.md","hash":"e9e615282832f88d8f4750494baa0cb0e8b3e023","modified":1577254032125},{"_id":"source/tags/index.md","hash":"10386ed21a0554d390c73e5425d86f146fe2bd24","modified":1577254440531},{"_id":"source/tags/blog_index.md","hash":"32a651c3bfd5a3de19ed2eaf79dcc97501e8fbfc","modified":1577246083571},{"_id":"source/tags/.DS_Store","hash":"45673a8ec47535550c1655fb6f129816c4bf94f9","modified":1577249074694},{"_id":"public/categories/index.html","hash":"4488ba14c740792884ca97987dbfb2b651db97bb","modified":1582301853283},{"_id":"public/tags/index.html","hash":"10de469c6bc3e31e702b2abe087d2720e892899c","modified":1582301853283},{"_id":"public/categories/blog_index.html","hash":"a056fa3f12b722544d4709394a472d4347b11917","modified":1577249095275},{"_id":"public/tags/blog_index.html","hash":"fa3e16b1b2b1e62349ae8a62d355cea981b052d7","modified":1577249095275},{"_id":"source/categories/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1577249180368},{"_id":"public/2019/12/25/blog2_index/index.html","hash":"c7964eb2cfdf2301490ee0b895aa916d32e59c3d","modified":1577708634354},{"_id":"public/categories/web/index.html","hash":"768ec1fce19d3b7f29c8a1e0b6deef7b9f6758cc","modified":1577708544285},{"_id":"public/tags/web/index.html","hash":"59382b7e3b8024fd075f0d40d6f9797ccc1d2880","modified":1577708544285},{"_id":"public/tags/hexo/index.html","hash":"10359e7e25fdd5bfca532b64cb44c6dd7215b1d0","modified":1577708544285},{"_id":"public/tags/github/index.html","hash":"671dd3a4c4f1a78d06255c22704193294417527a","modified":1577708544285},{"_id":"source/images/author.jpg","hash":"bf13ddca01c2e6aec062848c81aa256f3a45c8b9","modified":1577255793277},{"_id":"public/images/author.jpg","hash":"bf13ddca01c2e6aec062848c81aa256f3a45c8b9","modified":1577256016811},{"_id":"source/_posts/JavaBasic.md","hash":"f4dc36d6c4182994f6611c6ede208ad3c9e70b5e","modified":1578128942196},{"_id":"source/images/20180127210359151.png","hash":"b328ce766e5d959221b06df896ae2d2559e961ac","modified":1577705348278},{"_id":"public/categories/Java/index.html","hash":"b862afe98da33f4ece1a9951215b8d84af7799a2","modified":1582301853283},{"_id":"public/tags/Java/index.html","hash":"4a93db0bf17fd687c1262a267e53c63c481b71b1","modified":1582301853283},{"_id":"public/tags/Java/index.html","hash":"7dd097b36fd501a6726886ede1bb8b6b00dcad6b","modified":1582301853283},{"_id":"public/2019/12/24/JavaBasic/index.html","hash":"42ee62862d01d5f919dec985218139126b9c76d6","modified":1577708365996},{"_id":"public/images/20180127210359151.png","hash":"b328ce766e5d959221b06df896ae2d2559e961ac","modified":1577708123240},{"_id":"public/2019/12/30/JavaBasic/index.html","hash":"b47d528b358968ded923935e4703cb11ff88ee92","modified":1578302681339},{"_id":"source/_posts/MybatisDemo.md","hash":"e6298ebbeb94aae8b9998257dbd40eed430b96e7","modified":1581434142281},{"_id":"source/images/2.png","hash":"813b2e528a9395cdd427da48a5ce2a0d3b830a6c","modified":1578041694100},{"_id":"source/images/3.png","hash":"2aa599677842864f1c5d006393a7cd8bb44ea174","modified":1578041708744},{"_id":"source/images/1.png","hash":"dbaa036550e513533d58e64467adb126c6875146","modified":1578041671922},{"_id":"source/images/test.png","hash":"2b4606ba3e36b0bb37dd46cdaf830fb48d43c217","modified":1578043236266},{"_id":"source/images/mapperxml.png","hash":"9db12bf3362ac599f886a4979465ab915f8b6c9f","modified":1578042997488},{"_id":"source/images/table.png","hash":"0a08748bb13db763c5977ea378124155c0d1cbd2","modified":1581433608572},{"_id":"public/categories/Java//index.html","hash":"1bcd1eb80f2d91fbf0b3ebdc54516fe2b5d9475b","modified":1578646612232},{"_id":"public/archives/2019/01/index.html","hash":"67314309aa737b5cb8e99bfd720ddf2fe8e21f14","modified":1581487497219},{"_id":"public/tags/Java/index.html","hash":"4cf5e20ca0d97c0ddf458dd3e26d980083f4f460","modified":1578646612232},{"_id":"public/2019/01/03/MybatisDemo/index.html","hash":"76d6da589a0dbbef61d4af5a680d18fbed98fb02","modified":1578043544355},{"_id":"public/images/2.png","hash":"813b2e528a9395cdd427da48a5ce2a0d3b830a6c","modified":1578043544355},{"_id":"public/images/test.png","hash":"2b4606ba3e36b0bb37dd46cdaf830fb48d43c217","modified":1578043544355},{"_id":"public/images/mapperxml.png","hash":"9db12bf3362ac599f886a4979465ab915f8b6c9f","modified":1578043544355},{"_id":"public/images/3.png","hash":"2aa599677842864f1c5d006393a7cd8bb44ea174","modified":1578043544355},{"_id":"public/images/1.png","hash":"dbaa036550e513533d58e64467adb126c6875146","modified":1578043544355},{"_id":"public/images/table.png","hash":"0a08748bb13db763c5977ea378124155c0d1cbd2","modified":1581434175858},{"_id":"public/archives/2020/01/index.html","hash":"50fd8e822f455d9d6f59b3cc4b3b7ae4611fed1d","modified":1582298720532},{"_id":"public/archives/2020/index.html","hash":"15b1ac172b65be1a01795115518ff0b999822949","modified":1582301853283},{"_id":"public/2020/01/03/MybatisDemo/index.html","hash":"a52f349498b81f5fe11d9a00a0e35d91d66a687b","modified":1578648180090},{"_id":"themes/next/scripts/.DS_Store","hash":"c23e8992957e272a90ddbb470965ec82706443ce","modified":1578128439635},{"_id":"source/_posts/Vue.md","hash":"4ad58e87405952e98044994fb1323e14c7fc0b83","modified":1581443755928},{"_id":"source/images/vue2.png","hash":"243d7ccf2b2a0162218d269f2ae5c9a0ba7a0229","modified":1578278602307},{"_id":"source/images/vue5.png","hash":"c83cb6f0dac95e114a5b2707452ace8ea4ff034e","modified":1578278922750},{"_id":"source/images/vue6.png","hash":"7f16bda0e86a7497ad8cf8b151061f4a0e83bbac","modified":1578279674830},{"_id":"source/images/vue3.png","hash":"0891de9363a546dd806f5e5fe837d3082a27565b","modified":1578278655753},{"_id":"source/images/vue4.png","hash":"1f7e4ea318bc779b25bf441aef2d7f257f4363cb","modified":1578278769965},{"_id":"source/images/vue1.png","hash":"3f8b94381119e0e93753bae326c2eb500f2333a0","modified":1578278367933},{"_id":"public/2020/01/06/Vue/index.html","hash":"2e4321bd11ffbaea70e95a010aa6609ecb6e5e1b","modified":1581435690061},{"_id":"public/tags//index.html","hash":"1cfca5451be01cdeae642555c1ec8a97890495cc","modified":1582301853283},{"_id":"public/categories/Web/index.html","hash":"eef709f454600beec09f6cf7af9b71b1f7859c09","modified":1582301853283},{"_id":"public/images/vue2.png","hash":"243d7ccf2b2a0162218d269f2ae5c9a0ba7a0229","modified":1578281381124},{"_id":"public/images/vue5.png","hash":"c83cb6f0dac95e114a5b2707452ace8ea4ff034e","modified":1578281381124},{"_id":"public/images/vue6.png","hash":"7f16bda0e86a7497ad8cf8b151061f4a0e83bbac","modified":1578281381124},{"_id":"public/images/vue3.png","hash":"0891de9363a546dd806f5e5fe837d3082a27565b","modified":1578281381124},{"_id":"public/images/vue4.png","hash":"1f7e4ea318bc779b25bf441aef2d7f257f4363cb","modified":1578281381124},{"_id":"public/images/vue1.png","hash":"3f8b94381119e0e93753bae326c2eb500f2333a0","modified":1578281381124},{"_id":"source/_posts/JavaBasic2.md","hash":"61c6e45ed40a8baecb03a3206efe677fc444f2de","modified":1582298880037},{"_id":"source/images/String1.png","hash":"afc6a1eaabbf745686d9da1572fd7bbb842dcb70","modified":1578303346593},{"_id":"source/images/DomaticBind.png","hash":"cd7fbcd97376eafbb224edcadb690799f45c645c","modified":1578304386792},{"_id":"source/images/stack.png","hash":"44730d0212fada434d90c74a9d91a9e8f882962b","modified":1578303662507},{"_id":"source/_posts/JavaBasic1.md","hash":"801efee8d39b7c3f544406d8651b872b32e9c56b","modified":1582298864892},{"_id":"public/2019/12/30/JavaBasic2/index.html","hash":"85330ece2c7bd225e38bbc44b6c823b65182b404","modified":1581435690061},{"_id":"public/2019/12/30/JavaBasic1/index.html","hash":"9542f17606256f4979131622e275d9071e12b96a","modified":1581435690061},{"_id":"public/images/String1.png","hash":"afc6a1eaabbf745686d9da1572fd7bbb842dcb70","modified":1578304725057},{"_id":"public/images/DomaticBind.png","hash":"cd7fbcd97376eafbb224edcadb690799f45c645c","modified":1578304725057},{"_id":"public/images/stack.png","hash":"44730d0212fada434d90c74a9d91a9e8f882962b","modified":1578304725057},{"_id":"source/_posts/Shiro.md","hash":"72b14a970d8fdd7b543a9acf6c314c97e17961a0","modified":1582299034320},{"_id":"source/images/shiro2.png","hash":"4f6181f77ddcb81619083bf96f57e85d80b39977","modified":1578646168070},{"_id":"source/images/WechatIMG11.jpeg","hash":"12b419a93c81473f9dcdbb23fdd68603d3e88656","modified":1578558608032},{"_id":"source/images/shiro1.png","hash":"5dcb3a6002f3005145da796cd6926a14f0358187","modified":1578646110972},{"_id":"source/images/1578470657291.jpg","hash":"333c926024e652c8a218b23c6035d85d48b1687d","modified":1578470681205},{"_id":"public/categories/Java/index.html","hash":"ad0ebce81d1e6facac1bc5c9d91ea1d1cb9eb110","modified":1582301853283},{"_id":"public/tags//index.html","hash":"c506afb32b47d6e8b22c46056e9bead7fdf506cb","modified":1582301853283},{"_id":"public/tags//index.html","hash":"08bf459396a2bc40bd9d1f2a052413dae8d2c126","modified":1582301853283},{"_id":"public/2020/01/10/Shiro/index.html","hash":"8ef2daf9a9afd3a93ae37f55cdff5675112b13b0","modified":1581435690061},{"_id":"public/images/shiro1.png","hash":"5dcb3a6002f3005145da796cd6926a14f0358187","modified":1578646612232},{"_id":"public/images/shiro2.png","hash":"4f6181f77ddcb81619083bf96f57e85d80b39977","modified":1578646612232},{"_id":"public/images/WechatIMG11.jpeg","hash":"12b419a93c81473f9dcdbb23fdd68603d3e88656","modified":1578646612232},{"_id":"public/images/1578470657291.jpg","hash":"333c926024e652c8a218b23c6035d85d48b1687d","modified":1578646612232},{"_id":"public/tags/Java-/index.html","hash":"38af5a1a59434b2cda7b28f853ba418b84b142f0","modified":1582301853283},{"_id":"source/images/testResult.png","hash":"051a44fb9aa93e5eb79b32057dc404dd47d6b1c0","modified":1581434083929},{"_id":"public/categories/Mybatis/index.html","hash":"622baf3e7aa2d5f84421acd342050493547742f9","modified":1582301853283},{"_id":"public/archives/2018/index.html","hash":"e1bd64af847644ee3ede6b6f2ed8116ab1ddedf6","modified":1582301853283},{"_id":"public/archives/2018/10/index.html","hash":"beff58032dc689460054fbcc6065b6cfe9e15c68","modified":1582301853283},{"_id":"public/2018/10/14/MybatisDemo/index.html","hash":"ee0e8338b7627610e08ecf63d5fed7b48cc8e7b7","modified":1581434175858},{"_id":"public/images/testResult.png","hash":"051a44fb9aa93e5eb79b32057dc404dd47d6b1c0","modified":1581434175858},{"_id":"source/_posts/Mybatis-1.md","hash":"18682fea679bc40eed9144655a589adf2ec74572","modified":1582299046063},{"_id":"public/2018/10/14/Mybatis-1/index.html","hash":"8e25aed61cc498b681d1317523f03dc1837cfb01","modified":1581435690061},{"_id":"public/archives/2019/03/index.html","hash":"ec5aba8361d67ca13cb49a165c0a86fb84d32769","modified":1581487497219},{"_id":"public/archives/2019/05/index.html","hash":"7926e46e1b7b8d079c673e819973075c6a66f5fb","modified":1581487497219},{"_id":"public/2019/05/11/Shiro/index.html","hash":"e0122bbc0809ee930f736b71484b28532a46bcc0","modified":1581487497219},{"_id":"public/2019/03/01/Vue/index.html","hash":"22680c5e5fa394381d13a7be59820be06961e2de","modified":1581443778783},{"_id":"public/2019/01/21/Mybatis-1/index.html","hash":"8a62a5311057dbabdd2d6e38ac596504b72e4030","modified":1581487497219},{"_id":"public/2019/01/14/JavaBasic2/index.html","hash":"1879496b52e2e9f259e137c93869265b7b29fb4d","modified":1581487497219},{"_id":"public/2019/01/10/JavaBasic1/index.html","hash":"a0888f451c57f704490299c93f5cca0c48fde578","modified":1581487497219},{"_id":"source/_posts/Vue1.md","hash":"c4963a5e65769895591df5d0563e11d1a4ec0f70","modified":1582298895936},{"_id":"source/_posts/Vue2.md","hash":"b12790ad0a7d48ea224f6430a3ae06ef309e4245","modified":1582298925145},{"_id":"source/images/vue12.png","hash":"c8e384250b702b349e88c87607d2f37863b93d88","modified":1581445663420},{"_id":"source/images/vue10.png","hash":"959a24b034047afbb9e3bedfaa61bb834cb3e293","modified":1581445616834},{"_id":"source/images/vue13.png","hash":"ae29ca656a3450f70ae96f806df23efa9a7b7ad7","modified":1581445712424},{"_id":"source/images/vue14.png","hash":"53345be1363e09b3e43e34d27c030c4f376b060a","modified":1581445747924},{"_id":"source/images/vue8.png","hash":"a5dd7b68dd393143acedbfab8198a731b16490c5","modified":1581445514204},{"_id":"source/images/vue11.png","hash":"a02aac351c4547ec35ce456b4aa5268039ec0847","modified":1581445657708},{"_id":"source/images/vue7.png","hash":"7c8e016f4d64ab9982bd0fbe6876c9930ff69fe4","modified":1581445506029},{"_id":"source/images/vue9.png","hash":"10e13fa4ec6044c65691a4368fb88eaa018cf8f0","modified":1581445610061},{"_id":"public/2019/03/01/Vue1/index.html","hash":"4cd545eb9e75b4fede534798f8f0646dda89b649","modified":1581487497219},{"_id":"public/2019/03/01/Vue2/index.html","hash":"12f46689d14ea61762a7552b759df33017a2ee9d","modified":1581485987660},{"_id":"public/images/vue10.png","hash":"959a24b034047afbb9e3bedfaa61bb834cb3e293","modified":1581446624472},{"_id":"public/images/vue12.png","hash":"c8e384250b702b349e88c87607d2f37863b93d88","modified":1581446624472},{"_id":"public/images/vue13.png","hash":"ae29ca656a3450f70ae96f806df23efa9a7b7ad7","modified":1581446624472},{"_id":"public/images/vue8.png","hash":"a5dd7b68dd393143acedbfab8198a731b16490c5","modified":1581446624472},{"_id":"public/images/vue7.png","hash":"7c8e016f4d64ab9982bd0fbe6876c9930ff69fe4","modified":1581446624472},{"_id":"public/images/vue14.png","hash":"53345be1363e09b3e43e34d27c030c4f376b060a","modified":1581446624472},{"_id":"public/images/vue11.png","hash":"a02aac351c4547ec35ce456b4aa5268039ec0847","modified":1581446624472},{"_id":"public/images/vue9.png","hash":"10e13fa4ec6044c65691a4368fb88eaa018cf8f0","modified":1581446624472},{"_id":"source/_posts/Vue3.md","hash":"2ef95ef816748aa2f7f4444880f8600d54415dbc","modified":1582298936290},{"_id":"public/2019/03/02/Vue3/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1581485987660},{"_id":"source/_posts/Vue4.md","hash":"d20d7725a56290894bea991a094d98769b885f6d","modified":1582298953307},{"_id":"public/2019/03/04/Vue4/index.html","hash":"7e5bd3ca68a7cd66948ab65731a5f10c47f5e98e","modified":1581487497219},{"_id":"public/2019/03/02/Vue2/index.html","hash":"e46619a1ad1e56fa89cfca8276e0c2ef61b07acc","modified":1581487497219},{"_id":"source/images/vue18.png","hash":"a3230a1e0c1d945d96f132356b66b042342dce47","modified":1581487273706},{"_id":"source/images/vue20.png","hash":"794fc3e74e23a5b18bd3c19a9347d2f699798a05","modified":1581487433952},{"_id":"source/images/vue15.png","hash":"79ff3d090e6b1bb59a49dcf486655fb8ac69e704","modified":1581486670116},{"_id":"source/images/vue17.png","hash":"9d0b9d78d7a427499e03f847034942c5e2e53ead","modified":1581487119308},{"_id":"source/images/vue16.png","hash":"440b1133fee7a0d9d426531a5c1ce04688bf79bd","modified":1581487107038},{"_id":"source/images/vue19.png","hash":"29fb226b32c2c6556725a708caadec480ad5e796","modified":1581487426786},{"_id":"public/2019/03/03/Vue3/index.html","hash":"38f257be784d869a84b442b1d5a4be28cf6b5037","modified":1581487714100},{"_id":"public/images/vue20.png","hash":"794fc3e74e23a5b18bd3c19a9347d2f699798a05","modified":1581487497219},{"_id":"public/images/vue18.png","hash":"a3230a1e0c1d945d96f132356b66b042342dce47","modified":1581487497219},{"_id":"public/images/vue15.png","hash":"79ff3d090e6b1bb59a49dcf486655fb8ac69e704","modified":1581487497219},{"_id":"public/images/vue16.png","hash":"440b1133fee7a0d9d426531a5c1ce04688bf79bd","modified":1581487497219},{"_id":"public/images/vue19.png","hash":"29fb226b32c2c6556725a708caadec480ad5e796","modified":1581487497219},{"_id":"public/images/vue17.png","hash":"9d0b9d78d7a427499e03f847034942c5e2e53ead","modified":1581487497219},{"_id":"source/_posts/Mybatis-2.md","hash":"38c6167821bb280cc86ad9dd2a22b32e65f3d098","modified":1582299059665},{"_id":"source/images/execAfter.png","hash":"3278e77d428c21a8d1756a484e27ff2b9f3a69ac","modified":1581509836269},{"_id":"source/images/execBefore.png","hash":"8bcd5183e9d05152ef6cb9ae8b145f0213297d76","modified":1581509784635},{"_id":"source/images/execAfter1.png","hash":"143420e95e363e944b40b011738903624f37d15c","modified":1581510250389},{"_id":"source/images/execResult2.png","hash":"cd74a1f0dba76be0c09caf36f957411c73f72e05","modified":1581509355875},{"_id":"source/images/execResult1.png","hash":"152abfa8b8106a1f96b5ac5e1ed504f09172ed19","modified":1581508509836},{"_id":"public/archives/2019/11/index.html","hash":"395fac95bf2923379fdbd2b6cd4c18c9710b68e5","modified":1582298720532},{"_id":"public/2020/01/03/Mybatis-1/index.html","hash":"2a47e6415510a1692ff760bb239c63bdf059a350","modified":1582298720532},{"_id":"public/2020/01/06/Mybatis-2/index.html","hash":"fa01379e5121666a7734c70debcdeb8f91ec013f","modified":1582298720532},{"_id":"public/2019/12/12/Vue4/index.html","hash":"ad13cbd627bb1560fb736154d415005ad9bcc197","modified":1582298720532},{"_id":"public/2019/12/12/Vue3/index.html","hash":"5360807472ba756a699783ed2e7eb9d495e92616","modified":1582298720532},{"_id":"public/2019/12/10/Vue2/index.html","hash":"dd183e4a08c324c830e19f0301688575e228bbf2","modified":1582298720532},{"_id":"public/2019/11/30/Vue1/index.html","hash":"bb9b0d2b7fed61077fff324c6420e19895dd4a8d","modified":1582298720532},{"_id":"public/2019/11/19/Shiro/index.html","hash":"b7511a899ec3820f637a70c401b0b27fbdb8ec46","modified":1582298720532},{"_id":"public/2019/11/14/JavaBasic1/index.html","hash":"997fe9b636e63a47268c97a37f0802bcacae093b","modified":1582298720532},{"_id":"public/2019/11/16/JavaBasic2/index.html","hash":"70b3e3ae9d4721a5c326008d176b416410f57526","modified":1582298720532},{"_id":"public/images/execAfter.png","hash":"3278e77d428c21a8d1756a484e27ff2b9f3a69ac","modified":1581510277165},{"_id":"public/images/execResult2.png","hash":"cd74a1f0dba76be0c09caf36f957411c73f72e05","modified":1581510277165},{"_id":"public/images/execAfter1.png","hash":"143420e95e363e944b40b011738903624f37d15c","modified":1581510277165},{"_id":"public/images/execBefore.png","hash":"8bcd5183e9d05152ef6cb9ae8b145f0213297d76","modified":1581510277165},{"_id":"public/images/execResult1.png","hash":"152abfa8b8106a1f96b5ac5e1ed504f09172ed19","modified":1581510277165},{"_id":"source/_posts/Mybatis-3.md","hash":"5f469299e43e37ebdcdd2f94359b620b54a2400e","modified":1582299074115},{"_id":"source/images/mybatis1.png","hash":"9a838351c61a62fe8132028bdfd29f6b275ab109","modified":1581530502928},{"_id":"public/2020/01/07/Mybatis-3/index.html","hash":"9ab4281ba32ac5d4e7a070633e95e28d0a0043f3","modified":1582298720532},{"_id":"public/images/mybatis1.png","hash":"9a838351c61a62fe8132028bdfd29f6b275ab109","modified":1581530521971},{"_id":"source/images/mybatis2.png","hash":"04e416309a5093ee57bac52260b01796d2762f12","modified":1581531864281},{"_id":"public/images/mybatis2.png","hash":"04e416309a5093ee57bac52260b01796d2762f12","modified":1581531880851},{"_id":"source/images/mybatis3.png","hash":"e7f90ca5a3f2ffe5592d98e481ccb4fdb2234562","modified":1581534069883},{"_id":"source/images/mybatis4.png","hash":"24f9f9b58a7944de49211c1791486a4cdde52078","modified":1581534802028},{"_id":"public/images/mybatis3.png","hash":"e7f90ca5a3f2ffe5592d98e481ccb4fdb2234562","modified":1581534829856},{"_id":"public/images/mybatis4.png","hash":"24f9f9b58a7944de49211c1791486a4cdde52078","modified":1581534829856},{"_id":"source/_posts/Mybatis-3.md","hash":"a72aaa61e620e3aa0570bc062ea239942707621f","modified":1581534814854},{"_id":"public/archives/page/2/index.html","hash":"f8af1430aeea79723a4896e82ae20a96a5c1e566","modified":1582301853283},{"_id":"public/page/2/index.html","hash":"7add3a81f21e87a7b1cc2e6487a377edfe43a8c0","modified":1582301853283},{"_id":"public/2020/01/07/Mybatis-3/index.html","hash":"030c72f0a970c642dbffadabac37151f9260769f","modified":1581575162586},{"_id":"themes/next/layout/_third-party/.DS_Store","hash":"d421666a745411c4c143cd6c528bdef8177ba7f8","modified":1581576649165},{"_id":"source/images/.DS_Store","hash":"32e992ae0da45bc17ec626f75afac37f0b4801e7","modified":1582119852590},{"_id":"source/images/author.png","hash":"f21db080ce6a437b2e60d179015889f6e0831b05","modified":1581443959012},{"_id":"public/search.xml","hash":"d79eb1bee7913214a60d9e044d4ec92593e27935","modified":1582301853283},{"_id":"public/images/author.png","hash":"f21db080ce6a437b2e60d179015889f6e0831b05","modified":1581579600587},{"_id":"source/_posts/nginx.md","hash":"0ef3051df4ccaffa0be599b0585dc28e383a01d5","modified":1582299141607},{"_id":"source/images/nginx.jpg","hash":"12ca2e6ca8e2be48c2060f61206229779ffbfcd1","modified":1581582372109},{"_id":"source/images/nginx4.png","hash":"3af3072995184f63d0a75324c02527c3e6544538","modified":1581583067456},{"_id":"source/images/nginx5.png","hash":"43a76b61becc6afdd23acb3d88177e3a03366be7","modified":1581583589558},{"_id":"source/images/nginx6.png","hash":"491b705deb7b8dcb8adb048e5a42f1c4da4b31dc","modified":1581583638130},{"_id":"source/images/nginx7.png","hash":"c17dc449825991fa932065f3b5673b7bf45d947f","modified":1581583796488},{"_id":"source/images/nginx3.png","hash":"e43356b41a6bc6349ecb16fa9ad72e7b9b366adc","modified":1581582955669},{"_id":"source/images/nginx1.png","hash":"080a8c25ed0010ce129754e6dd87459ffdeedfba","modified":1581582827546},{"_id":"source/images/nginx2.png","hash":"41ac22d5b004275b0c494fc82c73d472b689f935","modified":1581582851298},{"_id":"public/2020/01/09/nginx/index.html","hash":"7706c67dd4126805e9fb681abff60f5f9395ea6e","modified":1582298720532},{"_id":"public/categories/Nginx/index.html","hash":"c6bd5da5b05bf38d8d69d4dbd3d6b5269d57cff3","modified":1582301853283},{"_id":"public/tags/HTTP/index.html","hash":"f883c4fc20b8ccbc2bb47640122794f72bf50851","modified":1582301853283},{"_id":"public/images/nginx5.png","hash":"43a76b61becc6afdd23acb3d88177e3a03366be7","modified":1581584212089},{"_id":"public/images/nginx6.png","hash":"491b705deb7b8dcb8adb048e5a42f1c4da4b31dc","modified":1581584212089},{"_id":"public/images/nginx.jpg","hash":"12ca2e6ca8e2be48c2060f61206229779ffbfcd1","modified":1581584212089},{"_id":"public/images/nginx4.png","hash":"3af3072995184f63d0a75324c02527c3e6544538","modified":1581584212089},{"_id":"public/images/nginx7.png","hash":"c17dc449825991fa932065f3b5673b7bf45d947f","modified":1581584212089},{"_id":"public/images/nginx1.png","hash":"080a8c25ed0010ce129754e6dd87459ffdeedfba","modified":1581584212089},{"_id":"public/images/nginx3.png","hash":"e43356b41a6bc6349ecb16fa9ad72e7b9b366adc","modified":1581584212089},{"_id":"public/images/nginx2.png","hash":"41ac22d5b004275b0c494fc82c73d472b689f935","modified":1581584212089},{"_id":"source/_posts/docker.md","hash":"3084b041432ef3732539e01a861fff93190ccc40","modified":1582299132616},{"_id":"source/images/docker1.jpg","hash":"628a21017237112a5f7feee574f72dea656b3841","modified":1581598100933},{"_id":"source/images/docker11.png","hash":"4cea5b5e07be39bcee4789978319fb85788bffc4","modified":1581599634777},{"_id":"source/images/docker10.png","hash":"befdb1c56f60e3b2ffa67b71b630d27ee04f41e4","modified":1581599577083},{"_id":"source/images/docker12.png","hash":"417444a09b3a2e3cafbcc98f64ccb060958553c3","modified":1581599685124},{"_id":"source/images/docker3.png","hash":"158912be97e1f2d0f9595c1f6aa145813b587514","modified":1581598360072},{"_id":"source/images/docker4.png","hash":"449d813a8b5178812522d40b4a5650a54380ca18","modified":1581598431432},{"_id":"source/images/docker6.png","hash":"99ce88799bbf1cd4e015c0247fdc55a032a349e6","modified":1581598705015},{"_id":"source/images/docker8.png","hash":"56f2b058f83002486d4b578da9b7d818805e34c0","modified":1581599134641},{"_id":"source/images/docker9.png","hash":"4bd8bc4b09fc496e469d47ed6aefd4f79ea4c4cd","modified":1581599477205},{"_id":"source/images/docker5.png","hash":"29d91a9acd947ef4fbec7bdcce1c7519843f9841","modified":1581598670318},{"_id":"source/images/docker2.png","hash":"dd3fc1cf3a2b234253cc58fe9ac5cf122552ea34","modified":1581598284331},{"_id":"source/images/docker7.png","hash":"a5925cf319047cf8e365b20e87adfb720fc83541","modified":1581598779300},{"_id":"public/2020/01/11/docker/index.html","hash":"4c02420744019e284ccb491cda18d44d2163a2d5","modified":1582298720532},{"_id":"public/categories/Docker/index.html","hash":"69e37cf6f6fe0d19cd5f4e51166909309f14dfa4","modified":1582301853283},{"_id":"public/tags/DevOps-/index.html","hash":"5d6e57fa781a6945862be0b5e3887bcd6f1b55fb","modified":1582301853283},{"_id":"public/images/docker1.jpg","hash":"628a21017237112a5f7feee574f72dea656b3841","modified":1581599810607},{"_id":"public/images/docker11.png","hash":"4cea5b5e07be39bcee4789978319fb85788bffc4","modified":1581599810607},{"_id":"public/images/docker3.png","hash":"158912be97e1f2d0f9595c1f6aa145813b587514","modified":1581599810607},{"_id":"public/images/docker4.png","hash":"449d813a8b5178812522d40b4a5650a54380ca18","modified":1581599810607},{"_id":"public/images/docker9.png","hash":"4bd8bc4b09fc496e469d47ed6aefd4f79ea4c4cd","modified":1581599810607},{"_id":"public/images/docker6.png","hash":"99ce88799bbf1cd4e015c0247fdc55a032a349e6","modified":1581599810607},{"_id":"public/images/docker8.png","hash":"56f2b058f83002486d4b578da9b7d818805e34c0","modified":1581599810607},{"_id":"public/images/docker10.png","hash":"befdb1c56f60e3b2ffa67b71b630d27ee04f41e4","modified":1581599810607},{"_id":"public/images/docker12.png","hash":"417444a09b3a2e3cafbcc98f64ccb060958553c3","modified":1581599810607},{"_id":"public/images/docker2.png","hash":"dd3fc1cf3a2b234253cc58fe9ac5cf122552ea34","modified":1581599810607},{"_id":"public/images/docker5.png","hash":"29d91a9acd947ef4fbec7bdcce1c7519843f9841","modified":1581599810607},{"_id":"public/images/docker7.png","hash":"a5925cf319047cf8e365b20e87adfb720fc83541","modified":1581599810607},{"_id":"source/_posts/Algorithm.md","hash":"691ba15cac8ccd67e5393b289011a358238a9921","modified":1582298989781},{"_id":"source/images/math4.png","hash":"f21a91d19bc95288730e51bf954219005284d9cb","modified":1581601064769},{"_id":"source/images/math3.png","hash":"2a6b8d224b29ed2c849776407eac0582ab9dba81","modified":1581600995243},{"_id":"source/images/math2.png","hash":"954e9b2a96f29c57d796079bb36c4472bef50bb2","modified":1581600941494},{"_id":"source/images/math1.png","hash":"9023ce7c386de5e4abe501f3dabf6013af3ef498","modified":1581600900957},{"_id":"source/images/math6.png","hash":"a766c724efbfd152b5c477b433d162b5b7b0f6e1","modified":1581601320511},{"_id":"source/images/math5.png","hash":"b2e9e14a79694d16eed2306fc4f93e7bf713c23f","modified":1581601156029},{"_id":"public/2019/10/10/Algorithm/index.html","hash":"d94d8e6da86483d868d0ed040beb43a1318eb39e","modified":1582298720532},{"_id":"public/tags/-/index.html","hash":"c855da375edf731fe66faedf3adaae7d781a2f3a","modified":1582301853283},{"_id":"public/categories//index.html","hash":"374d77f8d8b6c51b45dc0e82794a0daf598fc109","modified":1582301853283},{"_id":"public/archives/2019/10/index.html","hash":"0d5ed6aea1abae7036b9247e3e5a139b4bf2a64f","modified":1582298720532},{"_id":"public/images/math4.png","hash":"f21a91d19bc95288730e51bf954219005284d9cb","modified":1581601426452},{"_id":"public/images/math2.png","hash":"954e9b2a96f29c57d796079bb36c4472bef50bb2","modified":1581601426452},{"_id":"public/images/math1.png","hash":"9023ce7c386de5e4abe501f3dabf6013af3ef498","modified":1581601426452},{"_id":"public/images/math3.png","hash":"2a6b8d224b29ed2c849776407eac0582ab9dba81","modified":1581601426452},{"_id":"public/images/math5.png","hash":"b2e9e14a79694d16eed2306fc4f93e7bf713c23f","modified":1581601426452},{"_id":"public/images/math6.png","hash":"a766c724efbfd152b5c477b433d162b5b7b0f6e1","modified":1581601426452},{"_id":"source/_posts/interview.md","hash":"f4797f674b96b94381c382e90868f048f810271b","modified":1582120692461},{"_id":"source/images/thread.png","hash":"5090d556fba9f989a8b5ad133337c6ddc208deda","modified":1582119335355},{"_id":"source/images/classloader.png","hash":"4ca131fc56c4bc60ad5ed33d3f2448d343b17ad0","modified":1582119619966},{"_id":"source/images/mybatisflow.png","hash":"09ce0b986c5ed5aae38f7f927ed48323de41d05d","modified":1582119054786},{"_id":"source/images/tcp1.png","hash":"895c8be763dbd2d0dd9d9646e3b189cad241a583","modified":1582118147167},{"_id":"source/images/kafka1.png","hash":"8dfd3cae31730fad1ea02f3f2d07bfffaa96bb94","modified":1582117359335},{"_id":"source/images/kafka2.png","hash":"1b3ba1df82c5cd07680d211e8740403e6fa5263f","modified":1582117359173},{"_id":"public/2020/02/14/interview/index.html","hash":"7f0db7418f5e2899e5ea69612aa2bf9b2b615067","modified":1582301853283},{"_id":"public/archives/2020/02/index.html","hash":"f2eb6100a564069bbae0a83b784ff3fc0fedeaf9","modified":1582301853283},{"_id":"public/categories/Interview/index.html","hash":"e9aa0dbfd25042d35ea5b49bf1ade95e00621a3b","modified":1582301853283},{"_id":"public/tags/Java-/index.html","hash":"dff50bdc1f879b121c6c32992eef1d6f0110bc74","modified":1582301853283},{"_id":"public/images/thread.png","hash":"5090d556fba9f989a8b5ad133337c6ddc208deda","modified":1582119723549},{"_id":"public/images/classloader.png","hash":"4ca131fc56c4bc60ad5ed33d3f2448d343b17ad0","modified":1582119723549},{"_id":"public/images/tcp1.png","hash":"895c8be763dbd2d0dd9d9646e3b189cad241a583","modified":1582119723549},{"_id":"public/images/mybatisflow.png","hash":"09ce0b986c5ed5aae38f7f927ed48323de41d05d","modified":1582119723549},{"_id":"public/images/kafka1.png","hash":"8dfd3cae31730fad1ea02f3f2d07bfffaa96bb94","modified":1582119723549},{"_id":"public/images/kafka2.png","hash":"1b3ba1df82c5cd07680d211e8740403e6fa5263f","modified":1582119723549},{"_id":"source/images/deadlock.png","hash":"f63036ff0143e102534f0d1ce048060550b1dd59","modified":1582120541195},{"_id":"source/images/collection1.png","hash":"251da553598406e87c35a4545df30bd28040ccc8","modified":1582120447895},{"_id":"source/images/linktable1.png","hash":"799f768ef51935977174ab61543974a2cf4957c6","modified":1582120315324},{"_id":"source/images/linktable2.png","hash":"cc2302e52f3549196f2caafdc823ec4ddf3162a4","modified":1582120323634},{"_id":"source/images/linktable3.png","hash":"b3168918169491d4e19c1aa576eac5f11879f266","modified":1582120332118},{"_id":"source/images/linktable4.png","hash":"7b846bc3e54e7c273c9c6000336fea66be4dd279","modified":1582120338725},{"_id":"source/images/linktable5.png","hash":"38daf65690e672c070846a9a640499bed3a05abc","modified":1582120346452},{"_id":"source/images/map1.png","hash":"aa910ebab66ef6b17d29d83b09d5bedc1147b2f5","modified":1582120468215},{"_id":"source/images/hash1.png","hash":"d00e6d851a6a0ff456541d5dcfdecf1a23ae37c5","modified":1582120381557},{"_id":"source/images/io.png","hash":"b328ce766e5d959221b06df896ae2d2559e961ac","modified":1582120199110},{"_id":"source/images/thread2.png","hash":"acd561fcd85184adfb9cd634f2698776f99f88cf","modified":1582120515756},{"_id":"public/images/linktable2.png","hash":"cc2302e52f3549196f2caafdc823ec4ddf3162a4","modified":1582120562758},{"_id":"public/images/linktable1.png","hash":"799f768ef51935977174ab61543974a2cf4957c6","modified":1582120562758},{"_id":"public/images/linktable3.png","hash":"b3168918169491d4e19c1aa576eac5f11879f266","modified":1582120562758},{"_id":"public/images/linktable5.png","hash":"38daf65690e672c070846a9a640499bed3a05abc","modified":1582120562758},{"_id":"public/images/map1.png","hash":"aa910ebab66ef6b17d29d83b09d5bedc1147b2f5","modified":1582120562758},{"_id":"public/images/deadlock.png","hash":"f63036ff0143e102534f0d1ce048060550b1dd59","modified":1582120562758},{"_id":"public/images/collection1.png","hash":"251da553598406e87c35a4545df30bd28040ccc8","modified":1582120562758},{"_id":"public/images/linktable4.png","hash":"7b846bc3e54e7c273c9c6000336fea66be4dd279","modified":1582120562758},{"_id":"public/images/io.png","hash":"b328ce766e5d959221b06df896ae2d2559e961ac","modified":1582120562758},{"_id":"public/images/hash1.png","hash":"d00e6d851a6a0ff456541d5dcfdecf1a23ae37c5","modified":1582120562758},{"_id":"public/images/thread2.png","hash":"acd561fcd85184adfb9cd634f2698776f99f88cf","modified":1582120562758},{"_id":"source/_posts/Spring-1.md","hash":"dfd6dfedb8f99f925159e08bece6301d332af63e","modified":1582299091345},{"_id":"source/images/mybatis_logo.jpg","hash":"a14d5a370c21eda0d193b0ac46637e1db1b8c1de","modified":1582292551922},{"_id":"source/images/spring_logo.jpg","hash":"a8bd6127c10707f58e8e7f556cc14d1e1ff019d3","modified":1582292630977},{"_id":"source/images/spring-framework.gif","hash":"5f1a7c0074b3b32ae14a325face291bfc3905fd7","modified":1582293868088},{"_id":"source/_posts/Spring-2.md","hash":"f8984d1f62521a995c45fc1f30146e23f47ea2f0","modified":1582299099005},{"_id":"source/images/spring-ioc1.png","hash":"4ef7f43786dada656563c8d2f438a91eeea949c9","modified":1582295041452},{"_id":"source/images/spring-ioc2.png","hash":"9ff8769766331773b52bdbd98587c8907a18d46c","modified":1582295357252},{"_id":"public/2020/02/16/Spring-2/index.html","hash":"593be174364bd487bc22fa2aa07afd70a803fe3e","modified":1582298720532},{"_id":"public/2020/02/15/Spring-1/index.html","hash":"8367b15af385771c182e8ab083e0220d33616ef4","modified":1582298720532},{"_id":"public/tags/-Spring/index.html","hash":"3f5ee2ff474798b960ca3a222a6c58ef38ef21bb","modified":1582301853283},{"_id":"public/images/spring-framework.gif","hash":"5f1a7c0074b3b32ae14a325face291bfc3905fd7","modified":1582298720532},{"_id":"public/images/spring_logo.jpg","hash":"a8bd6127c10707f58e8e7f556cc14d1e1ff019d3","modified":1582298720532},{"_id":"public/images/mybatis_logo.jpg","hash":"a14d5a370c21eda0d193b0ac46637e1db1b8c1de","modified":1582298720532},{"_id":"public/images/spring-ioc1.png","hash":"4ef7f43786dada656563c8d2f438a91eeea949c9","modified":1582298720532},{"_id":"public/images/spring-ioc2.png","hash":"9ff8769766331773b52bdbd98587c8907a18d46c","modified":1582298720532},{"_id":"public/2018/11/21/nginx/index.html","hash":"11dd6b47d4b64324a3e1faa0632b1d1dcf987b05","modified":1582301853283},{"_id":"public/2018/11/14/docker/index.html","hash":"f3090eeee91969991001277f640309b6229843db","modified":1582301853283},{"_id":"public/2018/10/30/Spring-2/index.html","hash":"f17f3540400a4ac540df4b85e0da229750e25497","modified":1582301853283},{"_id":"public/2018/10/22/Spring-1/index.html","hash":"bfc4eb5c6218bd3d2edb67dee0d9dbfa047dbe1e","modified":1582301853283},{"_id":"public/2018/10/15/Mybatis-3/index.html","hash":"fe71f482e1afbefc57c028a217b86ae822f57f21","modified":1582301853283},{"_id":"public/2018/10/06/Mybatis-2/index.html","hash":"bd4334af45b6f7675771440a39d3fc7cb678c6de","modified":1582301853283},{"_id":"public/2018/09/30/Mybatis-1/index.html","hash":"ad8c251136acbca44c76197cc9ec6866abe65f21","modified":1582301853283},{"_id":"public/2018/09/23/Shiro/index.html","hash":"7ed8680f712fe2d7672291f0a816d4b97498835c","modified":1582301853283},{"_id":"public/2018/09/15/Vue4/index.html","hash":"b03d66188583d6c97abc5e10ee1397f563a2661b","modified":1582301853283},{"_id":"public/2018/09/07/Vue3/index.html","hash":"0c4572c3c501b8899c4f7e495f50f2e83cd5f144","modified":1582301853283},{"_id":"public/2018/08/30/Vue2/index.html","hash":"0008e16422287c99277c81126732a3076fd56b80","modified":1582301853283},{"_id":"public/2018/08/24/Vue1/index.html","hash":"d2804a5702f5c57ad82b791265574babe6b36746","modified":1582301853283},{"_id":"public/2018/08/16/Algorithm/index.html","hash":"828a9eb32edecf6f9f105ade00d0d12904ec27f1","modified":1582301853283},{"_id":"public/2018/08/08/JavaBasic2/index.html","hash":"6fede54a3b134ea61cc5d8e2f0754dba5e5ef9a9","modified":1582301853283},{"_id":"public/2018/08/01/JavaBasic1/index.html","hash":"c3e9149fb7e6d85e1a7f4ff18eb21b8fa20ae22e","modified":1582301853283},{"_id":"public/archives/2018/08/index.html","hash":"088947b3779aafe608aef843cae748d921c43a0d","modified":1582301853283},{"_id":"public/archives/2018/page/2/index.html","hash":"1c353eb4f0abcf9e85118a013fd69417a5f8a916","modified":1582301853283},{"_id":"public/archives/2018/09/index.html","hash":"2983fe03054ecf74326b71c7b16d30c3920f78e3","modified":1582301853283},{"_id":"public/archives/2018/11/index.html","hash":"f8adbf77465f9066c94ace7269d5e2387e2c76f2","modified":1582301853283},{"_id":"source/_posts/Spring-3.md","hash":"9e1c6c98d158077ae679c4061cfe1638597c94b0","modified":1582301809503},{"_id":"source/images/spring-aop1.png","hash":"f1c3fa28aee06f181d42e0571a3d04f6f0add386","modified":1582299818544},{"_id":"public/2018/11/07/Spring-3/index.html","hash":"11fe71a0814c800cf254dd7febe3ae3c5dfe2190","modified":1582301853283},{"_id":"public/images/spring-aop1.png","hash":"f1c3fa28aee06f181d42e0571a3d04f6f0add386","modified":1582301853283}],"Category":[{"name":"web","_id":"ck4kwcxvg0001yt6k246pfyf4"},{"name":"Java","_id":"ck4seojjv0001h7s67lt40541"},{"name":"","parent":"ck4seojjv0001h7s67lt40541","_id":"ck4xxfhf90002fs6kd64f4nma"},{"name":"Web","_id":"ck51vzg8z0001f96k47kf92dq"},{"name":"Java","_id":"ck57xfmeb0001d36kf2xdg6sh"},{"name":"Mybatis","_id":"ck6i12sa90000iws60f4bhmz8"},{"name":"Nginx","_id":"ck6kiel0p0001eys69rx74l14"},{"name":"Docker","_id":"ck6krowwc0001k5s65d5lar0s"},{"name":"","_id":"ck6ksnjpc0001r3s68rx01zen"},{"name":"Interview","_id":"ck6td8gei0001f8s65gks78o1"}],"Data":[],"Page":[{"title":"","date":"2019-12-24T06:40:40.000Z","tags":null,"_content":"\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[2018]\n</p>\n<p style=\"text-align: center\">\n[Java]\n</p>\n<p style=\"text-align: center\">\n[qq212704353]\n</p>\n\n\n\n\n\n","source":"about/index.md","raw":"---\ntitle: \ndate: 2019-12-24 14:40:40\ntags: \n---\n\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[2018]\n</p>\n<p style=\"text-align: center\">\n[Java]\n</p>\n<p style=\"text-align: center\">\n[qq212704353]\n</p>\n\n\n\n\n\n","updated":"2020-02-13T13:22:18.748Z","path":"about/index.html","_id":"ck4kom6ao00006r6k1yzn2wgg","comments":1,"layout":"page","content":"<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[2018]\n</p>\n<p style=\"text-align: center\">\n[Java]\n</p>\n<p style=\"text-align: center\">\n[qq212704353]\n</p>\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[]\n</p>\n<p style=\"text-align: center\">\n[2018]\n</p>\n<p style=\"text-align: center\">\n[Java]\n</p>\n<p style=\"text-align: center\">\n[qq212704353]\n</p>\n\n\n\n\n\n"},{"title":"","date":"2019-12-25T06:05:28.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: \ndate: 2019-12-25 14:05:28\ntype: \"categories\"\n---\n","updated":"2019-12-25T06:07:12.125Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ck4kwcxv70000yt6kfhss6vnq","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2019-12-25T06:13:27.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2019-12-25 14:13:27\ntype: \"tags\"\n---\n","updated":"2019-12-25T06:14:00.531Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck4kwl2zd0000356kgcuf5wqj","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Java","date":"2018-08-07T16:00:00.000Z","_content":"\n###\n\n#### \n\nStudent s = new Student()\nStudent.class\ns\nStudent\n0 null false\n\ns\n\n#### Main\n\n```bash\npublic static void main(String[] args) { ... }\n```\n\n- public: mainJVM\n- staticJVM\n- void: mainJVMJVM\n- main: main\n- String[] args: \n\n##### static\n\n**static**\n\n- \n- \n- \n- \n\n****\n\nthisthisstaticstaticthis\n\n#### String\n\nStringpublic final class StringStringInteger LongString\n```bash\npublic final class Integer {}\npublic final class Long {}\npublic final class String {}\n\n```\n\n********new\n\n```bash\nString s = \"ab\";\ns = \"abc\";\nString ss = \"ab\";\nss = new String(\"ab\");\n```\n\nsssssssabs = \"abc\"abcsnew String()ss\n```bash\nString ss = \"ab\";\nSystem.out.println(ss.hashCode());\nss = \"abc\";\nSystem.out.println(ss.hashCode());\n```\n[stack](/images/String1.png)\n\n##### StringBuffer\nStringStringBufferStringBufferStringString\n\n**StringStringBuffer**\n```bash\n//\nString s = \"hello\";\nStringBuffer sb = new StringBuffer(s);\n//\nStringBuffer sb = new StringBuffer();\nsb.append(s);\n```\n\n**StringBufferString**\n```bash\n//\nStringBuffer sb = new StringBuffer(\"hello\");\nString s = new String(sb);\n//\nString s = sb.toString();\n```\n\n##### \n\n> String, StringBuffer, StringBuilder \n- StringStringBufferStringBuilder\n- StringBufferStringStringBuilder\n\n> StringBuffer\n- \n- StringBuffer\n\n> StringStringBuffer\n- String\n- StringBufferStringBuffer\n\n```bash\npublic class StringBufferDemo {\n    public static void main(String[] args) {\n        String s1 = \"hello\";\n        String s2 = \"world\";\n        System.out.println(s1 + \"---\" + s2);// hello---world\n        change(s1, s2);\n        System.out.println(s1 + \"---\" + s2);// hello---world\n\n        StringBuffer sb1 = new StringBuffer(\"hello\");\n        StringBuffer sb2 = new StringBuffer(\"world\");\n        System.out.println(sb1 + \"---\" + sb2);// hello---world\n        change(sb1, sb2);\n        System.out.println(sb1 + \"---\" + sb2);// hello---worldworld\n\n    }\n\n    public static void change(StringBuffer sb1, StringBuffer sb2) {\n        sb1 = sb2;\n        sb2.append(sb1);\n    }\n\n    public static void change(String s1, String s2) {\n        s1 = s2;\n        s2 = s1 + s2;\n    }\n}\n```\n\n#### \n\nJava\n- \n- \n\n\n```bash\npublic class Demo01_Object {\n    public static void main(String[] args) {\n        int a = 10;\n        int b = 20;\n        change(a, b);\n        System.out.println(\"main: a:\" + a + \", b:\" + b); //10, 20\n        int[] arr = {1, 2, 3};\n        change(arr);\n        System.out.println(\"main: \" + arr[0]); //2\n    }\n\n    private static void change(int a, int b) {\n        a = b;\n        b = a + b;\n        System.out.println(\"change: a:\" + a + \", b:\" + b); //20, 40\n    }\n\n    private static void change(int[] arr) {\n        arr[0] = arr[1];\n        System.out.println(\"change\" + arr[0]); //2\n    }\n}\n```\n\n****\nJava**Java**Date t = new Date()tnew Date()tnew Date()\na bint[]****\n\n[stack](/images/stack.png)\n\n##### \n**Java**\n- \n- \n- \n\n\n```bash\npublic static void swap(Employee x, Employee y) {\n    Employee temp = x;\n    x = y;\n    y = temp;\n}\n```\n\nswap(e1, e2)e1e2swapx,y\n\n- ****Integer String Long****\n\nInteger Long StringIntgerCache LongCachenew\n```bash\npublic static void main(String[] args) {\n    String s = \"123\";\n    System.out.println(\"main: \" + s.hashCode()); //48690\n    change(s);\n    change2(s);\n}\nprivate static void change(String s) {\n    s = \"123\";\n    System.out.println(\"change: \" + s.hashCode()); //48690\n}\nprivate static change2(String s) {\n    s = \"456\";\n    System.out.println(\"change2: \" + s.hashCode()); //51669\n}\n```\n\n- ********\n\n\n\n#### \n\n* \n   - \n   - \n* \n   - \n   - \n* \n   - \n   - \n* \n   - \n   - \n\n#### \nJava****\n```bash\npublic class Demo2_Construct {\n    public static void main(String[] args) {\n        Demo2Student student = new Demo2Student();\n        student.show();\n        // Demo2School school = new Demo2School(); //error\n    }\n}\n\nclass Demo2Student {\n    public void show() {\n        System.out.println(\"this student show\");\n    }\n}\n\nclass Demo2School {\n    private int size = 1000;\n    public Demo2School(int size) {\n        this.size = size;\n    }\n}\n```\n\n##### final\nfinal\n\n****\n- final\n- final\n- final\n\n****final\n- final\n- \n\n****\nfinal\n```bash\npublic class Demo {\n    final int WIDTH = 12;\n    //final int HEIGHT; //error\n    final int AREA;\n    {\n        AREA = 120;\n    }\n}\n```\n\n#### \n1JavaJava\n2\n3super\n\n##### \n****super()\n```bash\npublic class Demo04_Extends {\n    public static void main(String[] args) {\n        Demo04Son son = new Demo04Son();\n        son.show();\n    }\n}\n\nclass Demo04Son extends Demo04Parent{\n    private int num = 10;\n    public Demo04Son() {\n        super();\n    }\n\n    public void show() {\n        int num = 100;\n        System.out.println(num);\n        System.out.println(this.num);\n        System.out.println(super.num);\n    }\n}\n\nclass Demo04Parent {\n    public int num = 1;\n\n    public Demo04Parent() {\n        System.out.println(\"\");\n    }\n}\n```\n\n##### this-super\nthissuper\n\n- this: \n- super: \n\n- this./\n- super./\n- this() super()\n\n##### \n```bash\npublic class Demo04_Extends2 {\n    public static void main(String[] args) {\n        Demo04Zi zi = new Demo04Zi();\n    }\n}\nclass Demo04Fu {\n    static {\n        System.out.println(\"Fu \");\n    }\n    {\n        System.out.println(\"Fu \");\n    }\n    public Demo04Fu() {\n        System.out.println(\"Fu \");\n    }\n}\nclass Demo04Zi extends Demo04Fu{\n    static {\n        System.out.println(\"Zi \");\n    }\n    {\n        System.out.println(\"Zi \");\n    }\n    public Demo04Zi() {\n        System.out.println(\"Zi \");\n    }\n}\n```\n\n\n```bash\nFu \nZi \nFu \nFu \nZi \nZi \n```\n\n##### \n****\n[DomaticBind](/images/DomaticBind.png)\n1.change(a)change()JVMpublicchange\n2.JVMJVM**method table**JVMchange****\n3.privatestaticfinalJVM********\n4.JVM\n\n##### \n(int) double\n- ****\n- ****\n\n****\n\n- \n- instanceof\n\n##### \n\n\n- \n- \n- Outer.Inner in = new Outer().new Inner()\n\n****\n\n\n> ?\nfinal****\n\n```bash\npublic class InnerClass {\n    public static void main(String[] args) {\n        Outer outer = new Outer();\n        outer.show();\n    }\n}\n\nclass Outer {\n    public void show() {\n        int num2 = 10;\n        class Inner {\n            private void show() {\n                System.out.println(num2);\n            }\n        }\n        Inner inner = new Inner();\n        inner.show();\n    }\n}\n```\nfinalInnerClass.classOuter.classOuter.class:\n```bash\nclass Outer {\n    Outer() {}\n    public void show() {\n        final int num2 = 10;\n        class Inner {\n            Inner() {}\n            private void show() {\n                System.out.println(num2);\n            }\n        }\n        Inner inner = new Inner();\n        inner.show();\n    }\n}\n```\nnum2finalJDK1.8num2 = 1000\n\n> \nnum2finalInnernum2show()num2Innerfinalfinal num2","source":"_posts/JavaBasic2.md","raw":"---\ntitle: Java\ncategories:\n    - Java\ndate: 2018-08-08\ntags:\n\t- Java\n\t- Java\n\n---\n\n###\n\n#### \n\nStudent s = new Student()\nStudent.class\ns\nStudent\n0 null false\n\ns\n\n#### Main\n\n```bash\npublic static void main(String[] args) { ... }\n```\n\n- public: mainJVM\n- staticJVM\n- void: mainJVMJVM\n- main: main\n- String[] args: \n\n##### static\n\n**static**\n\n- \n- \n- \n- \n\n****\n\nthisthisstaticstaticthis\n\n#### String\n\nStringpublic final class StringStringInteger LongString\n```bash\npublic final class Integer {}\npublic final class Long {}\npublic final class String {}\n\n```\n\n********new\n\n```bash\nString s = \"ab\";\ns = \"abc\";\nString ss = \"ab\";\nss = new String(\"ab\");\n```\n\nsssssssabs = \"abc\"abcsnew String()ss\n```bash\nString ss = \"ab\";\nSystem.out.println(ss.hashCode());\nss = \"abc\";\nSystem.out.println(ss.hashCode());\n```\n[stack](/images/String1.png)\n\n##### StringBuffer\nStringStringBufferStringBufferStringString\n\n**StringStringBuffer**\n```bash\n//\nString s = \"hello\";\nStringBuffer sb = new StringBuffer(s);\n//\nStringBuffer sb = new StringBuffer();\nsb.append(s);\n```\n\n**StringBufferString**\n```bash\n//\nStringBuffer sb = new StringBuffer(\"hello\");\nString s = new String(sb);\n//\nString s = sb.toString();\n```\n\n##### \n\n> String, StringBuffer, StringBuilder \n- StringStringBufferStringBuilder\n- StringBufferStringStringBuilder\n\n> StringBuffer\n- \n- StringBuffer\n\n> StringStringBuffer\n- String\n- StringBufferStringBuffer\n\n```bash\npublic class StringBufferDemo {\n    public static void main(String[] args) {\n        String s1 = \"hello\";\n        String s2 = \"world\";\n        System.out.println(s1 + \"---\" + s2);// hello---world\n        change(s1, s2);\n        System.out.println(s1 + \"---\" + s2);// hello---world\n\n        StringBuffer sb1 = new StringBuffer(\"hello\");\n        StringBuffer sb2 = new StringBuffer(\"world\");\n        System.out.println(sb1 + \"---\" + sb2);// hello---world\n        change(sb1, sb2);\n        System.out.println(sb1 + \"---\" + sb2);// hello---worldworld\n\n    }\n\n    public static void change(StringBuffer sb1, StringBuffer sb2) {\n        sb1 = sb2;\n        sb2.append(sb1);\n    }\n\n    public static void change(String s1, String s2) {\n        s1 = s2;\n        s2 = s1 + s2;\n    }\n}\n```\n\n#### \n\nJava\n- \n- \n\n\n```bash\npublic class Demo01_Object {\n    public static void main(String[] args) {\n        int a = 10;\n        int b = 20;\n        change(a, b);\n        System.out.println(\"main: a:\" + a + \", b:\" + b); //10, 20\n        int[] arr = {1, 2, 3};\n        change(arr);\n        System.out.println(\"main: \" + arr[0]); //2\n    }\n\n    private static void change(int a, int b) {\n        a = b;\n        b = a + b;\n        System.out.println(\"change: a:\" + a + \", b:\" + b); //20, 40\n    }\n\n    private static void change(int[] arr) {\n        arr[0] = arr[1];\n        System.out.println(\"change\" + arr[0]); //2\n    }\n}\n```\n\n****\nJava**Java**Date t = new Date()tnew Date()tnew Date()\na bint[]****\n\n[stack](/images/stack.png)\n\n##### \n**Java**\n- \n- \n- \n\n\n```bash\npublic static void swap(Employee x, Employee y) {\n    Employee temp = x;\n    x = y;\n    y = temp;\n}\n```\n\nswap(e1, e2)e1e2swapx,y\n\n- ****Integer String Long****\n\nInteger Long StringIntgerCache LongCachenew\n```bash\npublic static void main(String[] args) {\n    String s = \"123\";\n    System.out.println(\"main: \" + s.hashCode()); //48690\n    change(s);\n    change2(s);\n}\nprivate static void change(String s) {\n    s = \"123\";\n    System.out.println(\"change: \" + s.hashCode()); //48690\n}\nprivate static change2(String s) {\n    s = \"456\";\n    System.out.println(\"change2: \" + s.hashCode()); //51669\n}\n```\n\n- ********\n\n\n\n#### \n\n* \n   - \n   - \n* \n   - \n   - \n* \n   - \n   - \n* \n   - \n   - \n\n#### \nJava****\n```bash\npublic class Demo2_Construct {\n    public static void main(String[] args) {\n        Demo2Student student = new Demo2Student();\n        student.show();\n        // Demo2School school = new Demo2School(); //error\n    }\n}\n\nclass Demo2Student {\n    public void show() {\n        System.out.println(\"this student show\");\n    }\n}\n\nclass Demo2School {\n    private int size = 1000;\n    public Demo2School(int size) {\n        this.size = size;\n    }\n}\n```\n\n##### final\nfinal\n\n****\n- final\n- final\n- final\n\n****final\n- final\n- \n\n****\nfinal\n```bash\npublic class Demo {\n    final int WIDTH = 12;\n    //final int HEIGHT; //error\n    final int AREA;\n    {\n        AREA = 120;\n    }\n}\n```\n\n#### \n1JavaJava\n2\n3super\n\n##### \n****super()\n```bash\npublic class Demo04_Extends {\n    public static void main(String[] args) {\n        Demo04Son son = new Demo04Son();\n        son.show();\n    }\n}\n\nclass Demo04Son extends Demo04Parent{\n    private int num = 10;\n    public Demo04Son() {\n        super();\n    }\n\n    public void show() {\n        int num = 100;\n        System.out.println(num);\n        System.out.println(this.num);\n        System.out.println(super.num);\n    }\n}\n\nclass Demo04Parent {\n    public int num = 1;\n\n    public Demo04Parent() {\n        System.out.println(\"\");\n    }\n}\n```\n\n##### this-super\nthissuper\n\n- this: \n- super: \n\n- this./\n- super./\n- this() super()\n\n##### \n```bash\npublic class Demo04_Extends2 {\n    public static void main(String[] args) {\n        Demo04Zi zi = new Demo04Zi();\n    }\n}\nclass Demo04Fu {\n    static {\n        System.out.println(\"Fu \");\n    }\n    {\n        System.out.println(\"Fu \");\n    }\n    public Demo04Fu() {\n        System.out.println(\"Fu \");\n    }\n}\nclass Demo04Zi extends Demo04Fu{\n    static {\n        System.out.println(\"Zi \");\n    }\n    {\n        System.out.println(\"Zi \");\n    }\n    public Demo04Zi() {\n        System.out.println(\"Zi \");\n    }\n}\n```\n\n\n```bash\nFu \nZi \nFu \nFu \nZi \nZi \n```\n\n##### \n****\n[DomaticBind](/images/DomaticBind.png)\n1.change(a)change()JVMpublicchange\n2.JVMJVM**method table**JVMchange****\n3.privatestaticfinalJVM********\n4.JVM\n\n##### \n(int) double\n- ****\n- ****\n\n****\n\n- \n- instanceof\n\n##### \n\n\n- \n- \n- Outer.Inner in = new Outer().new Inner()\n\n****\n\n\n> ?\nfinal****\n\n```bash\npublic class InnerClass {\n    public static void main(String[] args) {\n        Outer outer = new Outer();\n        outer.show();\n    }\n}\n\nclass Outer {\n    public void show() {\n        int num2 = 10;\n        class Inner {\n            private void show() {\n                System.out.println(num2);\n            }\n        }\n        Inner inner = new Inner();\n        inner.show();\n    }\n}\n```\nfinalInnerClass.classOuter.classOuter.class:\n```bash\nclass Outer {\n    Outer() {}\n    public void show() {\n        final int num2 = 10;\n        class Inner {\n            Inner() {}\n            private void show() {\n                System.out.println(num2);\n            }\n        }\n        Inner inner = new Inner();\n        inner.show();\n    }\n}\n```\nnum2finalJDK1.8num2 = 1000\n\n> \nnum2finalInnernum2show()num2Innerfinalfinal num2","slug":"JavaBasic2","published":1,"updated":"2020-02-21T15:28:00.037Z","_id":"ck529vsji0000be6kcklmdvfk","comments":1,"layout":"post","photos":[],"link":"","content":"<p>###</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Student s = new Student()<br>Student.class<br>s<br>Student<br>0 null false<br><br>s</p>\n<h4 id=\"Main\"><a href=\"#Main\" class=\"headerlink\" title=\"Main\"></a>Main</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123; ... &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>public: mainJVM</li>\n<li>staticJVM</li>\n<li>void: mainJVMJVM</li>\n<li>main: main</li>\n<li>String[] args: </li>\n</ul>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p><strong>static</strong></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><strong></strong></p>\n<p>thisthisstaticstaticthis</p>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><p>Stringpublic final class StringStringInteger LongString</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public final class Integer &#123;&#125;</span><br><span class=\"line\">public final class Long &#123;&#125;</span><br><span class=\"line\">public final class String &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><strong></strong>new<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">s = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">String ss = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">ss = new String(<span class=\"string\">\"ab\"</span>);</span><br></pre></td></tr></table></figure>\n\n<p>sssssssabs = abcabcsnew String()ss</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ss = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">System.out.println(ss.hashCode());</span><br><span class=\"line\">ss = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">System.out.println(ss.hashCode());</span><br></pre></td></tr></table></figure>\n<p><a href=\"/images/String1.png\">stack</a></p>\n<h5 id=\"StringBuffer\"><a href=\"#StringBuffer\" class=\"headerlink\" title=\"StringBuffer\"></a>StringBuffer</h5><p>StringStringBufferStringBufferStringString</p>\n<p><strong>StringStringBuffer</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">String s = <span class=\"string\">\"hello\"</span>;</span><br><span class=\"line\">StringBuffer sb = new StringBuffer(s);</span><br><span class=\"line\">//</span><br><span class=\"line\">StringBuffer sb = new StringBuffer();</span><br><span class=\"line\">sb.append(s);</span><br></pre></td></tr></table></figure>\n\n<p><strong>StringBufferString</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">StringBuffer sb = new StringBuffer(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">String s = new String(sb);</span><br><span class=\"line\">//</span><br><span class=\"line\">String s = sb.toString();</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote>\n<p>String, StringBuffer, StringBuilder </p>\n</blockquote>\n<ul>\n<li>StringStringBufferStringBuilder</li>\n<li>StringBufferStringStringBuilder</li>\n</ul>\n<blockquote>\n<p>StringBuffer</p>\n</blockquote>\n<ul>\n<li></li>\n<li>StringBuffer</li>\n</ul>\n<blockquote>\n<p>StringStringBuffer</p>\n</blockquote>\n<ul>\n<li>String</li>\n<li>StringBufferStringBuffer</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringBufferDemo &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        String s1 = <span class=\"string\">\"hello\"</span>;</span><br><span class=\"line\">        String s2 = <span class=\"string\">\"world\"</span>;</span><br><span class=\"line\">        System.out.println(s1 + <span class=\"string\">\"---\"</span> + s2);// hello---world</span><br><span class=\"line\">        change(s1, s2);</span><br><span class=\"line\">        System.out.println(s1 + <span class=\"string\">\"---\"</span> + s2);// hello---world</span><br><span class=\"line\"></span><br><span class=\"line\">        StringBuffer sb1 = new StringBuffer(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">        StringBuffer sb2 = new StringBuffer(<span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">        System.out.println(sb1 + <span class=\"string\">\"---\"</span> + sb2);// hello---world</span><br><span class=\"line\">        change(sb1, sb2);</span><br><span class=\"line\">        System.out.println(sb1 + <span class=\"string\">\"---\"</span> + sb2);// hello---worldworld</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void change(StringBuffer sb1, StringBuffer sb2) &#123;</span><br><span class=\"line\">        sb1 = sb2;</span><br><span class=\"line\">        sb2.append(sb1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void change(String s1, String s2) &#123;</span><br><span class=\"line\">        s1 = s2;</span><br><span class=\"line\">        s2 = s1 + s2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Java</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo01_Object &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int a = 10;</span><br><span class=\"line\">        int b = 20;</span><br><span class=\"line\">        change(a, b);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"main: a:\"</span> + a + <span class=\"string\">\", b:\"</span> + b); //10, 20</span><br><span class=\"line\">        int[] arr = &#123;1, 2, 3&#125;;</span><br><span class=\"line\">        change(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"main: \"</span> + arr[0]); //2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void change(int a, int b) &#123;</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = a + b;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"change: a:\"</span> + a + <span class=\"string\">\", b:\"</span> + b); //20, 40</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void change(int[] arr) &#123;</span><br><span class=\"line\">        arr[0] = arr[1];</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"change\"</span> + arr[0]); //2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>Java<strong>Java</strong>Date t = new Date()tnew Date()tnew Date()<br>a bint[]<strong></strong></p>\n<p><a href=\"/images/stack.png\">stack</a></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong>Java</strong></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void swap(Employee x, Employee y) &#123;</span><br><span class=\"line\">    Employee temp = x;</span><br><span class=\"line\">    x = y;</span><br><span class=\"line\">    y = temp;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>swap(e1, e2)e1e2swapx,y</p>\n<ul>\n<li><strong></strong>Integer String Long<strong></strong></li>\n</ul>\n<p>Integer Long StringIntgerCache LongCachenew</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    String s = <span class=\"string\">\"123\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"main: \"</span> + s.hashCode()); //48690</span><br><span class=\"line\">    change(s);</span><br><span class=\"line\">    change2(s);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">private static void change(String s) &#123;</span><br><span class=\"line\">    s = <span class=\"string\">\"123\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"change: \"</span> + s.hashCode()); //48690</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">private static change2(String s) &#123;</span><br><span class=\"line\">    s = <span class=\"string\">\"456\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"change2: \"</span> + s.hashCode()); //51669</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong></strong><strong></strong></li>\n</ul>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Java<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo2_Construct &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo2Student student = new Demo2Student();</span><br><span class=\"line\">        student.show();</span><br><span class=\"line\">        // Demo2School school = new Demo2School(); //error</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo2Student &#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"this student show\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo2School &#123;</span><br><span class=\"line\">    private int size = 1000;</span><br><span class=\"line\">    public Demo2School(int size) &#123;</span><br><span class=\"line\">        this.size = size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"final\"><a href=\"#final\" class=\"headerlink\" title=\"final\"></a>final</h5><p>final</p>\n<p><strong></strong></p>\n<ul>\n<li>final</li>\n<li>final</li>\n<li>final</li>\n</ul>\n<p><strong></strong>final</p>\n<ul>\n<li>final</li>\n<li></li>\n</ul>\n<p><strong></strong><br>final</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo &#123;</span><br><span class=\"line\">    final int WIDTH = 12;</span><br><span class=\"line\">    //final int HEIGHT; //error</span><br><span class=\"line\">    final int AREA;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        AREA = 120;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1JavaJava<br>2<br>3super</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong>super()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo04_Extends &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo04Son son = new Demo04Son();</span><br><span class=\"line\">        son.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo04Son extends Demo04Parent&#123;</span><br><span class=\"line\">    private int num = 10;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Son</span></span>() &#123;</span><br><span class=\"line\">        super();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        int num = 100;</span><br><span class=\"line\">        System.out.println(num);</span><br><span class=\"line\">        System.out.println(this.num);</span><br><span class=\"line\">        System.out.println(super.num);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo04Parent &#123;</span><br><span class=\"line\">    public int num = 1;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Parent</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"this-super\"><a href=\"#this-super\" class=\"headerlink\" title=\"this-super\"></a>this-super</h5><p>thissuper<br></p>\n<ul>\n<li>this: </li>\n<li>super: <br></li>\n<li>this./</li>\n<li>super./</li>\n<li>this() super()</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo04_Extends2 &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo04Zi zi = new Demo04Zi();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class Demo04Fu &#123;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Fu</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class Demo04Zi extends Demo04Fu&#123;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Zi</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Fu </span><br><span class=\"line\">Zi </span><br><span class=\"line\">Fu </span><br><span class=\"line\">Fu </span><br><span class=\"line\">Zi </span><br><span class=\"line\">Zi </span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><br><a href=\"/images/DomaticBind.png\">DomaticBind</a><br>1.change(a)change()JVMpublicchange<br>2.JVMJVM<strong>method table</strong>JVMchange<strong></strong><br>3.privatestaticfinalJVM<strong></strong><strong></strong><br>4.JVM</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>(int) double</p>\n<ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li></li>\n<li>instanceof</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<ul>\n<li></li>\n<li></li>\n<li>Outer.Inner in = new Outer().new Inner()</li>\n</ul>\n<p><strong></strong><br></p>\n<blockquote>\n<p>?<br>final<strong></strong></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class InnerClass &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Outer outer = new Outer();</span><br><span class=\"line\">        outer.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Outer &#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        int num2 = 10;</span><br><span class=\"line\">        class Inner &#123;</span><br><span class=\"line\">            private void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">                System.out.println(num2);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Inner inner = new Inner();</span><br><span class=\"line\">        inner.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalInnerClass.classOuter.classOuter.class:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Outer &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">Outer</span></span>() &#123;&#125;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        final int num2 = 10;</span><br><span class=\"line\">        class Inner &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">Inner</span></span>() &#123;&#125;</span><br><span class=\"line\">            private void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">                System.out.println(num2);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Inner inner = new Inner();</span><br><span class=\"line\">        inner.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>num2finalJDK1.8num2 = 1000</p>\n<blockquote>\n<p><br>num2finalInnernum2show()num2Innerfinalfinal num2</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>###</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Student s = new Student()<br>Student.class<br>s<br>Student<br>0 null false<br><br>s</p>\n<h4 id=\"Main\"><a href=\"#Main\" class=\"headerlink\" title=\"Main\"></a>Main</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123; ... &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>public: mainJVM</li>\n<li>staticJVM</li>\n<li>void: mainJVMJVM</li>\n<li>main: main</li>\n<li>String[] args: </li>\n</ul>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p><strong>static</strong></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><strong></strong></p>\n<p>thisthisstaticstaticthis</p>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><p>Stringpublic final class StringStringInteger LongString</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public final class Integer &#123;&#125;</span><br><span class=\"line\">public final class Long &#123;&#125;</span><br><span class=\"line\">public final class String &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><strong></strong>new<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">s = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">String ss = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">ss = new String(<span class=\"string\">\"ab\"</span>);</span><br></pre></td></tr></table></figure>\n\n<p>sssssssabs = abcabcsnew String()ss</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ss = <span class=\"string\">\"ab\"</span>;</span><br><span class=\"line\">System.out.println(ss.hashCode());</span><br><span class=\"line\">ss = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">System.out.println(ss.hashCode());</span><br></pre></td></tr></table></figure>\n<p><a href=\"/images/String1.png\">stack</a></p>\n<h5 id=\"StringBuffer\"><a href=\"#StringBuffer\" class=\"headerlink\" title=\"StringBuffer\"></a>StringBuffer</h5><p>StringStringBufferStringBufferStringString</p>\n<p><strong>StringStringBuffer</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">String s = <span class=\"string\">\"hello\"</span>;</span><br><span class=\"line\">StringBuffer sb = new StringBuffer(s);</span><br><span class=\"line\">//</span><br><span class=\"line\">StringBuffer sb = new StringBuffer();</span><br><span class=\"line\">sb.append(s);</span><br></pre></td></tr></table></figure>\n\n<p><strong>StringBufferString</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">StringBuffer sb = new StringBuffer(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">String s = new String(sb);</span><br><span class=\"line\">//</span><br><span class=\"line\">String s = sb.toString();</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote>\n<p>String, StringBuffer, StringBuilder </p>\n</blockquote>\n<ul>\n<li>StringStringBufferStringBuilder</li>\n<li>StringBufferStringStringBuilder</li>\n</ul>\n<blockquote>\n<p>StringBuffer</p>\n</blockquote>\n<ul>\n<li></li>\n<li>StringBuffer</li>\n</ul>\n<blockquote>\n<p>StringStringBuffer</p>\n</blockquote>\n<ul>\n<li>String</li>\n<li>StringBufferStringBuffer</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringBufferDemo &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        String s1 = <span class=\"string\">\"hello\"</span>;</span><br><span class=\"line\">        String s2 = <span class=\"string\">\"world\"</span>;</span><br><span class=\"line\">        System.out.println(s1 + <span class=\"string\">\"---\"</span> + s2);// hello---world</span><br><span class=\"line\">        change(s1, s2);</span><br><span class=\"line\">        System.out.println(s1 + <span class=\"string\">\"---\"</span> + s2);// hello---world</span><br><span class=\"line\"></span><br><span class=\"line\">        StringBuffer sb1 = new StringBuffer(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">        StringBuffer sb2 = new StringBuffer(<span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">        System.out.println(sb1 + <span class=\"string\">\"---\"</span> + sb2);// hello---world</span><br><span class=\"line\">        change(sb1, sb2);</span><br><span class=\"line\">        System.out.println(sb1 + <span class=\"string\">\"---\"</span> + sb2);// hello---worldworld</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void change(StringBuffer sb1, StringBuffer sb2) &#123;</span><br><span class=\"line\">        sb1 = sb2;</span><br><span class=\"line\">        sb2.append(sb1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void change(String s1, String s2) &#123;</span><br><span class=\"line\">        s1 = s2;</span><br><span class=\"line\">        s2 = s1 + s2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Java</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo01_Object &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int a = 10;</span><br><span class=\"line\">        int b = 20;</span><br><span class=\"line\">        change(a, b);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"main: a:\"</span> + a + <span class=\"string\">\", b:\"</span> + b); //10, 20</span><br><span class=\"line\">        int[] arr = &#123;1, 2, 3&#125;;</span><br><span class=\"line\">        change(arr);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"main: \"</span> + arr[0]); //2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void change(int a, int b) &#123;</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = a + b;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"change: a:\"</span> + a + <span class=\"string\">\", b:\"</span> + b); //20, 40</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void change(int[] arr) &#123;</span><br><span class=\"line\">        arr[0] = arr[1];</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"change\"</span> + arr[0]); //2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>Java<strong>Java</strong>Date t = new Date()tnew Date()tnew Date()<br>a bint[]<strong></strong></p>\n<p><a href=\"/images/stack.png\">stack</a></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong>Java</strong></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void swap(Employee x, Employee y) &#123;</span><br><span class=\"line\">    Employee temp = x;</span><br><span class=\"line\">    x = y;</span><br><span class=\"line\">    y = temp;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>swap(e1, e2)e1e2swapx,y</p>\n<ul>\n<li><strong></strong>Integer String Long<strong></strong></li>\n</ul>\n<p>Integer Long StringIntgerCache LongCachenew</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    String s = <span class=\"string\">\"123\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"main: \"</span> + s.hashCode()); //48690</span><br><span class=\"line\">    change(s);</span><br><span class=\"line\">    change2(s);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">private static void change(String s) &#123;</span><br><span class=\"line\">    s = <span class=\"string\">\"123\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"change: \"</span> + s.hashCode()); //48690</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">private static change2(String s) &#123;</span><br><span class=\"line\">    s = <span class=\"string\">\"456\"</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"change2: \"</span> + s.hashCode()); //51669</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong></strong><strong></strong></li>\n</ul>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Java<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo2_Construct &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo2Student student = new Demo2Student();</span><br><span class=\"line\">        student.show();</span><br><span class=\"line\">        // Demo2School school = new Demo2School(); //error</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo2Student &#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"this student show\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo2School &#123;</span><br><span class=\"line\">    private int size = 1000;</span><br><span class=\"line\">    public Demo2School(int size) &#123;</span><br><span class=\"line\">        this.size = size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"final\"><a href=\"#final\" class=\"headerlink\" title=\"final\"></a>final</h5><p>final</p>\n<p><strong></strong></p>\n<ul>\n<li>final</li>\n<li>final</li>\n<li>final</li>\n</ul>\n<p><strong></strong>final</p>\n<ul>\n<li>final</li>\n<li></li>\n</ul>\n<p><strong></strong><br>final</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo &#123;</span><br><span class=\"line\">    final int WIDTH = 12;</span><br><span class=\"line\">    //final int HEIGHT; //error</span><br><span class=\"line\">    final int AREA;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        AREA = 120;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1JavaJava<br>2<br>3super</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong>super()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo04_Extends &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo04Son son = new Demo04Son();</span><br><span class=\"line\">        son.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo04Son extends Demo04Parent&#123;</span><br><span class=\"line\">    private int num = 10;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Son</span></span>() &#123;</span><br><span class=\"line\">        super();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        int num = 100;</span><br><span class=\"line\">        System.out.println(num);</span><br><span class=\"line\">        System.out.println(this.num);</span><br><span class=\"line\">        System.out.println(super.num);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Demo04Parent &#123;</span><br><span class=\"line\">    public int num = 1;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Parent</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"this-super\"><a href=\"#this-super\" class=\"headerlink\" title=\"this-super\"></a>this-super</h5><p>thissuper<br></p>\n<ul>\n<li>this: </li>\n<li>super: <br></li>\n<li>this./</li>\n<li>super./</li>\n<li>this() super()</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Demo04_Extends2 &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Demo04Zi zi = new Demo04Zi();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class Demo04Fu &#123;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Fu</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Fu \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class Demo04Zi extends Demo04Fu&#123;</span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">Demo04Zi</span></span>() &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Zi \"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Fu </span><br><span class=\"line\">Zi </span><br><span class=\"line\">Fu </span><br><span class=\"line\">Fu </span><br><span class=\"line\">Zi </span><br><span class=\"line\">Zi </span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><br><a href=\"/images/DomaticBind.png\">DomaticBind</a><br>1.change(a)change()JVMpublicchange<br>2.JVMJVM<strong>method table</strong>JVMchange<strong></strong><br>3.privatestaticfinalJVM<strong></strong><strong></strong><br>4.JVM</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>(int) double</p>\n<ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li></li>\n<li>instanceof</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<ul>\n<li></li>\n<li></li>\n<li>Outer.Inner in = new Outer().new Inner()</li>\n</ul>\n<p><strong></strong><br></p>\n<blockquote>\n<p>?<br>final<strong></strong></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class InnerClass &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        Outer outer = new Outer();</span><br><span class=\"line\">        outer.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class Outer &#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        int num2 = 10;</span><br><span class=\"line\">        class Inner &#123;</span><br><span class=\"line\">            private void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">                System.out.println(num2);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Inner inner = new Inner();</span><br><span class=\"line\">        inner.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalInnerClass.classOuter.classOuter.class:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Outer &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">Outer</span></span>() &#123;&#125;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">        final int num2 = 10;</span><br><span class=\"line\">        class Inner &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">Inner</span></span>() &#123;&#125;</span><br><span class=\"line\">            private void <span class=\"function\"><span class=\"title\">show</span></span>() &#123;</span><br><span class=\"line\">                System.out.println(num2);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Inner inner = new Inner();</span><br><span class=\"line\">        inner.show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>num2finalJDK1.8num2 = 1000</p>\n<blockquote>\n<p><br>num2finalInnernum2show()num2Innerfinalfinal num2</p>\n</blockquote>\n"},{"title":"Java","date":"2018-07-31T16:00:00.000Z","_content":"\nJava\n\n---\n### Java\n\n#### JDKJRE\n\n1jreJava Runtime EnvironmentJavaJavaJava\n2jdkJavatools.jar\n\n---\n\n#### ==  equals\n\n1==(intdouble..)\n2equalsObjectequals\nObjectequals\n```bash\npublic boolean equals(Object obj) {\n    return (this == obj);\n}\n```\nnew\n```bash\npublic class EqualsTest {\n\n    public static void main(String[] args) {\n        User a = new User();\n        User b = new User();\n        System.out.println(a == b); //false\n        System.out.println(a.equals(b)); //true\n    }\n}\n\nclass User {\n    private int age;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof User)) return false;\n        User user = (User) o;\n        return age == user.age;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(age);\n    }\n}\n```\n---\n\n#### hashCode()equals()true\n**(equals()true)hashCode()**\n**hashCode()equals()**\n\nJVMhashCode()ObjectintJava(MapHashMap)hashCode()equals()equals()\n\n```bash\npublic class EqualsTest {\n\n    public static void main(String[] args) {\n        User a = new User();\n        User b = new User();\n        System.out.println(a == b); //false\n        System.out.println(a.equals(b)); //false\n        System.out.println(a.hashCode() == b.hashCode()); //false\n    }\n}\n\nclass User {\n    private int age;\n}\n```\n---\n\n#### final\n\n1final\n2final\n```bash\npublic class FinalTest {\n\n    private static final User USER = new User();\n\n    public static void main(String[] args) {\n        User u2 = new User();\n//        user = u2; // ERROR\n        USER.age = 23;\n    }\n}\n\nclass User {\n    int age = 12;\n}\n```\n3privatefinalprivatefinal\n\n---\n\n#### String\n\n**String**\n\nJavaintshortlongcharbooleanfloatdoublebyte\n\n1StringfinalJVMJVM\n2String s = \"a\"; s += \"b\";aabsab\n3String s = new String(\"ab\")ab(String str = \"ab\")sabnewString\n\n\n```bash\npublic class StringTest {\n\n    public static void main(String[] args) {\n        String a = \"abc\";\n        String b = \"abc\";\n        String c = new String(\"abc\");\n        System.out.println(a == b); //true\n        System.out.println(a.equals(b)); //true\n        System.out.println(a.equals(c)); //true\n    }\n}\n```\n\n**StringStringBufferStringBuilder**\n1StringStringBufferStringBuilderStringBuffer\n2StringequalshashCode()StringBufferequalsnew StringBuffer(\"\")StringBufferJava\n3StringBufferStringBuilder\n\n---\n\n#### static\n\nstaticstaticstaticstaticstatic\n\nstaticstatic\nstaticstaticstatic\n\n---\n\n#### \n\nJavaOOPJava\n()()\n\n|\n:--:|:--:\nint|Integer\nbyte|Byte\nshort|Short\nlong|Long\nfloat|Float\ndouble|Double\nchar|Char\nboolean|Boolean\n\n\n```bash\npublic static void main(String[] args) {\n    Integer i1 = 100;\n    Integer i2 = 100;\n    Integer i3 = 200;\n    Integer i4 = 200;\n    System.out.println(i1 == i2);\n    System.out.println(i3 == i4);\n}\n```\n\n\n```bash\ntrue\nfalse\n```\n\nJavavalueOf()IntegervalueOf()\n```bash\npublic static Integer valueOf(int i) {\n    if (i >= IntegerCache.low && i <= IntegerCache.high)\n        return IntegerCache.cache[i + (-IntegerCache.low)];\n    return new Integer(i);\n}\n```\n\nIntegervalueOf()IntegerCacheIntegerCachenew IntegerIntegerCache\n\n```bash\nprivate static class IntegerCache {\n    static final int low = -128;\n    static final int high;\n    static final Integer cache[];\n\n    static {\n        // high value may be configured by property\n        int h = 127;\n        String integerCacheHighPropValue =\n            sun.misc.VM.getSavedProperty(\"java.lang.Integer.IntegerCache.high\");\n        if (integerCacheHighPropValue != null) {\n            try {\n                int i = parseInt(integerCacheHighPropValue);\n                i = Math.max(i, 127);\n                // Maximum array size is Integer.MAX_VALUE\n                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);\n            } catch( NumberFormatException nfe) {\n                // If the property cannot be parsed into an int, ignore it.\n            }\n        }\n        high = h;\n\n        cache = new Integer[(high - low) + 1];\n        int j = low;\n        for(int k = 0; k < cache.length; k++)\n            cache[k] = new Integer(j++);\n\n        // range [-128, 127] must be interned (JLS7 5.1.7)\n        assert IntegerCache.high >= 127;\n    }\n\n    private IntegerCache() {}\n}\n```\nintInteger[-128, 127]IntegerCachenewIntegerfalse\nlongshortLongCacheShortCache\n\n---\n\n#### OverridingOverloaded\nOverridingOverloadedJava\nOverriding: \nOverloaded: \n\n---\n\n#### Java\nJava\n\nimplements\n\n---\n\n#### \n\n+ \n+  (  )\n+  (  )\n+ \n+ finalfinal\n+ publicprivateprotectedpublic\n+ \n\n---\n\n#### \n\n**Java**\n\n```bash\npublic class TransferTest {\n\n\n    public static void main(String[] args) {\n        int a = 1;\n        Integer b = 2;\n        swap(a, b);\n        System.out.println(a);\n        System.out.println(b);\n\n        int[] arr = {1, 2};\n        swap(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    private static void swap(int[] arr) {\n        arr[0] = 10;\n    }\n\n    private static void swap(int a, Integer b) {\n        a = 10;\n        b = 20;\n    }\n}\n```\n\n\na,bswaparrswap\n\n---\n\n#### IO\n\n![IO](/images/io.png)\n\n**1Java**\nInputStreamOutputStreamInputStreamReaderOutputStreamWriter\n\n**2Java IO**\nJavaread()readLine()\n\n**3**\nInputStreamOutputStream\nInputStreamReaderOutputStreamWriter\n\n\n**4NIO**\nIOServerSocketread()accept()CPU\nNIO\n+ Buffer Buffer\n+ Charset \n+ Channel IOBuffer\n\n---\n\n#### ListSetMap\n\n+ List: List ()null\n+ Set: null\n+ Map: MapKeyKeyKey\n\n---\n\n#### ArrayArrayList\n\n+ ArrayArrayList\n+ ArrayArrayList\n+ ArrayListaddAll()removeAll()iterator()\n+ \n\n---\n\n#### ArrayListLinkedList\n\n1**** ArrayListLinkedList\n2**** ArrayListObjectLinkedList  \n3**** ArrayListLinkedList \n4**** LinkedListArrayListObject\n5**** ArrayListListLinkedListArrayList\n\n---\n\n****\n*Iterator**iterator()*\n\n**IteratorListIterator**\n+ IteratorSetListListIteratorList\n+ Iteratornext()*ListIteratornext()previous()\n+ ListIteratorIterator\n\n**RandomAccess**\n```bash\n//ArrayList\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable\n{}\n\n//RandomAccess\npublic interface RandomAccess {\n}\n\n//LinkedList\npublic class LinkedList<E>\n    extends AbstractSequentialList<E>\n    implements List<E>, Deque<E>, Cloneable, java.io.Serializable\n{}\n```\n\nArrayListRandomAccessLinkedListRandomAccessRandomAccess\n```bash\n/**\n * Marker interface used by <tt>List</tt> implementations to indicate that\n * they support fast (generally constant time) random access.  The primary\n * purpose of this interface is to allow generic algorithms to alter their\n * behavior to provide good performance when applied to either random or\n * sequential access lists.\n */\n```\nMarkerListrandom accessCollectionsbinarySearch\n```bash\npublic static <T>\nint binarySearch(List<? extends Comparable<? super T>> list, T key) {\n    if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)\n        return Collections.indexedBinarySearch(list, key);\n    else\n        return Collections.iteratorBinarySearch(list, key);\n}\n\nprivate static <T>\nint indexedBinarySearch(List<? extends Comparable<? super T>> list, T key) {\n    int low = 0;\n    int high = list.size()-1;\n\n    while (low <= high) {\n        int mid = (low + high) >>> 1;\n        Comparable<? super T> midVal = list.get(mid);\n        int cmp = midVal.compareTo(key);\n\n        if (cmp < 0)\n            low = mid + 1;\n        else if (cmp > 0)\n            high = mid - 1;\n        else\n            return mid; // key found\n    }\n    return -(low + 1);  // key not found\n}\n\nprivate static <T>\nint iteratorBinarySearch(List<? extends Comparable<? super T>> list, T key)\n{\n    int low = 0;\n    int high = list.size()-1;\n    ListIterator<? extends Comparable<? super T>> i = list.listIterator();\n\n    while (low <= high) {\n        int mid = (low + high) >>> 1;\n        Comparable<? super T> midVal = get(i, mid);\n        int cmp = midVal.compareTo(key);\n\n        if (cmp < 0)\n            low = mid + 1;\n        else if (cmp > 0)\n            high = mid - 1;\n        else\n            return mid; // key found\n    }\n    return -(low + 1);  // key not found\n}\n```\n\nbinarySearch()ListListRandomAccessindexedBinarySearch()iteratorBinarySearch()\nListRandomAccessfor\nListRandomAccessiterator\n\n****\n\n**Linked List**/\n>\nNodedatanext\n+ \n![](/images/linktable1.png)\n\n+ next\n![](/images/linktable2.png)\n\n+ next\n![](/images/linktable3.png)\n\n>\n**** prevnext\n![](/images/linktable4.png)\n\n>\n**** *next**head**head**prev*\n![](/images/linktable5.png)\n\n---\n\n#### ArrayListVectorLinkedList\n+ **ArrayList**: \n+ **Vector**: \n+ **LinkedList**: \n\n---\n\n#### ArrayList\nJavaArrayList\nArrayListadd()add()\n```bash\npublic boolean add(E e) {\n    ensureCapacityInternal(size + 1);  // Increments modCount!!\n    elementData[size++] = e;\n    return true;\n}\n\nprivate void ensureCapacityInternal(int minCapacity) {\n    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));\n}\n\n//\nprivate static int calculateCapacity(Object[] elementData, int minCapacity) {\n    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n        return Math.max(DEFAULT_CAPACITY, minCapacity);\n    }\n    return minCapacity;\n}\n\n//\nprivate void ensureExplicitCapacity(int minCapacity) {\n    modCount++;\n\n    // overflow-conscious code\n    if (minCapacity - elementData.length > 0)\n        grow(minCapacity);\n}\n```\n\nArrayListensureCapacityInternal(size)sizeensureCapacityInternal()calculateCapacityensureExplicitCapacity()grow()\n```bash\nprivate void grow(int minCapacity) {\n    // ArrayListelementDaata\n    int oldCapacity = elementData.length;\n    // 1.5\n    int newCapacity = oldCapacity + (oldCapacity >> 1);\n    // \n    // \n    if (newCapacity - minCapacity < 0)\n        // \n        newCapacity = minCapacity;\n    // \n    if (newCapacity - MAX_ARRAY_SIZE > 0)\n        newCapacity = hugeCapacity(minCapacity);\n    // Arrays.copyOf()elementData\n    // elementDatanewCapacity\n    elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n\n**** ArrayListsize\n\n---\n\n#### HashMapHashTable\n1HashMapHashTableMap\n2 HashMapHashTableHashTablesynchronized\n3: HashMapHashTable\n3null keynull value HashMapnullkeykeykeynullHashTablekeynull\n5 JDK1.8HashMap8HashTable\n\n---\n\n#### HashMapHashSet?\n**HashSetHashMap**\nHashMap|HashSet\n:--|:--\nMap|Set\n|\nput()Map|add()Set\nHashMapKeyHashCode|HashSethashCodehashCodeequals\n\n---\n\n#### HashSet\nhashCodeequalsHashSetHashSetHashSethashCodehashCodeequalsSet\n\n---\n\n#### HashMap\nMapJavaHashMapJDKHashMap\n+ <=JDK1.7: Table + Entry\n+ >=JDK1.8: Table + Entry/\n\n#### Hash\n\n**Hash**\nHash\n f(x) = x mod max\n f(x) = x & max\nHashMap \n```bash\n7 & 33 = 1\n    \n    000111\n  & 100001\n  --------\n    000001 = 1\n\n```\n\n---\n\n#### Hash\n100Hash10HashMapK-VputHashMapkeyhashCodekeyhashCode Hash\nHashMap  Hash   Hash\n\n---\n\n#### \n![hash](/images/hash1.png)\n\nTable: NodeNode[] table\nNode: NodeHashMapMap.EntryK-V\nHashMap\nDEFAULT_INITIAL_CAPACITY: Tabale1 << 42^4 = 16\nMAXIMUM_CAPACITY: Table1 << 302^30 = 1073741824\nDEFAULT_LOAD_FACTOR:  >  * Table0.75\nTREEIFY_THRESHOLD: TableNode8\nUNTREEIFY_THRESHOLD: TableEntry6\nMIN_TREEIFY_CAPACITY: Table\nsize: HashMap\nthreshold: HashMapNodeNode[] tablelength16loadFactor0.75threshold = length * loadFactor\nloadFactor: 0.17\nmodCount: HashMap\nHashMapNodeTableDEFAULT_INITIAL_CAPACITY\n```bash\nstatic class Node<K,V> implements Map.Entry<K,V> {\n    final int hash; //keyHash\n    final K key; //key\n    V value; //value\n    Node<K,V> next; //\n}\n```\n\nTableNodeNodeheadernext**Hash**\n\n\n```bash\nmap.put(\"loonycoder\", \"18\");\n```\nHashMap\"loonycoder\"KeyhashCodeHashHashMapkeyHash\nJDK1.7HashNodeJDK1.8TableTREEIFY_THRESHOLDTreeNode:\n```bash\nstatic final class TreeNode<K,V> extends LinkedHashMap.Entry<K,V> {\n    TreeNode<K,V> parent;  // red-black tree links\n    TreeNode<K,V> left;\n    TreeNode<K,V> right;\n    TreeNode<K,V> prev;    // needed to unlink next upon deletion\n    boolean red;\n}\n```\n**Hash**HashMap ****HashHashMap Hash****keyJDK1.8HashMapTableNode\n![](http://cdn.tycoding.cn/JDK1.8HashMap.jpg)\n\n****\nHashMap\n+ HashMapkeyhashCodeputkeyhashCodeequalsvalue\n+ HashMapputkeyhashCodeHashHashMapHash\n+ Hash **** keyTableNode8TreeNode\n\n---\n\n#### CollectionCollections\n+ CollectionSetList\n+ Collectionsjava.util\n\n---\n\n#### ComparableComparator\n\n+ Comparablejava.langcompareTo(Object obj) \n+ Comparatorjava.utilcompare(Object obj1, Object obj2)\nComparableComparator\n\n#### Java\n\n##### Collection\n![Collection](/images/collection1.png)\n\n**List**\n\nArrayList: Object\nVector: Object\nLinkedList: \n\n**Set**\n\nHashSet: HashMapHashMap\nLinkedHashSet: LinkedHashSetHashSetLinkedHashMap\nTreeSet \n\n##### Map\n![Map](/images/map1.png)\n\n+ HashMap: JDK1.8HashMapHashMapHashJDK1.8TableNode8\n+ LinkedHashMap: LinkedHashMapHashMap/LinkedHashMap\n+ HashTable: +HashTableHash\nTreeMap: \n\n---\n\n### Java\n\n#### \n+ \n+ \nJavamainJVMmain\n\n---\n\n#### JVM\nJVM\n\nJVMJVM\n\n##### \n+ **Method Area**   Class\n+ **Heap** newJVM\nJavaJava\n\n##### \n+ **** JavaJava\n+ **** JavaJavaJavanative\n\n##### \n\n**Program Counter Register**JavaOutOfMemoryError\n\n---\n\n#### \n+ **** \n+ **** \n\n---\n\n#### \n\n\n---\n\n#### \n|\n:--|:--\nnew|start()\nrunnable|Java\nblocked|\nwaiting|\ntime_waiting|\nterminated|\n\n\n![](/images/thread2.png)\nNEWstart()wait()WAITINGwait(long)join(long)BLOCKED\n\n---\n\n#### \nCPUCOUCPU**** ****\n\n---\n\n#### ?\nA2B1AB12\n![](/images/deadlock.png)\n\n```bash\npublic class DeadLockDemo {\n    private static Object resource1 = new Object();// 1\n    private static Object resource2 = new Object();// 2\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (resource1) {\n                System.out.println(Thread.currentThread() + \"get resource1\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource2\");\n                synchronized (resource2) {\n                    System.out.println(Thread.currentThread() + \"get resource2\");\n                }\n            }\n        }, \" 1\").start();\n\n        new Thread(() -> {\n            synchronized (resource2) {\n                System.out.println(Thread.currentThread() + \"get resource2\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource1\");\n                synchronized (resource1) {\n                    System.out.println(Thread.currentThread() + \"get resource1\");\n                }\n            }\n        }, \" 2\").start();\n    }\n}\n```\n\nOutput\n\n```bash\nThread[ 1,5,main]get resource1\nThread[ 2,5,main]get resource2\nThread[ 1,5,main]waiting get resource2\nThread[ 2,5,main]waiting get resource1\n```\n1resource1resource1resource1sleep112resource2resource2sleep2111resource2resource222resource1resource11\n\n\n1\n2\n3\n4\n\n\n1\n2\n3\n\n: 2\n```bash\nnew Thread(() -> {\n    synchronized (resource1) {\n        System.out.println(Thread.currentThread() + \"get resource1\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread() + \"waiting get resource2\");\n        synchronized (resource2) {\n            System.out.println(Thread.currentThread() + \"get resource2\");\n        }\n    }\n}, \" 2\").start();\n```\n\nOutput\n```bash\nThread[ 1,5,main]get resource1\nThread[ 1,5,main]waiting get resource2\nThread[ 1,5,main]get resource2\nThread[ 2,5,main]get resource1\nThread[ 2,5,main]waiting get resource2\nThread[ 2,5,main]get resource2\n\nProcess finished with exit code 0\n```\n\n---\n\n#### sleep()wait()\n**sleep  wait **\n+ \n+ wait()/sleep()\n+ wait()notify()notifyAll()sleep()\n\n---\n\n#### start()run()run()\nnewThreadstart()start()run()run()run()main\n**startrun()Threadmain**\n\n---\n\n#### synchronized\nsynchronizedsynchronized\nsynchronized\n+ **** \n```bash\n// `synchronized``synchronized(this)`\npublic synchronized void add() {}\n```\n+ **** this\n```bash\n// `synchronized``synzhronized(T.class)`(T)\npublic synchronized static void add() {}\n```\n\n+ ****\n\n---\n","source":"_posts/JavaBasic1.md","raw":"---\ntitle: Java\ncategories:\n    - Java\ndate: 2018-08-01\ntags:\n\t- Java\n\t- Java\n\n---\n\nJava\n\n---\n### Java\n\n#### JDKJRE\n\n1jreJava Runtime EnvironmentJavaJavaJava\n2jdkJavatools.jar\n\n---\n\n#### ==  equals\n\n1==(intdouble..)\n2equalsObjectequals\nObjectequals\n```bash\npublic boolean equals(Object obj) {\n    return (this == obj);\n}\n```\nnew\n```bash\npublic class EqualsTest {\n\n    public static void main(String[] args) {\n        User a = new User();\n        User b = new User();\n        System.out.println(a == b); //false\n        System.out.println(a.equals(b)); //true\n    }\n}\n\nclass User {\n    private int age;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof User)) return false;\n        User user = (User) o;\n        return age == user.age;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(age);\n    }\n}\n```\n---\n\n#### hashCode()equals()true\n**(equals()true)hashCode()**\n**hashCode()equals()**\n\nJVMhashCode()ObjectintJava(MapHashMap)hashCode()equals()equals()\n\n```bash\npublic class EqualsTest {\n\n    public static void main(String[] args) {\n        User a = new User();\n        User b = new User();\n        System.out.println(a == b); //false\n        System.out.println(a.equals(b)); //false\n        System.out.println(a.hashCode() == b.hashCode()); //false\n    }\n}\n\nclass User {\n    private int age;\n}\n```\n---\n\n#### final\n\n1final\n2final\n```bash\npublic class FinalTest {\n\n    private static final User USER = new User();\n\n    public static void main(String[] args) {\n        User u2 = new User();\n//        user = u2; // ERROR\n        USER.age = 23;\n    }\n}\n\nclass User {\n    int age = 12;\n}\n```\n3privatefinalprivatefinal\n\n---\n\n#### String\n\n**String**\n\nJavaintshortlongcharbooleanfloatdoublebyte\n\n1StringfinalJVMJVM\n2String s = \"a\"; s += \"b\";aabsab\n3String s = new String(\"ab\")ab(String str = \"ab\")sabnewString\n\n\n```bash\npublic class StringTest {\n\n    public static void main(String[] args) {\n        String a = \"abc\";\n        String b = \"abc\";\n        String c = new String(\"abc\");\n        System.out.println(a == b); //true\n        System.out.println(a.equals(b)); //true\n        System.out.println(a.equals(c)); //true\n    }\n}\n```\n\n**StringStringBufferStringBuilder**\n1StringStringBufferStringBuilderStringBuffer\n2StringequalshashCode()StringBufferequalsnew StringBuffer(\"\")StringBufferJava\n3StringBufferStringBuilder\n\n---\n\n#### static\n\nstaticstaticstaticstaticstatic\n\nstaticstatic\nstaticstaticstatic\n\n---\n\n#### \n\nJavaOOPJava\n()()\n\n|\n:--:|:--:\nint|Integer\nbyte|Byte\nshort|Short\nlong|Long\nfloat|Float\ndouble|Double\nchar|Char\nboolean|Boolean\n\n\n```bash\npublic static void main(String[] args) {\n    Integer i1 = 100;\n    Integer i2 = 100;\n    Integer i3 = 200;\n    Integer i4 = 200;\n    System.out.println(i1 == i2);\n    System.out.println(i3 == i4);\n}\n```\n\n\n```bash\ntrue\nfalse\n```\n\nJavavalueOf()IntegervalueOf()\n```bash\npublic static Integer valueOf(int i) {\n    if (i >= IntegerCache.low && i <= IntegerCache.high)\n        return IntegerCache.cache[i + (-IntegerCache.low)];\n    return new Integer(i);\n}\n```\n\nIntegervalueOf()IntegerCacheIntegerCachenew IntegerIntegerCache\n\n```bash\nprivate static class IntegerCache {\n    static final int low = -128;\n    static final int high;\n    static final Integer cache[];\n\n    static {\n        // high value may be configured by property\n        int h = 127;\n        String integerCacheHighPropValue =\n            sun.misc.VM.getSavedProperty(\"java.lang.Integer.IntegerCache.high\");\n        if (integerCacheHighPropValue != null) {\n            try {\n                int i = parseInt(integerCacheHighPropValue);\n                i = Math.max(i, 127);\n                // Maximum array size is Integer.MAX_VALUE\n                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);\n            } catch( NumberFormatException nfe) {\n                // If the property cannot be parsed into an int, ignore it.\n            }\n        }\n        high = h;\n\n        cache = new Integer[(high - low) + 1];\n        int j = low;\n        for(int k = 0; k < cache.length; k++)\n            cache[k] = new Integer(j++);\n\n        // range [-128, 127] must be interned (JLS7 5.1.7)\n        assert IntegerCache.high >= 127;\n    }\n\n    private IntegerCache() {}\n}\n```\nintInteger[-128, 127]IntegerCachenewIntegerfalse\nlongshortLongCacheShortCache\n\n---\n\n#### OverridingOverloaded\nOverridingOverloadedJava\nOverriding: \nOverloaded: \n\n---\n\n#### Java\nJava\n\nimplements\n\n---\n\n#### \n\n+ \n+  (  )\n+  (  )\n+ \n+ finalfinal\n+ publicprivateprotectedpublic\n+ \n\n---\n\n#### \n\n**Java**\n\n```bash\npublic class TransferTest {\n\n\n    public static void main(String[] args) {\n        int a = 1;\n        Integer b = 2;\n        swap(a, b);\n        System.out.println(a);\n        System.out.println(b);\n\n        int[] arr = {1, 2};\n        swap(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    private static void swap(int[] arr) {\n        arr[0] = 10;\n    }\n\n    private static void swap(int a, Integer b) {\n        a = 10;\n        b = 20;\n    }\n}\n```\n\n\na,bswaparrswap\n\n---\n\n#### IO\n\n![IO](/images/io.png)\n\n**1Java**\nInputStreamOutputStreamInputStreamReaderOutputStreamWriter\n\n**2Java IO**\nJavaread()readLine()\n\n**3**\nInputStreamOutputStream\nInputStreamReaderOutputStreamWriter\n\n\n**4NIO**\nIOServerSocketread()accept()CPU\nNIO\n+ Buffer Buffer\n+ Charset \n+ Channel IOBuffer\n\n---\n\n#### ListSetMap\n\n+ List: List ()null\n+ Set: null\n+ Map: MapKeyKeyKey\n\n---\n\n#### ArrayArrayList\n\n+ ArrayArrayList\n+ ArrayArrayList\n+ ArrayListaddAll()removeAll()iterator()\n+ \n\n---\n\n#### ArrayListLinkedList\n\n1**** ArrayListLinkedList\n2**** ArrayListObjectLinkedList  \n3**** ArrayListLinkedList \n4**** LinkedListArrayListObject\n5**** ArrayListListLinkedListArrayList\n\n---\n\n****\n*Iterator**iterator()*\n\n**IteratorListIterator**\n+ IteratorSetListListIteratorList\n+ Iteratornext()*ListIteratornext()previous()\n+ ListIteratorIterator\n\n**RandomAccess**\n```bash\n//ArrayList\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable\n{}\n\n//RandomAccess\npublic interface RandomAccess {\n}\n\n//LinkedList\npublic class LinkedList<E>\n    extends AbstractSequentialList<E>\n    implements List<E>, Deque<E>, Cloneable, java.io.Serializable\n{}\n```\n\nArrayListRandomAccessLinkedListRandomAccessRandomAccess\n```bash\n/**\n * Marker interface used by <tt>List</tt> implementations to indicate that\n * they support fast (generally constant time) random access.  The primary\n * purpose of this interface is to allow generic algorithms to alter their\n * behavior to provide good performance when applied to either random or\n * sequential access lists.\n */\n```\nMarkerListrandom accessCollectionsbinarySearch\n```bash\npublic static <T>\nint binarySearch(List<? extends Comparable<? super T>> list, T key) {\n    if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)\n        return Collections.indexedBinarySearch(list, key);\n    else\n        return Collections.iteratorBinarySearch(list, key);\n}\n\nprivate static <T>\nint indexedBinarySearch(List<? extends Comparable<? super T>> list, T key) {\n    int low = 0;\n    int high = list.size()-1;\n\n    while (low <= high) {\n        int mid = (low + high) >>> 1;\n        Comparable<? super T> midVal = list.get(mid);\n        int cmp = midVal.compareTo(key);\n\n        if (cmp < 0)\n            low = mid + 1;\n        else if (cmp > 0)\n            high = mid - 1;\n        else\n            return mid; // key found\n    }\n    return -(low + 1);  // key not found\n}\n\nprivate static <T>\nint iteratorBinarySearch(List<? extends Comparable<? super T>> list, T key)\n{\n    int low = 0;\n    int high = list.size()-1;\n    ListIterator<? extends Comparable<? super T>> i = list.listIterator();\n\n    while (low <= high) {\n        int mid = (low + high) >>> 1;\n        Comparable<? super T> midVal = get(i, mid);\n        int cmp = midVal.compareTo(key);\n\n        if (cmp < 0)\n            low = mid + 1;\n        else if (cmp > 0)\n            high = mid - 1;\n        else\n            return mid; // key found\n    }\n    return -(low + 1);  // key not found\n}\n```\n\nbinarySearch()ListListRandomAccessindexedBinarySearch()iteratorBinarySearch()\nListRandomAccessfor\nListRandomAccessiterator\n\n****\n\n**Linked List**/\n>\nNodedatanext\n+ \n![](/images/linktable1.png)\n\n+ next\n![](/images/linktable2.png)\n\n+ next\n![](/images/linktable3.png)\n\n>\n**** prevnext\n![](/images/linktable4.png)\n\n>\n**** *next**head**head**prev*\n![](/images/linktable5.png)\n\n---\n\n#### ArrayListVectorLinkedList\n+ **ArrayList**: \n+ **Vector**: \n+ **LinkedList**: \n\n---\n\n#### ArrayList\nJavaArrayList\nArrayListadd()add()\n```bash\npublic boolean add(E e) {\n    ensureCapacityInternal(size + 1);  // Increments modCount!!\n    elementData[size++] = e;\n    return true;\n}\n\nprivate void ensureCapacityInternal(int minCapacity) {\n    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));\n}\n\n//\nprivate static int calculateCapacity(Object[] elementData, int minCapacity) {\n    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n        return Math.max(DEFAULT_CAPACITY, minCapacity);\n    }\n    return minCapacity;\n}\n\n//\nprivate void ensureExplicitCapacity(int minCapacity) {\n    modCount++;\n\n    // overflow-conscious code\n    if (minCapacity - elementData.length > 0)\n        grow(minCapacity);\n}\n```\n\nArrayListensureCapacityInternal(size)sizeensureCapacityInternal()calculateCapacityensureExplicitCapacity()grow()\n```bash\nprivate void grow(int minCapacity) {\n    // ArrayListelementDaata\n    int oldCapacity = elementData.length;\n    // 1.5\n    int newCapacity = oldCapacity + (oldCapacity >> 1);\n    // \n    // \n    if (newCapacity - minCapacity < 0)\n        // \n        newCapacity = minCapacity;\n    // \n    if (newCapacity - MAX_ARRAY_SIZE > 0)\n        newCapacity = hugeCapacity(minCapacity);\n    // Arrays.copyOf()elementData\n    // elementDatanewCapacity\n    elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n\n**** ArrayListsize\n\n---\n\n#### HashMapHashTable\n1HashMapHashTableMap\n2 HashMapHashTableHashTablesynchronized\n3: HashMapHashTable\n3null keynull value HashMapnullkeykeykeynullHashTablekeynull\n5 JDK1.8HashMap8HashTable\n\n---\n\n#### HashMapHashSet?\n**HashSetHashMap**\nHashMap|HashSet\n:--|:--\nMap|Set\n|\nput()Map|add()Set\nHashMapKeyHashCode|HashSethashCodehashCodeequals\n\n---\n\n#### HashSet\nhashCodeequalsHashSetHashSetHashSethashCodehashCodeequalsSet\n\n---\n\n#### HashMap\nMapJavaHashMapJDKHashMap\n+ <=JDK1.7: Table + Entry\n+ >=JDK1.8: Table + Entry/\n\n#### Hash\n\n**Hash**\nHash\n f(x) = x mod max\n f(x) = x & max\nHashMap \n```bash\n7 & 33 = 1\n    \n    000111\n  & 100001\n  --------\n    000001 = 1\n\n```\n\n---\n\n#### Hash\n100Hash10HashMapK-VputHashMapkeyhashCodekeyhashCode Hash\nHashMap  Hash   Hash\n\n---\n\n#### \n![hash](/images/hash1.png)\n\nTable: NodeNode[] table\nNode: NodeHashMapMap.EntryK-V\nHashMap\nDEFAULT_INITIAL_CAPACITY: Tabale1 << 42^4 = 16\nMAXIMUM_CAPACITY: Table1 << 302^30 = 1073741824\nDEFAULT_LOAD_FACTOR:  >  * Table0.75\nTREEIFY_THRESHOLD: TableNode8\nUNTREEIFY_THRESHOLD: TableEntry6\nMIN_TREEIFY_CAPACITY: Table\nsize: HashMap\nthreshold: HashMapNodeNode[] tablelength16loadFactor0.75threshold = length * loadFactor\nloadFactor: 0.17\nmodCount: HashMap\nHashMapNodeTableDEFAULT_INITIAL_CAPACITY\n```bash\nstatic class Node<K,V> implements Map.Entry<K,V> {\n    final int hash; //keyHash\n    final K key; //key\n    V value; //value\n    Node<K,V> next; //\n}\n```\n\nTableNodeNodeheadernext**Hash**\n\n\n```bash\nmap.put(\"loonycoder\", \"18\");\n```\nHashMap\"loonycoder\"KeyhashCodeHashHashMapkeyHash\nJDK1.7HashNodeJDK1.8TableTREEIFY_THRESHOLDTreeNode:\n```bash\nstatic final class TreeNode<K,V> extends LinkedHashMap.Entry<K,V> {\n    TreeNode<K,V> parent;  // red-black tree links\n    TreeNode<K,V> left;\n    TreeNode<K,V> right;\n    TreeNode<K,V> prev;    // needed to unlink next upon deletion\n    boolean red;\n}\n```\n**Hash**HashMap ****HashHashMap Hash****keyJDK1.8HashMapTableNode\n![](http://cdn.tycoding.cn/JDK1.8HashMap.jpg)\n\n****\nHashMap\n+ HashMapkeyhashCodeputkeyhashCodeequalsvalue\n+ HashMapputkeyhashCodeHashHashMapHash\n+ Hash **** keyTableNode8TreeNode\n\n---\n\n#### CollectionCollections\n+ CollectionSetList\n+ Collectionsjava.util\n\n---\n\n#### ComparableComparator\n\n+ Comparablejava.langcompareTo(Object obj) \n+ Comparatorjava.utilcompare(Object obj1, Object obj2)\nComparableComparator\n\n#### Java\n\n##### Collection\n![Collection](/images/collection1.png)\n\n**List**\n\nArrayList: Object\nVector: Object\nLinkedList: \n\n**Set**\n\nHashSet: HashMapHashMap\nLinkedHashSet: LinkedHashSetHashSetLinkedHashMap\nTreeSet \n\n##### Map\n![Map](/images/map1.png)\n\n+ HashMap: JDK1.8HashMapHashMapHashJDK1.8TableNode8\n+ LinkedHashMap: LinkedHashMapHashMap/LinkedHashMap\n+ HashTable: +HashTableHash\nTreeMap: \n\n---\n\n### Java\n\n#### \n+ \n+ \nJavamainJVMmain\n\n---\n\n#### JVM\nJVM\n\nJVMJVM\n\n##### \n+ **Method Area**   Class\n+ **Heap** newJVM\nJavaJava\n\n##### \n+ **** JavaJava\n+ **** JavaJavaJavanative\n\n##### \n\n**Program Counter Register**JavaOutOfMemoryError\n\n---\n\n#### \n+ **** \n+ **** \n\n---\n\n#### \n\n\n---\n\n#### \n|\n:--|:--\nnew|start()\nrunnable|Java\nblocked|\nwaiting|\ntime_waiting|\nterminated|\n\n\n![](/images/thread2.png)\nNEWstart()wait()WAITINGwait(long)join(long)BLOCKED\n\n---\n\n#### \nCPUCOUCPU**** ****\n\n---\n\n#### ?\nA2B1AB12\n![](/images/deadlock.png)\n\n```bash\npublic class DeadLockDemo {\n    private static Object resource1 = new Object();// 1\n    private static Object resource2 = new Object();// 2\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (resource1) {\n                System.out.println(Thread.currentThread() + \"get resource1\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource2\");\n                synchronized (resource2) {\n                    System.out.println(Thread.currentThread() + \"get resource2\");\n                }\n            }\n        }, \" 1\").start();\n\n        new Thread(() -> {\n            synchronized (resource2) {\n                System.out.println(Thread.currentThread() + \"get resource2\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource1\");\n                synchronized (resource1) {\n                    System.out.println(Thread.currentThread() + \"get resource1\");\n                }\n            }\n        }, \" 2\").start();\n    }\n}\n```\n\nOutput\n\n```bash\nThread[ 1,5,main]get resource1\nThread[ 2,5,main]get resource2\nThread[ 1,5,main]waiting get resource2\nThread[ 2,5,main]waiting get resource1\n```\n1resource1resource1resource1sleep112resource2resource2sleep2111resource2resource222resource1resource11\n\n\n1\n2\n3\n4\n\n\n1\n2\n3\n\n: 2\n```bash\nnew Thread(() -> {\n    synchronized (resource1) {\n        System.out.println(Thread.currentThread() + \"get resource1\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread() + \"waiting get resource2\");\n        synchronized (resource2) {\n            System.out.println(Thread.currentThread() + \"get resource2\");\n        }\n    }\n}, \" 2\").start();\n```\n\nOutput\n```bash\nThread[ 1,5,main]get resource1\nThread[ 1,5,main]waiting get resource2\nThread[ 1,5,main]get resource2\nThread[ 2,5,main]get resource1\nThread[ 2,5,main]waiting get resource2\nThread[ 2,5,main]get resource2\n\nProcess finished with exit code 0\n```\n\n---\n\n#### sleep()wait()\n**sleep  wait **\n+ \n+ wait()/sleep()\n+ wait()notify()notifyAll()sleep()\n\n---\n\n#### start()run()run()\nnewThreadstart()start()run()run()run()main\n**startrun()Threadmain**\n\n---\n\n#### synchronized\nsynchronizedsynchronized\nsynchronized\n+ **** \n```bash\n// `synchronized``synchronized(this)`\npublic synchronized void add() {}\n```\n+ **** this\n```bash\n// `synchronized``synzhronized(T.class)`(T)\npublic synchronized static void add() {}\n```\n\n+ ****\n\n---\n","slug":"JavaBasic1","published":1,"updated":"2020-02-21T15:27:44.892Z","_id":"ck529vslf0004be6k1b8954cs","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Java</p>\n<hr>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"JDKJRE\"><a href=\"#JDKJRE\" class=\"headerlink\" title=\"JDKJRE\"></a>JDKJRE</h4><p>1jreJava Runtime EnvironmentJavaJavaJava<br>2jdkJavatools.jar</p>\n<hr>\n<h4 id=\"-equals\"><a href=\"#-equals\" class=\"headerlink\" title=\"==  equals\"></a>==  equals</h4><p>1==(intdouble..)<br>2equalsObjectequals<br>Objectequals</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public boolean equals(Object obj) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> (this == obj);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>new</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class EqualsTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User a = new User();</span><br><span class=\"line\">        User b = new User();</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public boolean equals(Object o) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (this == o) <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!(o instanceof User)) <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        User user = (User) o;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> age == user.age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">hashCode</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Objects.hash(age);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"hashCode-equals-true\"><a href=\"#hashCode-equals-true\" class=\"headerlink\" title=\"hashCode()equals()true\"></a>hashCode()equals()true</h4><p><strong>(equals()true)hashCode()</strong><br><strong>hashCode()equals()</strong></p>\n<p>JVMhashCode()ObjectintJava(MapHashMap)hashCode()equals()equals()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class EqualsTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User a = new User();</span><br><span class=\"line\">        User b = new User();</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.hashCode() == b.hashCode()); //<span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"final\"><a href=\"#final\" class=\"headerlink\" title=\"final\"></a>final</h4><p><br>1final<br>2final</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class FinalTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static final User USER = new User();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User u2 = new User();</span><br><span class=\"line\">//        user = u2; // ERROR</span><br><span class=\"line\">        USER.age = 23;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    int age = 12;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3privatefinalprivatefinal</p>\n<hr>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><p><strong>String</strong></p>\n<p>Javaintshortlongcharbooleanfloatdoublebyte</p>\n<p>1StringfinalJVMJVM<br>2String s = a; s += b;aabsab<br>3String s = new String(ab)ab(String str = ab)sabnewString</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        String a = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">        String b = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">        String c = new String(<span class=\"string\">\"abc\"</span>);</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">true</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">true</span></span><br><span class=\"line\">        System.out.println(a.equals(c)); //<span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>StringStringBufferStringBuilder</strong><br>1StringStringBufferStringBuilderStringBuffer<br>2StringequalshashCode()StringBufferequalsnew StringBuffer()StringBufferJava<br>3StringBufferStringBuilder</p>\n<hr>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><p>staticstaticstaticstaticstatic</p>\n<p>staticstatic<br>staticstaticstatic</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>JavaOOPJava<br>()()</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">int</td>\n<td align=\"center\">Integer</td>\n</tr>\n<tr>\n<td align=\"center\">byte</td>\n<td align=\"center\">Byte</td>\n</tr>\n<tr>\n<td align=\"center\">short</td>\n<td align=\"center\">Short</td>\n</tr>\n<tr>\n<td align=\"center\">long</td>\n<td align=\"center\">Long</td>\n</tr>\n<tr>\n<td align=\"center\">float</td>\n<td align=\"center\">Float</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">Double</td>\n</tr>\n<tr>\n<td align=\"center\">char</td>\n<td align=\"center\">Char</td>\n</tr>\n<tr>\n<td align=\"center\">boolean</td>\n<td align=\"center\">Boolean</td>\n</tr>\n</tbody></table>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    Integer i1 = 100;</span><br><span class=\"line\">    Integer i2 = 100;</span><br><span class=\"line\">    Integer i3 = 200;</span><br><span class=\"line\">    Integer i4 = 200;</span><br><span class=\"line\">    System.out.println(i1 == i2);</span><br><span class=\"line\">    System.out.println(i3 == i4);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>JavavalueOf()IntegervalueOf()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static Integer valueOf(int i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class=\"line\">        <span class=\"built_in\">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Integer(i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>IntegervalueOf()IntegerCacheIntegerCachenew IntegerIntegerCache</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private static class IntegerCache &#123;</span><br><span class=\"line\">    static final int low = -128;</span><br><span class=\"line\">    static final int high;</span><br><span class=\"line\">    static final Integer cache[];</span><br><span class=\"line\"></span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        // high value may be configured by property</span><br><span class=\"line\">        int h = 127;</span><br><span class=\"line\">        String integerCacheHighPropValue =</span><br><span class=\"line\">            sun.misc.VM.getSavedProperty(<span class=\"string\">\"java.lang.Integer.IntegerCache.high\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (integerCacheHighPropValue != null) &#123;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                int i = parseInt(integerCacheHighPropValue);</span><br><span class=\"line\">                i = Math.max(i, 127);</span><br><span class=\"line\">                // Maximum array size is Integer.MAX_VALUE</span><br><span class=\"line\">                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);</span><br><span class=\"line\">            &#125; catch( NumberFormatException nfe) &#123;</span><br><span class=\"line\">                // If the property cannot be parsed into an int, ignore it.</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        high = h;</span><br><span class=\"line\"></span><br><span class=\"line\">        cache = new Integer[(high - low) + 1];</span><br><span class=\"line\">        int j = low;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int k = 0; k &lt; cache.length; k++)</span><br><span class=\"line\">            cache[k] = new Integer(j++);</span><br><span class=\"line\"></span><br><span class=\"line\">        // range [-128, 127] must be interned (JLS7 5.1.7)</span><br><span class=\"line\">        assert IntegerCache.high &gt;= 127;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private <span class=\"function\"><span class=\"title\">IntegerCache</span></span>() &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>intInteger[-128, 127]IntegerCachenewIntegerfalse<br>longshortLongCacheShortCache</p>\n<hr>\n<h4 id=\"OverridingOverloaded\"><a href=\"#OverridingOverloaded\" class=\"headerlink\" title=\"OverridingOverloaded\"></a>OverridingOverloaded</h4><p>OverridingOverloadedJava<br>Overriding: <br>Overloaded: </p>\n<hr>\n<h4 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h4><p>Java<br><br>implements</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> (  )</li>\n<li> (  )</li>\n<li></li>\n<li>finalfinal</li>\n<li>publicprivateprotectedpublic</li>\n<li></li>\n</ul>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong>Java</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class TransferTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int a = 1;</span><br><span class=\"line\">        Integer b = 2;</span><br><span class=\"line\">        swap(a, b);</span><br><span class=\"line\">        System.out.println(a);</span><br><span class=\"line\">        System.out.println(b);</span><br><span class=\"line\"></span><br><span class=\"line\">        int[] arr = &#123;1, 2&#125;;</span><br><span class=\"line\">        swap(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void swap(int[] arr) &#123;</span><br><span class=\"line\">        arr[0] = 10;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void swap(int a, Integer b) &#123;</span><br><span class=\"line\">        a = 10;</span><br><span class=\"line\">        b = 20;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br>a,bswaparrswap</p>\n<hr>\n<h4 id=\"IO\"><a href=\"#IO\" class=\"headerlink\" title=\"IO\"></a>IO</h4><p><img src=\"/images/io.png\" alt=\"IO\"></p>\n<p><strong>1Java</strong><br>InputStreamOutputStreamInputStreamReaderOutputStreamWriter</p>\n<p><strong>2Java IO</strong><br>Javaread()readLine()</p>\n<p><strong>3</strong><br>InputStreamOutputStream<br>InputStreamReaderOutputStreamWriter<br></p>\n<p><strong>4NIO</strong><br>IOServerSocketread()accept()CPU<br>NIO</p>\n<ul>\n<li>Buffer Buffer</li>\n<li>Charset </li>\n<li>Channel IOBuffer</li>\n</ul>\n<hr>\n<h4 id=\"ListSetMap\"><a href=\"#ListSetMap\" class=\"headerlink\" title=\"ListSetMap\"></a>ListSetMap</h4><ul>\n<li>List: List ()null</li>\n<li>Set: null</li>\n<li>Map: MapKeyKeyKey</li>\n</ul>\n<hr>\n<h4 id=\"ArrayArrayList\"><a href=\"#ArrayArrayList\" class=\"headerlink\" title=\"ArrayArrayList\"></a>ArrayArrayList</h4><ul>\n<li>ArrayArrayList</li>\n<li>ArrayArrayList</li>\n<li>ArrayListaddAll()removeAll()iterator()</li>\n<li></li>\n</ul>\n<hr>\n<h4 id=\"ArrayListLinkedList\"><a href=\"#ArrayListLinkedList\" class=\"headerlink\" title=\"ArrayListLinkedList\"></a>ArrayListLinkedList</h4><p>1<strong></strong> ArrayListLinkedList<br>2<strong></strong> ArrayListObjectLinkedList  <br>3<strong></strong> ArrayListLinkedList <br>4<strong></strong> LinkedListArrayListObject<br>5<strong></strong> ArrayListListLinkedListArrayList</p>\n<hr>\n<p><strong></strong><br><em>Iterator</em><em>iterator()</em></p>\n<p><strong>IteratorListIterator</strong></p>\n<ul>\n<li>IteratorSetListListIteratorList</li>\n<li>Iteratornext()*ListIteratornext()previous()</li>\n<li>ListIteratorIterator</li>\n</ul>\n<p><strong>RandomAccess</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//ArrayList</span><br><span class=\"line\">public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br><span class=\"line\">        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class=\"line\">&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//RandomAccess</span><br><span class=\"line\">public interface RandomAccess &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//LinkedList</span><br><span class=\"line\">public class LinkedList&lt;E&gt;</span><br><span class=\"line\">    extends AbstractSequentialList&lt;E&gt;</span><br><span class=\"line\">    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class=\"line\">&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ArrayListRandomAccessLinkedListRandomAccessRandomAccess</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Marker interface used by &lt;tt&gt;List&lt;/tt&gt; implementations to indicate that</span><br><span class=\"line\"> * they support fast (generally constant time) random access.  The primary</span><br><span class=\"line\"> * purpose of this interface is to allow generic algorithms to alter their</span><br><span class=\"line\"> * behavior to provide good performance when applied to either random or</span><br><span class=\"line\"> * sequential access lists.</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure>\n<p>MarkerListrandom accessCollectionsbinarySearch</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static &lt;T&gt;</span><br><span class=\"line\">int binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (list instanceof RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD)</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.indexedBinarySearch(list, key);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.iteratorBinarySearch(list, key);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private static &lt;T&gt;</span><br><span class=\"line\">int indexedBinarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) &#123;</span><br><span class=\"line\">    int low = 0;</span><br><span class=\"line\">    int high = list.size()-1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (low &lt;= high) &#123;</span><br><span class=\"line\">        int mid = (low + high) &gt;&gt;&gt; 1;</span><br><span class=\"line\">        Comparable&lt;? super T&gt; midVal = list.get(mid);</span><br><span class=\"line\">        int cmp = midVal.compareTo(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cmp &lt; 0)</span><br><span class=\"line\">            low = mid + 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (cmp &gt; 0)</span><br><span class=\"line\">            high = mid - 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">return</span> mid; // key found</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> -(low + 1);  // key not found</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private static &lt;T&gt;</span><br><span class=\"line\">int iteratorBinarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    int low = 0;</span><br><span class=\"line\">    int high = list.size()-1;</span><br><span class=\"line\">    ListIterator&lt;? extends Comparable&lt;? super T&gt;&gt; i = list.listIterator();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (low &lt;= high) &#123;</span><br><span class=\"line\">        int mid = (low + high) &gt;&gt;&gt; 1;</span><br><span class=\"line\">        Comparable&lt;? super T&gt; midVal = get(i, mid);</span><br><span class=\"line\">        int cmp = midVal.compareTo(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cmp &lt; 0)</span><br><span class=\"line\">            low = mid + 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (cmp &gt; 0)</span><br><span class=\"line\">            high = mid - 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">return</span> mid; // key found</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> -(low + 1);  // key not found</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>binarySearch()ListListRandomAccessindexedBinarySearch()iteratorBinarySearch()<br>ListRandomAccessfor<br>ListRandomAccessiterator</p>\n<p><strong></strong></p>\n<p><strong>Linked List</strong>/</p>\n<blockquote>\n<p><br>Nodedatanext</p>\n</blockquote>\n<ul>\n<li><p><br><img src=\"/images/linktable1.png\" alt=\"\"></p>\n</li>\n<li><p>next<br><img src=\"/images/linktable2.png\" alt=\"\"></p>\n</li>\n<li><p>next<br><img src=\"/images/linktable3.png\" alt=\"\"></p>\n</li>\n</ul>\n<blockquote>\n<p><br><strong></strong> prevnext<br><img src=\"/images/linktable4.png\" alt=\"\"></p>\n</blockquote>\n<blockquote>\n<p><br><strong></strong> <em>next</em><em>head</em><em>head</em><em>prev</em><br><img src=\"/images/linktable5.png\" alt=\"\"></p>\n</blockquote>\n<hr>\n<h4 id=\"ArrayListVectorLinkedList\"><a href=\"#ArrayListVectorLinkedList\" class=\"headerlink\" title=\"ArrayListVectorLinkedList\"></a>ArrayListVectorLinkedList</h4><ul>\n<li><strong>ArrayList</strong>: </li>\n<li><strong>Vector</strong>: </li>\n<li><strong>LinkedList</strong>: </li>\n</ul>\n<hr>\n<h4 id=\"ArrayList\"><a href=\"#ArrayList\" class=\"headerlink\" title=\"ArrayList\"></a>ArrayList</h4><p>JavaArrayList<br>ArrayListadd()add()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public boolean add(E e) &#123;</span><br><span class=\"line\">    ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class=\"line\">    elementData[size++] = e;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private void ensureCapacityInternal(int minCapacity) &#123;</span><br><span class=\"line\">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">private static int calculateCapacity(Object[] elementData, int minCapacity) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> minCapacity;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">private void ensureExplicitCapacity(int minCapacity) &#123;</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\"></span><br><span class=\"line\">    // overflow-conscious code</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; 0)</span><br><span class=\"line\">        grow(minCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ArrayListensureCapacityInternal(size)sizeensureCapacityInternal()calculateCapacityensureExplicitCapacity()grow()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private void grow(int minCapacity) &#123;</span><br><span class=\"line\">    // ArrayListelementDaata</span><br><span class=\"line\">    int oldCapacity = elementData.length;</span><br><span class=\"line\">    // 1.5</span><br><span class=\"line\">    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);</span><br><span class=\"line\">    // </span><br><span class=\"line\">    // </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; 0)</span><br><span class=\"line\">        // </span><br><span class=\"line\">        newCapacity = minCapacity;</span><br><span class=\"line\">    // </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span><br><span class=\"line\">        newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">    // Arrays.copyOf()elementData</span><br><span class=\"line\">    // elementDatanewCapacity</span><br><span class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong> ArrayListsize</p>\n<hr>\n<h4 id=\"HashMapHashTable\"><a href=\"#HashMapHashTable\" class=\"headerlink\" title=\"HashMapHashTable\"></a>HashMapHashTable</h4><p>1HashMapHashTableMap<br>2 HashMapHashTableHashTablesynchronized<br>3: HashMapHashTable<br>3null keynull value HashMapnullkeykeykeynullHashTablekeynull<br>5 JDK1.8HashMap8HashTable</p>\n<hr>\n<h4 id=\"HashMapHashSet\"><a href=\"#HashMapHashSet\" class=\"headerlink\" title=\"HashMapHashSet?\"></a>HashMapHashSet?</h4><p><strong>HashSetHashMap</strong><br>HashMap|HashSet<br>:|:<br>Map|Set<br>|<br>put()Map|add()Set<br>HashMapKeyHashCode|HashSethashCodehashCodeequals</p>\n<hr>\n<h4 id=\"HashSet\"><a href=\"#HashSet\" class=\"headerlink\" title=\"HashSet\"></a>HashSet</h4><p>hashCodeequalsHashSetHashSetHashSethashCodehashCodeequalsSet</p>\n<hr>\n<h4 id=\"HashMap\"><a href=\"#HashMap\" class=\"headerlink\" title=\"HashMap\"></a>HashMap</h4><p>MapJavaHashMapJDKHashMap</p>\n<ul>\n<li>&lt;=JDK1.7: Table + Entry</li>\n<li><blockquote>\n<p>=JDK1.8: Table + Entry/</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h4><p><strong>Hash</strong><br>Hash<br> f(x) = x mod max<br> f(x) = x &amp; max<br>HashMap </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">7 &amp; 33 = 1</span><br><span class=\"line\">    </span><br><span class=\"line\">    000111</span><br><span class=\"line\">  &amp; 100001</span><br><span class=\"line\">  --------</span><br><span class=\"line\">    000001 = 1</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h4><p>100Hash10HashMapK-VputHashMapkeyhashCodekeyhashCode Hash<br>HashMap  Hash   Hash</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/hash1.png\" alt=\"hash\"><br><br>Table: NodeNode[] table<br>Node: NodeHashMapMap.EntryK-V<br>HashMap<br>DEFAULT_INITIAL_CAPACITY: Tabale1 &lt;&lt; 42^4 = 16<br>MAXIMUM_CAPACITY: Table1 &lt;&lt; 302^30 = 1073741824<br>DEFAULT_LOAD_FACTOR:  &gt;  * Table0.75<br>TREEIFY_THRESHOLD: TableNode8<br>UNTREEIFY_THRESHOLD: TableEntry6<br>MIN_TREEIFY_CAPACITY: Table<br>size: HashMap<br>threshold: HashMapNodeNode[] tablelength16loadFactor0.75threshold = length * loadFactor<br>loadFactor: 0.17<br>modCount: HashMap<br>HashMapNodeTableDEFAULT_INITIAL_CAPACITY</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123;</span><br><span class=\"line\">    final int <span class=\"built_in\">hash</span>; //keyHash</span><br><span class=\"line\">    final K key; //key</span><br><span class=\"line\">    V value; //value</span><br><span class=\"line\">    Node&lt;K,V&gt; next; //</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>TableNodeNodeheadernext<strong>Hash</strong></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map.put(<span class=\"string\">\"loonycoder\"</span>, <span class=\"string\">\"18\"</span>);</span><br></pre></td></tr></table></figure>\n<p>HashMaploonycoderKeyhashCodeHashHashMapkeyHash<br>JDK1.7HashNodeJDK1.8TableTREEIFY_THRESHOLDTreeNode:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; &#123;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; parent;  // red-black tree links</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; left;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; right;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; prev;    // needed to unlink next upon deletion</span><br><span class=\"line\">    boolean red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Hash</strong>HashMap <strong></strong>HashHashMap Hash<strong></strong>keyJDK1.8HashMapTableNode<br><img src=\"http://cdn.tycoding.cn/JDK1.8%E4%B9%8B%E5%90%8E%E7%9A%84HashMap%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.jpg\" alt=\"\"></p>\n<p><strong></strong><br>HashMap</p>\n<ul>\n<li>HashMapkeyhashCodeputkeyhashCodeequalsvalue</li>\n<li>HashMapputkeyhashCodeHashHashMapHash</li>\n<li>Hash <strong></strong> keyTableNode8TreeNode</li>\n</ul>\n<hr>\n<h4 id=\"CollectionCollections\"><a href=\"#CollectionCollections\" class=\"headerlink\" title=\"CollectionCollections\"></a>CollectionCollections</h4><ul>\n<li>CollectionSetList</li>\n<li>Collectionsjava.util</li>\n</ul>\n<hr>\n<h4 id=\"ComparableComparator\"><a href=\"#ComparableComparator\" class=\"headerlink\" title=\"ComparableComparator\"></a>ComparableComparator</h4><ul>\n<li>Comparablejava.langcompareTo(Object obj) </li>\n<li>Comparatorjava.utilcompare(Object obj1, Object obj2)<br>ComparableComparator</li>\n</ul>\n<h4 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h4><h5 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"Collection\"></a>Collection</h5><p><img src=\"/images/collection1.png\" alt=\"Collection\"></p>\n<p><strong>List</strong></p>\n<p>ArrayList: Object<br>Vector: Object<br>LinkedList: </p>\n<p><strong>Set</strong></p>\n<p>HashSet: HashMapHashMap<br>LinkedHashSet: LinkedHashSetHashSetLinkedHashMap<br>TreeSet </p>\n<h5 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h5><p><img src=\"/images/map1.png\" alt=\"Map\"></p>\n<ul>\n<li>HashMap: JDK1.8HashMapHashMapHashJDK1.8TableNode8</li>\n<li>LinkedHashMap: LinkedHashMapHashMap/LinkedHashMap</li>\n<li>HashTable: +HashTableHash<br>TreeMap: </li>\n</ul>\n<hr>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li><br>JavamainJVMmain</li>\n</ul>\n<hr>\n<h4 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h4><p>JVM</p>\n<p>JVMJVM</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><strong>Method Area</strong>   Class</li>\n<li><strong>Heap</strong> newJVM<br>JavaJava</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><strong></strong> JavaJava</li>\n<li><strong></strong> JavaJavaJavanative</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong>Program Counter Register</strong>JavaOutOfMemoryError</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><strong></strong> </li>\n<li><strong></strong> </li>\n</ul>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">new</td>\n<td align=\"left\">start()</td>\n</tr>\n<tr>\n<td align=\"left\">runnable</td>\n<td align=\"left\">Java</td>\n</tr>\n<tr>\n<td align=\"left\">blocked</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">waiting</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">time_waiting</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">terminated</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<p><br><img src=\"/images/thread2.png\" alt=\"\"><br>NEWstart()wait()WAITINGwait(long)join(long)BLOCKED</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>CPUCOUCPU<strong></strong> <strong></strong></p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"?\"></a>?</h4><p>A2B1AB12<br><img src=\"/images/deadlock.png\" alt=\"\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class DeadLockDemo &#123;</span><br><span class=\"line\">    private static Object resource1 = new Object();// 1</span><br><span class=\"line\">    private static Object resource2 = new Object();// 2</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        new Thread(() -&gt; &#123;</span><br><span class=\"line\">            synchronized (resource1) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    Thread.sleep(1000);</span><br><span class=\"line\">                &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource2\"</span>);</span><br><span class=\"line\">                synchronized (resource2) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">\" 1\"</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        new Thread(() -&gt; &#123;</span><br><span class=\"line\">            synchronized (resource2) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    Thread.sleep(1000);</span><br><span class=\"line\">                &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource1\"</span>);</span><br><span class=\"line\">                synchronized (resource1) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">\" 2\"</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[ 1,5,main]get resource1</span><br><span class=\"line\">Thread[ 2,5,main]get resource2</span><br><span class=\"line\">Thread[ 1,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 2,5,main]waiting get resource1</span><br></pre></td></tr></table></figure>\n<p>1resource1resource1resource1sleep112resource2resource2sleep2111resource2resource222resource1resource11<br></p>\n<p>1<br>2<br>3<br>4</p>\n<p><br>1<br>2<br>3</p>\n<p>: 2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Thread(() -&gt; &#123;</span><br><span class=\"line\">    synchronized (resource1) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">        &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource2\"</span>);</span><br><span class=\"line\">        synchronized (resource2) &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">\" 2\"</span>).start();</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[ 1,5,main]get resource1</span><br><span class=\"line\">Thread[ 1,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 1,5,main]get resource2</span><br><span class=\"line\">Thread[ 2,5,main]get resource1</span><br><span class=\"line\">Thread[ 2,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 2,5,main]get resource2</span><br><span class=\"line\"></span><br><span class=\"line\">Process finished with <span class=\"built_in\">exit</span> code 0</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"sleep-wait-\"><a href=\"#sleep-wait-\" class=\"headerlink\" title=\"sleep()wait()\"></a>sleep()wait()</h4><p><strong>sleep  wait </strong></p>\n<ul>\n<li></li>\n<li>wait()/sleep()</li>\n<li>wait()notify()notifyAll()sleep()</li>\n</ul>\n<hr>\n<h4 id=\"start-run-run-\"><a href=\"#start-run-run-\" class=\"headerlink\" title=\"start()run()run()\"></a>start()run()run()</h4><p>newThreadstart()start()run()run()run()main<br><strong>startrun()Threadmain</strong></p>\n<hr>\n<h4 id=\"synchronized\"><a href=\"#synchronized\" class=\"headerlink\" title=\"synchronized\"></a>synchronized</h4><p>synchronizedsynchronized<br>synchronized</p>\n<ul>\n<li><p><strong></strong> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// `synchronized``synchronized(this)`</span><br><span class=\"line\">public synchronized void <span class=\"function\"><span class=\"title\">add</span></span>() &#123;&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p><strong></strong> this</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// `synchronized``synzhronized(T.class)`(T)</span><br><span class=\"line\">public synchronized static void <span class=\"function\"><span class=\"title\">add</span></span>() &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong></p>\n</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p>Java</p>\n<hr>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"JDKJRE\"><a href=\"#JDKJRE\" class=\"headerlink\" title=\"JDKJRE\"></a>JDKJRE</h4><p>1jreJava Runtime EnvironmentJavaJavaJava<br>2jdkJavatools.jar</p>\n<hr>\n<h4 id=\"-equals\"><a href=\"#-equals\" class=\"headerlink\" title=\"==  equals\"></a>==  equals</h4><p>1==(intdouble..)<br>2equalsObjectequals<br>Objectequals</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public boolean equals(Object obj) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> (this == obj);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>new</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class EqualsTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User a = new User();</span><br><span class=\"line\">        User b = new User();</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public boolean equals(Object o) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (this == o) <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!(o instanceof User)) <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        User user = (User) o;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> age == user.age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">hashCode</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Objects.hash(age);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"hashCode-equals-true\"><a href=\"#hashCode-equals-true\" class=\"headerlink\" title=\"hashCode()equals()true\"></a>hashCode()equals()true</h4><p><strong>(equals()true)hashCode()</strong><br><strong>hashCode()equals()</strong></p>\n<p>JVMhashCode()ObjectintJava(MapHashMap)hashCode()equals()equals()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class EqualsTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User a = new User();</span><br><span class=\"line\">        User b = new User();</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">false</span></span><br><span class=\"line\">        System.out.println(a.hashCode() == b.hashCode()); //<span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    private int age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"final\"><a href=\"#final\" class=\"headerlink\" title=\"final\"></a>final</h4><p><br>1final<br>2final</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class FinalTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static final User USER = new User();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        User u2 = new User();</span><br><span class=\"line\">//        user = u2; // ERROR</span><br><span class=\"line\">        USER.age = 23;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class User &#123;</span><br><span class=\"line\">    int age = 12;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3privatefinalprivatefinal</p>\n<hr>\n<h4 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h4><p><strong>String</strong></p>\n<p>Javaintshortlongcharbooleanfloatdoublebyte</p>\n<p>1StringfinalJVMJVM<br>2String s = a; s += b;aabsab<br>3String s = new String(ab)ab(String str = ab)sabnewString</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        String a = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">        String b = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">        String c = new String(<span class=\"string\">\"abc\"</span>);</span><br><span class=\"line\">        System.out.println(a == b); //<span class=\"literal\">true</span></span><br><span class=\"line\">        System.out.println(a.equals(b)); //<span class=\"literal\">true</span></span><br><span class=\"line\">        System.out.println(a.equals(c)); //<span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>StringStringBufferStringBuilder</strong><br>1StringStringBufferStringBuilderStringBuffer<br>2StringequalshashCode()StringBufferequalsnew StringBuffer()StringBufferJava<br>3StringBufferStringBuilder</p>\n<hr>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><p>staticstaticstaticstaticstatic</p>\n<p>staticstatic<br>staticstaticstatic</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>JavaOOPJava<br>()()</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">int</td>\n<td align=\"center\">Integer</td>\n</tr>\n<tr>\n<td align=\"center\">byte</td>\n<td align=\"center\">Byte</td>\n</tr>\n<tr>\n<td align=\"center\">short</td>\n<td align=\"center\">Short</td>\n</tr>\n<tr>\n<td align=\"center\">long</td>\n<td align=\"center\">Long</td>\n</tr>\n<tr>\n<td align=\"center\">float</td>\n<td align=\"center\">Float</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">Double</td>\n</tr>\n<tr>\n<td align=\"center\">char</td>\n<td align=\"center\">Char</td>\n</tr>\n<tr>\n<td align=\"center\">boolean</td>\n<td align=\"center\">Boolean</td>\n</tr>\n</tbody></table>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    Integer i1 = 100;</span><br><span class=\"line\">    Integer i2 = 100;</span><br><span class=\"line\">    Integer i3 = 200;</span><br><span class=\"line\">    Integer i4 = 200;</span><br><span class=\"line\">    System.out.println(i1 == i2);</span><br><span class=\"line\">    System.out.println(i3 == i4);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>JavavalueOf()IntegervalueOf()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static Integer valueOf(int i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class=\"line\">        <span class=\"built_in\">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Integer(i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>IntegervalueOf()IntegerCacheIntegerCachenew IntegerIntegerCache</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private static class IntegerCache &#123;</span><br><span class=\"line\">    static final int low = -128;</span><br><span class=\"line\">    static final int high;</span><br><span class=\"line\">    static final Integer cache[];</span><br><span class=\"line\"></span><br><span class=\"line\">    static &#123;</span><br><span class=\"line\">        // high value may be configured by property</span><br><span class=\"line\">        int h = 127;</span><br><span class=\"line\">        String integerCacheHighPropValue =</span><br><span class=\"line\">            sun.misc.VM.getSavedProperty(<span class=\"string\">\"java.lang.Integer.IntegerCache.high\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (integerCacheHighPropValue != null) &#123;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                int i = parseInt(integerCacheHighPropValue);</span><br><span class=\"line\">                i = Math.max(i, 127);</span><br><span class=\"line\">                // Maximum array size is Integer.MAX_VALUE</span><br><span class=\"line\">                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);</span><br><span class=\"line\">            &#125; catch( NumberFormatException nfe) &#123;</span><br><span class=\"line\">                // If the property cannot be parsed into an int, ignore it.</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        high = h;</span><br><span class=\"line\"></span><br><span class=\"line\">        cache = new Integer[(high - low) + 1];</span><br><span class=\"line\">        int j = low;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int k = 0; k &lt; cache.length; k++)</span><br><span class=\"line\">            cache[k] = new Integer(j++);</span><br><span class=\"line\"></span><br><span class=\"line\">        // range [-128, 127] must be interned (JLS7 5.1.7)</span><br><span class=\"line\">        assert IntegerCache.high &gt;= 127;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private <span class=\"function\"><span class=\"title\">IntegerCache</span></span>() &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>intInteger[-128, 127]IntegerCachenewIntegerfalse<br>longshortLongCacheShortCache</p>\n<hr>\n<h4 id=\"OverridingOverloaded\"><a href=\"#OverridingOverloaded\" class=\"headerlink\" title=\"OverridingOverloaded\"></a>OverridingOverloaded</h4><p>OverridingOverloadedJava<br>Overriding: <br>Overloaded: </p>\n<hr>\n<h4 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h4><p>Java<br><br>implements</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li> (  )</li>\n<li> (  )</li>\n<li></li>\n<li>finalfinal</li>\n<li>publicprivateprotectedpublic</li>\n<li></li>\n</ul>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong>Java</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class TransferTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int a = 1;</span><br><span class=\"line\">        Integer b = 2;</span><br><span class=\"line\">        swap(a, b);</span><br><span class=\"line\">        System.out.println(a);</span><br><span class=\"line\">        System.out.println(b);</span><br><span class=\"line\"></span><br><span class=\"line\">        int[] arr = &#123;1, 2&#125;;</span><br><span class=\"line\">        swap(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void swap(int[] arr) &#123;</span><br><span class=\"line\">        arr[0] = 10;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static void swap(int a, Integer b) &#123;</span><br><span class=\"line\">        a = 10;</span><br><span class=\"line\">        b = 20;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br>a,bswaparrswap</p>\n<hr>\n<h4 id=\"IO\"><a href=\"#IO\" class=\"headerlink\" title=\"IO\"></a>IO</h4><p><img src=\"/images/io.png\" alt=\"IO\"></p>\n<p><strong>1Java</strong><br>InputStreamOutputStreamInputStreamReaderOutputStreamWriter</p>\n<p><strong>2Java IO</strong><br>Javaread()readLine()</p>\n<p><strong>3</strong><br>InputStreamOutputStream<br>InputStreamReaderOutputStreamWriter<br></p>\n<p><strong>4NIO</strong><br>IOServerSocketread()accept()CPU<br>NIO</p>\n<ul>\n<li>Buffer Buffer</li>\n<li>Charset </li>\n<li>Channel IOBuffer</li>\n</ul>\n<hr>\n<h4 id=\"ListSetMap\"><a href=\"#ListSetMap\" class=\"headerlink\" title=\"ListSetMap\"></a>ListSetMap</h4><ul>\n<li>List: List ()null</li>\n<li>Set: null</li>\n<li>Map: MapKeyKeyKey</li>\n</ul>\n<hr>\n<h4 id=\"ArrayArrayList\"><a href=\"#ArrayArrayList\" class=\"headerlink\" title=\"ArrayArrayList\"></a>ArrayArrayList</h4><ul>\n<li>ArrayArrayList</li>\n<li>ArrayArrayList</li>\n<li>ArrayListaddAll()removeAll()iterator()</li>\n<li></li>\n</ul>\n<hr>\n<h4 id=\"ArrayListLinkedList\"><a href=\"#ArrayListLinkedList\" class=\"headerlink\" title=\"ArrayListLinkedList\"></a>ArrayListLinkedList</h4><p>1<strong></strong> ArrayListLinkedList<br>2<strong></strong> ArrayListObjectLinkedList  <br>3<strong></strong> ArrayListLinkedList <br>4<strong></strong> LinkedListArrayListObject<br>5<strong></strong> ArrayListListLinkedListArrayList</p>\n<hr>\n<p><strong></strong><br><em>Iterator</em><em>iterator()</em></p>\n<p><strong>IteratorListIterator</strong></p>\n<ul>\n<li>IteratorSetListListIteratorList</li>\n<li>Iteratornext()*ListIteratornext()previous()</li>\n<li>ListIteratorIterator</li>\n</ul>\n<p><strong>RandomAccess</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//ArrayList</span><br><span class=\"line\">public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br><span class=\"line\">        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class=\"line\">&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//RandomAccess</span><br><span class=\"line\">public interface RandomAccess &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//LinkedList</span><br><span class=\"line\">public class LinkedList&lt;E&gt;</span><br><span class=\"line\">    extends AbstractSequentialList&lt;E&gt;</span><br><span class=\"line\">    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class=\"line\">&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ArrayListRandomAccessLinkedListRandomAccessRandomAccess</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Marker interface used by &lt;tt&gt;List&lt;/tt&gt; implementations to indicate that</span><br><span class=\"line\"> * they support fast (generally constant time) random access.  The primary</span><br><span class=\"line\"> * purpose of this interface is to allow generic algorithms to alter their</span><br><span class=\"line\"> * behavior to provide good performance when applied to either random or</span><br><span class=\"line\"> * sequential access lists.</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure>\n<p>MarkerListrandom accessCollectionsbinarySearch</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static &lt;T&gt;</span><br><span class=\"line\">int binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (list instanceof RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD)</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.indexedBinarySearch(list, key);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.iteratorBinarySearch(list, key);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private static &lt;T&gt;</span><br><span class=\"line\">int indexedBinarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) &#123;</span><br><span class=\"line\">    int low = 0;</span><br><span class=\"line\">    int high = list.size()-1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (low &lt;= high) &#123;</span><br><span class=\"line\">        int mid = (low + high) &gt;&gt;&gt; 1;</span><br><span class=\"line\">        Comparable&lt;? super T&gt; midVal = list.get(mid);</span><br><span class=\"line\">        int cmp = midVal.compareTo(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cmp &lt; 0)</span><br><span class=\"line\">            low = mid + 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (cmp &gt; 0)</span><br><span class=\"line\">            high = mid - 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">return</span> mid; // key found</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> -(low + 1);  // key not found</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private static &lt;T&gt;</span><br><span class=\"line\">int iteratorBinarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    int low = 0;</span><br><span class=\"line\">    int high = list.size()-1;</span><br><span class=\"line\">    ListIterator&lt;? extends Comparable&lt;? super T&gt;&gt; i = list.listIterator();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (low &lt;= high) &#123;</span><br><span class=\"line\">        int mid = (low + high) &gt;&gt;&gt; 1;</span><br><span class=\"line\">        Comparable&lt;? super T&gt; midVal = get(i, mid);</span><br><span class=\"line\">        int cmp = midVal.compareTo(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cmp &lt; 0)</span><br><span class=\"line\">            low = mid + 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (cmp &gt; 0)</span><br><span class=\"line\">            high = mid - 1;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">return</span> mid; // key found</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> -(low + 1);  // key not found</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>binarySearch()ListListRandomAccessindexedBinarySearch()iteratorBinarySearch()<br>ListRandomAccessfor<br>ListRandomAccessiterator</p>\n<p><strong></strong></p>\n<p><strong>Linked List</strong>/</p>\n<blockquote>\n<p><br>Nodedatanext</p>\n</blockquote>\n<ul>\n<li><p><br><img src=\"/images/linktable1.png\" alt=\"\"></p>\n</li>\n<li><p>next<br><img src=\"/images/linktable2.png\" alt=\"\"></p>\n</li>\n<li><p>next<br><img src=\"/images/linktable3.png\" alt=\"\"></p>\n</li>\n</ul>\n<blockquote>\n<p><br><strong></strong> prevnext<br><img src=\"/images/linktable4.png\" alt=\"\"></p>\n</blockquote>\n<blockquote>\n<p><br><strong></strong> <em>next</em><em>head</em><em>head</em><em>prev</em><br><img src=\"/images/linktable5.png\" alt=\"\"></p>\n</blockquote>\n<hr>\n<h4 id=\"ArrayListVectorLinkedList\"><a href=\"#ArrayListVectorLinkedList\" class=\"headerlink\" title=\"ArrayListVectorLinkedList\"></a>ArrayListVectorLinkedList</h4><ul>\n<li><strong>ArrayList</strong>: </li>\n<li><strong>Vector</strong>: </li>\n<li><strong>LinkedList</strong>: </li>\n</ul>\n<hr>\n<h4 id=\"ArrayList\"><a href=\"#ArrayList\" class=\"headerlink\" title=\"ArrayList\"></a>ArrayList</h4><p>JavaArrayList<br>ArrayListadd()add()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public boolean add(E e) &#123;</span><br><span class=\"line\">    ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class=\"line\">    elementData[size++] = e;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">private void ensureCapacityInternal(int minCapacity) &#123;</span><br><span class=\"line\">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">private static int calculateCapacity(Object[] elementData, int minCapacity) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> minCapacity;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">private void ensureExplicitCapacity(int minCapacity) &#123;</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\"></span><br><span class=\"line\">    // overflow-conscious code</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; 0)</span><br><span class=\"line\">        grow(minCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ArrayListensureCapacityInternal(size)sizeensureCapacityInternal()calculateCapacityensureExplicitCapacity()grow()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private void grow(int minCapacity) &#123;</span><br><span class=\"line\">    // ArrayListelementDaata</span><br><span class=\"line\">    int oldCapacity = elementData.length;</span><br><span class=\"line\">    // 1.5</span><br><span class=\"line\">    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);</span><br><span class=\"line\">    // </span><br><span class=\"line\">    // </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; 0)</span><br><span class=\"line\">        // </span><br><span class=\"line\">        newCapacity = minCapacity;</span><br><span class=\"line\">    // </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span><br><span class=\"line\">        newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">    // Arrays.copyOf()elementData</span><br><span class=\"line\">    // elementDatanewCapacity</span><br><span class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong> ArrayListsize</p>\n<hr>\n<h4 id=\"HashMapHashTable\"><a href=\"#HashMapHashTable\" class=\"headerlink\" title=\"HashMapHashTable\"></a>HashMapHashTable</h4><p>1HashMapHashTableMap<br>2 HashMapHashTableHashTablesynchronized<br>3: HashMapHashTable<br>3null keynull value HashMapnullkeykeykeynullHashTablekeynull<br>5 JDK1.8HashMap8HashTable</p>\n<hr>\n<h4 id=\"HashMapHashSet\"><a href=\"#HashMapHashSet\" class=\"headerlink\" title=\"HashMapHashSet?\"></a>HashMapHashSet?</h4><p><strong>HashSetHashMap</strong><br>HashMap|HashSet<br>:|:<br>Map|Set<br>|<br>put()Map|add()Set<br>HashMapKeyHashCode|HashSethashCodehashCodeequals</p>\n<hr>\n<h4 id=\"HashSet\"><a href=\"#HashSet\" class=\"headerlink\" title=\"HashSet\"></a>HashSet</h4><p>hashCodeequalsHashSetHashSetHashSethashCodehashCodeequalsSet</p>\n<hr>\n<h4 id=\"HashMap\"><a href=\"#HashMap\" class=\"headerlink\" title=\"HashMap\"></a>HashMap</h4><p>MapJavaHashMapJDKHashMap</p>\n<ul>\n<li>&lt;=JDK1.7: Table + Entry</li>\n<li><blockquote>\n<p>=JDK1.8: Table + Entry/</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h4><p><strong>Hash</strong><br>Hash<br> f(x) = x mod max<br> f(x) = x &amp; max<br>HashMap </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">7 &amp; 33 = 1</span><br><span class=\"line\">    </span><br><span class=\"line\">    000111</span><br><span class=\"line\">  &amp; 100001</span><br><span class=\"line\">  --------</span><br><span class=\"line\">    000001 = 1</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h4><p>100Hash10HashMapK-VputHashMapkeyhashCodekeyhashCode Hash<br>HashMap  Hash   Hash</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/hash1.png\" alt=\"hash\"><br><br>Table: NodeNode[] table<br>Node: NodeHashMapMap.EntryK-V<br>HashMap<br>DEFAULT_INITIAL_CAPACITY: Tabale1 &lt;&lt; 42^4 = 16<br>MAXIMUM_CAPACITY: Table1 &lt;&lt; 302^30 = 1073741824<br>DEFAULT_LOAD_FACTOR:  &gt;  * Table0.75<br>TREEIFY_THRESHOLD: TableNode8<br>UNTREEIFY_THRESHOLD: TableEntry6<br>MIN_TREEIFY_CAPACITY: Table<br>size: HashMap<br>threshold: HashMapNodeNode[] tablelength16loadFactor0.75threshold = length * loadFactor<br>loadFactor: 0.17<br>modCount: HashMap<br>HashMapNodeTableDEFAULT_INITIAL_CAPACITY</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123;</span><br><span class=\"line\">    final int <span class=\"built_in\">hash</span>; //keyHash</span><br><span class=\"line\">    final K key; //key</span><br><span class=\"line\">    V value; //value</span><br><span class=\"line\">    Node&lt;K,V&gt; next; //</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>TableNodeNodeheadernext<strong>Hash</strong></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map.put(<span class=\"string\">\"loonycoder\"</span>, <span class=\"string\">\"18\"</span>);</span><br></pre></td></tr></table></figure>\n<p>HashMaploonycoderKeyhashCodeHashHashMapkeyHash<br>JDK1.7HashNodeJDK1.8TableTREEIFY_THRESHOLDTreeNode:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; &#123;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; parent;  // red-black tree links</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; left;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; right;</span><br><span class=\"line\">    TreeNode&lt;K,V&gt; prev;    // needed to unlink next upon deletion</span><br><span class=\"line\">    boolean red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Hash</strong>HashMap <strong></strong>HashHashMap Hash<strong></strong>keyJDK1.8HashMapTableNode<br><img src=\"http://cdn.tycoding.cn/JDK1.8%E4%B9%8B%E5%90%8E%E7%9A%84HashMap%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.jpg\" alt=\"\"></p>\n<p><strong></strong><br>HashMap</p>\n<ul>\n<li>HashMapkeyhashCodeputkeyhashCodeequalsvalue</li>\n<li>HashMapputkeyhashCodeHashHashMapHash</li>\n<li>Hash <strong></strong> keyTableNode8TreeNode</li>\n</ul>\n<hr>\n<h4 id=\"CollectionCollections\"><a href=\"#CollectionCollections\" class=\"headerlink\" title=\"CollectionCollections\"></a>CollectionCollections</h4><ul>\n<li>CollectionSetList</li>\n<li>Collectionsjava.util</li>\n</ul>\n<hr>\n<h4 id=\"ComparableComparator\"><a href=\"#ComparableComparator\" class=\"headerlink\" title=\"ComparableComparator\"></a>ComparableComparator</h4><ul>\n<li>Comparablejava.langcompareTo(Object obj) </li>\n<li>Comparatorjava.utilcompare(Object obj1, Object obj2)<br>ComparableComparator</li>\n</ul>\n<h4 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h4><h5 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"Collection\"></a>Collection</h5><p><img src=\"/images/collection1.png\" alt=\"Collection\"></p>\n<p><strong>List</strong></p>\n<p>ArrayList: Object<br>Vector: Object<br>LinkedList: </p>\n<p><strong>Set</strong></p>\n<p>HashSet: HashMapHashMap<br>LinkedHashSet: LinkedHashSetHashSetLinkedHashMap<br>TreeSet </p>\n<h5 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h5><p><img src=\"/images/map1.png\" alt=\"Map\"></p>\n<ul>\n<li>HashMap: JDK1.8HashMapHashMapHashJDK1.8TableNode8</li>\n<li>LinkedHashMap: LinkedHashMapHashMap/LinkedHashMap</li>\n<li>HashTable: +HashTableHash<br>TreeMap: </li>\n</ul>\n<hr>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li><br>JavamainJVMmain</li>\n</ul>\n<hr>\n<h4 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h4><p>JVM</p>\n<p>JVMJVM</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><strong>Method Area</strong>   Class</li>\n<li><strong>Heap</strong> newJVM<br>JavaJava</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><strong></strong> JavaJava</li>\n<li><strong></strong> JavaJavaJavanative</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong>Program Counter Register</strong>JavaOutOfMemoryError</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><strong></strong> </li>\n<li><strong></strong> </li>\n</ul>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">new</td>\n<td align=\"left\">start()</td>\n</tr>\n<tr>\n<td align=\"left\">runnable</td>\n<td align=\"left\">Java</td>\n</tr>\n<tr>\n<td align=\"left\">blocked</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">waiting</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">time_waiting</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">terminated</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<p><br><img src=\"/images/thread2.png\" alt=\"\"><br>NEWstart()wait()WAITINGwait(long)join(long)BLOCKED</p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>CPUCOUCPU<strong></strong> <strong></strong></p>\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"?\"></a>?</h4><p>A2B1AB12<br><img src=\"/images/deadlock.png\" alt=\"\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class DeadLockDemo &#123;</span><br><span class=\"line\">    private static Object resource1 = new Object();// 1</span><br><span class=\"line\">    private static Object resource2 = new Object();// 2</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        new Thread(() -&gt; &#123;</span><br><span class=\"line\">            synchronized (resource1) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    Thread.sleep(1000);</span><br><span class=\"line\">                &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource2\"</span>);</span><br><span class=\"line\">                synchronized (resource2) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">\" 1\"</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        new Thread(() -&gt; &#123;</span><br><span class=\"line\">            synchronized (resource2) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    Thread.sleep(1000);</span><br><span class=\"line\">                &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource1\"</span>);</span><br><span class=\"line\">                synchronized (resource1) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">\" 2\"</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[ 1,5,main]get resource1</span><br><span class=\"line\">Thread[ 2,5,main]get resource2</span><br><span class=\"line\">Thread[ 1,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 2,5,main]waiting get resource1</span><br></pre></td></tr></table></figure>\n<p>1resource1resource1resource1sleep112resource2resource2sleep2111resource2resource222resource1resource11<br></p>\n<p>1<br>2<br>3<br>4</p>\n<p><br>1<br>2<br>3</p>\n<p>: 2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Thread(() -&gt; &#123;</span><br><span class=\"line\">    synchronized (resource1) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource1\"</span>);</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">        &#125; catch (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">\"waiting get resource2\"</span>);</span><br><span class=\"line\">        synchronized (resource2) &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread() + <span class=\"string\">\"get resource2\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">\" 2\"</span>).start();</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[ 1,5,main]get resource1</span><br><span class=\"line\">Thread[ 1,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 1,5,main]get resource2</span><br><span class=\"line\">Thread[ 2,5,main]get resource1</span><br><span class=\"line\">Thread[ 2,5,main]waiting get resource2</span><br><span class=\"line\">Thread[ 2,5,main]get resource2</span><br><span class=\"line\"></span><br><span class=\"line\">Process finished with <span class=\"built_in\">exit</span> code 0</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"sleep-wait-\"><a href=\"#sleep-wait-\" class=\"headerlink\" title=\"sleep()wait()\"></a>sleep()wait()</h4><p><strong>sleep  wait </strong></p>\n<ul>\n<li></li>\n<li>wait()/sleep()</li>\n<li>wait()notify()notifyAll()sleep()</li>\n</ul>\n<hr>\n<h4 id=\"start-run-run-\"><a href=\"#start-run-run-\" class=\"headerlink\" title=\"start()run()run()\"></a>start()run()run()</h4><p>newThreadstart()start()run()run()run()main<br><strong>startrun()Threadmain</strong></p>\n<hr>\n<h4 id=\"synchronized\"><a href=\"#synchronized\" class=\"headerlink\" title=\"synchronized\"></a>synchronized</h4><p>synchronizedsynchronized<br>synchronized</p>\n<ul>\n<li><p><strong></strong> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// `synchronized``synchronized(this)`</span><br><span class=\"line\">public synchronized void <span class=\"function\"><span class=\"title\">add</span></span>() &#123;&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p><strong></strong> this</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// `synchronized``synzhronized(T.class)`(T)</span><br><span class=\"line\">public synchronized static void <span class=\"function\"><span class=\"title\">add</span></span>() &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong></p>\n</li>\n</ul>\n<hr>\n"},{"title":"Shiro","date":"2018-09-22T16:00:00.000Z","_content":"\n### Shiro\n\n\n- [Shrio-](https://www.iteye.com/blog/jinnianshilongnian-2047643)\n- [Spring Boot Shiro](https://mrbird.cc/Spring-Boot-Shiro%20session.html)\n\n\n![](/images/shiro1.png)\n\nShiroorg.apache.shiro.session.mgt.eis.SessionDAOShiroSessionSessionIDSessionIDIP\n\n![](/images/shiro2.png)\n\n\n- \n- \n\n#### \n\n##### ShiroConfig\nRedisShiroSessionSessionDAO\n```bash\n@Bean\npublic RedisSessionDAO redisSessionDAO() {\n    RedisSessionDAO redisSessionDAO = new RedisSessionDAO();\n    redisSessionDAO.setRedisManager(redisManager());\n    return redisSessionDAO;\n}\n\n@ConfigurationProperties(prefix = \"redis.shiro\")\npublic RedisManager redisManager() {\n    return new RedisManager();\n}\n```\n\nSessionDAOSessionManager\n```bash\n@Bean\npublic SessionManager sessionManager() {\n    DefaultWebSessionManager defaultWebSessionManager = new DefaultWebSessionManager();\n    defaultWebSessionManager.setCacheManager(cacheManager());\n    defaultWebSessionManager.setSessionDAO(sessionDAO());\n    return sessionManager;\n}\n```\n\nSessionManagerSecurityManager\n```bash\n@Bean\npublic SecurityManager securityManager() {\n    DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();\n    securityManager.setRealm(realm());\n\n    //sessionManager\n    securityManager.setSessionManager(sessionManager());\n    //\n    securityManager.setCacheManager(cacheManager());\n\n    return securityManager;\n}\n```\n\n#### \n\n##### OnlineUser.java\n```bash\n@Data\npublic class OnlineUser implements Serializable {\n\n    private String id; //sessionId\n\n    private String uid; //ID\n\n    private String username; //\n\n    private String host; //\n\n    private String address; //\n\n    @DateTimeFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\", timezone = \"GMT+8\")\n    private Date startTime; //\n\n    @DateTimeFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\", timezone = \"GMT+8\")\n    private Date endTime; //\n\n    private Long timeout; //\n\n    private String status; //\n\n    public void setHost(String host) {\n        this.host = host.equals(\"0:0:0:0:0:0:0:1\") ? \"127.0.0.1\" : host;\n    }\n}\n```\n\n##### Service\nservice\n```bash\n@Override\npublic List<OnlineUser> list() {\n    List<OnlineUser> list = new ArrayList<>();\n    Collection<Session> sessions = sessionDAO.getActiveSessions(); //\n    for (Session session : sessions) {\n        if (session != null) {\n            OnlineUser onlineUser = new OnlineUser();\n            SimplePrincipalCollection principalCollection;\n            User user;\n            //session\n            if (session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY) == null) {\n                continue;\n            } else {\n                //sessionsessionprincipalCollection\n                principalCollection = (SimplePrincipalCollection) session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY);\n                user = (User) principalCollection.getPrimaryPrincipal();\n                onlineUser.setUid(user.getId().toString());\n                onlineUser.setUsername(user.getUsername());\n            }\n            onlineUser.setId(session.getId().toString());\n            onlineUser.setHost(session.getHost());\n            onlineUser.setAddress(AddressUtil.getAddress(session.getHost()));\n            onlineUser.setStartTime(session.getStartTimestamp());\n            onlineUser.setEndTime(session.getLastAccessTime());\n            long timeout = session.getTimeout();\n            onlineUser.setTimeout(timeout);\n            onlineUser.setStatus(timeout == 0L ? \"0\" : \"1\"); //0 1\n            list.add(onlineUser);\n        }\n    }\n    return list;\n}\n```\n\ngetActiveSessions()SessionDefaultSubjectContext.PRINCIPALS_SESSION_KEYSubjectsession keysessionssessionsession\nsession.getHost()HostIP\nAddressUtil.getAddress(session.getHost())IPip2region\n\n##### IP\n\nhttps://github.com/lionsoul2014/ip2region\nip2region\n```bash\n<dependency>\n    <groupId>org.lionsoul</groupId>\n    <artifactId>ip2region</artifactId>\n    <version>1.7.2</version>\n</dependency>\n```\nip2region.dbresources/config/\nAddressUtil.java\nhttps://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java\n\n```bash\npublic class AddressUtil {\n\n    public static String getAddress(String ip) {\n        //db\n        String dbPath = AddressUtil.class.getResource(\"/config/ip2region.db\").getPath();\n\n        File file = new File(dbPath);\n\n        if (!file.exists()) {\n            throw new GlobalException(\" ip2region.db\");\n        }\n\n        int algorithm = DbSearcher.BTREE_ALGORITHM; //B-tree\n\n        try {\n            DbConfig config = new DbConfig();\n            DbSearcher searcher = new DbSearcher(config, file.getPath());\n            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\n\n            //define the method\n            Method method = null;\n            switch (algorithm) {\n                case DbSearcher.BTREE_ALGORITHM:\n                    method = searcher.getClass().getMethod(\"btreeSearch\", String.class);\n                    break;\n                case DbSearcher.BINARY_ALGORITHM:\n                    method = searcher.getClass().getMethod(\"binarySearch\", String.class);\n                    break;\n                case DbSearcher.MEMORY_ALGORITYM:\n                    method = searcher.getClass().getMethod(\"memorySearch\", String.class);\n                    break;\n            }\n\n            DataBlock dataBlock = null;\n            if (!Util.isIpAddress(ip)) {\n                System.out.println(\"Error: Invalid ip address\");\n            }\n            dataBlock = (DataBlock) method.invoke(searcher, ip);\n            reader.close();\n            searcher.close();\n            return dataBlock.getRegion();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return \"\";\n    }\n}\n```\n\n##### \n/online/listList<OnlineUser>\n\n#### \n\n##### controller\n```bash\n@GetMapping(\"/forceLogout\")\npublic ResponseCode forceLogout(String id) {\n    try {\n        sessionService.forceLogout(id);\n        return ResponseCode.SUCCESS();\n    } catch (Exception e) {\n        e.printStackTrace();\n        return ResponseCode.ERROR();\n    }\n}\n```\n\nidsessionID\n\n##### service\n```bash\n@Override\npublic void forceLogout(String id) {\n    Session session = sessionDAO.readSession(id);\n    session.setTimeout(0L);\n    session.stop();\n    sessionDAO.delete(session);\n}\n```\n\n\n","source":"_posts/Shiro.md","raw":"---\ntitle: Shiro\ncategories:\n    - Java\ndate: 2018-09-23\ntags:\n\t- \n\t- \t\n---\n\n### Shiro\n\n\n- [Shrio-](https://www.iteye.com/blog/jinnianshilongnian-2047643)\n- [Spring Boot Shiro](https://mrbird.cc/Spring-Boot-Shiro%20session.html)\n\n\n![](/images/shiro1.png)\n\nShiroorg.apache.shiro.session.mgt.eis.SessionDAOShiroSessionSessionIDSessionIDIP\n\n![](/images/shiro2.png)\n\n\n- \n- \n\n#### \n\n##### ShiroConfig\nRedisShiroSessionSessionDAO\n```bash\n@Bean\npublic RedisSessionDAO redisSessionDAO() {\n    RedisSessionDAO redisSessionDAO = new RedisSessionDAO();\n    redisSessionDAO.setRedisManager(redisManager());\n    return redisSessionDAO;\n}\n\n@ConfigurationProperties(prefix = \"redis.shiro\")\npublic RedisManager redisManager() {\n    return new RedisManager();\n}\n```\n\nSessionDAOSessionManager\n```bash\n@Bean\npublic SessionManager sessionManager() {\n    DefaultWebSessionManager defaultWebSessionManager = new DefaultWebSessionManager();\n    defaultWebSessionManager.setCacheManager(cacheManager());\n    defaultWebSessionManager.setSessionDAO(sessionDAO());\n    return sessionManager;\n}\n```\n\nSessionManagerSecurityManager\n```bash\n@Bean\npublic SecurityManager securityManager() {\n    DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();\n    securityManager.setRealm(realm());\n\n    //sessionManager\n    securityManager.setSessionManager(sessionManager());\n    //\n    securityManager.setCacheManager(cacheManager());\n\n    return securityManager;\n}\n```\n\n#### \n\n##### OnlineUser.java\n```bash\n@Data\npublic class OnlineUser implements Serializable {\n\n    private String id; //sessionId\n\n    private String uid; //ID\n\n    private String username; //\n\n    private String host; //\n\n    private String address; //\n\n    @DateTimeFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\", timezone = \"GMT+8\")\n    private Date startTime; //\n\n    @DateTimeFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\", timezone = \"GMT+8\")\n    private Date endTime; //\n\n    private Long timeout; //\n\n    private String status; //\n\n    public void setHost(String host) {\n        this.host = host.equals(\"0:0:0:0:0:0:0:1\") ? \"127.0.0.1\" : host;\n    }\n}\n```\n\n##### Service\nservice\n```bash\n@Override\npublic List<OnlineUser> list() {\n    List<OnlineUser> list = new ArrayList<>();\n    Collection<Session> sessions = sessionDAO.getActiveSessions(); //\n    for (Session session : sessions) {\n        if (session != null) {\n            OnlineUser onlineUser = new OnlineUser();\n            SimplePrincipalCollection principalCollection;\n            User user;\n            //session\n            if (session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY) == null) {\n                continue;\n            } else {\n                //sessionsessionprincipalCollection\n                principalCollection = (SimplePrincipalCollection) session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY);\n                user = (User) principalCollection.getPrimaryPrincipal();\n                onlineUser.setUid(user.getId().toString());\n                onlineUser.setUsername(user.getUsername());\n            }\n            onlineUser.setId(session.getId().toString());\n            onlineUser.setHost(session.getHost());\n            onlineUser.setAddress(AddressUtil.getAddress(session.getHost()));\n            onlineUser.setStartTime(session.getStartTimestamp());\n            onlineUser.setEndTime(session.getLastAccessTime());\n            long timeout = session.getTimeout();\n            onlineUser.setTimeout(timeout);\n            onlineUser.setStatus(timeout == 0L ? \"0\" : \"1\"); //0 1\n            list.add(onlineUser);\n        }\n    }\n    return list;\n}\n```\n\ngetActiveSessions()SessionDefaultSubjectContext.PRINCIPALS_SESSION_KEYSubjectsession keysessionssessionsession\nsession.getHost()HostIP\nAddressUtil.getAddress(session.getHost())IPip2region\n\n##### IP\n\nhttps://github.com/lionsoul2014/ip2region\nip2region\n```bash\n<dependency>\n    <groupId>org.lionsoul</groupId>\n    <artifactId>ip2region</artifactId>\n    <version>1.7.2</version>\n</dependency>\n```\nip2region.dbresources/config/\nAddressUtil.java\nhttps://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java\n\n```bash\npublic class AddressUtil {\n\n    public static String getAddress(String ip) {\n        //db\n        String dbPath = AddressUtil.class.getResource(\"/config/ip2region.db\").getPath();\n\n        File file = new File(dbPath);\n\n        if (!file.exists()) {\n            throw new GlobalException(\" ip2region.db\");\n        }\n\n        int algorithm = DbSearcher.BTREE_ALGORITHM; //B-tree\n\n        try {\n            DbConfig config = new DbConfig();\n            DbSearcher searcher = new DbSearcher(config, file.getPath());\n            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\n\n            //define the method\n            Method method = null;\n            switch (algorithm) {\n                case DbSearcher.BTREE_ALGORITHM:\n                    method = searcher.getClass().getMethod(\"btreeSearch\", String.class);\n                    break;\n                case DbSearcher.BINARY_ALGORITHM:\n                    method = searcher.getClass().getMethod(\"binarySearch\", String.class);\n                    break;\n                case DbSearcher.MEMORY_ALGORITYM:\n                    method = searcher.getClass().getMethod(\"memorySearch\", String.class);\n                    break;\n            }\n\n            DataBlock dataBlock = null;\n            if (!Util.isIpAddress(ip)) {\n                System.out.println(\"Error: Invalid ip address\");\n            }\n            dataBlock = (DataBlock) method.invoke(searcher, ip);\n            reader.close();\n            searcher.close();\n            return dataBlock.getRegion();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return \"\";\n    }\n}\n```\n\n##### \n/online/listList<OnlineUser>\n\n#### \n\n##### controller\n```bash\n@GetMapping(\"/forceLogout\")\npublic ResponseCode forceLogout(String id) {\n    try {\n        sessionService.forceLogout(id);\n        return ResponseCode.SUCCESS();\n    } catch (Exception e) {\n        e.printStackTrace();\n        return ResponseCode.ERROR();\n    }\n}\n```\n\nidsessionID\n\n##### service\n```bash\n@Override\npublic void forceLogout(String id) {\n    Session session = sessionDAO.readSession(id);\n    session.setTimeout(0L);\n    session.stop();\n    sessionDAO.delete(session);\n}\n```\n\n\n","slug":"Shiro","published":1,"updated":"2020-02-21T15:30:34.320Z","_id":"ck57xfme50000d36kef11hpp8","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Shiro\"><a href=\"#Shiro\" class=\"headerlink\" title=\"Shiro\"></a>Shiro</h3><p></p>\n<ul>\n<li><a href=\"https://www.iteye.com/blog/jinnianshilongnian-2047643\" target=\"_blank\" rel=\"noopener\">Shrio-</a></li>\n<li><a href=\"https://mrbird.cc/Spring-Boot-Shiro%20session.html\" target=\"_blank\" rel=\"noopener\">Spring Boot Shiro</a></li>\n</ul>\n<p><br><img src=\"/images/shiro1.png\" alt=\"\"></p>\n<p>Shiroorg.apache.shiro.session.mgt.eis.SessionDAOShiroSessionSessionIDSessionIDIP</p>\n<p><img src=\"/images/shiro2.png\" alt=\"\"></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"ShiroConfig\"><a href=\"#ShiroConfig\" class=\"headerlink\" title=\"ShiroConfig\"></a>ShiroConfig</h5><p>RedisShiroSessionSessionDAO</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public RedisSessionDAO <span class=\"function\"><span class=\"title\">redisSessionDAO</span></span>() &#123;</span><br><span class=\"line\">    RedisSessionDAO redisSessionDAO = new RedisSessionDAO();</span><br><span class=\"line\">    redisSessionDAO.setRedisManager(redisManager());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> redisSessionDAO;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@ConfigurationProperties(prefix = <span class=\"string\">\"redis.shiro\"</span>)</span><br><span class=\"line\">public RedisManager <span class=\"function\"><span class=\"title\">redisManager</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new RedisManager();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>SessionDAOSessionManager</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public SessionManager <span class=\"function\"><span class=\"title\">sessionManager</span></span>() &#123;</span><br><span class=\"line\">    DefaultWebSessionManager defaultWebSessionManager = new DefaultWebSessionManager();</span><br><span class=\"line\">    defaultWebSessionManager.setCacheManager(cacheManager());</span><br><span class=\"line\">    defaultWebSessionManager.setSessionDAO(sessionDAO());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> sessionManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>SessionManagerSecurityManager</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public SecurityManager <span class=\"function\"><span class=\"title\">securityManager</span></span>() &#123;</span><br><span class=\"line\">    DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();</span><br><span class=\"line\">    securityManager.setRealm(realm());</span><br><span class=\"line\"></span><br><span class=\"line\">    //sessionManager</span><br><span class=\"line\">    securityManager.setSessionManager(sessionManager());</span><br><span class=\"line\">    //</span><br><span class=\"line\">    securityManager.setCacheManager(cacheManager());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">return</span> securityManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"OnlineUser-java\"><a href=\"#OnlineUser-java\" class=\"headerlink\" title=\"OnlineUser.java\"></a>OnlineUser.java</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Data</span><br><span class=\"line\">public class OnlineUser implements Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private String id; //sessionId</span><br><span class=\"line\"></span><br><span class=\"line\">    private String uid; //ID</span><br><span class=\"line\"></span><br><span class=\"line\">    private String username; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String host; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String address; //</span><br><span class=\"line\"></span><br><span class=\"line\">    @DateTimeFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>)</span><br><span class=\"line\">    @JsonFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, timezone = <span class=\"string\">\"GMT+8\"</span>)</span><br><span class=\"line\">    private Date startTime; //</span><br><span class=\"line\"></span><br><span class=\"line\">    @DateTimeFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>)</span><br><span class=\"line\">    @JsonFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, timezone = <span class=\"string\">\"GMT+8\"</span>)</span><br><span class=\"line\">    private Date endTime; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private Long timeout; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String status; //</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setHost(String host) &#123;</span><br><span class=\"line\">        this.host = host.equals(<span class=\"string\">\"0:0:0:0:0:0:0:1\"</span>) ? <span class=\"string\">\"127.0.0.1\"</span> : host;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h5><p>service</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public List&lt;OnlineUser&gt; <span class=\"function\"><span class=\"title\">list</span></span>() &#123;</span><br><span class=\"line\">    List&lt;OnlineUser&gt; list = new ArrayList&lt;&gt;();</span><br><span class=\"line\">    Collection&lt;Session&gt; sessions = sessionDAO.getActiveSessions(); //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Session session : sessions) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (session != null) &#123;</span><br><span class=\"line\">            OnlineUser onlineUser = new OnlineUser();</span><br><span class=\"line\">            SimplePrincipalCollection principalCollection;</span><br><span class=\"line\">            User user;</span><br><span class=\"line\">            //session</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY) == null) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                //sessionsessionprincipalCollection</span><br><span class=\"line\">                principalCollection = (SimplePrincipalCollection) session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY);</span><br><span class=\"line\">                user = (User) principalCollection.getPrimaryPrincipal();</span><br><span class=\"line\">                onlineUser.setUid(user.getId().toString());</span><br><span class=\"line\">                onlineUser.setUsername(user.getUsername());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            onlineUser.setId(session.getId().toString());</span><br><span class=\"line\">            onlineUser.setHost(session.getHost());</span><br><span class=\"line\">            onlineUser.setAddress(AddressUtil.getAddress(session.getHost()));</span><br><span class=\"line\">            onlineUser.setStartTime(session.getStartTimestamp());</span><br><span class=\"line\">            onlineUser.setEndTime(session.getLastAccessTime());</span><br><span class=\"line\">            long timeout = session.getTimeout();</span><br><span class=\"line\">            onlineUser.setTimeout(timeout);</span><br><span class=\"line\">            onlineUser.setStatus(timeout == 0L ? <span class=\"string\">\"0\"</span> : <span class=\"string\">\"1\"</span>); //0 1</span><br><span class=\"line\">            list.add(onlineUser);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> list;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>getActiveSessions()SessionDefaultSubjectContext.PRINCIPALS_SESSION_KEYSubjectsession keysessionssessionsession<br>session.getHost()HostIP<br>AddressUtil.getAddress(session.getHost())IPip2region</p>\n<h5 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h5><p><a href=\"https://github.com/lionsoul2014/ip2region\" target=\"_blank\" rel=\"noopener\">https://github.com/lionsoul2014/ip2region</a><br>ip2region</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.lionsoul&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;ip2region&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.7.2&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<p>ip2region.dbresources/config/<br>AddressUtil.java<br><a href=\"https://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java\" target=\"_blank\" rel=\"noopener\">https://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AddressUtil &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static String getAddress(String ip) &#123;</span><br><span class=\"line\">        //db</span><br><span class=\"line\">        String dbPath = AddressUtil.class.getResource(<span class=\"string\">\"/config/ip2region.db\"</span>).getPath();</span><br><span class=\"line\"></span><br><span class=\"line\">        File file = new File(dbPath);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!file.exists()) &#123;</span><br><span class=\"line\">            throw new GlobalException(<span class=\"string\">\" ip2region.db\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        int algorithm = DbSearcher.BTREE_ALGORITHM; //B-tree</span><br><span class=\"line\"></span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            DbConfig config = new DbConfig();</span><br><span class=\"line\">            DbSearcher searcher = new DbSearcher(config, file.getPath());</span><br><span class=\"line\">            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));</span><br><span class=\"line\"></span><br><span class=\"line\">            //define the method</span><br><span class=\"line\">            Method method = null;</span><br><span class=\"line\">            switch (algorithm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.BTREE_ALGORITHM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"btreeSearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.BINARY_ALGORITHM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"binarySearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.MEMORY_ALGORITYM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"memorySearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            DataBlock dataBlock = null;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!Util.isIpAddress(ip)) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"Error: Invalid ip address\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            dataBlock = (DataBlock) method.invoke(searcher, ip);</span><br><span class=\"line\">            reader.close();</span><br><span class=\"line\">            searcher.close();</span><br><span class=\"line\">            <span class=\"built_in\">return</span> dataBlock.getRegion();</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>/online/listList<OnlineUser></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"controller\"><a href=\"#controller\" class=\"headerlink\" title=\"controller\"></a>controller</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@GetMapping(<span class=\"string\">\"/forceLogout\"</span>)</span><br><span class=\"line\">public ResponseCode forceLogout(String id) &#123;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        sessionService.forceLogout(id);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ResponseCode.SUCCESS();</span><br><span class=\"line\">    &#125; catch (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ResponseCode.ERROR();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>idsessionID</p>\n<h5 id=\"service\"><a href=\"#service\" class=\"headerlink\" title=\"service\"></a>service</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void forceLogout(String id) &#123;</span><br><span class=\"line\">    Session session = sessionDAO.readSession(id);</span><br><span class=\"line\">    session.setTimeout(0L);</span><br><span class=\"line\">    session.stop();</span><br><span class=\"line\">    sessionDAO.delete(session);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Shiro\"><a href=\"#Shiro\" class=\"headerlink\" title=\"Shiro\"></a>Shiro</h3><p></p>\n<ul>\n<li><a href=\"https://www.iteye.com/blog/jinnianshilongnian-2047643\" target=\"_blank\" rel=\"noopener\">Shrio-</a></li>\n<li><a href=\"https://mrbird.cc/Spring-Boot-Shiro%20session.html\" target=\"_blank\" rel=\"noopener\">Spring Boot Shiro</a></li>\n</ul>\n<p><br><img src=\"/images/shiro1.png\" alt=\"\"></p>\n<p>Shiroorg.apache.shiro.session.mgt.eis.SessionDAOShiroSessionSessionIDSessionIDIP</p>\n<p><img src=\"/images/shiro2.png\" alt=\"\"></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"ShiroConfig\"><a href=\"#ShiroConfig\" class=\"headerlink\" title=\"ShiroConfig\"></a>ShiroConfig</h5><p>RedisShiroSessionSessionDAO</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public RedisSessionDAO <span class=\"function\"><span class=\"title\">redisSessionDAO</span></span>() &#123;</span><br><span class=\"line\">    RedisSessionDAO redisSessionDAO = new RedisSessionDAO();</span><br><span class=\"line\">    redisSessionDAO.setRedisManager(redisManager());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> redisSessionDAO;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@ConfigurationProperties(prefix = <span class=\"string\">\"redis.shiro\"</span>)</span><br><span class=\"line\">public RedisManager <span class=\"function\"><span class=\"title\">redisManager</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new RedisManager();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>SessionDAOSessionManager</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public SessionManager <span class=\"function\"><span class=\"title\">sessionManager</span></span>() &#123;</span><br><span class=\"line\">    DefaultWebSessionManager defaultWebSessionManager = new DefaultWebSessionManager();</span><br><span class=\"line\">    defaultWebSessionManager.setCacheManager(cacheManager());</span><br><span class=\"line\">    defaultWebSessionManager.setSessionDAO(sessionDAO());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> sessionManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>SessionManagerSecurityManager</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean</span><br><span class=\"line\">public SecurityManager <span class=\"function\"><span class=\"title\">securityManager</span></span>() &#123;</span><br><span class=\"line\">    DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();</span><br><span class=\"line\">    securityManager.setRealm(realm());</span><br><span class=\"line\"></span><br><span class=\"line\">    //sessionManager</span><br><span class=\"line\">    securityManager.setSessionManager(sessionManager());</span><br><span class=\"line\">    //</span><br><span class=\"line\">    securityManager.setCacheManager(cacheManager());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">return</span> securityManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"OnlineUser-java\"><a href=\"#OnlineUser-java\" class=\"headerlink\" title=\"OnlineUser.java\"></a>OnlineUser.java</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Data</span><br><span class=\"line\">public class OnlineUser implements Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private String id; //sessionId</span><br><span class=\"line\"></span><br><span class=\"line\">    private String uid; //ID</span><br><span class=\"line\"></span><br><span class=\"line\">    private String username; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String host; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String address; //</span><br><span class=\"line\"></span><br><span class=\"line\">    @DateTimeFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>)</span><br><span class=\"line\">    @JsonFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, timezone = <span class=\"string\">\"GMT+8\"</span>)</span><br><span class=\"line\">    private Date startTime; //</span><br><span class=\"line\"></span><br><span class=\"line\">    @DateTimeFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>)</span><br><span class=\"line\">    @JsonFormat(pattern = <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, timezone = <span class=\"string\">\"GMT+8\"</span>)</span><br><span class=\"line\">    private Date endTime; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private Long timeout; //</span><br><span class=\"line\"></span><br><span class=\"line\">    private String status; //</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setHost(String host) &#123;</span><br><span class=\"line\">        this.host = host.equals(<span class=\"string\">\"0:0:0:0:0:0:0:1\"</span>) ? <span class=\"string\">\"127.0.0.1\"</span> : host;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h5><p>service</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public List&lt;OnlineUser&gt; <span class=\"function\"><span class=\"title\">list</span></span>() &#123;</span><br><span class=\"line\">    List&lt;OnlineUser&gt; list = new ArrayList&lt;&gt;();</span><br><span class=\"line\">    Collection&lt;Session&gt; sessions = sessionDAO.getActiveSessions(); //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Session session : sessions) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (session != null) &#123;</span><br><span class=\"line\">            OnlineUser onlineUser = new OnlineUser();</span><br><span class=\"line\">            SimplePrincipalCollection principalCollection;</span><br><span class=\"line\">            User user;</span><br><span class=\"line\">            //session</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY) == null) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                //sessionsessionprincipalCollection</span><br><span class=\"line\">                principalCollection = (SimplePrincipalCollection) session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY);</span><br><span class=\"line\">                user = (User) principalCollection.getPrimaryPrincipal();</span><br><span class=\"line\">                onlineUser.setUid(user.getId().toString());</span><br><span class=\"line\">                onlineUser.setUsername(user.getUsername());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            onlineUser.setId(session.getId().toString());</span><br><span class=\"line\">            onlineUser.setHost(session.getHost());</span><br><span class=\"line\">            onlineUser.setAddress(AddressUtil.getAddress(session.getHost()));</span><br><span class=\"line\">            onlineUser.setStartTime(session.getStartTimestamp());</span><br><span class=\"line\">            onlineUser.setEndTime(session.getLastAccessTime());</span><br><span class=\"line\">            long timeout = session.getTimeout();</span><br><span class=\"line\">            onlineUser.setTimeout(timeout);</span><br><span class=\"line\">            onlineUser.setStatus(timeout == 0L ? <span class=\"string\">\"0\"</span> : <span class=\"string\">\"1\"</span>); //0 1</span><br><span class=\"line\">            list.add(onlineUser);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> list;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>getActiveSessions()SessionDefaultSubjectContext.PRINCIPALS_SESSION_KEYSubjectsession keysessionssessionsession<br>session.getHost()HostIP<br>AddressUtil.getAddress(session.getHost())IPip2region</p>\n<h5 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h5><p><a href=\"https://github.com/lionsoul2014/ip2region\" target=\"_blank\" rel=\"noopener\">https://github.com/lionsoul2014/ip2region</a><br>ip2region</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.lionsoul&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;ip2region&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.7.2&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<p>ip2region.dbresources/config/<br>AddressUtil.java<br><a href=\"https://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java\" target=\"_blank\" rel=\"noopener\">https://github.com/lionsoul2014/ip2region/blob/master/binding/java/src/main/java/org/lionsoul/ip2region/test/TestSearcher.java</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AddressUtil &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static String getAddress(String ip) &#123;</span><br><span class=\"line\">        //db</span><br><span class=\"line\">        String dbPath = AddressUtil.class.getResource(<span class=\"string\">\"/config/ip2region.db\"</span>).getPath();</span><br><span class=\"line\"></span><br><span class=\"line\">        File file = new File(dbPath);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!file.exists()) &#123;</span><br><span class=\"line\">            throw new GlobalException(<span class=\"string\">\" ip2region.db\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        int algorithm = DbSearcher.BTREE_ALGORITHM; //B-tree</span><br><span class=\"line\"></span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            DbConfig config = new DbConfig();</span><br><span class=\"line\">            DbSearcher searcher = new DbSearcher(config, file.getPath());</span><br><span class=\"line\">            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));</span><br><span class=\"line\"></span><br><span class=\"line\">            //define the method</span><br><span class=\"line\">            Method method = null;</span><br><span class=\"line\">            switch (algorithm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.BTREE_ALGORITHM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"btreeSearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.BINARY_ALGORITHM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"binarySearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> DbSearcher.MEMORY_ALGORITYM:</span><br><span class=\"line\">                    method = searcher.getClass().getMethod(<span class=\"string\">\"memorySearch\"</span>, String.class);</span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            DataBlock dataBlock = null;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!Util.isIpAddress(ip)) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"Error: Invalid ip address\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            dataBlock = (DataBlock) method.invoke(searcher, ip);</span><br><span class=\"line\">            reader.close();</span><br><span class=\"line\">            searcher.close();</span><br><span class=\"line\">            <span class=\"built_in\">return</span> dataBlock.getRegion();</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>/online/listList<OnlineUser></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"controller\"><a href=\"#controller\" class=\"headerlink\" title=\"controller\"></a>controller</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@GetMapping(<span class=\"string\">\"/forceLogout\"</span>)</span><br><span class=\"line\">public ResponseCode forceLogout(String id) &#123;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        sessionService.forceLogout(id);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ResponseCode.SUCCESS();</span><br><span class=\"line\">    &#125; catch (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ResponseCode.ERROR();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>idsessionID</p>\n<h5 id=\"service\"><a href=\"#service\" class=\"headerlink\" title=\"service\"></a>service</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void forceLogout(String id) &#123;</span><br><span class=\"line\">    Session session = sessionDAO.readSession(id);</span><br><span class=\"line\">    session.setTimeout(0L);</span><br><span class=\"line\">    session.stop();</span><br><span class=\"line\">    sessionDAO.delete(session);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"Mybatis","date":"2018-09-29T16:00:00.000Z","_content":"\nmybatis\n\n\n---\n\n### Mybatis\n\n#### \n\nMybatisMysql\nsql\n```bash\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL auto_increment,\n  `username` varchar(32) NOT NULL COMMENT '',\n  `birthday` datetime default NULL COMMENT '',\n  `sex` char(1) default NULL COMMENT '',\n  `address` varchar(256) default NULL COMMENT '',\n  PRIMARY KEY  (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,'','2018-02-27 17:47:08','',''),(2,'','2018-03-02 15:09:37','',''),(3,'','2018-03-04 11:34:34','',''),(4,'','2018-03-04 12:04:06','',''),(5,'loonycoder','2018-03-07 17:37:26','',''),(6,'','2018-03-08 11:44:00','','');\n\n```\n\n\n![](/images/table.png)\n\n#### \n\nmaven\n![Maven](/images/1.png)\n\n![Maven](/images/2.png)\n\n![Maven](/images/3.png)\n\npom.xml\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.loonycoder</groupId>\n    <artifactId>MybatisDemo</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <packaging>jar</packaging>\n    <dependencies>\n        <dependency>\n            <groupId>org.mybatis</groupId>\n            <artifactId>mybatis</artifactId>\n            <version>3.4.4</version>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>5.1.6</version>\n        </dependency>\n        <dependency>\n            <groupId>log4j</groupId>\n            <artifactId>log4j</artifactId>\n            <version>1.2.17</version>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.12</version>\n        </dependency>\n    </dependencies>\n\n</project>\n```\n\n---\n\n#### \n\nmybatisORMObject Relational Mapping\n\n****\n****\n**Serializable**\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String username;\n    private Date birthday;\n    private String address;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", username='\" + username + '\\'' +\n                \", birthday=\" + birthday +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n--- \n\n#### dao\n\n\n\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserDao {\n    List<User> findAll();\n}\n\n```\n\n---\n\n#### mybatis\n\n/resources()\n\nSqlMapConfig.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!---->\n    <environments default=\"mysql\">\n        <!--mysql-->\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--()-->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/MybatisDemo/\" />\n                <property name=\"username\" value=\"root\" />\n                <property name=\"password\" value=\"20141016\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--dao-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserDao.xml\" />\n    </mappers>\n</configuration>\n```\n\nurlusernamepassword \n\n\n**mapper**\n\n---\n\n#### mapper\n\nmybatisdao\ndao\n **xxxMapper.xml**xxxDao.xml\n/resourcesdao\n![xml](/images/mapperxml.png)\n\n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacedao-->\n<mapper namespace=\"com.loonycoder.dao.IUserDao\">\n    <!---->\n    <!--id-->\n    <select id=\"findAll\" resultType=\"com.loonycoder.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\n---\n\n#### log4j\n\nlog4j\nlog4j.properties/resources\n\n```bash\n# Set root category priority to INFO and its only appender to CONSOLE.\n#log4j.rootCategory=INFO,CONSOLE             debug  info  warn  error  fatal\nlog4j.rootCategory=debug, CONSOLE, LOGFILE\n\n# Set the enterprise logger category to FATAL and its only appender to CONSOLE.\nlog4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE\n\n# CONSOLE is set to be a ConsoleAppender using a PatternLayout.\nlog4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\nlog4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\nlog4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} %-6r [%15.15t] %-5p %30.30c %x - %m\\n\n\n# LOGFILE is set to be a File appender using a PatternLayout.\nlog.appender.LOGFILE=org.apache.log4j.FileAppender\nlog.appender.LOGFILE.FILE=/usr/gmx/LearnWorkspace\nlog.appender.LOGFILE.Append=true\nlog.appender.LOGFILE.layout=org.apache.log4j.PatternLayout\nlog.appender.LOGFILE.layout.ConversionPattern=%d{ISO8601} %-6r [%15.15t] %-5p %30.30c %x - %m\\n\n```\n\n---\n\n#### \n\nmybatis\n/test/javatest\n\n![test](/images/test.png)\n\n\n```bash\npackage com.loonycoder;\n\n\nimport com.loonycoder.dao.IUserDao;\nimport com.loonycoder.domain.User;\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\n\nimport java.io.InputStream;\nimport java.util.List;\n\npublic class MybatisTest {\n\n    public static void main(String[] args) throws Exception{\n        //1.\n        InputStream inputStream = Resources.getResourceAsStream(\"SqlMapConfig.xml\");\n        //2.SqlSessionFactory\n        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);\n        //3.SqlSession\n        SqlSession session = sqlSessionFactory.openSession();\n        //4.SqlSessiondao\n        IUserDao userDao = session.getMapper(IUserDao.class);\n        //5.\n        List<User> users= userDao.findAll();\n        for (User user: users) {\n            System.out.println(user);\n        }\n        //6.\n        session.close();\n        inputStream.close();\n    }\n}\n```\n\n\n![](/images/testResult.png)\n\n\n---\n\n### Mybaits\n\nMybatis\nxmlcom/loonycoder/dao/IUserDao.xml\nSqlMapConfig.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!---->\n    <environments default=\"mysql\">\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!---->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis\" />\n                <property name=\"username\" value=\"root\" />\n                <property name=\"password\" value=\"root\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--mapper-->\n    <mappers>\n        <!--resourceclassdao-->\n        <mapper class=\"com.loonycoder.dao.IUserDao\" />\n    </mappers>\n</configuration>\n```\n\ndao@Select\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserDao {\n    @Select(\"select * from user\")\n    List<User> findAll();\n}\n```\n\n\n![](/images/testResult.png)\n\n\n\n","source":"_posts/Mybatis-1.md","raw":"---\ntitle: Mybatis\ncategories:\n    - Mybatis\n    \ndate: 2018-09-30\ntags:\n\t- Java\n\t- Java\n    - \n\n---\n\nmybatis\n\n\n---\n\n### Mybatis\n\n#### \n\nMybatisMysql\nsql\n```bash\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL auto_increment,\n  `username` varchar(32) NOT NULL COMMENT '',\n  `birthday` datetime default NULL COMMENT '',\n  `sex` char(1) default NULL COMMENT '',\n  `address` varchar(256) default NULL COMMENT '',\n  PRIMARY KEY  (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,'','2018-02-27 17:47:08','',''),(2,'','2018-03-02 15:09:37','',''),(3,'','2018-03-04 11:34:34','',''),(4,'','2018-03-04 12:04:06','',''),(5,'loonycoder','2018-03-07 17:37:26','',''),(6,'','2018-03-08 11:44:00','','');\n\n```\n\n\n![](/images/table.png)\n\n#### \n\nmaven\n![Maven](/images/1.png)\n\n![Maven](/images/2.png)\n\n![Maven](/images/3.png)\n\npom.xml\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.loonycoder</groupId>\n    <artifactId>MybatisDemo</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <packaging>jar</packaging>\n    <dependencies>\n        <dependency>\n            <groupId>org.mybatis</groupId>\n            <artifactId>mybatis</artifactId>\n            <version>3.4.4</version>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>5.1.6</version>\n        </dependency>\n        <dependency>\n            <groupId>log4j</groupId>\n            <artifactId>log4j</artifactId>\n            <version>1.2.17</version>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.12</version>\n        </dependency>\n    </dependencies>\n\n</project>\n```\n\n---\n\n#### \n\nmybatisORMObject Relational Mapping\n\n****\n****\n**Serializable**\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String username;\n    private Date birthday;\n    private String address;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", username='\" + username + '\\'' +\n                \", birthday=\" + birthday +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n--- \n\n#### dao\n\n\n\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserDao {\n    List<User> findAll();\n}\n\n```\n\n---\n\n#### mybatis\n\n/resources()\n\nSqlMapConfig.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!---->\n    <environments default=\"mysql\">\n        <!--mysql-->\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!--()-->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/MybatisDemo/\" />\n                <property name=\"username\" value=\"root\" />\n                <property name=\"password\" value=\"20141016\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--dao-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserDao.xml\" />\n    </mappers>\n</configuration>\n```\n\nurlusernamepassword \n\n\n**mapper**\n\n---\n\n#### mapper\n\nmybatisdao\ndao\n **xxxMapper.xml**xxxDao.xml\n/resourcesdao\n![xml](/images/mapperxml.png)\n\n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacedao-->\n<mapper namespace=\"com.loonycoder.dao.IUserDao\">\n    <!---->\n    <!--id-->\n    <select id=\"findAll\" resultType=\"com.loonycoder.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\n---\n\n#### log4j\n\nlog4j\nlog4j.properties/resources\n\n```bash\n# Set root category priority to INFO and its only appender to CONSOLE.\n#log4j.rootCategory=INFO,CONSOLE             debug  info  warn  error  fatal\nlog4j.rootCategory=debug, CONSOLE, LOGFILE\n\n# Set the enterprise logger category to FATAL and its only appender to CONSOLE.\nlog4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE\n\n# CONSOLE is set to be a ConsoleAppender using a PatternLayout.\nlog4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\nlog4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\nlog4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} %-6r [%15.15t] %-5p %30.30c %x - %m\\n\n\n# LOGFILE is set to be a File appender using a PatternLayout.\nlog.appender.LOGFILE=org.apache.log4j.FileAppender\nlog.appender.LOGFILE.FILE=/usr/gmx/LearnWorkspace\nlog.appender.LOGFILE.Append=true\nlog.appender.LOGFILE.layout=org.apache.log4j.PatternLayout\nlog.appender.LOGFILE.layout.ConversionPattern=%d{ISO8601} %-6r [%15.15t] %-5p %30.30c %x - %m\\n\n```\n\n---\n\n#### \n\nmybatis\n/test/javatest\n\n![test](/images/test.png)\n\n\n```bash\npackage com.loonycoder;\n\n\nimport com.loonycoder.dao.IUserDao;\nimport com.loonycoder.domain.User;\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\n\nimport java.io.InputStream;\nimport java.util.List;\n\npublic class MybatisTest {\n\n    public static void main(String[] args) throws Exception{\n        //1.\n        InputStream inputStream = Resources.getResourceAsStream(\"SqlMapConfig.xml\");\n        //2.SqlSessionFactory\n        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);\n        //3.SqlSession\n        SqlSession session = sqlSessionFactory.openSession();\n        //4.SqlSessiondao\n        IUserDao userDao = session.getMapper(IUserDao.class);\n        //5.\n        List<User> users= userDao.findAll();\n        for (User user: users) {\n            System.out.println(user);\n        }\n        //6.\n        session.close();\n        inputStream.close();\n    }\n}\n```\n\n\n![](/images/testResult.png)\n\n\n---\n\n### Mybaits\n\nMybatis\nxmlcom/loonycoder/dao/IUserDao.xml\nSqlMapConfig.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!---->\n    <environments default=\"mysql\">\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!---->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />\n                <property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis\" />\n                <property name=\"username\" value=\"root\" />\n                <property name=\"password\" value=\"root\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--mapper-->\n    <mappers>\n        <!--resourceclassdao-->\n        <mapper class=\"com.loonycoder.dao.IUserDao\" />\n    </mappers>\n</configuration>\n```\n\ndao@Select\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserDao {\n    @Select(\"select * from user\")\n    List<User> findAll();\n}\n```\n\n\n![](/images/testResult.png)\n\n\n\n","slug":"Mybatis-1","published":1,"updated":"2020-02-21T15:30:46.063Z","_id":"ck6i13ob40000jns6gz7mgozn","comments":1,"layout":"post","photos":[],"link":"","content":"<p>mybatis<br></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MybatisMysql<br>sql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL auto_increment,</span><br><span class=\"line\">  `username` varchar(32) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `birthday` datetime default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `sex` char(1) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `address` varchar(256) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,<span class=\"string\">''</span>,<span class=\"string\">'2018-02-27 17:47:08'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-02 15:09:37'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 11:34:34'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 12:04:06'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(5,<span class=\"string\">'loonycoder'</span>,<span class=\"string\">'2018-03-07 17:37:26'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(6,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-08 11:44:00'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/table.png\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>maven<br><img src=\"/images/1.png\" alt=\"Maven\"></p>\n<p><img src=\"/images/2.png\" alt=\"Maven\"></p>\n<p><img src=\"/images/3.png\" alt=\"Maven\"></p>\n<p>pom.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;project xmlns=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span></span><br><span class=\"line\">         xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">         xsi:schemaLocation=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span><br><span class=\"line\">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;groupId&gt;com.loonycoder&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;MybatisDemo&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;3.4.4&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;5.1.6&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.12&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">    &lt;/dependencies&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/project&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>mybatisORMObject Relational Mapping</p>\n<p><strong></strong><br><strong></strong><br><strong>Serializable</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String username;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUsername</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUsername(String username) &#123;</span><br><span class=\"line\">        this.username = username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", username='\"</span> + username + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", address='</span><span class=\"string\">\" + address + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                '&#125;';</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"dao\"><a href=\"#dao\" class=\"headerlink\" title=\"dao\"></a>dao</h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserDao &#123;</span><br><span class=\"line\">    List&lt;User&gt; findAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"mybatis\"><a href=\"#mybatis\" class=\"headerlink\" title=\"mybatis\"></a>mybatis</h4><p>/resources()</p>\n<p>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;!--mysql--&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--()--&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"jdbc:mysql://localhost:3306/MybatisDemo/\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"20141016\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--dao--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserDao.xml\"</span> /&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>urlusernamepassword </p>\n<p><br><strong>mapper</strong></p>\n<hr>\n<h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><p>mybatisdao<br>dao<br> <strong>xxxMapper.xml</strong>xxxDao.xml<br>/resourcesdao<br><img src=\"/images/mapperxml.png\" alt=\"xml\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacedao--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserDao\"</span>&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"findAll\"</span> resultType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"log4j\"><a href=\"#log4j\" class=\"headerlink\" title=\"log4j\"></a>log4j</h4><p>log4j<br>log4j.properties/resources</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Set root category priority to INFO and its only appender to CONSOLE.</span></span><br><span class=\"line\"><span class=\"comment\">#log4j.rootCategory=INFO,CONSOLE             debug  info  warn  error  fatal</span></span><br><span class=\"line\">log4j.rootCategory=debug, CONSOLE, LOGFILE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set the enterprise logger category to FATAL and its only appender to CONSOLE.</span></span><br><span class=\"line\">log4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CONSOLE is set to be a ConsoleAppender using a PatternLayout.</span></span><br><span class=\"line\">log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\\n</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># LOGFILE is set to be a File appender using a PatternLayout.</span></span><br><span class=\"line\">log.appender.LOGFILE=org.apache.log4j.FileAppender</span><br><span class=\"line\">log.appender.LOGFILE.FILE=/usr/gmx/LearnWorkspace</span><br><span class=\"line\">log.appender.LOGFILE.Append=<span class=\"literal\">true</span></span><br><span class=\"line\">log.appender.LOGFILE.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log.appender.LOGFILE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\\n</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>mybatis<br>/test/javatest<br><br><img src=\"/images/test.png\" alt=\"test\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.dao.IUserDao;</span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\">import org.apache.ibatis.io.Resources;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.InputStream;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class MybatisTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws Exception&#123;</span><br><span class=\"line\">        //1.</span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">\"SqlMapConfig.xml\"</span>);</span><br><span class=\"line\">        //2.SqlSessionFactory</span><br><span class=\"line\">        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span><br><span class=\"line\">        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);</span><br><span class=\"line\">        //3.SqlSession</span><br><span class=\"line\">        SqlSession session = sqlSessionFactory.openSession();</span><br><span class=\"line\">        //4.SqlSessiondao</span><br><span class=\"line\">        IUserDao userDao = session.getMapper(IUserDao.class);</span><br><span class=\"line\">        //5.</span><br><span class=\"line\">        List&lt;User&gt; users= userDao.findAll();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //6.</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/testResult.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybaits\"><a href=\"#Mybaits\" class=\"headerlink\" title=\"Mybaits\"></a>Mybaits</h3><p>Mybatis<br>xmlcom/loonycoder/dao/IUserDao.xml<br>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"jdbc:mysql://localhost:3306/mybatis\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;!--resourceclassdao--&gt;</span><br><span class=\"line\">        &lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserDao\"</span> /&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>dao@Select</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserDao &#123;</span><br><span class=\"line\">    @Select(<span class=\"string\">\"select * from user\"</span>)</span><br><span class=\"line\">    List&lt;User&gt; findAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/testResult.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>mybatis<br></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MybatisMysql<br>sql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL auto_increment,</span><br><span class=\"line\">  `username` varchar(32) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `birthday` datetime default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `sex` char(1) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `address` varchar(256) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,<span class=\"string\">''</span>,<span class=\"string\">'2018-02-27 17:47:08'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-02 15:09:37'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 11:34:34'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 12:04:06'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(5,<span class=\"string\">'loonycoder'</span>,<span class=\"string\">'2018-03-07 17:37:26'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(6,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-08 11:44:00'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/table.png\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>maven<br><img src=\"/images/1.png\" alt=\"Maven\"></p>\n<p><img src=\"/images/2.png\" alt=\"Maven\"></p>\n<p><img src=\"/images/3.png\" alt=\"Maven\"></p>\n<p>pom.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;project xmlns=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span></span><br><span class=\"line\">         xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">         xsi:schemaLocation=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span><br><span class=\"line\">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;groupId&gt;com.loonycoder&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;MybatisDemo&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;3.4.4&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;5.1.6&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;4.12&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">    &lt;/dependencies&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/project&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>mybatisORMObject Relational Mapping</p>\n<p><strong></strong><br><strong></strong><br><strong>Serializable</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String username;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUsername</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUsername(String username) &#123;</span><br><span class=\"line\">        this.username = username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", username='\"</span> + username + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", address='</span><span class=\"string\">\" + address + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                '&#125;';</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"dao\"><a href=\"#dao\" class=\"headerlink\" title=\"dao\"></a>dao</h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserDao &#123;</span><br><span class=\"line\">    List&lt;User&gt; findAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"mybatis\"><a href=\"#mybatis\" class=\"headerlink\" title=\"mybatis\"></a>mybatis</h4><p>/resources()</p>\n<p>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;!--mysql--&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--()--&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"jdbc:mysql://localhost:3306/MybatisDemo/\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"20141016\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--dao--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserDao.xml\"</span> /&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>urlusernamepassword </p>\n<p><br><strong>mapper</strong></p>\n<hr>\n<h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><p>mybatisdao<br>dao<br> <strong>xxxMapper.xml</strong>xxxDao.xml<br>/resourcesdao<br><img src=\"/images/mapperxml.png\" alt=\"xml\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacedao--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserDao\"</span>&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"findAll\"</span> resultType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"log4j\"><a href=\"#log4j\" class=\"headerlink\" title=\"log4j\"></a>log4j</h4><p>log4j<br>log4j.properties/resources</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Set root category priority to INFO and its only appender to CONSOLE.</span></span><br><span class=\"line\"><span class=\"comment\">#log4j.rootCategory=INFO,CONSOLE             debug  info  warn  error  fatal</span></span><br><span class=\"line\">log4j.rootCategory=debug, CONSOLE, LOGFILE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set the enterprise logger category to FATAL and its only appender to CONSOLE.</span></span><br><span class=\"line\">log4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># CONSOLE is set to be a ConsoleAppender using a PatternLayout.</span></span><br><span class=\"line\">log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\\n</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># LOGFILE is set to be a File appender using a PatternLayout.</span></span><br><span class=\"line\">log.appender.LOGFILE=org.apache.log4j.FileAppender</span><br><span class=\"line\">log.appender.LOGFILE.FILE=/usr/gmx/LearnWorkspace</span><br><span class=\"line\">log.appender.LOGFILE.Append=<span class=\"literal\">true</span></span><br><span class=\"line\">log.appender.LOGFILE.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log.appender.LOGFILE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\\n</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>mybatis<br>/test/javatest<br><br><img src=\"/images/test.png\" alt=\"test\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.dao.IUserDao;</span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\">import org.apache.ibatis.io.Resources;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.InputStream;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class MybatisTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws Exception&#123;</span><br><span class=\"line\">        //1.</span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">\"SqlMapConfig.xml\"</span>);</span><br><span class=\"line\">        //2.SqlSessionFactory</span><br><span class=\"line\">        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span><br><span class=\"line\">        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);</span><br><span class=\"line\">        //3.SqlSession</span><br><span class=\"line\">        SqlSession session = sqlSessionFactory.openSession();</span><br><span class=\"line\">        //4.SqlSessiondao</span><br><span class=\"line\">        IUserDao userDao = session.getMapper(IUserDao.class);</span><br><span class=\"line\">        //5.</span><br><span class=\"line\">        List&lt;User&gt; users= userDao.findAll();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //6.</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/testResult.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybaits\"><a href=\"#Mybaits\" class=\"headerlink\" title=\"Mybaits\"></a>Mybaits</h3><p>Mybatis<br>xmlcom/loonycoder/dao/IUserDao.xml<br>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"com.mysql.jdbc.Driver\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"jdbc:mysql://localhost:3306/mybatis\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"root\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;!--resourceclassdao--&gt;</span><br><span class=\"line\">        &lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserDao\"</span> /&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>dao@Select</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserDao &#123;</span><br><span class=\"line\">    @Select(<span class=\"string\">\"select * from user\"</span>)</span><br><span class=\"line\">    List&lt;User&gt; findAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/testResult.png\" alt=\"\"></p>\n"},{"title":"Vue","date":"2018-08-23T16:00:00.000Z","_content":"\n### Vue.js\n\n+ Vue.jsAngualr.jsReact.js\n+ Vue.jsMVCV\n+ VueDOM\n\n---\n\n### MVCMVVM\n\n+ MVC\n+ MVVMMVVModelViewVMViewModel\n\n+ Model \n+ View: HTML\n+ VM: ModelView\n\n****\n![vue](/images/vue1.png)\n\n---\n\n### \n\n```bash\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n</head>\n<body>\n\n<!-- Vue -->\n<div id=\"app\">\n    <!--  -->\n    <p>{{ msg }}</p>\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: {     // datael\n            msg: 'Hello Vue!'\n        }\n    });\n</script>\n\n</body>\n</html>\n```\n\n****\n\n1Vue.js\n2VuedivbodyVueVue\n3VueMVVMvm\n4el: Vuedata: VueModelmsgVue\n5VuemsgmsgVue\n\n---\n\n### \n\n#### v-cloak\n\nViewVuevue.jsVue\nVue.jsv-cloak\n\n```bash\n<p v-cloak>{{ msg }}</p>\n```\n\n****\n\nv-cloakVuev-text\n\n```bash\n<p v-text=\"msg\"></p>\n```\n\n**v-cloakv-text**\nv-text\nv-cloak\n![vue2](/images/vue2.png)\n\n#### v-bind\n\n**v-textVueHTMLv-text\nVueHTMLv-html**\n\n![vue3](/images/vue3.png)\n\nVueVueVueHTMLVue\n\n```bash\n<input type=\"button\" value=\"msg\"/>\n```\n\nHTMLVueHTMLVue\nVuev-bind:HTML\n\n```bash\n<input type=\"button\" v-bind:value=\"msg\">\n```\n\nv-bind:Vuev-bind:\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" value=\"msg\" />\n    <input type=\"button\" v-bind:value=\"msg\">\n    <input type=\"button\" :value=\"msg\">\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: ''\n        }\n    });\n</script>\n```\n\n\n![vue4](/images/vue4.png)\n\n#### v-on\n\nVuev-on:clickmouseover ...\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" :value=\"msg\" v-on:click=\"show\">\n    <input type=\"button\" :value=\"msg\" v-on:mouseover=\"show\">\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: ''\n        },\n        methods: {\n            show: function(){\n                alert(\"hello\");\n            }\n        }\n    });\n</script>\n```\n\nmethodsVue\n\n****\n\njssetInterval()\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" value=\"\" @click=\"action\">\n    <input type=\"button\" value=\"\" @click=\"stop\">\n    <p>{{msg}}</p>\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: '',\n            intervalId: null\n        },\n        methods: {\n            action(){\n                if(this.intervalId != null) return;\n\n                // \n                this.intervalId = setInterval(() => {\n                    // \n                    var start = this.msg.substring(0, 1);\n                    // \n                    var end = this.msg.substring(1);\n                    // \n                    this.msg = end + start;\n                },400)\n            },\n            stop(){\n                // \n                clearInterval(this.intervalId)\n                // intervalIdnull\n                this.intervalId = null;\n            }\n        }\n    });\n</script>\n```\n\n****\n\n1v-on:@\n2VMVMthis.thisVM\n3methodName:function(){}ES6methodName(){} 4setInterval()clearInterval()js\n5name(function(){})ES6methodName(() => {})thisthisES6=>\n\n\n![vue5](/images/vue5.png)\n\n\n#### \n\n> .stop \n> .prevent \n> .capture \n> .self \n> .once \n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <div @click=\"divClick\">\n        <input type=\"button\" value=\"\" @click.stop=\"btnClick\">\n        <input type=\"button\" value=\"\" @click.prevent=\"btnClick\">\n    </div>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: '',\n        },\n        methods: {\n            divClick() {\n                console.log(\"div\");\n            },\n            btnClick() {\n                console.log(\"btn\");\n            }\n        }\n    });\n</script>\n```\n\n#### v-model\n\n- v-model\n- v-bing\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"text\" v-model=\"msg\">\n    <p>{{msg}}</p>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: 'hello!',\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n---\n\n### Vue\n\n\n#### \n- \n```bash\n<h2 :class=\"['italic','color']\">LoonyCoder</h2>\n```\nitaliccolorCSS\n\n- \n```bash\n<h2 :class=\"['italic',{'color': flag}]\">LoonyCoder</h2>\n```\nflagVuedata\n\n- \n```bash\n<h2 :class=\"{italic:true, color:flag}\">LoonyCoder</h2>\n```\n\n\n```bash\n<style>\n    .italic {\n        font-style: italic;\n    }\n\n    .color {\n        color: skyblue;\n    }\n</style>\n<!-- Vue -->\n<div id=\"app\">\n    <h2 :class=\"['italic','color']\">LoonyCoder</h2>\n    <h2 :class=\"['italic', {'color':flag}]\">LoonyCoder</h2>\n    <h2 :class=\"{italic:false, color:flag}\">LoonyCoder</h2>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            flag: true\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### \n\n- data:style\n```bash\n<h2 :style=\"styleObj\">LoonyCoder</h2>\n\ndata: {\n    styleObj: { 'color': 'red', 'font-weight': '200px'}\n}\n```\n\n- :styledata\n```bash\n<h2 :style=\"[styleObj, styleObj2]\">LoonyCoder</h2>\n\ndata: {\n    styleObj: { 'color': 'red', 'font-weight': '200px'},\n    styleObj2: { 'font-style': 'italic' }\n}\n```\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <h2 :style=\"styleObj\">LoonyCoder</h2>\n    <h2 :style=\"[styleObj, styleObj2]\">LoonyCoder</h2>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            styleObj: { 'color': 'red', 'font-weight': '200px' },\n            styleObj2: { 'font-style': 'italic' }\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### v-for\n\nVuev-for: v-for=\" in \"\n\n#### \n```bash\n<p v-for=\"item, i in list\">{{i}} --- {{item}}</p>\n\ndata: {\n    list: [1,2,3,4]\n}\n```\n**i**\n\n#### \n```bash\n<p v-for=\"item in list2\">id: {{item.id}} --- name: {{item.name}}</p>\n\ndata: {\n    list2: [\n            { id:1, name: '' },\n            { id:2, name: '' }\n        ],\n}\n```\n\n** **\n\n#### \n```bash\n<p v-for=\"(val, key) in user\">: {{key}} --- : {{val}}</p>\n\ndata: {\n    user: {\n            id: 1,\n            name: 'LoonyCoder'\n        }\n}\n```\n\n**valuekeyvaluekey**\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <p v-for=\"item, i in list\">{{i}} --- {{item}}</p>\n    <p v-for=\"item in list2\">id: {{item.id}} --- name: {{item.name}}</p>\n    <p v-for=\"(val, key) in user\">: {{key}} --- : {{val}}</p>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            list: [1,2,3,4], \n            list2: [\n                { id:1, name: '' },\n                { id:2, name: '' }\n            ],\n            user: {\n                id: 1,\n                name: 'LoonyCoder'\n            }\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### \nvue2.0+v-forkeykeykey\n\n****\n```bash\n<p v-for=\"item in user\" :key=\"item.id\">\n```\n:keykeyv-bind:key=\"\"string/numberitem.idIDnumber\n****\n\n\n#### v-showv-if\n\nVuev-if v-show\n****\n- v-if\n- v-showDOMdisplay:none\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" @click=\"flag=!flag\" value=\"toggle\">\n\n    <h3 v-if=\"flag\">v-if</h3>\n    <h3 v-show=\"flag\">v-show</h3>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            flag: false\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n\n![vue6](/images/vue6.png)","source":"_posts/Vue1.md","raw":"---\ntitle: Vue\ncategories:\n    - Web\ndate: 2018-08-24\ntags:\n\t- \n\t\n---\n\n### Vue.js\n\n+ Vue.jsAngualr.jsReact.js\n+ Vue.jsMVCV\n+ VueDOM\n\n---\n\n### MVCMVVM\n\n+ MVC\n+ MVVMMVVModelViewVMViewModel\n\n+ Model \n+ View: HTML\n+ VM: ModelView\n\n****\n![vue](/images/vue1.png)\n\n---\n\n### \n\n```bash\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n</head>\n<body>\n\n<!-- Vue -->\n<div id=\"app\">\n    <!--  -->\n    <p>{{ msg }}</p>\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: {     // datael\n            msg: 'Hello Vue!'\n        }\n    });\n</script>\n\n</body>\n</html>\n```\n\n****\n\n1Vue.js\n2VuedivbodyVueVue\n3VueMVVMvm\n4el: Vuedata: VueModelmsgVue\n5VuemsgmsgVue\n\n---\n\n### \n\n#### v-cloak\n\nViewVuevue.jsVue\nVue.jsv-cloak\n\n```bash\n<p v-cloak>{{ msg }}</p>\n```\n\n****\n\nv-cloakVuev-text\n\n```bash\n<p v-text=\"msg\"></p>\n```\n\n**v-cloakv-text**\nv-text\nv-cloak\n![vue2](/images/vue2.png)\n\n#### v-bind\n\n**v-textVueHTMLv-text\nVueHTMLv-html**\n\n![vue3](/images/vue3.png)\n\nVueVueVueHTMLVue\n\n```bash\n<input type=\"button\" value=\"msg\"/>\n```\n\nHTMLVueHTMLVue\nVuev-bind:HTML\n\n```bash\n<input type=\"button\" v-bind:value=\"msg\">\n```\n\nv-bind:Vuev-bind:\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" value=\"msg\" />\n    <input type=\"button\" v-bind:value=\"msg\">\n    <input type=\"button\" :value=\"msg\">\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: ''\n        }\n    });\n</script>\n```\n\n\n![vue4](/images/vue4.png)\n\n#### v-on\n\nVuev-on:clickmouseover ...\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" :value=\"msg\" v-on:click=\"show\">\n    <input type=\"button\" :value=\"msg\" v-on:mouseover=\"show\">\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: ''\n        },\n        methods: {\n            show: function(){\n                alert(\"hello\");\n            }\n        }\n    });\n</script>\n```\n\nmethodsVue\n\n****\n\njssetInterval()\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" value=\"\" @click=\"action\">\n    <input type=\"button\" value=\"\" @click=\"stop\">\n    <p>{{msg}}</p>\n</div>\n\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: '',\n            intervalId: null\n        },\n        methods: {\n            action(){\n                if(this.intervalId != null) return;\n\n                // \n                this.intervalId = setInterval(() => {\n                    // \n                    var start = this.msg.substring(0, 1);\n                    // \n                    var end = this.msg.substring(1);\n                    // \n                    this.msg = end + start;\n                },400)\n            },\n            stop(){\n                // \n                clearInterval(this.intervalId)\n                // intervalIdnull\n                this.intervalId = null;\n            }\n        }\n    });\n</script>\n```\n\n****\n\n1v-on:@\n2VMVMthis.thisVM\n3methodName:function(){}ES6methodName(){} 4setInterval()clearInterval()js\n5name(function(){})ES6methodName(() => {})thisthisES6=>\n\n\n![vue5](/images/vue5.png)\n\n\n#### \n\n> .stop \n> .prevent \n> .capture \n> .self \n> .once \n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <div @click=\"divClick\">\n        <input type=\"button\" value=\"\" @click.stop=\"btnClick\">\n        <input type=\"button\" value=\"\" @click.prevent=\"btnClick\">\n    </div>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: '',\n        },\n        methods: {\n            divClick() {\n                console.log(\"div\");\n            },\n            btnClick() {\n                console.log(\"btn\");\n            }\n        }\n    });\n</script>\n```\n\n#### v-model\n\n- v-model\n- v-bing\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"text\" v-model=\"msg\">\n    <p>{{msg}}</p>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            msg: 'hello!',\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n---\n\n### Vue\n\n\n#### \n- \n```bash\n<h2 :class=\"['italic','color']\">LoonyCoder</h2>\n```\nitaliccolorCSS\n\n- \n```bash\n<h2 :class=\"['italic',{'color': flag}]\">LoonyCoder</h2>\n```\nflagVuedata\n\n- \n```bash\n<h2 :class=\"{italic:true, color:flag}\">LoonyCoder</h2>\n```\n\n\n```bash\n<style>\n    .italic {\n        font-style: italic;\n    }\n\n    .color {\n        color: skyblue;\n    }\n</style>\n<!-- Vue -->\n<div id=\"app\">\n    <h2 :class=\"['italic','color']\">LoonyCoder</h2>\n    <h2 :class=\"['italic', {'color':flag}]\">LoonyCoder</h2>\n    <h2 :class=\"{italic:false, color:flag}\">LoonyCoder</h2>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            flag: true\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### \n\n- data:style\n```bash\n<h2 :style=\"styleObj\">LoonyCoder</h2>\n\ndata: {\n    styleObj: { 'color': 'red', 'font-weight': '200px'}\n}\n```\n\n- :styledata\n```bash\n<h2 :style=\"[styleObj, styleObj2]\">LoonyCoder</h2>\n\ndata: {\n    styleObj: { 'color': 'red', 'font-weight': '200px'},\n    styleObj2: { 'font-style': 'italic' }\n}\n```\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <h2 :style=\"styleObj\">LoonyCoder</h2>\n    <h2 :style=\"[styleObj, styleObj2]\">LoonyCoder</h2>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            styleObj: { 'color': 'red', 'font-weight': '200px' },\n            styleObj2: { 'font-style': 'italic' }\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### v-for\n\nVuev-for: v-for=\" in \"\n\n#### \n```bash\n<p v-for=\"item, i in list\">{{i}} --- {{item}}</p>\n\ndata: {\n    list: [1,2,3,4]\n}\n```\n**i**\n\n#### \n```bash\n<p v-for=\"item in list2\">id: {{item.id}} --- name: {{item.name}}</p>\n\ndata: {\n    list2: [\n            { id:1, name: '' },\n            { id:2, name: '' }\n        ],\n}\n```\n\n** **\n\n#### \n```bash\n<p v-for=\"(val, key) in user\">: {{key}} --- : {{val}}</p>\n\ndata: {\n    user: {\n            id: 1,\n            name: 'LoonyCoder'\n        }\n}\n```\n\n**valuekeyvaluekey**\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <p v-for=\"item, i in list\">{{i}} --- {{item}}</p>\n    <p v-for=\"item in list2\">id: {{item.id}} --- name: {{item.name}}</p>\n    <p v-for=\"(val, key) in user\">: {{key}} --- : {{val}}</p>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            list: [1,2,3,4], \n            list2: [\n                { id:1, name: '' },\n                { id:2, name: '' }\n            ],\n            user: {\n                id: 1,\n                name: 'LoonyCoder'\n            }\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n#### \nvue2.0+v-forkeykeykey\n\n****\n```bash\n<p v-for=\"item in user\" :key=\"item.id\">\n```\n:keykeyv-bind:key=\"\"string/numberitem.idIDnumber\n****\n\n\n#### v-showv-if\n\nVuev-if v-show\n****\n- v-if\n- v-showDOMdisplay:none\n\n\n```bash\n<!-- Vue -->\n<div id=\"app\">\n    <input type=\"button\" @click=\"flag=!flag\" value=\"toggle\">\n\n    <h3 v-if=\"flag\">v-if</h3>\n    <h3 v-show=\"flag\">v-show</h3>\n</div>\n<!-- js -->\n<script src=\"../lib/vue.js\"></script>\n<script>\n    // VuenewMVVMvm\n    var vm = new Vue({\n        el: '#app', // elementnewVue\n        data: { // datael\n            flag: false\n        },\n        methods: {\n\n        }\n    });\n</script>\n```\n\n\n![vue6](/images/vue6.png)","slug":"Vue1","published":1,"updated":"2020-02-21T15:28:15.936Z","_id":"ck6i8hlnq0000tks60gd499cg","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Vue-js\"><a href=\"#Vue-js\" class=\"headerlink\" title=\"Vue.js\"></a>Vue.js</h3><ul>\n<li>Vue.jsAngualr.jsReact.js</li>\n<li>Vue.jsMVCV</li>\n<li>VueDOM</li>\n</ul>\n<hr>\n<h3 id=\"MVCMVVM\"><a href=\"#MVCMVVM\" class=\"headerlink\" title=\"MVCMVVM\"></a>MVCMVVM</h3><ul>\n<li><p>MVC</p>\n</li>\n<li><p>MVVMMVVModelViewVMViewModel</p>\n</li>\n<li><p>Model </p>\n</li>\n<li><p>View: HTML</p>\n</li>\n<li><p>VM: ModelView</p>\n</li>\n</ul>\n<p><strong></strong><br><img src=\"/images/vue1.png\" alt=\"vue\"></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123;     // datael</span><br><span class=\"line\">            msg: <span class=\"string\">'Hello Vue!'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>1Vue.js<br>2VuedivbodyVueVue<br>3VueMVVMvm<br>4el: Vuedata: VueModelmsgVue<br>5VuemsgmsgVue</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"v-cloak\"><a href=\"#v-cloak\" class=\"headerlink\" title=\"v-cloak\"></a>v-cloak</h4><p>ViewVuevue.jsVue<br>Vue.jsv-cloak</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-cloak&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>v-cloakVuev-text</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-text=<span class=\"string\">\"msg\"</span>&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>v-cloakv-text</strong><br>v-text<br>v-cloak<br><img src=\"/images/vue2.png\" alt=\"vue2\"></p>\n<h4 id=\"v-bind\"><a href=\"#v-bind\" class=\"headerlink\" title=\"v-bind\"></a>v-bind</h4><p><strong>v-textVueHTMLv-text<br>VueHTMLv-html</strong></p>\n<p><img src=\"/images/vue3.png\" alt=\"vue3\"></p>\n<p>VueVueVueHTMLVue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"msg\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n\n<p>HTMLVueHTMLVue<br>Vuev-bind:HTML</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> v-bind:value=<span class=\"string\">\"msg\"</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p>v-bind:Vuev-bind:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"msg\"</span> /&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> v-bind:value=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/vue4.png\" alt=\"vue4\"></p>\n<h4 id=\"v-on\"><a href=\"#v-on\" class=\"headerlink\" title=\"v-on\"></a>v-on</h4><p>Vuev-on:clickmouseover </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span> v-on:click=<span class=\"string\">\"show\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span> v-on:mouseover=<span class=\"string\">\"show\"</span>&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            show: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">                alert(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>methodsVue</p>\n<p><strong></strong></p>\n<p>jssetInterval()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"action\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"stop\"</span>&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span>,</span><br><span class=\"line\">            intervalId: null</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">action</span></span>()&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(this.intervalId != null) <span class=\"built_in\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                // </span><br><span class=\"line\">                this.intervalId = setInterval(() =&gt; &#123;</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    var start = this.msg.substring(0, 1);</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    var end = this.msg.substring(1);</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    this.msg = end + start;</span><br><span class=\"line\">                &#125;,400)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">stop</span></span>()&#123;</span><br><span class=\"line\">                // </span><br><span class=\"line\">                clearInterval(this.intervalId)</span><br><span class=\"line\">                // intervalIdnull</span><br><span class=\"line\">                this.intervalId = null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>1v-on:@<br>2VMVMthis.thisVM<br>3methodName:function(){}ES6methodName(){} 4setInterval()clearInterval()js<br>5name(function(){})ES6methodName(() =&gt; {})thisthisES6=&gt;</p>\n<p><br><img src=\"/images/vue5.png\" alt=\"vue5\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p>.stop <br>.prevent <br>.capture <br>.self <br>.once </p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;div @click=<span class=\"string\">\"divClick\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click.stop=<span class=\"string\">\"btnClick\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click.prevent=<span class=\"string\">\"btnClick\"</span>&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">divClick</span></span>() &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">\"div\"</span>);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">btnClick</span></span>() &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">\"btn\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"v-model\"><a href=\"#v-model\" class=\"headerlink\" title=\"v-model\"></a>v-model</h4><ul>\n<li>v-model</li>\n<li>v-bing</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">'hello!'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"['italic','color']\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n<p>italiccolorCSS</p>\n</li>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"['italic',&#123;'color': flag&#125;]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n<p>flagVuedata</p>\n</li>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"&#123;italic:true, color:flag&#125;\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .italic &#123;</span><br><span class=\"line\">        font-style: italic;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .color &#123;</span><br><span class=\"line\">        color: skyblue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"['italic','color']\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"['italic', &#123;'color':flag&#125;]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"&#123;italic:false, color:flag&#125;\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            flag: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p>data:style</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :style=<span class=\"string\">\"styleObj\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:styledata</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :style=<span class=\"string\">\"[styleObj, styleObj2]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span>&#125;,</span><br><span class=\"line\">    styleObj2: &#123; <span class=\"string\">'font-style'</span>: <span class=\"string\">'italic'</span> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;h2 :style=<span class=\"string\">\"styleObj\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :style=<span class=\"string\">\"[styleObj, styleObj2]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span> &#125;,</span><br><span class=\"line\">            styleObj2: &#123; <span class=\"string\">'font-style'</span>: <span class=\"string\">'italic'</span> &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"v-for\"><a href=\"#v-for\" class=\"headerlink\" title=\"v-for\"></a>v-for</h4><p>Vuev-for: v-for= in </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item, i in list\"</span>&gt;&#123;&#123;i&#125;&#125; --- &#123;&#123;item&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    list: [1,2,3,4]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>i</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item in list2\"</span>&gt;id: &#123;&#123;item.id&#125;&#125; --- name: &#123;&#123;item.name&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    list2: [</span><br><span class=\"line\">            &#123; id:1, name: <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">            &#123; id:2, name: <span class=\"string\">''</span> &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong> </strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"(val, key) in user\"</span>&gt;: &#123;&#123;key&#125;&#125; --- : &#123;&#123;val&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    user: &#123;</span><br><span class=\"line\">            id: 1,</span><br><span class=\"line\">            name: <span class=\"string\">'LoonyCoder'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>valuekeyvaluekey</strong></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"item, i in list\"</span>&gt;&#123;&#123;i&#125;&#125; --- &#123;&#123;item&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"item in list2\"</span>&gt;id: &#123;&#123;item.id&#125;&#125; --- name: &#123;&#123;item.name&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"(val, key) in user\"</span>&gt;: &#123;&#123;key&#125;&#125; --- : &#123;&#123;val&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            list: [1,2,3,4], </span><br><span class=\"line\">            list2: [</span><br><span class=\"line\">                &#123; id:1, name: <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">                &#123; id:2, name: <span class=\"string\">''</span> &#125;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            user: &#123;</span><br><span class=\"line\">                id: 1,</span><br><span class=\"line\">                name: <span class=\"string\">'LoonyCoder'</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vue2.0+v-forkeykeykey</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item in user\"</span> :key=<span class=\"string\">\"item.id\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>:keykeyv-bind:key=string/numberitem.idIDnumber<br><strong></strong><br></p>\n<h4 id=\"v-showv-if\"><a href=\"#v-showv-if\" class=\"headerlink\" title=\"v-showv-if\"></a>v-showv-if</h4><p>Vuev-if v-show<br><strong></strong></p>\n<ul>\n<li>v-if</li>\n<li>v-showDOMdisplay:none</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"flag=!flag\"</span> value=<span class=\"string\">\"toggle\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;h3 v-if=<span class=\"string\">\"flag\"</span>&gt;v-if&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3 v-show=<span class=\"string\">\"flag\"</span>&gt;v-show&lt;/h3&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            flag: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/vue6.png\" alt=\"vue6\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Vue-js\"><a href=\"#Vue-js\" class=\"headerlink\" title=\"Vue.js\"></a>Vue.js</h3><ul>\n<li>Vue.jsAngualr.jsReact.js</li>\n<li>Vue.jsMVCV</li>\n<li>VueDOM</li>\n</ul>\n<hr>\n<h3 id=\"MVCMVVM\"><a href=\"#MVCMVVM\" class=\"headerlink\" title=\"MVCMVVM\"></a>MVCMVVM</h3><ul>\n<li><p>MVC</p>\n</li>\n<li><p>MVVMMVVModelViewVMViewModel</p>\n</li>\n<li><p>Model </p>\n</li>\n<li><p>View: HTML</p>\n</li>\n<li><p>VM: ModelView</p>\n</li>\n</ul>\n<p><strong></strong><br><img src=\"/images/vue1.png\" alt=\"vue\"></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123;     // datael</span><br><span class=\"line\">            msg: <span class=\"string\">'Hello Vue!'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>1Vue.js<br>2VuedivbodyVueVue<br>3VueMVVMvm<br>4el: Vuedata: VueModelmsgVue<br>5VuemsgmsgVue</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"v-cloak\"><a href=\"#v-cloak\" class=\"headerlink\" title=\"v-cloak\"></a>v-cloak</h4><p>ViewVuevue.jsVue<br>Vue.jsv-cloak</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-cloak&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>v-cloakVuev-text</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-text=<span class=\"string\">\"msg\"</span>&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>v-cloakv-text</strong><br>v-text<br>v-cloak<br><img src=\"/images/vue2.png\" alt=\"vue2\"></p>\n<h4 id=\"v-bind\"><a href=\"#v-bind\" class=\"headerlink\" title=\"v-bind\"></a>v-bind</h4><p><strong>v-textVueHTMLv-text<br>VueHTMLv-html</strong></p>\n<p><img src=\"/images/vue3.png\" alt=\"vue3\"></p>\n<p>VueVueVueHTMLVue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"msg\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n\n<p>HTMLVueHTMLVue<br>Vuev-bind:HTML</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> v-bind:value=<span class=\"string\">\"msg\"</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p>v-bind:Vuev-bind:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"msg\"</span> /&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> v-bind:value=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/vue4.png\" alt=\"vue4\"></p>\n<h4 id=\"v-on\"><a href=\"#v-on\" class=\"headerlink\" title=\"v-on\"></a>v-on</h4><p>Vuev-on:clickmouseover </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span> v-on:click=<span class=\"string\">\"show\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> :value=<span class=\"string\">\"msg\"</span> v-on:mouseover=<span class=\"string\">\"show\"</span>&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            show: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">                alert(<span class=\"string\">\"hello\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>methodsVue</p>\n<p><strong></strong></p>\n<p>jssetInterval()</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"action\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"stop\"</span>&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span>,</span><br><span class=\"line\">            intervalId: null</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">action</span></span>()&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(this.intervalId != null) <span class=\"built_in\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                // </span><br><span class=\"line\">                this.intervalId = setInterval(() =&gt; &#123;</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    var start = this.msg.substring(0, 1);</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    var end = this.msg.substring(1);</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    this.msg = end + start;</span><br><span class=\"line\">                &#125;,400)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">stop</span></span>()&#123;</span><br><span class=\"line\">                // </span><br><span class=\"line\">                clearInterval(this.intervalId)</span><br><span class=\"line\">                // intervalIdnull</span><br><span class=\"line\">                this.intervalId = null;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<p>1v-on:@<br>2VMVMthis.thisVM<br>3methodName:function(){}ES6methodName(){} 4setInterval()clearInterval()js<br>5name(function(){})ES6methodName(() =&gt; {})thisthisES6=&gt;</p>\n<p><br><img src=\"/images/vue5.png\" alt=\"vue5\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p>.stop <br>.prevent <br>.capture <br>.self <br>.once </p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;div @click=<span class=\"string\">\"divClick\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click.stop=<span class=\"string\">\"btnClick\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click.prevent=<span class=\"string\">\"btnClick\"</span>&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">''</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">divClick</span></span>() &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">\"div\"</span>);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">btnClick</span></span>() &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">\"btn\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"v-model\"><a href=\"#v-model\" class=\"headerlink\" title=\"v-model\"></a>v-model</h4><ul>\n<li>v-model</li>\n<li>v-bing</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"msg\"</span>&gt;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            msg: <span class=\"string\">'hello!'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"['italic','color']\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n<p>italiccolorCSS</p>\n</li>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"['italic',&#123;'color': flag&#125;]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n<p>flagVuedata</p>\n</li>\n<li><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :class=<span class=\"string\">\"&#123;italic:true, color:flag&#125;\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .italic &#123;</span><br><span class=\"line\">        font-style: italic;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .color &#123;</span><br><span class=\"line\">        color: skyblue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"['italic','color']\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"['italic', &#123;'color':flag&#125;]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :class=<span class=\"string\">\"&#123;italic:false, color:flag&#125;\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            flag: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p>data:style</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :style=<span class=\"string\">\"styleObj\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span>&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:styledata</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 :style=<span class=\"string\">\"[styleObj, styleObj2]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span>&#125;,</span><br><span class=\"line\">    styleObj2: &#123; <span class=\"string\">'font-style'</span>: <span class=\"string\">'italic'</span> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;h2 :style=<span class=\"string\">\"styleObj\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">    &lt;h2 :style=<span class=\"string\">\"[styleObj, styleObj2]\"</span>&gt;LoonyCoder&lt;/h2&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            styleObj: &#123; <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>, <span class=\"string\">'font-weight'</span>: <span class=\"string\">'200px'</span> &#125;,</span><br><span class=\"line\">            styleObj2: &#123; <span class=\"string\">'font-style'</span>: <span class=\"string\">'italic'</span> &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"v-for\"><a href=\"#v-for\" class=\"headerlink\" title=\"v-for\"></a>v-for</h4><p>Vuev-for: v-for= in </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item, i in list\"</span>&gt;&#123;&#123;i&#125;&#125; --- &#123;&#123;item&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    list: [1,2,3,4]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>i</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item in list2\"</span>&gt;id: &#123;&#123;item.id&#125;&#125; --- name: &#123;&#123;item.name&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    list2: [</span><br><span class=\"line\">            &#123; id:1, name: <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">            &#123; id:2, name: <span class=\"string\">''</span> &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong> </strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"(val, key) in user\"</span>&gt;: &#123;&#123;key&#125;&#125; --- : &#123;&#123;val&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    user: &#123;</span><br><span class=\"line\">            id: 1,</span><br><span class=\"line\">            name: <span class=\"string\">'LoonyCoder'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>valuekeyvaluekey</strong></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"item, i in list\"</span>&gt;&#123;&#123;i&#125;&#125; --- &#123;&#123;item&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"item in list2\"</span>&gt;id: &#123;&#123;item.id&#125;&#125; --- name: &#123;&#123;item.name&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;p v-for=<span class=\"string\">\"(val, key) in user\"</span>&gt;: &#123;&#123;key&#125;&#125; --- : &#123;&#123;val&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            list: [1,2,3,4], </span><br><span class=\"line\">            list2: [</span><br><span class=\"line\">                &#123; id:1, name: <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">                &#123; id:2, name: <span class=\"string\">''</span> &#125;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            user: &#123;</span><br><span class=\"line\">                id: 1,</span><br><span class=\"line\">                name: <span class=\"string\">'LoonyCoder'</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vue2.0+v-forkeykeykey</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-for=<span class=\"string\">\"item in user\"</span> :key=<span class=\"string\">\"item.id\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>:keykeyv-bind:key=string/numberitem.idIDnumber<br><strong></strong><br></p>\n<h4 id=\"v-showv-if\"><a href=\"#v-showv-if\" class=\"headerlink\" title=\"v-showv-if\"></a>v-showv-if</h4><p>Vuev-if v-show<br><strong></strong></p>\n<ul>\n<li>v-if</li>\n<li>v-showDOMdisplay:none</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Vue --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"flag=!flag\"</span> value=<span class=\"string\">\"toggle\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;h3 v-if=<span class=\"string\">\"flag\"</span>&gt;v-if&lt;/h3&gt;</span><br><span class=\"line\">    &lt;h3 v-show=<span class=\"string\">\"flag\"</span>&gt;v-show&lt;/h3&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!-- js --&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    // VuenewMVVMvm</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>, // elementnewVue</span><br><span class=\"line\">        data: &#123; // datael</span><br><span class=\"line\">            flag: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/vue6.png\" alt=\"vue6\"></p>\n"},{"title":"VueVue-resource","date":"2018-08-29T16:00:00.000Z","_content":"\n### \n\n\nVue **vue** VueVue.jsmustachev-bind\n\n```bash\n{{  | function }}\n```\n****\nVue\n- 1\n```bash\nVue.filter('', function(){})\n```\n- 2\n```bash\nnew Vue()({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {\n        : function(){}\n    }\n})\n```\n\n#### \n```bash\n<h3>{{ msg | myFilters('') }}</h3>\n\nVue.filter('myFilters', function(data, pattern){\n    if(pattern == ''){\n        var old = data.substring(0,4);\n        return old + ',';\n    }\n});\n```\n\n****\nVueVueVue\n- Vue.filter()function(){}\n- function(){}\n\n#### \n```bash\n<h3>{{ msg | myFilters('') }}</h3>\n\nvar vm2 = new Vue({\n    el: '#app2',\n    data: {\n        msg: 'loonycoder'\n    },\n    methods: {},\n    filters: {\n\n        myFilters: function(data, pattern) {\n            if(pattern == ''){\n                var old = data.substring(0,4);\n                return old + ',loonycoder';\n            }\n        }\n})\n```\n\n\n### \n\n#### \n\nVue****\n @keyup. = \"\"\n\n****\n> .enter\n> .tab\n> .esc\n> .delete\n> \n\n****\n```bash\n<input type=\"text\" @keyup.enter=\"open\">\n\nmethods: {\n    open(){\n        alert(\"\");\n    }\n}\n```\n\n****\nVueVueF2113\n\n```bash\n<input type=\"text\" @keyup.f2=\"open\">\n\nVue.config.keyCodes.f2 = 113;   \n\nmethods: {\n    open(){\n        alert(\"\");\n    }\n}\n```\n\n#### \nfocusv-focus\n```bash\nVue.directive('focus', {\n    bind: function(el) {},\n    inserted: function(el) {},\n    updated: function(el) {}\n});\n```\n\nVue.directive()\n- 1directive()\n > 1v-v-\n > 2\n\n****\n```bash\nVue.directive('focus', {\n\n});\n\n//  v-focus\n```\n\n- 2directive()\n> bind: bindDOMDOMDOM\n> inserted: DOM\n> updated: VNodeupdated\n\n****\n```bash\nue.directive('focus', {\n    bind: function(el) {\n        el.focus()\n    }\n});\n\n// \n<input type=\"text\" v-focus />\n```\n\nbindelJSJSfocus\n\n##### \n\n>bind\n>inserted\n>update\n>componentUpdated: VNodeVNode\n>unbind: \n\n****\ndirective()Vue\n- el: DOM\n- binding: \n    - name: v-\n    - value: v-focus=\"1 + 1\"value=2\n    - expression: v-focus=\"1+1\"experssion1+1\n    - \n- \n\n****\n\n```bash\n<input type=\"text\" v-color=\"'blue'\">\n\n// \nVue.directive('color', {\n    bind: function(el, binding){\n        el.style.color = binding.value\n    }\n});\n```\n\nbinding\n1elinput\n2bindingv-color=\"'blue'\"blue''\n3binding-valuev-colorblueel.style.color\n\n##### \n********************\n****\n```bash\n<p v-fontsize=\"'50px'\"></p>\n\nvar vm = new Vue({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {},\n    directives: {\n        'fontsize': {\n            bind: function(el, binding){\n                el.style.fontSize = binding.value\n            }\n        }\n    }\n});\n```\n\n****\nbindupdate\n```bash\n<p v-fontsize=\"'50px'\"></p>\n\nvar vm = new Vue({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {},\n    directives: {\n        'fontsize': function(el, binding){\n            el.style.fontSize = binding.value\n        }\n    }\n});\n```\n\n#### \n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n    <style type=\"text/css\">\n    table {\n        min-height: 25px;\n        line-height: 25px;\n        text-align: center;\n        border-collapse: collapse;\n    }\n\n    table,\n    table tr th,\n    table tr td {\n        border: 1px solid #0094ff;\n        padding: 11px;\n    }\n    </style>\n</head>\n\n<body>\n    <div id=\"app\">\n        id:\n        <input type=\"text\" v-model=\"id\" v-focus v-color=\"'blue'\"> username:\n        <input type=\"text\" v-model=\"username\" @keyup.enter=\"add\">\n        <input type=\"button\" value=\"\" @click=\"add\">\n        <br/>\n        <br/>\n        <table>\n            <thead>\n                <tr>\n                    <th>id</th>\n                    <th>name</th>\n                    <th>date</th>\n                    <th>fun</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"user in list\" :key=\"user.id\">\n                    <td>{{user.id}}</td>\n                    <td>{{user.username}}</td>\n                    <td>{{user.time | dataFormat('') }}</td>\n                    <td><a href=\"#\" @click=\"del(user.id)\"></a></td>\n                </tr>\n            </tbody>\n        </table>\n        <p>{{ new Date() }}</p>\n        <p>{{ new Date() | dataFormat('') }}</p>\n    </div>\n    <div id=\"app2\">\n        {{ dt | dataFormat('')}}\n        <p v-fontsize=\"'50px'\"></p>\n    </div>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n    // \n    // Vue.directive()\n    // 1v-v-focus\n    // 2\n    Vue.directive('focus', {\n        // elelJS\n        bind: function(el) { //bind\n            // DOMfocusDOM\n            // el.focus()\n        },\n        inserted: function(el) { // insertedDOM,\n            el.focus()\n        },\n        updated: function(el) { // VNodeupdated\n        }\n    });\n\n    // \n    Vue.directive('color', {\n        bind: function(el, binding) {\n            el.style.color = binding.value\n        }\n    });\n\n    // \n    Vue.config.keyCodes.f2 = 113;\n\n    // \n    var vm2 = new Vue({\n        el: '#app2',\n        data: {\n            dt: new Date(),\n        },\n        methods: {\n            open() {\n                alert(\"\");\n            }\n        },\n        filters: {\n            dataFormat: function(data, pattern) {\n                // \n                var dt = new Date(data);\n\n                // \n                var y = dt.getFullYear();\n                var m = dt.getMonth() + 1;\n                var d = dt.getDate();\n\n                if (pattern.toLowerCase() == 'yyyy-mm-dd') {\n                    return `${y}-${m}-${d}`;\n                } else {\n                    var hh = dt.getHours();\n                    var mm = dt.getMinutes();\n                    var ss = dt.getSeconds();\n\n                    // es6 yyyy-mm-dd hh:mm:ss \n                    return `${y}-${m}-${d} ${hh}:${mm}:${ss}` + '-->';\n                }\n            }\n        },\n        // \n        directives: {\n            'fontsize': function(el, binding) {\n                el.style.fontSize = binding.value\n            }\n        }\n    });\n\n    // \n    Vue.filter('dataFormat', function(data, pattern) {\n        // \n        var dt = new Date(data);\n\n        // \n        var y = dt.getFullYear();\n        var m = dt.getMonth() + 1;\n        var d = dt.getDate();\n\n        if (pattern.toLowerCase() == 'yyyy-mm-dd') {\n            return `${y}-${m}-${d}`;\n        } else {\n            var hh = dt.getHours();\n            var mm = dt.getMinutes();\n            var ss = dt.getSeconds();\n\n            return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;\n        }\n    });\n\n    // Vue\n    var vm = new Vue({\n        el: '#app',\n        data: {\n            id: '',\n            username: '',\n            list: [\n                { id: 1, username: '', time: new Date() },\n                { id: 2, username: 'loonycoder', time: new Date() }\n            ]\n        },\n        methods: {\n            add() {\n                var user = { id: this.id, username: this.username, time: new Date() };\n                this.list.push(user);\n            },\n            del(id) {\n                // some()return true\n                // userlisti\n                this.list.some((user, i) => {\n                    if (user.id == id) {\n                        this.list.splice(i, 1);\n                        return true;\n                    }\n                })\n            }\n        }\n    });\n    </script>\n</body>\n</html>\n```\n\n#### Vue\n- Vue\n- \n- \n\n> \n> * beforeCreate: datamethods\n> * created: datamethods\n> * beforeMount: \n> * mounted: \n> :\n> * beforeUpdate: dataDOM\n> * updated: data\n\n> * beforeDestory: \n> * destroyed: VueVue\n\n##### beforeCreate\ndatamethods\n![beforeCreate](/images/vue7.png)\n![beforeCreate](/images/vue8.png)\n\n##### created\ndatamethodsmethodsdatacreated\n![created](/images/vue9.png)\n![created](/images/vue10.png)\n\n##### beforeMount\n\n![beforeMount](/images/vue11.png)\n![beforeMount](/images/vue12.png)\n\n##### mounted\nmountedVue\n![mounted](/images/vue13.png)\n\n##### \n![](/images/vue14.png)\n\n---\n\n### vue-resource\nJSPHTMLVue\nVueAJAX\n\n##### \nVueAJAX\n```bash\nvue-resource.js\n```\n**Methods**\n```bash\nthis.$http.get('url', [options]).then(successCallback, errorCallback);\n\nthis.$http.post('url', [body], [options]).then(successCallback, errorCallback);\n```\n\n\n- thisVuevue-resource.js$httpvue-resource.jsvue.js\noptions\n- then\n- thensuccessCallbackerrorCallback\n\n##### \n```bash\n<button @click=\"getInfo\"></button>\n\nvar vm = new Vue({\n    el: '#app',\n    data: {},\n    methods: {\n        getInfo(){\n            this.$http.get('url').then(result => {\n                console.log(result.body);\n            })\n        }\n    }\n});\n```\n\n****\nthen.data.bodydataresult.bodyresult => {}ES6\n\n##### post\n**** postapplication/x-wwww-form-urlencoded Vuepost\npost{ emulateJSON: true }\n\n****\n```bash\nthis.$http.post('url', {}, { emulateJSON: true }).then(result => {\n    console.log(result.body)\n})\n```\n\n\n\n#### \n\nTomcat\npost\n\n```bash\n...\n\nmethods: {\n    add(){\n        this.$http.post('http://tycoding.cn/api/add', {}, {emulateJSON: true}).then(result => {\n            \n        });\n    }\n}\n```\n\nURL<http://www.loonycoder.com>/api/addajaxVue-resource****\n```bash\nVue.http.options.root = 'http://www.loonycoder.com';\n```\n\n\n\n****\n404\n> HTTPURL/ * this.$http.post('/xxx')URL/Vue404.\n* /this.$http.post('xxx')URL\n\n##### \npost{emulateJSON: true}postvue-resource\n```bash\nVue.http.options.emulateJSON = true;\n```\npost\n```bash\nmethods: {\n    add(){\n        this.$http.post('http://tycoding.cn/api/add', {}).then(result => {\n            \n        });\n    }\n}\n```\n\n##### \n\n```bash\n<!-- html -->\n<input type=\"text\" v-model=\"username\">\n<input type=\"button\" value=\"\" @click=\"add\">\n\n<table>\n    <tr>\n        <th></th>\n        <th></th>\n        <th></th>\n    </tr>\n    <tbody>\n        <tr v-for=\"user in list\" :key=\"user.id\">\n            <td>{{user.id}}</td>\n            <td>{{user.username}}</td>\n            <td>\n                <a href=\"#\" @click.pervent=\"del(user.id)\"></a>\n            </td>\n        </tr>\n    </tbody>\n</table>\n\n<!-- javascript -->\n<script type=\"text/javascript\">\n// \nVue.http.options.root = 'http://tycoding.cn/';\n\n//\nVue.http.options.emulateJSON = true;\n\n// Vue\nnew Vue({\n    el: '',\n    data: {\n        username: '',\n        list: []\n    },\n    created: {\n        // findAll\n        // Vuemethodsdatacreated\n        // findAll\n        this.findAll();\n    },\n    methods: {\n        // \n        findAll(){\n            this.$http.get('api/findAll').then(result => {\n                this.list = result.body;\n            }),\n        },\n\n        // \n        add(){\n            this.$http.post('api/add', {username: this.username}).then(result => {\n                if(result.body.status == 0){\n                    // 0\n                    // \n                    this.findAll()\n                }else{\n                    alert('');\n                }\n            })\n        },\n\n        //\n        del(id){\n            this.$http.get('api/del' + id).then(result => {\n                if(result.body.status == 0){\n                    //\n                    //\n                    this.findAll();\n                }else{\n                    alert('');\n                }\n            })\n        }\n    }\n});\n</script>\n```\n\nSpringMVCVue\n\n****\n- 1AJAXURL'/'Tomcat\n- 21AJAX2datalistthis.list = result.bodybodyF12\n- 3findAlllistmethodsdatacreatedcreatedfindAll\n- 4\n    + 1data\n    + 2v-model\n    + 3@clickmethods\n    + 4AJAXURLthis.username\n    + 5post{emulateJSON: true}post\n    + 6findAll\n- 5@clickid@click&middot;pervent&lt;a&gt;\n- 6\n\n\n","source":"_posts/Vue2.md","raw":"---\ntitle: VueVue-resource\ncategories:\n    - Web\ndate: 2018-08-30\ntags:\n\t- \n\t\n---\n\n### \n\n\nVue **vue** VueVue.jsmustachev-bind\n\n```bash\n{{  | function }}\n```\n****\nVue\n- 1\n```bash\nVue.filter('', function(){})\n```\n- 2\n```bash\nnew Vue()({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {\n        : function(){}\n    }\n})\n```\n\n#### \n```bash\n<h3>{{ msg | myFilters('') }}</h3>\n\nVue.filter('myFilters', function(data, pattern){\n    if(pattern == ''){\n        var old = data.substring(0,4);\n        return old + ',';\n    }\n});\n```\n\n****\nVueVueVue\n- Vue.filter()function(){}\n- function(){}\n\n#### \n```bash\n<h3>{{ msg | myFilters('') }}</h3>\n\nvar vm2 = new Vue({\n    el: '#app2',\n    data: {\n        msg: 'loonycoder'\n    },\n    methods: {},\n    filters: {\n\n        myFilters: function(data, pattern) {\n            if(pattern == ''){\n                var old = data.substring(0,4);\n                return old + ',loonycoder';\n            }\n        }\n})\n```\n\n\n### \n\n#### \n\nVue****\n @keyup. = \"\"\n\n****\n> .enter\n> .tab\n> .esc\n> .delete\n> \n\n****\n```bash\n<input type=\"text\" @keyup.enter=\"open\">\n\nmethods: {\n    open(){\n        alert(\"\");\n    }\n}\n```\n\n****\nVueVueF2113\n\n```bash\n<input type=\"text\" @keyup.f2=\"open\">\n\nVue.config.keyCodes.f2 = 113;   \n\nmethods: {\n    open(){\n        alert(\"\");\n    }\n}\n```\n\n#### \nfocusv-focus\n```bash\nVue.directive('focus', {\n    bind: function(el) {},\n    inserted: function(el) {},\n    updated: function(el) {}\n});\n```\n\nVue.directive()\n- 1directive()\n > 1v-v-\n > 2\n\n****\n```bash\nVue.directive('focus', {\n\n});\n\n//  v-focus\n```\n\n- 2directive()\n> bind: bindDOMDOMDOM\n> inserted: DOM\n> updated: VNodeupdated\n\n****\n```bash\nue.directive('focus', {\n    bind: function(el) {\n        el.focus()\n    }\n});\n\n// \n<input type=\"text\" v-focus />\n```\n\nbindelJSJSfocus\n\n##### \n\n>bind\n>inserted\n>update\n>componentUpdated: VNodeVNode\n>unbind: \n\n****\ndirective()Vue\n- el: DOM\n- binding: \n    - name: v-\n    - value: v-focus=\"1 + 1\"value=2\n    - expression: v-focus=\"1+1\"experssion1+1\n    - \n- \n\n****\n\n```bash\n<input type=\"text\" v-color=\"'blue'\">\n\n// \nVue.directive('color', {\n    bind: function(el, binding){\n        el.style.color = binding.value\n    }\n});\n```\n\nbinding\n1elinput\n2bindingv-color=\"'blue'\"blue''\n3binding-valuev-colorblueel.style.color\n\n##### \n********************\n****\n```bash\n<p v-fontsize=\"'50px'\"></p>\n\nvar vm = new Vue({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {},\n    directives: {\n        'fontsize': {\n            bind: function(el, binding){\n                el.style.fontSize = binding.value\n            }\n        }\n    }\n});\n```\n\n****\nbindupdate\n```bash\n<p v-fontsize=\"'50px'\"></p>\n\nvar vm = new Vue({\n    el: '',\n    data: {},\n    methods: {},\n    filters: {},\n    directives: {\n        'fontsize': function(el, binding){\n            el.style.fontSize = binding.value\n        }\n    }\n});\n```\n\n#### \n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n    <style type=\"text/css\">\n    table {\n        min-height: 25px;\n        line-height: 25px;\n        text-align: center;\n        border-collapse: collapse;\n    }\n\n    table,\n    table tr th,\n    table tr td {\n        border: 1px solid #0094ff;\n        padding: 11px;\n    }\n    </style>\n</head>\n\n<body>\n    <div id=\"app\">\n        id:\n        <input type=\"text\" v-model=\"id\" v-focus v-color=\"'blue'\"> username:\n        <input type=\"text\" v-model=\"username\" @keyup.enter=\"add\">\n        <input type=\"button\" value=\"\" @click=\"add\">\n        <br/>\n        <br/>\n        <table>\n            <thead>\n                <tr>\n                    <th>id</th>\n                    <th>name</th>\n                    <th>date</th>\n                    <th>fun</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"user in list\" :key=\"user.id\">\n                    <td>{{user.id}}</td>\n                    <td>{{user.username}}</td>\n                    <td>{{user.time | dataFormat('') }}</td>\n                    <td><a href=\"#\" @click=\"del(user.id)\"></a></td>\n                </tr>\n            </tbody>\n        </table>\n        <p>{{ new Date() }}</p>\n        <p>{{ new Date() | dataFormat('') }}</p>\n    </div>\n    <div id=\"app2\">\n        {{ dt | dataFormat('')}}\n        <p v-fontsize=\"'50px'\"></p>\n    </div>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n    // \n    // Vue.directive()\n    // 1v-v-focus\n    // 2\n    Vue.directive('focus', {\n        // elelJS\n        bind: function(el) { //bind\n            // DOMfocusDOM\n            // el.focus()\n        },\n        inserted: function(el) { // insertedDOM,\n            el.focus()\n        },\n        updated: function(el) { // VNodeupdated\n        }\n    });\n\n    // \n    Vue.directive('color', {\n        bind: function(el, binding) {\n            el.style.color = binding.value\n        }\n    });\n\n    // \n    Vue.config.keyCodes.f2 = 113;\n\n    // \n    var vm2 = new Vue({\n        el: '#app2',\n        data: {\n            dt: new Date(),\n        },\n        methods: {\n            open() {\n                alert(\"\");\n            }\n        },\n        filters: {\n            dataFormat: function(data, pattern) {\n                // \n                var dt = new Date(data);\n\n                // \n                var y = dt.getFullYear();\n                var m = dt.getMonth() + 1;\n                var d = dt.getDate();\n\n                if (pattern.toLowerCase() == 'yyyy-mm-dd') {\n                    return `${y}-${m}-${d}`;\n                } else {\n                    var hh = dt.getHours();\n                    var mm = dt.getMinutes();\n                    var ss = dt.getSeconds();\n\n                    // es6 yyyy-mm-dd hh:mm:ss \n                    return `${y}-${m}-${d} ${hh}:${mm}:${ss}` + '-->';\n                }\n            }\n        },\n        // \n        directives: {\n            'fontsize': function(el, binding) {\n                el.style.fontSize = binding.value\n            }\n        }\n    });\n\n    // \n    Vue.filter('dataFormat', function(data, pattern) {\n        // \n        var dt = new Date(data);\n\n        // \n        var y = dt.getFullYear();\n        var m = dt.getMonth() + 1;\n        var d = dt.getDate();\n\n        if (pattern.toLowerCase() == 'yyyy-mm-dd') {\n            return `${y}-${m}-${d}`;\n        } else {\n            var hh = dt.getHours();\n            var mm = dt.getMinutes();\n            var ss = dt.getSeconds();\n\n            return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;\n        }\n    });\n\n    // Vue\n    var vm = new Vue({\n        el: '#app',\n        data: {\n            id: '',\n            username: '',\n            list: [\n                { id: 1, username: '', time: new Date() },\n                { id: 2, username: 'loonycoder', time: new Date() }\n            ]\n        },\n        methods: {\n            add() {\n                var user = { id: this.id, username: this.username, time: new Date() };\n                this.list.push(user);\n            },\n            del(id) {\n                // some()return true\n                // userlisti\n                this.list.some((user, i) => {\n                    if (user.id == id) {\n                        this.list.splice(i, 1);\n                        return true;\n                    }\n                })\n            }\n        }\n    });\n    </script>\n</body>\n</html>\n```\n\n#### Vue\n- Vue\n- \n- \n\n> \n> * beforeCreate: datamethods\n> * created: datamethods\n> * beforeMount: \n> * mounted: \n> :\n> * beforeUpdate: dataDOM\n> * updated: data\n\n> * beforeDestory: \n> * destroyed: VueVue\n\n##### beforeCreate\ndatamethods\n![beforeCreate](/images/vue7.png)\n![beforeCreate](/images/vue8.png)\n\n##### created\ndatamethodsmethodsdatacreated\n![created](/images/vue9.png)\n![created](/images/vue10.png)\n\n##### beforeMount\n\n![beforeMount](/images/vue11.png)\n![beforeMount](/images/vue12.png)\n\n##### mounted\nmountedVue\n![mounted](/images/vue13.png)\n\n##### \n![](/images/vue14.png)\n\n---\n\n### vue-resource\nJSPHTMLVue\nVueAJAX\n\n##### \nVueAJAX\n```bash\nvue-resource.js\n```\n**Methods**\n```bash\nthis.$http.get('url', [options]).then(successCallback, errorCallback);\n\nthis.$http.post('url', [body], [options]).then(successCallback, errorCallback);\n```\n\n\n- thisVuevue-resource.js$httpvue-resource.jsvue.js\noptions\n- then\n- thensuccessCallbackerrorCallback\n\n##### \n```bash\n<button @click=\"getInfo\"></button>\n\nvar vm = new Vue({\n    el: '#app',\n    data: {},\n    methods: {\n        getInfo(){\n            this.$http.get('url').then(result => {\n                console.log(result.body);\n            })\n        }\n    }\n});\n```\n\n****\nthen.data.bodydataresult.bodyresult => {}ES6\n\n##### post\n**** postapplication/x-wwww-form-urlencoded Vuepost\npost{ emulateJSON: true }\n\n****\n```bash\nthis.$http.post('url', {}, { emulateJSON: true }).then(result => {\n    console.log(result.body)\n})\n```\n\n\n\n#### \n\nTomcat\npost\n\n```bash\n...\n\nmethods: {\n    add(){\n        this.$http.post('http://tycoding.cn/api/add', {}, {emulateJSON: true}).then(result => {\n            \n        });\n    }\n}\n```\n\nURL<http://www.loonycoder.com>/api/addajaxVue-resource****\n```bash\nVue.http.options.root = 'http://www.loonycoder.com';\n```\n\n\n\n****\n404\n> HTTPURL/ * this.$http.post('/xxx')URL/Vue404.\n* /this.$http.post('xxx')URL\n\n##### \npost{emulateJSON: true}postvue-resource\n```bash\nVue.http.options.emulateJSON = true;\n```\npost\n```bash\nmethods: {\n    add(){\n        this.$http.post('http://tycoding.cn/api/add', {}).then(result => {\n            \n        });\n    }\n}\n```\n\n##### \n\n```bash\n<!-- html -->\n<input type=\"text\" v-model=\"username\">\n<input type=\"button\" value=\"\" @click=\"add\">\n\n<table>\n    <tr>\n        <th></th>\n        <th></th>\n        <th></th>\n    </tr>\n    <tbody>\n        <tr v-for=\"user in list\" :key=\"user.id\">\n            <td>{{user.id}}</td>\n            <td>{{user.username}}</td>\n            <td>\n                <a href=\"#\" @click.pervent=\"del(user.id)\"></a>\n            </td>\n        </tr>\n    </tbody>\n</table>\n\n<!-- javascript -->\n<script type=\"text/javascript\">\n// \nVue.http.options.root = 'http://tycoding.cn/';\n\n//\nVue.http.options.emulateJSON = true;\n\n// Vue\nnew Vue({\n    el: '',\n    data: {\n        username: '',\n        list: []\n    },\n    created: {\n        // findAll\n        // Vuemethodsdatacreated\n        // findAll\n        this.findAll();\n    },\n    methods: {\n        // \n        findAll(){\n            this.$http.get('api/findAll').then(result => {\n                this.list = result.body;\n            }),\n        },\n\n        // \n        add(){\n            this.$http.post('api/add', {username: this.username}).then(result => {\n                if(result.body.status == 0){\n                    // 0\n                    // \n                    this.findAll()\n                }else{\n                    alert('');\n                }\n            })\n        },\n\n        //\n        del(id){\n            this.$http.get('api/del' + id).then(result => {\n                if(result.body.status == 0){\n                    //\n                    //\n                    this.findAll();\n                }else{\n                    alert('');\n                }\n            })\n        }\n    }\n});\n</script>\n```\n\nSpringMVCVue\n\n****\n- 1AJAXURL'/'Tomcat\n- 21AJAX2datalistthis.list = result.bodybodyF12\n- 3findAlllistmethodsdatacreatedcreatedfindAll\n- 4\n    + 1data\n    + 2v-model\n    + 3@clickmethods\n    + 4AJAXURLthis.username\n    + 5post{emulateJSON: true}post\n    + 6findAll\n- 5@clickid@click&middot;pervent&lt;a&gt;\n- 6\n\n\n","slug":"Vue2","published":1,"updated":"2020-02-21T15:28:45.145Z","_id":"ck6i8hlo10001tks69xdqdx5y","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Vue <strong>vue</strong> VueVue.jsmustachev-bind<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#123;  | <span class=\"keyword\">function</span> &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>Vue</p>\n<ul>\n<li>1<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.filter(<span class=\"string\">''</span>, <span class=\"function\"><span class=\"title\">function</span></span>()&#123;&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>2<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Vue()(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\">        : <span class=\"function\"><span class=\"title\">function</span></span>()&#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;&#123;&#123; msg | myFilters(<span class=\"string\">''</span>) &#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.filter(<span class=\"string\">'myFilters'</span>, <span class=\"keyword\">function</span>(data, pattern)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pattern == <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">        var old = data.substring(0,4);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> old + <span class=\"string\">','</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>VueVueVue</p>\n<ul>\n<li>Vue.filter()function(){}</li>\n<li>function(){}</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;&#123;&#123; msg | myFilters(<span class=\"string\">''</span>) &#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm2 = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app2'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        msg: <span class=\"string\">'loonycoder'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        myFilters: <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(pattern == <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">                var old = data.substring(0,4);</span><br><span class=\"line\">                <span class=\"built_in\">return</span> old + <span class=\"string\">',loonycoder'</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Vue<strong></strong><br> @keyup. = </p>\n<p><strong></strong></p>\n<blockquote>\n<p>.enter<br>.tab<br>.esc<br>.delete<br></p>\n</blockquote>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> @keyup.enter=<span class=\"string\">\"open\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">open</span></span>()&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>VueVueF2113<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> @keyup.f2=<span class=\"string\">\"open\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.config.keyCodes.f2 = 113;   </span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">open</span></span>()&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>focusv-focus</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123;&#125;,</span><br><span class=\"line\">    inserted: <span class=\"keyword\">function</span>(el) &#123;&#125;,</span><br><span class=\"line\">    updated: <span class=\"keyword\">function</span>(el) &#123;&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Vue.directive()</p>\n<ul>\n<li>1directive()<blockquote>\n<p>1v-v-<br>2</p>\n</blockquote>\n</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//  v-focus</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>2directive()<blockquote>\n<p>bind: bindDOMDOMDOM<br>inserted: DOM<br>updated: VNodeupdated</p>\n</blockquote>\n</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123;</span><br><span class=\"line\">        el.focus()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-focus /&gt;</span><br></pre></td></tr></table></figure>\n\n<p>bindelJSJSfocus</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<blockquote>\n<p>bind<br>inserted<br>update<br>componentUpdated: VNodeVNode<br>unbind: </p>\n</blockquote>\n<p><strong></strong><br>directive()Vue</p>\n<ul>\n<li>el: DOM</li>\n<li>binding: <ul>\n<li>name: v-</li>\n<li>value: v-focus=1 + 1value=2</li>\n<li>expression: v-focus=1+1experssion1+1</li>\n<li></li>\n</ul>\n</li>\n<li></li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-color=<span class=\"string\">\"'blue'\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.directive(<span class=\"string\">'color'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">        el.style.color = binding.value</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>binding<br>1elinput<br>2bindingv-color=blueblue<br>3binding-valuev-colorblueel.style.color</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><br><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        <span class=\"string\">'fontsize'</span>: &#123;</span><br><span class=\"line\">            <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">                el.style.fontSize = binding.value</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>bindupdate</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        <span class=\"string\">'fontsize'</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">            el.style.fontSize = binding.value</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">    &lt;style <span class=\"built_in\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><br><span class=\"line\">    table &#123;</span><br><span class=\"line\">        min-height: 25px;</span><br><span class=\"line\">        line-height: 25px;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">        border-collapse: collapse;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    table,</span><br><span class=\"line\">    table tr th,</span><br><span class=\"line\">    table tr td &#123;</span><br><span class=\"line\">        border: 1px solid <span class=\"comment\">#0094ff;</span></span><br><span class=\"line\">        padding: 11px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        id:</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"id\"</span> v-focus v-color=<span class=\"string\">\"'blue'\"</span>&gt; username:</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"username\"</span> @keyup.enter=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">        &lt;br/&gt;</span><br><span class=\"line\">        &lt;br/&gt;</span><br><span class=\"line\">        &lt;table&gt;</span><br><span class=\"line\">            &lt;thead&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;th&gt;id&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;name&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;date&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;fun&lt;/th&gt;</span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">            &lt;/thead&gt;</span><br><span class=\"line\">            &lt;tbody&gt;</span><br><span class=\"line\">                &lt;tr v-for=<span class=\"string\">\"user in list\"</span> :key=<span class=\"string\">\"user.id\"</span>&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.username&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.time | dataFormat(<span class=\"string\">''</span>) &#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&lt;a href=<span class=\"string\">\"#\"</span> @click=<span class=\"string\">\"del(user.id)\"</span>&gt;&lt;/a&gt;&lt;/td&gt;</span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">            &lt;/tbody&gt;</span><br><span class=\"line\">        &lt;/table&gt;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; new Date() &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; new Date() | dataFormat(<span class=\"string\">''</span>) &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app2\"</span>&gt;</span><br><span class=\"line\">        &#123;&#123; dt | dataFormat(<span class=\"string\">''</span>)&#125;&#125;</span><br><span class=\"line\">        &lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    // </span><br><span class=\"line\">    // Vue.directive()</span><br><span class=\"line\">    // 1v-v-focus</span><br><span class=\"line\">    // 2</span><br><span class=\"line\">    Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">        // elelJS</span><br><span class=\"line\">        <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123; //<span class=\"built_in\">bind</span></span><br><span class=\"line\">            // DOMfocusDOM</span><br><span class=\"line\">            // el.focus()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        inserted: <span class=\"keyword\">function</span>(el) &#123; // insertedDOM,</span><br><span class=\"line\">            el.focus()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        updated: <span class=\"keyword\">function</span>(el) &#123; // VNodeupdated</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.directive(<span class=\"string\">'color'</span>, &#123;</span><br><span class=\"line\">        <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding) &#123;</span><br><span class=\"line\">            el.style.color = binding.value</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.config.keyCodes.f2 = 113;</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    var vm2 = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app2'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">            dt: new Date(),</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">open</span></span>() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        filters: &#123;</span><br><span class=\"line\">            dataFormat: <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">                // </span><br><span class=\"line\">                var dt = new Date(data);</span><br><span class=\"line\"></span><br><span class=\"line\">                // </span><br><span class=\"line\">                var y = dt.getFullYear();</span><br><span class=\"line\">                var m = dt.getMonth() + 1;</span><br><span class=\"line\">                var d = dt.getDate();</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (pattern.toLowerCase() == <span class=\"string\">'yyyy-mm-dd'</span>) &#123;</span><br><span class=\"line\">                    <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span>`;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    var hh = dt.getHours();</span><br><span class=\"line\">                    var mm = dt.getMinutes();</span><br><span class=\"line\">                    var ss = dt.getSeconds();</span><br><span class=\"line\"></span><br><span class=\"line\">                    // es6 yyyy-mm-dd hh:mm:ss </span><br><span class=\"line\">                    <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span> <span class=\"variable\">$&#123;hh&#125;</span>:<span class=\"variable\">$&#123;mm&#125;</span>:<span class=\"variable\">$&#123;ss&#125;</span>` + <span class=\"string\">'--&gt;'</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        // </span><br><span class=\"line\">        directives: &#123;</span><br><span class=\"line\">            <span class=\"string\">'fontsize'</span>: <span class=\"keyword\">function</span>(el, binding) &#123;</span><br><span class=\"line\">                el.style.fontSize = binding.value</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.filter(<span class=\"string\">'dataFormat'</span>, <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">        // </span><br><span class=\"line\">        var dt = new Date(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        var y = dt.getFullYear();</span><br><span class=\"line\">        var m = dt.getMonth() + 1;</span><br><span class=\"line\">        var d = dt.getDate();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pattern.toLowerCase() == <span class=\"string\">'yyyy-mm-dd'</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span>`;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            var hh = dt.getHours();</span><br><span class=\"line\">            var mm = dt.getMinutes();</span><br><span class=\"line\">            var ss = dt.getSeconds();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span> <span class=\"variable\">$&#123;hh&#125;</span>:<span class=\"variable\">$&#123;mm&#125;</span>:<span class=\"variable\">$&#123;ss&#125;</span>`;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // Vue</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">            id: <span class=\"string\">''</span>,</span><br><span class=\"line\">            username: <span class=\"string\">''</span>,</span><br><span class=\"line\">            list: [</span><br><span class=\"line\">                &#123; id: 1, username: <span class=\"string\">''</span>, time: new Date() &#125;,</span><br><span class=\"line\">                &#123; id: 2, username: <span class=\"string\">'loonycoder'</span>, time: new Date() &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">add</span></span>() &#123;</span><br><span class=\"line\">                var user = &#123; id: this.id, username: this.username, time: new Date() &#125;;</span><br><span class=\"line\">                this.list.push(user);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            del(id) &#123;</span><br><span class=\"line\">                // some()<span class=\"built_in\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                // userlisti</span><br><span class=\"line\">                this.list.some((user, i) =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (user.id == id) &#123;</span><br><span class=\"line\">                        this.list.splice(i, 1);</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><ul>\n<li>Vue</li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n<ul>\n<li>beforeCreate: datamethods</li>\n<li>created: datamethods</li>\n<li>beforeMount: </li>\n<li>mounted: <br>:</li>\n<li>beforeUpdate: dataDOM</li>\n<li>updated: data<br></li>\n<li>beforeDestory: </li>\n<li>destroyed: VueVue</li>\n</ul>\n</blockquote>\n<h5 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h5><p>datamethods<br><img src=\"/images/vue7.png\" alt=\"beforeCreate\"><br><img src=\"/images/vue8.png\" alt=\"beforeCreate\"></p>\n<h5 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h5><p>datamethodsmethodsdatacreated<br><img src=\"/images/vue9.png\" alt=\"created\"><br><img src=\"/images/vue10.png\" alt=\"created\"></p>\n<h5 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h5><p><br><img src=\"/images/vue11.png\" alt=\"beforeMount\"><br><img src=\"/images/vue12.png\" alt=\"beforeMount\"></p>\n<h5 id=\"mounted\"><a href=\"#mounted\" class=\"headerlink\" title=\"mounted\"></a>mounted</h5><p>mountedVue<br><img src=\"/images/vue13.png\" alt=\"mounted\"></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/vue14.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"vue-resource\"><a href=\"#vue-resource\" class=\"headerlink\" title=\"vue-resource\"></a>vue-resource</h3><p>JSPHTMLVue<br>VueAJAX</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>VueAJAX</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue-resource.js</span><br></pre></td></tr></table></figure>\n<p><strong>Methods</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'url'</span>, [options]).<span class=\"keyword\">then</span>(successCallback, errorCallback);</span><br><span class=\"line\"></span><br><span class=\"line\">this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'url'</span>, [body], [options]).<span class=\"keyword\">then</span>(successCallback, errorCallback);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li>thisVuevue-resource.js$httpvue-resource.jsvue.js<br>options</li>\n<li>then</li>\n<li>thensuccessCallbackerrorCallback</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button @click=<span class=\"string\">\"getInfo\"</span>&gt;&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">getInfo</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'url'</span>).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                console.log(result.body);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>then.data.bodydataresult.bodyresult =&gt; {}ES6</p>\n<h5 id=\"post\"><a href=\"#post\" class=\"headerlink\" title=\"post\"></a>post</h5><p><strong></strong> postapplication/x-wwww-form-urlencoded Vuepost<br>post{ emulateJSON: true }</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'url'</span>, &#123;&#125;, &#123; emulateJSON: <span class=\"literal\">true</span> &#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">    console.log(result.body)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Tomcat<br>post</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'http://tycoding.cn/api/add'</span>, &#123;&#125;, &#123;emulateJSON: <span class=\"literal\">true</span>&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>URL<a href=\"http://www.loonycoder.com\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com</a>/api/addajaxVue-resource<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.http.options.root = <span class=\"string\">'http://www.loonycoder.com'</span>;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><strong></strong><br>404</p>\n<blockquote>\n<p>HTTPURL/ * this.$http.post(/xxx)URL/Vue404.</p>\n</blockquote>\n<ul>\n<li>/this.$http.post(xxx)URL</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>post{emulateJSON: true}postvue-resource</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.http.options.emulateJSON = <span class=\"literal\">true</span>;</span><br></pre></td></tr></table></figure>\n<p>post</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'http://tycoding.cn/api/add'</span>, &#123;&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- html --&gt;</span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;table&gt;</span><br><span class=\"line\">    &lt;tr&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">    &lt;/tr&gt;</span><br><span class=\"line\">    &lt;tbody&gt;</span><br><span class=\"line\">        &lt;tr v-for=<span class=\"string\">\"user in list\"</span> :key=<span class=\"string\">\"user.id\"</span>&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;user.username&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;</span><br><span class=\"line\">                &lt;a href=<span class=\"string\">\"#\"</span> @click.pervent=<span class=\"string\">\"del(user.id)\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/tbody&gt;</span><br><span class=\"line\">&lt;/table&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- javascript --&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.http.options.root = <span class=\"string\">'http://tycoding.cn/'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">Vue.http.options.emulateJSON = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">// Vue</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        username: <span class=\"string\">''</span>,</span><br><span class=\"line\">        list: []</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    created: &#123;</span><br><span class=\"line\">        // findAll</span><br><span class=\"line\">        // Vuemethodsdatacreated</span><br><span class=\"line\">        // findAll</span><br><span class=\"line\">        this.findAll();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">        // </span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">findAll</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'api/findAll'</span>).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                this.list = result.body;</span><br><span class=\"line\">            &#125;),</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'api/add'</span>, &#123;username: this.username&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(result.body.status == 0)&#123;</span><br><span class=\"line\">                    // 0</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    this.findAll()</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    alert(<span class=\"string\">''</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        //</span><br><span class=\"line\">        del(id)&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'api/del'</span> + id).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(result.body.status == 0)&#123;</span><br><span class=\"line\">                    //</span><br><span class=\"line\">                    //</span><br><span class=\"line\">                    this.findAll();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    alert(<span class=\"string\">''</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SpringMVCVue</p>\n<p><strong></strong></p>\n<ul>\n<li>1AJAXURL/Tomcat</li>\n<li>21AJAX2datalistthis.list = result.bodybodyF12</li>\n<li>3findAlllistmethodsdatacreatedcreatedfindAll</li>\n<li>4<ul>\n<li>1data</li>\n<li>2v-model</li>\n<li>3@clickmethods</li>\n<li>4AJAXURLthis.username</li>\n<li>5post{emulateJSON: true}post</li>\n<li>6findAll</li>\n</ul>\n</li>\n<li>5@clickid@click&middot;pervent&lt;a&gt;</li>\n<li>6</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Vue <strong>vue</strong> VueVue.jsmustachev-bind<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#123;  | <span class=\"keyword\">function</span> &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>Vue</p>\n<ul>\n<li>1<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.filter(<span class=\"string\">''</span>, <span class=\"function\"><span class=\"title\">function</span></span>()&#123;&#125;)</span><br></pre></td></tr></table></figure></li>\n<li>2<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">new Vue()(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\">        : <span class=\"function\"><span class=\"title\">function</span></span>()&#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;&#123;&#123; msg | myFilters(<span class=\"string\">''</span>) &#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.filter(<span class=\"string\">'myFilters'</span>, <span class=\"keyword\">function</span>(data, pattern)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pattern == <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">        var old = data.substring(0,4);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> old + <span class=\"string\">','</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>VueVueVue</p>\n<ul>\n<li>Vue.filter()function(){}</li>\n<li>function(){}</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h3&gt;&#123;&#123; msg | myFilters(<span class=\"string\">''</span>) &#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm2 = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app2'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        msg: <span class=\"string\">'loonycoder'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        myFilters: <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(pattern == <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">                var old = data.substring(0,4);</span><br><span class=\"line\">                <span class=\"built_in\">return</span> old + <span class=\"string\">',loonycoder'</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Vue<strong></strong><br> @keyup. = </p>\n<p><strong></strong></p>\n<blockquote>\n<p>.enter<br>.tab<br>.esc<br>.delete<br></p>\n</blockquote>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> @keyup.enter=<span class=\"string\">\"open\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">open</span></span>()&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>VueVueF2113<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> @keyup.f2=<span class=\"string\">\"open\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.config.keyCodes.f2 = 113;   </span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">open</span></span>()&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>focusv-focus</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123;&#125;,</span><br><span class=\"line\">    inserted: <span class=\"keyword\">function</span>(el) &#123;&#125;,</span><br><span class=\"line\">    updated: <span class=\"keyword\">function</span>(el) &#123;&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Vue.directive()</p>\n<ul>\n<li>1directive()<blockquote>\n<p>1v-v-<br>2</p>\n</blockquote>\n</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//  v-focus</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>2directive()<blockquote>\n<p>bind: bindDOMDOMDOM<br>inserted: DOM<br>updated: VNodeupdated</p>\n</blockquote>\n</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123;</span><br><span class=\"line\">        el.focus()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-focus /&gt;</span><br></pre></td></tr></table></figure>\n\n<p>bindelJSJSfocus</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<blockquote>\n<p>bind<br>inserted<br>update<br>componentUpdated: VNodeVNode<br>unbind: </p>\n</blockquote>\n<p><strong></strong><br>directive()Vue</p>\n<ul>\n<li>el: DOM</li>\n<li>binding: <ul>\n<li>name: v-</li>\n<li>value: v-focus=1 + 1value=2</li>\n<li>expression: v-focus=1+1experssion1+1</li>\n<li></li>\n</ul>\n</li>\n<li></li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-color=<span class=\"string\">\"'blue'\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.directive(<span class=\"string\">'color'</span>, &#123;</span><br><span class=\"line\">    <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">        el.style.color = binding.value</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>binding<br>1elinput<br>2bindingv-color=blueblue<br>3binding-valuev-colorblueel.style.color</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><br><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        <span class=\"string\">'fontsize'</span>: &#123;</span><br><span class=\"line\">            <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">                el.style.fontSize = binding.value</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>bindupdate</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    filters: &#123;&#125;,</span><br><span class=\"line\">    directives: &#123;</span><br><span class=\"line\">        <span class=\"string\">'fontsize'</span>: <span class=\"keyword\">function</span>(el, binding)&#123;</span><br><span class=\"line\">            el.style.fontSize = binding.value</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">    &lt;style <span class=\"built_in\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><br><span class=\"line\">    table &#123;</span><br><span class=\"line\">        min-height: 25px;</span><br><span class=\"line\">        line-height: 25px;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">        border-collapse: collapse;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    table,</span><br><span class=\"line\">    table tr th,</span><br><span class=\"line\">    table tr td &#123;</span><br><span class=\"line\">        border: 1px solid <span class=\"comment\">#0094ff;</span></span><br><span class=\"line\">        padding: 11px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        id:</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"id\"</span> v-focus v-color=<span class=\"string\">\"'blue'\"</span>&gt; username:</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"username\"</span> @keyup.enter=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">        &lt;br/&gt;</span><br><span class=\"line\">        &lt;br/&gt;</span><br><span class=\"line\">        &lt;table&gt;</span><br><span class=\"line\">            &lt;thead&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;th&gt;id&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;name&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;date&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;fun&lt;/th&gt;</span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">            &lt;/thead&gt;</span><br><span class=\"line\">            &lt;tbody&gt;</span><br><span class=\"line\">                &lt;tr v-for=<span class=\"string\">\"user in list\"</span> :key=<span class=\"string\">\"user.id\"</span>&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.username&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&#123;&#123;user.time | dataFormat(<span class=\"string\">''</span>) &#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;&lt;a href=<span class=\"string\">\"#\"</span> @click=<span class=\"string\">\"del(user.id)\"</span>&gt;&lt;/a&gt;&lt;/td&gt;</span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">            &lt;/tbody&gt;</span><br><span class=\"line\">        &lt;/table&gt;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; new Date() &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; new Date() | dataFormat(<span class=\"string\">''</span>) &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app2\"</span>&gt;</span><br><span class=\"line\">        &#123;&#123; dt | dataFormat(<span class=\"string\">''</span>)&#125;&#125;</span><br><span class=\"line\">        &lt;p v-fontsize=<span class=\"string\">\"'50px'\"</span>&gt;&lt;/p&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    // </span><br><span class=\"line\">    // Vue.directive()</span><br><span class=\"line\">    // 1v-v-focus</span><br><span class=\"line\">    // 2</span><br><span class=\"line\">    Vue.directive(<span class=\"string\">'focus'</span>, &#123;</span><br><span class=\"line\">        // elelJS</span><br><span class=\"line\">        <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el) &#123; //<span class=\"built_in\">bind</span></span><br><span class=\"line\">            // DOMfocusDOM</span><br><span class=\"line\">            // el.focus()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        inserted: <span class=\"keyword\">function</span>(el) &#123; // insertedDOM,</span><br><span class=\"line\">            el.focus()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        updated: <span class=\"keyword\">function</span>(el) &#123; // VNodeupdated</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.directive(<span class=\"string\">'color'</span>, &#123;</span><br><span class=\"line\">        <span class=\"built_in\">bind</span>: <span class=\"keyword\">function</span>(el, binding) &#123;</span><br><span class=\"line\">            el.style.color = binding.value</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.config.keyCodes.f2 = 113;</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    var vm2 = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app2'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">            dt: new Date(),</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">open</span></span>() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        filters: &#123;</span><br><span class=\"line\">            dataFormat: <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">                // </span><br><span class=\"line\">                var dt = new Date(data);</span><br><span class=\"line\"></span><br><span class=\"line\">                // </span><br><span class=\"line\">                var y = dt.getFullYear();</span><br><span class=\"line\">                var m = dt.getMonth() + 1;</span><br><span class=\"line\">                var d = dt.getDate();</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (pattern.toLowerCase() == <span class=\"string\">'yyyy-mm-dd'</span>) &#123;</span><br><span class=\"line\">                    <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span>`;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    var hh = dt.getHours();</span><br><span class=\"line\">                    var mm = dt.getMinutes();</span><br><span class=\"line\">                    var ss = dt.getSeconds();</span><br><span class=\"line\"></span><br><span class=\"line\">                    // es6 yyyy-mm-dd hh:mm:ss </span><br><span class=\"line\">                    <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span> <span class=\"variable\">$&#123;hh&#125;</span>:<span class=\"variable\">$&#123;mm&#125;</span>:<span class=\"variable\">$&#123;ss&#125;</span>` + <span class=\"string\">'--&gt;'</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        // </span><br><span class=\"line\">        directives: &#123;</span><br><span class=\"line\">            <span class=\"string\">'fontsize'</span>: <span class=\"keyword\">function</span>(el, binding) &#123;</span><br><span class=\"line\">                el.style.fontSize = binding.value</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    Vue.filter(<span class=\"string\">'dataFormat'</span>, <span class=\"keyword\">function</span>(data, pattern) &#123;</span><br><span class=\"line\">        // </span><br><span class=\"line\">        var dt = new Date(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        var y = dt.getFullYear();</span><br><span class=\"line\">        var m = dt.getMonth() + 1;</span><br><span class=\"line\">        var d = dt.getDate();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pattern.toLowerCase() == <span class=\"string\">'yyyy-mm-dd'</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span>`;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            var hh = dt.getHours();</span><br><span class=\"line\">            var mm = dt.getMinutes();</span><br><span class=\"line\">            var ss = dt.getSeconds();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">return</span> `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;d&#125;</span> <span class=\"variable\">$&#123;hh&#125;</span>:<span class=\"variable\">$&#123;mm&#125;</span>:<span class=\"variable\">$&#123;ss&#125;</span>`;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // Vue</span><br><span class=\"line\">    var vm = new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">            id: <span class=\"string\">''</span>,</span><br><span class=\"line\">            username: <span class=\"string\">''</span>,</span><br><span class=\"line\">            list: [</span><br><span class=\"line\">                &#123; id: 1, username: <span class=\"string\">''</span>, time: new Date() &#125;,</span><br><span class=\"line\">                &#123; id: 2, username: <span class=\"string\">'loonycoder'</span>, time: new Date() &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">add</span></span>() &#123;</span><br><span class=\"line\">                var user = &#123; id: this.id, username: this.username, time: new Date() &#125;;</span><br><span class=\"line\">                this.list.push(user);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            del(id) &#123;</span><br><span class=\"line\">                // some()<span class=\"built_in\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                // userlisti</span><br><span class=\"line\">                this.list.some((user, i) =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (user.id == id) &#123;</span><br><span class=\"line\">                        this.list.splice(i, 1);</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><ul>\n<li>Vue</li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p></p>\n<ul>\n<li>beforeCreate: datamethods</li>\n<li>created: datamethods</li>\n<li>beforeMount: </li>\n<li>mounted: <br>:</li>\n<li>beforeUpdate: dataDOM</li>\n<li>updated: data<br></li>\n<li>beforeDestory: </li>\n<li>destroyed: VueVue</li>\n</ul>\n</blockquote>\n<h5 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h5><p>datamethods<br><img src=\"/images/vue7.png\" alt=\"beforeCreate\"><br><img src=\"/images/vue8.png\" alt=\"beforeCreate\"></p>\n<h5 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h5><p>datamethodsmethodsdatacreated<br><img src=\"/images/vue9.png\" alt=\"created\"><br><img src=\"/images/vue10.png\" alt=\"created\"></p>\n<h5 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h5><p><br><img src=\"/images/vue11.png\" alt=\"beforeMount\"><br><img src=\"/images/vue12.png\" alt=\"beforeMount\"></p>\n<h5 id=\"mounted\"><a href=\"#mounted\" class=\"headerlink\" title=\"mounted\"></a>mounted</h5><p>mountedVue<br><img src=\"/images/vue13.png\" alt=\"mounted\"></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/vue14.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"vue-resource\"><a href=\"#vue-resource\" class=\"headerlink\" title=\"vue-resource\"></a>vue-resource</h3><p>JSPHTMLVue<br>VueAJAX</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>VueAJAX</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue-resource.js</span><br></pre></td></tr></table></figure>\n<p><strong>Methods</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'url'</span>, [options]).<span class=\"keyword\">then</span>(successCallback, errorCallback);</span><br><span class=\"line\"></span><br><span class=\"line\">this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'url'</span>, [body], [options]).<span class=\"keyword\">then</span>(successCallback, errorCallback);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li>thisVuevue-resource.js$httpvue-resource.jsvue.js<br>options</li>\n<li>then</li>\n<li>thensuccessCallbackerrorCallback</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button @click=<span class=\"string\">\"getInfo\"</span>&gt;&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">getInfo</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'url'</span>).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                console.log(result.body);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>then.data.bodydataresult.bodyresult =&gt; {}ES6</p>\n<h5 id=\"post\"><a href=\"#post\" class=\"headerlink\" title=\"post\"></a>post</h5><p><strong></strong> postapplication/x-wwww-form-urlencoded Vuepost<br>post{ emulateJSON: true }</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'url'</span>, &#123;&#125;, &#123; emulateJSON: <span class=\"literal\">true</span> &#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">    console.log(result.body)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Tomcat<br>post</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'http://tycoding.cn/api/add'</span>, &#123;&#125;, &#123;emulateJSON: <span class=\"literal\">true</span>&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>URL<a href=\"http://www.loonycoder.com\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com</a>/api/addajaxVue-resource<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.http.options.root = <span class=\"string\">'http://www.loonycoder.com'</span>;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><strong></strong><br>404</p>\n<blockquote>\n<p>HTTPURL/ * this.$http.post(/xxx)URL/Vue404.</p>\n</blockquote>\n<ul>\n<li>/this.$http.post(xxx)URL</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>post{emulateJSON: true}postvue-resource</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.http.options.emulateJSON = <span class=\"literal\">true</span>;</span><br></pre></td></tr></table></figure>\n<p>post</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'http://tycoding.cn/api/add'</span>, &#123;&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- html --&gt;</span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> value=<span class=\"string\">\"\"</span> @click=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;table&gt;</span><br><span class=\"line\">    &lt;tr&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">        &lt;th&gt;&lt;/th&gt;</span><br><span class=\"line\">    &lt;/tr&gt;</span><br><span class=\"line\">    &lt;tbody&gt;</span><br><span class=\"line\">        &lt;tr v-for=<span class=\"string\">\"user in list\"</span> :key=<span class=\"string\">\"user.id\"</span>&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;user.id&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;&#123;&#123;user.username&#125;&#125;&lt;/td&gt;</span><br><span class=\"line\">            &lt;td&gt;</span><br><span class=\"line\">                &lt;a href=<span class=\"string\">\"#\"</span> @click.pervent=<span class=\"string\">\"del(user.id)\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;/td&gt;</span><br><span class=\"line\">        &lt;/tr&gt;</span><br><span class=\"line\">    &lt;/tbody&gt;</span><br><span class=\"line\">&lt;/table&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- javascript --&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.http.options.root = <span class=\"string\">'http://tycoding.cn/'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">//</span><br><span class=\"line\">Vue.http.options.emulateJSON = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">// Vue</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">''</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        username: <span class=\"string\">''</span>,</span><br><span class=\"line\">        list: []</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    created: &#123;</span><br><span class=\"line\">        // findAll</span><br><span class=\"line\">        // Vuemethodsdatacreated</span><br><span class=\"line\">        // findAll</span><br><span class=\"line\">        this.findAll();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">        // </span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">findAll</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'api/findAll'</span>).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                this.list = result.body;</span><br><span class=\"line\">            &#125;),</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span></span>()&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.post(<span class=\"string\">'api/add'</span>, &#123;username: this.username&#125;).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(result.body.status == 0)&#123;</span><br><span class=\"line\">                    // 0</span><br><span class=\"line\">                    // </span><br><span class=\"line\">                    this.findAll()</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    alert(<span class=\"string\">''</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        //</span><br><span class=\"line\">        del(id)&#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$http</span>.get(<span class=\"string\">'api/del'</span> + id).<span class=\"keyword\">then</span>(result =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(result.body.status == 0)&#123;</span><br><span class=\"line\">                    //</span><br><span class=\"line\">                    //</span><br><span class=\"line\">                    this.findAll();</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    alert(<span class=\"string\">''</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SpringMVCVue</p>\n<p><strong></strong></p>\n<ul>\n<li>1AJAXURL/Tomcat</li>\n<li>21AJAX2datalistthis.list = result.bodybodyF12</li>\n<li>3findAlllistmethodsdatacreatedcreatedfindAll</li>\n<li>4<ul>\n<li>1data</li>\n<li>2v-model</li>\n<li>3@clickmethods</li>\n<li>4AJAXURLthis.username</li>\n<li>5post{emulateJSON: true}post</li>\n<li>6findAll</li>\n</ul>\n</li>\n<li>5@clickid@click&middot;pervent&lt;a&gt;</li>\n<li>6</li>\n</ul>\n"},{"title":"Vue","date":"2018-09-06T16:00:00.000Z","_content":"\n#### Vue\n\n##### \nVue\n\n- \n- UIUI\n\n##### Vue\n\n****\n1Vue.extendVue\n2templateHTML\n3Vue.component()\n4HTMLTagtag\n```bash\n<div id=\"app\">\n\t<!-- tag -->\n\t<mycom1></mycom1>\n</div>\n\n<script>\n\t// \n\tvar com1 = Vue.extend({\n\t\ttemplate: '<h3>Vue.extend </h3>'\n\t});\n\n\t// Vue.component('', )\n\tVue.component('mycom1', com1);\n</script>\n```\n****\n- Vue.component()1Xxx2xxxtag-Vue.component('myCom', com1)tag &lt;my-com&gt; &lt;/my-com&gt;\n\n****\n```bash\n<!-- tag -->\n<mycom1></mycom1>\n\n<script>\n\n\t// Vue.component('', )\n\tVue.component('mycom1', Vue.extend({\n\t\ttemplate: '<h3>Vue.extend </h3>'\n\t}));\n</script>\n```\n\n\ntemplatetemplate &lt;h3&gt;\n****\n```bash\nVue.component('mycom1', Vue.extend({\n\ttemplate: '<h3>Vue.extend </h3><span></span>'\n}));\n```\n\n```bash\nVue.component('mycom1', Vue.extend({\n\ttemplate: '<div><h3>Vue.extend </h3><span></span></div>'\n}));\n```\n****\n1JavaScriptVue.componenttemplate: 'HTML'idtemplate:'id'\n2Vueapp&lt;template id=\"id\"&gt;HTML&lt;/template&gt;\nHTMLJavaScript\n\n```bash\n<div id=\"app\">\n\t<!--  -->\n</div>\n\n\n<template id=\"tmp\">\n\t<!--  -->\n\t<div>\n\t\t<h1></h1>>\n\t\t<h2></h2>\n\t</div>\n</template>\n\n//JavaScript\nVue.component('mycom', {\n\ttemplate: '#tmp'\n});\n```\n\n****\ncomponents: {}\n\n```bash\n<div id=\"app\">\n    <tem></tem>\n</div>\n<template id=\"tmp\">\n    <h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\nnew Vue({\n    el: '#app',\n    data: {},\n    methods: {},\n    components: {\n        tem: {\n            template: '#tmp'\n        }\n    }\n\n});\n</script>\n```\n\n##### \n****data\ndataVuedata\n1data\n```bash\ndata: function(){ }\n```\n2dataObject\n```bash\ndata: function(){\n\treturn object\n}\n```\n\n\n```bash\n<div id=\"app\">\n    <mycom1></mycom1>\n</div>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\nVue.component('mycom1', Vue.extend({\n\tdata: function(){\n\t\treturn {\n\t\t\tmsg: 'data'\n\t\t}\n\t},\n\ttemplate: '<h3>Vue.extend -- {{msg}}</h3>'\n}));\n\nnew Vue({\n    el: '#app',\n    data: {},\n    methods: {},\n    components: {\n    }\n});\n</script>\n```\n\n****\nVue\n\n****\n\nVuev-ifv-else\n\n\n```bash\n<div id=\"app\">\n    <a href=\"#\" @click.prevent=\"flag=true\"></a>\n    <a href=\"#\" @click.prevent=\"flag=false\"></a>\n\n    <login v-if=\"flag\"></login>\n    <register v-else=\"flag\"></register>\n</div>\n<template id=\"login\">\n    <h3></h3>\n</template>\n<template id=\"register\">\n\t<h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\n// \nVue.component('login', {\n\ttemplate: '#login'\n});\n\n// \nVue.component('register', {\n\ttemplate: '#register'\n})\n\nnew Vue({\n    el: '#app',\n    data: {\n    \tflag: true\n    },\n    methods: {}\n\n});\n</script>\n```\nflagflag=trueflar=false\n\n****\n\nVuecomponentcomponent:is\n\n\n```bash\n<div id=\"app\">\n    <a href=\"#\" @click.prevent=\"comName='login'\"></a>\n    <a href=\"#\" @click.prevent=\"comName='register'\"></a>\n\n    <component :is=\"comName\"></component>\n</div>\n<template id=\"login\">\n    <h3></h3>\n</template>\n<template id=\"register\">\n\t<h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\n// \nVue.component('login', {\n\ttemplate: '#login'\n});\n\n// \nVue.component('register', {\n\ttemplate: '#register'\n})\n\nnew Vue({\n    el: '#app',\n    data: {\n    \tcomName: 'login'\n    },\n    methods: {}\n});\n</script>\n```\nVuecomponent:is=''\n\n##### \n****\n\nmethodsdata.\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1></com1>\n    </div>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {\n        \tshow(){\n        \t\tconsole.log(\"show\");\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '<h2></h2>'\n        \t}\n        }\n    });\n    </script>\n</body>\n```\ndatamsg\n```bash\ncom1: {\n\ttemplate: '<h2>--{{msg}}</h2>'\n}\n```\ndatamethods\nVue\n- 1v-bind:\n- 2props: []\n\n****\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 :fatoson=\"msg\"></com1>\n    </div>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {},\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '<h2>--{{fatoson}}</h2>',\n        \t\tprops: ['fatoson']\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\nv-bindfatosonmsgdatadataVuedatafatosonprops: []\n- 1msgfatoson\n- 2HTML-\n- 3propsVue\n- 4props\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {\n        \tshow(){\n        \t\tconsole.log(\"show\");\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tprops: ['fatoson'],\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open');\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\n****\n- 1template&lt;template&gt;&lt;/template&gt;HTML\n- 2v-on@@openshow\n- 3props$emit()\n\n****\n\n```bash\n@=\"(data)\"\n```\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show(fatosonval)\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tfatosonval: {\n        \t\tid: '1',\n        \t\tname: 'Loonycoder'\n        \t}\n        },\n        methods: {\n        \tshow(data){\n        \t\tconsole.log(data);\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open');\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tfatosonval: null\n        },\n        methods: {\n        \tshow(data){\n        \t\tconsole.log(data);\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tdata(){\n        \t\t\treturn {\n        \t\t\t\tsonval: { name: 'Loonycoder', age: 24 }\n        \t\t\t}\n        \t\t},\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open', this.sonval);\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n@open()dataopen$emit('', data)\n\n##### VueDOM\nVueDOMVue\n&lt;h2&gt;&lt;/h2&gt;JStagidJSdocument.getElementById('id').innterText&lt;h2&gt;VueDOM\n- HTML`ref`\n- Vue`this.$refs.`DOM\n```bash\n<h2 ref=\"h2\">h2</h2>\n\nconsole.log(this.$refs.h2.innerText);\n```\n**$refsdatamethods**\nref=\"com1\"Vuethis.$refs.com1datamethods\n\n```bash\n<body>\n    <!--  -->\n    <div id=\"app\">\n        <!--  -->\n        <com1 ref=\"com1\"></com1>\n        <input type=\"button\" @click=\"show\" value=\"\">\n\n        <h2 ref=\"h2\"></h2>\n    </div>\n    <template id=\"tmp\">\n        <div>\n            <h2></h2>\n        </div>\n    </template>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n    new Vue({\n        el: '#app',\n        methods: {\n            show(){\n                // console.log(this.$refs.h2.innerText);\n                // console.log(this.$refs.com1); //\n                // console.log(this.$refs.com1.sonval); //data\n                console.log(this.$refs.com1.sonshow()); //\n\n            }\n        },\n\n        // \n        components: {\n            com1: {\n                template: '#tmp',\n                data() {\n                    return {\n                        sonval: { name: 'Loonycoder', age: 24 }\n                    }\n                },\n                methods: {\n                    sonshow() {\n                        console.log('');\n                    }\n                }\n            }\n        }\n    });\n    </script>\n</body>\n```\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Vue3.md","raw":"---\ntitle: Vue\ncategories:\n    - Web\ndate: 2018-09-07\ntags:\n\t- \n\t\n---\n\n#### Vue\n\n##### \nVue\n\n- \n- UIUI\n\n##### Vue\n\n****\n1Vue.extendVue\n2templateHTML\n3Vue.component()\n4HTMLTagtag\n```bash\n<div id=\"app\">\n\t<!-- tag -->\n\t<mycom1></mycom1>\n</div>\n\n<script>\n\t// \n\tvar com1 = Vue.extend({\n\t\ttemplate: '<h3>Vue.extend </h3>'\n\t});\n\n\t// Vue.component('', )\n\tVue.component('mycom1', com1);\n</script>\n```\n****\n- Vue.component()1Xxx2xxxtag-Vue.component('myCom', com1)tag &lt;my-com&gt; &lt;/my-com&gt;\n\n****\n```bash\n<!-- tag -->\n<mycom1></mycom1>\n\n<script>\n\n\t// Vue.component('', )\n\tVue.component('mycom1', Vue.extend({\n\t\ttemplate: '<h3>Vue.extend </h3>'\n\t}));\n</script>\n```\n\n\ntemplatetemplate &lt;h3&gt;\n****\n```bash\nVue.component('mycom1', Vue.extend({\n\ttemplate: '<h3>Vue.extend </h3><span></span>'\n}));\n```\n\n```bash\nVue.component('mycom1', Vue.extend({\n\ttemplate: '<div><h3>Vue.extend </h3><span></span></div>'\n}));\n```\n****\n1JavaScriptVue.componenttemplate: 'HTML'idtemplate:'id'\n2Vueapp&lt;template id=\"id\"&gt;HTML&lt;/template&gt;\nHTMLJavaScript\n\n```bash\n<div id=\"app\">\n\t<!--  -->\n</div>\n\n\n<template id=\"tmp\">\n\t<!--  -->\n\t<div>\n\t\t<h1></h1>>\n\t\t<h2></h2>\n\t</div>\n</template>\n\n//JavaScript\nVue.component('mycom', {\n\ttemplate: '#tmp'\n});\n```\n\n****\ncomponents: {}\n\n```bash\n<div id=\"app\">\n    <tem></tem>\n</div>\n<template id=\"tmp\">\n    <h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\nnew Vue({\n    el: '#app',\n    data: {},\n    methods: {},\n    components: {\n        tem: {\n            template: '#tmp'\n        }\n    }\n\n});\n</script>\n```\n\n##### \n****data\ndataVuedata\n1data\n```bash\ndata: function(){ }\n```\n2dataObject\n```bash\ndata: function(){\n\treturn object\n}\n```\n\n\n```bash\n<div id=\"app\">\n    <mycom1></mycom1>\n</div>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\nVue.component('mycom1', Vue.extend({\n\tdata: function(){\n\t\treturn {\n\t\t\tmsg: 'data'\n\t\t}\n\t},\n\ttemplate: '<h3>Vue.extend -- {{msg}}</h3>'\n}));\n\nnew Vue({\n    el: '#app',\n    data: {},\n    methods: {},\n    components: {\n    }\n});\n</script>\n```\n\n****\nVue\n\n****\n\nVuev-ifv-else\n\n\n```bash\n<div id=\"app\">\n    <a href=\"#\" @click.prevent=\"flag=true\"></a>\n    <a href=\"#\" @click.prevent=\"flag=false\"></a>\n\n    <login v-if=\"flag\"></login>\n    <register v-else=\"flag\"></register>\n</div>\n<template id=\"login\">\n    <h3></h3>\n</template>\n<template id=\"register\">\n\t<h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\n// \nVue.component('login', {\n\ttemplate: '#login'\n});\n\n// \nVue.component('register', {\n\ttemplate: '#register'\n})\n\nnew Vue({\n    el: '#app',\n    data: {\n    \tflag: true\n    },\n    methods: {}\n\n});\n</script>\n```\nflagflag=trueflar=false\n\n****\n\nVuecomponentcomponent:is\n\n\n```bash\n<div id=\"app\">\n    <a href=\"#\" @click.prevent=\"comName='login'\"></a>\n    <a href=\"#\" @click.prevent=\"comName='register'\"></a>\n\n    <component :is=\"comName\"></component>\n</div>\n<template id=\"login\">\n    <h3></h3>\n</template>\n<template id=\"register\">\n\t<h3></h3>\n</template>\n<script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n<script type=\"text/javascript\">\n// \nVue.component('login', {\n\ttemplate: '#login'\n});\n\n// \nVue.component('register', {\n\ttemplate: '#register'\n})\n\nnew Vue({\n    el: '#app',\n    data: {\n    \tcomName: 'login'\n    },\n    methods: {}\n});\n</script>\n```\nVuecomponent:is=''\n\n##### \n****\n\nmethodsdata.\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1></com1>\n    </div>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {\n        \tshow(){\n        \t\tconsole.log(\"show\");\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '<h2></h2>'\n        \t}\n        }\n    });\n    </script>\n</body>\n```\ndatamsg\n```bash\ncom1: {\n\ttemplate: '<h2>--{{msg}}</h2>'\n}\n```\ndatamethods\nVue\n- 1v-bind:\n- 2props: []\n\n****\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 :fatoson=\"msg\"></com1>\n    </div>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {},\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '<h2>--{{fatoson}}</h2>',\n        \t\tprops: ['fatoson']\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\nv-bindfatosonmsgdatadataVuedatafatosonprops: []\n- 1msgfatoson\n- 2HTML-\n- 3propsVue\n- 4props\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tmsg: 'data'\n        },\n        methods: {\n        \tshow(){\n        \t\tconsole.log(\"show\");\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tprops: ['fatoson'],\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open');\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\n****\n- 1template&lt;template&gt;&lt;/template&gt;HTML\n- 2v-on@@openshow\n- 3props$emit()\n\n****\n\n```bash\n@=\"(data)\"\n```\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show(fatosonval)\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tfatosonval: {\n        \t\tid: '1',\n        \t\tname: 'Loonycoder'\n        \t}\n        },\n        methods: {\n        \tshow(data){\n        \t\tconsole.log(data);\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open');\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n\n****\n\n```bash\n<body>\n\t<!--  -->\n    <div id=\"app\">\n\t\t\n        <!--  -->\n        <com1 @open=\"show\"></com1>\n    </div>\n    <template id=\"tmp\">\n    \t<div>\n    \t\t<h2></h2>\n    \t\t<input type=\"button\" @click=\"myclick\" value=\"\"/>\n    \t</div>\n    </template>\n\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n\n    new Vue({\n        el: '#app',\n        data: {\n        \tfatosonval: null\n        },\n        methods: {\n        \tshow(data){\n        \t\tconsole.log(data);\n        \t}\n        },\n\n        // \n        components: {\n        \tcom1: {\n        \t\ttemplate: '#tmp',\n        \t\tdata(){\n        \t\t\treturn {\n        \t\t\t\tsonval: { name: 'Loonycoder', age: 24 }\n        \t\t\t}\n        \t\t},\n        \t\tmethods: {\n        \t\t\tmyclick(){\n       \t\t \t\t\tthis.$emit('open', this.sonval);\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n    });\n    </script>\n</body>\n```\n@open()dataopen$emit('', data)\n\n##### VueDOM\nVueDOMVue\n&lt;h2&gt;&lt;/h2&gt;JStagidJSdocument.getElementById('id').innterText&lt;h2&gt;VueDOM\n- HTML`ref`\n- Vue`this.$refs.`DOM\n```bash\n<h2 ref=\"h2\">h2</h2>\n\nconsole.log(this.$refs.h2.innerText);\n```\n**$refsdatamethods**\nref=\"com1\"Vuethis.$refs.com1datamethods\n\n```bash\n<body>\n    <!--  -->\n    <div id=\"app\">\n        <!--  -->\n        <com1 ref=\"com1\"></com1>\n        <input type=\"button\" @click=\"show\" value=\"\">\n\n        <h2 ref=\"h2\"></h2>\n    </div>\n    <template id=\"tmp\">\n        <div>\n            <h2></h2>\n        </div>\n    </template>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\">\n    new Vue({\n        el: '#app',\n        methods: {\n            show(){\n                // console.log(this.$refs.h2.innerText);\n                // console.log(this.$refs.com1); //\n                // console.log(this.$refs.com1.sonval); //data\n                console.log(this.$refs.com1.sonshow()); //\n\n            }\n        },\n\n        // \n        components: {\n            com1: {\n                template: '#tmp',\n                data() {\n                    return {\n                        sonval: { name: 'Loonycoder', age: 24 }\n                    }\n                },\n                methods: {\n                    sonshow() {\n                        console.log('');\n                    }\n                }\n            }\n        }\n    });\n    </script>\n</body>\n```\n\n\n\n\n\n\n\n\n\n\n","slug":"Vue3","published":1,"updated":"2020-02-21T15:28:56.290Z","_id":"ck6ivxamv0000n8s6a1re1k3g","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Vue<br></p>\n<ul>\n<li></li>\n<li>UIUI</li>\n</ul>\n<h5 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h5><p><strong></strong><br>1Vue.extendVue<br>2templateHTML<br>3Vue.component()<br>4HTMLTagtag</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t&lt;!-- tag --&gt;</span><br><span class=\"line\">\t&lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tvar com1 = Vue.extend(&#123;</span><br><span class=\"line\">\t\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;'</span></span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t// Vue.component(<span class=\"string\">''</span>, )</span><br><span class=\"line\">\tVue.component(<span class=\"string\">'mycom1'</span>, com1);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<ul>\n<li>Vue.component()1Xxx2xxxtag-Vue.component(myCom, com1)tag &lt;my-com&gt; &lt;/my-com&gt;</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- tag --&gt;</span><br><span class=\"line\">&lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t// Vue.component(<span class=\"string\">''</span>, )</span><br><span class=\"line\">\tVue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\t\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;'</span></span><br><span class=\"line\">\t&#125;));</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br>templatetemplate &lt;h3&gt;<br><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;&lt;span&gt;&lt;/span&gt;'</span></span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;div&gt;&lt;h3&gt;Vue.extend &lt;/h3&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;'</span></span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>1JavaScriptVue.componenttemplate: HTMLidtemplate:id<br>2Vueapp&lt;template id=id&gt;HTML&lt;/template&gt;<br>HTMLJavaScript<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">\t&lt;div&gt;</span><br><span class=\"line\">\t\t&lt;h1&gt;&lt;/h1&gt;&gt;</span><br><span class=\"line\">\t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//JavaScript</span><br><span class=\"line\">Vue.component(<span class=\"string\">'mycom'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>components: {}<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;tem&gt;&lt;/tem&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">        tem: &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong>data<br>dataVuedata<br>1data</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: <span class=\"function\"><span class=\"title\">function</span></span>()&#123; &#125;</span><br></pre></td></tr></table></figure>\n<p>2dataObject</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">return</span> object</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\tdata: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">\t\t\tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend -- &#123;&#123;msg&#125;&#125;&lt;/h3&gt;'</span></span><br><span class=\"line\">&#125;));</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>Vue</p>\n<p><strong></strong></p>\n<p>Vuev-ifv-else</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"flag=true\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"flag=false\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;login v-if=<span class=\"string\">\"flag\"</span>&gt;&lt;/login&gt;</span><br><span class=\"line\">    &lt;register v-else=<span class=\"string\">\"flag\"</span>&gt;&lt;/register&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"login\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"register\"</span>&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'login'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#login'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'register'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#register'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">    \tflag: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>flagflag=trueflar=false</p>\n<p><strong></strong></p>\n<p>Vuecomponentcomponent:is</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"comName='login'\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"comName='register'\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;component :is=<span class=\"string\">\"comName\"</span>&gt;&lt;/component&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"login\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"register\"</span>&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'login'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#login'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'register'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#register'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">    \tcomName: <span class=\"string\">'login'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>Vuecomponent:is=</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong></p>\n<p>methodsdata.</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \t<span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">        \t\tconsole.log(<span class=\"string\">\"show\"</span>);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p>datamsg</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">com1: &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h2&gt;--&#123;&#123;msg&#125;&#125;&lt;/h2&gt;'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>datamethods<br>Vue</p>\n<ul>\n<li>1v-bind:</li>\n<li>2props: []</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 :fatoson=<span class=\"string\">\"msg\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'&lt;h2&gt;--&#123;&#123;fatoson&#125;&#125;&lt;/h2&gt;'</span>,</span><br><span class=\"line\">        \t\tprops: [<span class=\"string\">'fatoson'</span>]</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p>v-bindfatosonmsgdatadataVuedatafatosonprops: []</p>\n<ul>\n<li>1msgfatoson</li>\n<li>2HTML-</li>\n<li>3propsVue</li>\n<li>4props</li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \t<span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">        \t\tconsole.log(<span class=\"string\">\"show\"</span>);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\tprops: [<span class=\"string\">'fatoson'</span>],</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li>1template&lt;template&gt;&lt;/template&gt;HTML</li>\n<li>2v-on@@openshow</li>\n<li>3props$emit()</li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@=<span class=\"string\">\"(data)\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show(fatosonval)\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tfatosonval: &#123;</span><br><span class=\"line\">        \t\tid: <span class=\"string\">'1'</span>,</span><br><span class=\"line\">        \t\tname: <span class=\"string\">'Loonycoder'</span></span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \tshow(data)&#123;</span><br><span class=\"line\">        \t\tconsole.log(data);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tfatosonval: null</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \tshow(data)&#123;</span><br><span class=\"line\">        \t\tconsole.log(data);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\t<span class=\"function\"><span class=\"title\">data</span></span>()&#123;</span><br><span class=\"line\">        \t\t\t<span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">        \t\t\t\tsonval: &#123; name: <span class=\"string\">'Loonycoder'</span>, age: 24 &#125;</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;,</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>, this.sonval);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p>@open()dataopen$emit(, data)</p>\n<h5 id=\"VueDOM\"><a href=\"#VueDOM\" class=\"headerlink\" title=\"VueDOM\"></a>VueDOM</h5><p>VueDOMVue<br>&lt;h2&gt;&lt;/h2&gt;JStagidJSdocument.getElementById(id).innterText&lt;h2&gt;VueDOM</p>\n<ul>\n<li>HTML<code>ref</code></li>\n<li>Vue<code>this.$refs.</code>DOM<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 ref=<span class=\"string\">\"h2\"</span>&gt;h2&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(this.<span class=\"variable\">$refs</span>.h2.innerText);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><strong>$refsdatamethods</strong><br>ref=com1Vuethis.$refs.com1datamethods<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 ref=<span class=\"string\">\"com1\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"show\"</span> value=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;h2 ref=<span class=\"string\">\"h2\"</span>&gt;&lt;/h2&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.h2.innerText);</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.com1); //</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.com1.sonval); //data</span><br><span class=\"line\">                console.log(this.<span class=\"variable\">$refs</span>.com1.sonshow()); //</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">            com1: &#123;</span><br><span class=\"line\">                template: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">data</span></span>() &#123;</span><br><span class=\"line\">                    <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">                        sonval: &#123; name: <span class=\"string\">'Loonycoder'</span>, age: 24 &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                methods: &#123;</span><br><span class=\"line\">                    <span class=\"function\"><span class=\"title\">sonshow</span></span>() &#123;</span><br><span class=\"line\">                        console.log(<span class=\"string\">''</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Vue<br></p>\n<ul>\n<li></li>\n<li>UIUI</li>\n</ul>\n<h5 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h5><p><strong></strong><br>1Vue.extendVue<br>2templateHTML<br>3Vue.component()<br>4HTMLTagtag</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t&lt;!-- tag --&gt;</span><br><span class=\"line\">\t&lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tvar com1 = Vue.extend(&#123;</span><br><span class=\"line\">\t\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;'</span></span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t// Vue.component(<span class=\"string\">''</span>, )</span><br><span class=\"line\">\tVue.component(<span class=\"string\">'mycom1'</span>, com1);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<ul>\n<li>Vue.component()1Xxx2xxxtag-Vue.component(myCom, com1)tag &lt;my-com&gt; &lt;/my-com&gt;</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- tag --&gt;</span><br><span class=\"line\">&lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t// Vue.component(<span class=\"string\">''</span>, )</span><br><span class=\"line\">\tVue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\t\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;'</span></span><br><span class=\"line\">\t&#125;));</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><br>templatetemplate &lt;h3&gt;<br><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend &lt;/h3&gt;&lt;span&gt;&lt;/span&gt;'</span></span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;div&gt;&lt;h3&gt;Vue.extend &lt;/h3&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;'</span></span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>1JavaScriptVue.componenttemplate: HTMLidtemplate:id<br>2Vueapp&lt;template id=id&gt;HTML&lt;/template&gt;<br>HTMLJavaScript<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">\t&lt;div&gt;</span><br><span class=\"line\">\t\t&lt;h1&gt;&lt;/h1&gt;&gt;</span><br><span class=\"line\">\t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//JavaScript</span><br><span class=\"line\">Vue.component(<span class=\"string\">'mycom'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>components: {}<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;tem&gt;&lt;/tem&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">        tem: &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong>data<br>dataVuedata<br>1data</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: <span class=\"function\"><span class=\"title\">function</span></span>()&#123; &#125;</span><br></pre></td></tr></table></figure>\n<p>2dataObject</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">return</span> object</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;mycom1&gt;&lt;/mycom1&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">Vue.component(<span class=\"string\">'mycom1'</span>, Vue.extend(&#123;</span><br><span class=\"line\">\tdata: <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">\t\t\tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h3&gt;Vue.extend -- &#123;&#123;msg&#125;&#125;&lt;/h3&gt;'</span></span><br><span class=\"line\">&#125;));</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>Vue</p>\n<p><strong></strong></p>\n<p>Vuev-ifv-else</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"flag=true\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"flag=false\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;login v-if=<span class=\"string\">\"flag\"</span>&gt;&lt;/login&gt;</span><br><span class=\"line\">    &lt;register v-else=<span class=\"string\">\"flag\"</span>&gt;&lt;/register&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"login\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"register\"</span>&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'login'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#login'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'register'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#register'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">    \tflag: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>flagflag=trueflar=false</p>\n<p><strong></strong></p>\n<p>Vuecomponentcomponent:is</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"comName='login'\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#\"</span> @click.prevent=<span class=\"string\">\"comName='register'\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;component :is=<span class=\"string\">\"comName\"</span>&gt;&lt;/component&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"login\"</span>&gt;</span><br><span class=\"line\">    &lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;template id=<span class=\"string\">\"register\"</span>&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'login'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#login'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// </span><br><span class=\"line\">Vue.component(<span class=\"string\">'register'</span>, &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'#register'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">    \tcomName: <span class=\"string\">'login'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>Vuecomponent:is=</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong></p>\n<p>methodsdata.</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \t<span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">        \t\tconsole.log(<span class=\"string\">\"show\"</span>);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p>datamsg</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">com1: &#123;</span><br><span class=\"line\">\ttemplate: <span class=\"string\">'&lt;h2&gt;--&#123;&#123;msg&#125;&#125;&lt;/h2&gt;'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>datamethods<br>Vue</p>\n<ul>\n<li>1v-bind:</li>\n<li>2props: []</li>\n</ul>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 :fatoson=<span class=\"string\">\"msg\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'&lt;h2&gt;--&#123;&#123;fatoson&#125;&#125;&lt;/h2&gt;'</span>,</span><br><span class=\"line\">        \t\tprops: [<span class=\"string\">'fatoson'</span>]</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p>v-bindfatosonmsgdatadataVuedatafatosonprops: []</p>\n<ul>\n<li>1msgfatoson</li>\n<li>2HTML-</li>\n<li>3propsVue</li>\n<li>4props</li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tmsg: <span class=\"string\">'data'</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \t<span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">        \t\tconsole.log(<span class=\"string\">\"show\"</span>);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\tprops: [<span class=\"string\">'fatoson'</span>],</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li>1template&lt;template&gt;&lt;/template&gt;HTML</li>\n<li>2v-on@@openshow</li>\n<li>3props$emit()</li>\n</ul>\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@=<span class=\"string\">\"(data)\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show(fatosonval)\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tfatosonval: &#123;</span><br><span class=\"line\">        \t\tid: <span class=\"string\">'1'</span>,</span><br><span class=\"line\">        \t\tname: <span class=\"string\">'Loonycoder'</span></span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \tshow(data)&#123;</span><br><span class=\"line\">        \t\tconsole.log(data);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 @open=<span class=\"string\">\"show\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">    \t&lt;div&gt;</span><br><span class=\"line\">    \t\t&lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">    \t\t&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"myclick\"</span> value=<span class=\"string\">\"\"</span>/&gt;</span><br><span class=\"line\">    \t&lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">        \tfatosonval: null</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">        \tshow(data)&#123;</span><br><span class=\"line\">        \t\tconsole.log(data);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">        \tcom1: &#123;</span><br><span class=\"line\">        \t\ttemplate: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">        \t\t<span class=\"function\"><span class=\"title\">data</span></span>()&#123;</span><br><span class=\"line\">        \t\t\t<span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">        \t\t\t\tsonval: &#123; name: <span class=\"string\">'Loonycoder'</span>, age: 24 &#125;</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;,</span><br><span class=\"line\">        \t\tmethods: &#123;</span><br><span class=\"line\">        \t\t\t<span class=\"function\"><span class=\"title\">myclick</span></span>()&#123;</span><br><span class=\"line\">       \t\t \t\t\tthis.<span class=\"variable\">$emit</span>(<span class=\"string\">'open'</span>, this.sonval);</span><br><span class=\"line\">        \t\t\t&#125;</span><br><span class=\"line\">        \t\t&#125;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p>@open()dataopen$emit(, data)</p>\n<h5 id=\"VueDOM\"><a href=\"#VueDOM\" class=\"headerlink\" title=\"VueDOM\"></a>VueDOM</h5><p>VueDOMVue<br>&lt;h2&gt;&lt;/h2&gt;JStagidJSdocument.getElementById(id).innterText&lt;h2&gt;VueDOM</p>\n<ul>\n<li>HTML<code>ref</code></li>\n<li>Vue<code>this.$refs.</code>DOM<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;h2 ref=<span class=\"string\">\"h2\"</span>&gt;h2&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(this.<span class=\"variable\">$refs</span>.h2.innerText);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><strong>$refsdatamethods</strong><br>ref=com1Vuethis.$refs.com1datamethods<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;!--  --&gt;</span><br><span class=\"line\">        &lt;com1 ref=<span class=\"string\">\"com1\"</span>&gt;&lt;/com1&gt;</span><br><span class=\"line\">        &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> @click=<span class=\"string\">\"show\"</span> value=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;h2 ref=<span class=\"string\">\"h2\"</span>&gt;&lt;/h2&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;h2&gt;&lt;/h2&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">    new Vue(&#123;</span><br><span class=\"line\">        el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">show</span></span>()&#123;</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.h2.innerText);</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.com1); //</span><br><span class=\"line\">                // console.log(this.<span class=\"variable\">$refs</span>.com1.sonval); //data</span><br><span class=\"line\">                console.log(this.<span class=\"variable\">$refs</span>.com1.sonshow()); //</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        // </span><br><span class=\"line\">        components: &#123;</span><br><span class=\"line\">            com1: &#123;</span><br><span class=\"line\">                template: <span class=\"string\">'#tmp'</span>,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">data</span></span>() &#123;</span><br><span class=\"line\">                    <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">                        sonval: &#123; name: <span class=\"string\">'Loonycoder'</span>, age: 24 &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                methods: &#123;</span><br><span class=\"line\">                    <span class=\"function\"><span class=\"title\">sonshow</span></span>() &#123;</span><br><span class=\"line\">                        console.log(<span class=\"string\">''</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n"},{"title":"Vue","date":"2018-09-14T16:00:00.000Z","_content":"\n### Vue\n\n#### Vue\n\n- ****URLURL\n- ****URLhash(#)hashHTTPhashhash\n\n#### \n\n##### \nvue-router\n```bash\n<script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n```\nwindow VueRouterVueVuenew VueRouter\nnew VueRouter({});#/URLhash#/\n****\n![vue](/images/vue15.png)\n\n##### \nnew VueRouter({})\n```bash\n<!-- HTML -->\n<div id=\"app\">\n    \n    <!-- `app`\n        `<router-view></router-view>`\n    -->\n    <router-view></router-view>\n</div>\n\n<!-- ==================================== -->\n\n<!-- JavaScript -->\n//login\nvar login = {\n    template: 'login'\n}\n\n//register\nvar register = {\n    template: 'register'\n}\n\n// Router\nvar  = new VueRouter({\n    routes: [\n        { path: '/URL', component: login() },\n        { path: '/URL', component: register() }\n    ]\n});\n\n// Vue\nvar vm = new Vue({\n    el: 'app',\n    data: {},\n    methods: {},\n    router:    \n});\n\n```\n\n****\n- 1routes  routesrouters\n- 2path \n- 3component pathcomponent\n- 4component\n- 51-4Vuerouter: \n- 6loginregistervar Vue.componentVueHTML&lt;login&gt;&lt;/login&gt; login\n\n****\n- 1routernew VueRouter\n- 2Vuerouter: \n- 3&lt;script&gt;vartemplateHTMLtemplate: '#id'\n- 4Vueapp&lt;router-view&gt;&lt;/router-view&gt;router\n\n\n```bash\n<div id=\"app>\n    <a href=\"#/login\"></a>\n    <a href=\"#/register\"></a>\n</div>\n```\n\nVue-routerURLpathlogincomponent: loginlogin\nhref#/login/loginloginvue-routerURLhash#/\n#/Vue-routerTag:&lt;router-link to=\"URL\"&gt;&lt;/router-link&gt;&lt;a&gt;\n\n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <div id=\"app\">\n        <h1></h1>\n\n        <a href=\"#/login\"></a>\n        <router-link to=\"register\"></router-link>\n\n        <router-view></router-view>\n    </div>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n    <script type=\"text/javascript\">\n\n        var login = {\n            template: '<h2></h2>'\n        }\n\n        var register = {\n            template: '<h2></h2>'\n        }\n\n        var routerObj = new VueRouter({\n            routes: [\n                { path: '/login', component: login },\n                { path: '/register', component: register }\n            ]\n        });\n\n        var vm = new Vue({\n            el: '#app',\n            data: {},\n            methods: {},\n            router: routerObj\n        });\n    </script>\n</body>\n</html>\n```\n\nvue-router{path: '', redirect: ''}router: []URL\n\n```bash\nvar routerObj = new VueRouter({\n    routes: [\n        { path: '/', redirect: '/login' },\n        { path: '/login', component: login },\n        { path: '/register', component: register }\n    ]\n});\n```\n\n#### \nURL<http://www.loonycoder.com/api?id=1&name='loonycoder'>\nURLvue-routerthis.$route\n Vuedatamethodscreated\n\n![vue](/images/vue16.png)\n![vue](/images/vue17.png)\n\nVueRouterpathHTML\nURLidthis.$routequerythis.$route.query.idid2\n\n#### \n\n> <http://www.loonycoder.com>\n> <http://www.loonycoder.com/api>\n> <http://www.loonycoder.com/api/login>\n\n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <div id=\"app\">\n        <router-link to=\"/account\">Account</router-link>\n\n        <router-view></router-view>\n    </div>\n\n    <template id=\"tmp\">\n        <div>\n            <h1>Account</h1>\n\n            <router-link to=\"/account/login\"></router-link>\n            <router-link to=\"/account/register\"></router-link>\n\n            <router-view></router-view>\n        </div>\n    </template>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n    <script type=\"text/javascript\">\n\n        var account = {\n            template: '#tmp'\n        }\n\n        var login = {\n            template: '<h2></h2>',\n        }\n\n        var register = {\n            template: '<h2></h2>'\n        }\n\n        var routerObj = new VueRouter({\n            routes: [\n                { \n                    path: '/account', \n                    component: account,\n                    children: [\n                        { path: 'login', component: login },\n                        { path: 'register', component: register }\n                    ]\n                },\n            ]\n        });\n\n        var vm = new Vue({\n            el: '#app',\n            data: {},\n            methods: {},\n            router: routerObj\n        });\n    </script>\n</body>\n</html>\n```\n\nroutes: []children/accountURL\n![vue](/images/vue18.png)\n\n****\nchildrenpath/path: loginaccount/loginvue-router/accountlogin/vue-routerloginaccountaccount/\n\n#### \niframe\n****&lt;router-view&gt;&lt;/router-view&gt;\n```bash\n<router-view></router-view>\n<router-view name=\"left\"></router-view>\n<router-view name=\"main\"></router-view>\n\nroutes: [\n    { \n        path: '/', components: {\n            'default': header\n            'left': left\n            'main': main\n        }\n    }\n]\n```\n\n****\npath/componentscomponentdefaultheader&lt;router-view&gt;name\n\n****\n1headerleftmainapp&lt;router-view&gt;&lt;/router-view&gt;\n2****&lt;router-view name=\"left\"&gt;&lt;/router-view&gt; \n3\n\n![vue](/images/vue19.png)\n![vue](/images/vue20.png)\n","source":"_posts/Vue4.md","raw":"---\ntitle: Vue\ncategories:\n    - Web\ndate: 2018-09-15\ntags:\n\t- \n\n---\n\n### Vue\n\n#### Vue\n\n- ****URLURL\n- ****URLhash(#)hashHTTPhashhash\n\n#### \n\n##### \nvue-router\n```bash\n<script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n```\nwindow VueRouterVueVuenew VueRouter\nnew VueRouter({});#/URLhash#/\n****\n![vue](/images/vue15.png)\n\n##### \nnew VueRouter({})\n```bash\n<!-- HTML -->\n<div id=\"app\">\n    \n    <!-- `app`\n        `<router-view></router-view>`\n    -->\n    <router-view></router-view>\n</div>\n\n<!-- ==================================== -->\n\n<!-- JavaScript -->\n//login\nvar login = {\n    template: 'login'\n}\n\n//register\nvar register = {\n    template: 'register'\n}\n\n// Router\nvar  = new VueRouter({\n    routes: [\n        { path: '/URL', component: login() },\n        { path: '/URL', component: register() }\n    ]\n});\n\n// Vue\nvar vm = new Vue({\n    el: 'app',\n    data: {},\n    methods: {},\n    router:    \n});\n\n```\n\n****\n- 1routes  routesrouters\n- 2path \n- 3component pathcomponent\n- 4component\n- 51-4Vuerouter: \n- 6loginregistervar Vue.componentVueHTML&lt;login&gt;&lt;/login&gt; login\n\n****\n- 1routernew VueRouter\n- 2Vuerouter: \n- 3&lt;script&gt;vartemplateHTMLtemplate: '#id'\n- 4Vueapp&lt;router-view&gt;&lt;/router-view&gt;router\n\n\n```bash\n<div id=\"app>\n    <a href=\"#/login\"></a>\n    <a href=\"#/register\"></a>\n</div>\n```\n\nVue-routerURLpathlogincomponent: loginlogin\nhref#/login/loginloginvue-routerURLhash#/\n#/Vue-routerTag:&lt;router-link to=\"URL\"&gt;&lt;/router-link&gt;&lt;a&gt;\n\n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <div id=\"app\">\n        <h1></h1>\n\n        <a href=\"#/login\"></a>\n        <router-link to=\"register\"></router-link>\n\n        <router-view></router-view>\n    </div>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n    <script type=\"text/javascript\">\n\n        var login = {\n            template: '<h2></h2>'\n        }\n\n        var register = {\n            template: '<h2></h2>'\n        }\n\n        var routerObj = new VueRouter({\n            routes: [\n                { path: '/login', component: login },\n                { path: '/register', component: register }\n            ]\n        });\n\n        var vm = new Vue({\n            el: '#app',\n            data: {},\n            methods: {},\n            router: routerObj\n        });\n    </script>\n</body>\n</html>\n```\n\nvue-router{path: '', redirect: ''}router: []URL\n\n```bash\nvar routerObj = new VueRouter({\n    routes: [\n        { path: '/', redirect: '/login' },\n        { path: '/login', component: login },\n        { path: '/register', component: register }\n    ]\n});\n```\n\n#### \nURL<http://www.loonycoder.com/api?id=1&name='loonycoder'>\nURLvue-routerthis.$route\n Vuedatamethodscreated\n\n![vue](/images/vue16.png)\n![vue](/images/vue17.png)\n\nVueRouterpathHTML\nURLidthis.$routequerythis.$route.query.idid2\n\n#### \n\n> <http://www.loonycoder.com>\n> <http://www.loonycoder.com/api>\n> <http://www.loonycoder.com/api/login>\n\n****\n```bash\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <div id=\"app\">\n        <router-link to=\"/account\">Account</router-link>\n\n        <router-view></router-view>\n    </div>\n\n    <template id=\"tmp\">\n        <div>\n            <h1>Account</h1>\n\n            <router-link to=\"/account/login\"></router-link>\n            <router-link to=\"/account/register\"></router-link>\n\n            <router-view></router-view>\n        </div>\n    </template>\n    <script type=\"text/javascript\" src=\"../lib/vue.js\"></script>\n    <script type=\"text/javascript\" src=\"../lib/vue-router.js\"></script>\n    <script type=\"text/javascript\">\n\n        var account = {\n            template: '#tmp'\n        }\n\n        var login = {\n            template: '<h2></h2>',\n        }\n\n        var register = {\n            template: '<h2></h2>'\n        }\n\n        var routerObj = new VueRouter({\n            routes: [\n                { \n                    path: '/account', \n                    component: account,\n                    children: [\n                        { path: 'login', component: login },\n                        { path: 'register', component: register }\n                    ]\n                },\n            ]\n        });\n\n        var vm = new Vue({\n            el: '#app',\n            data: {},\n            methods: {},\n            router: routerObj\n        });\n    </script>\n</body>\n</html>\n```\n\nroutes: []children/accountURL\n![vue](/images/vue18.png)\n\n****\nchildrenpath/path: loginaccount/loginvue-router/accountlogin/vue-routerloginaccountaccount/\n\n#### \niframe\n****&lt;router-view&gt;&lt;/router-view&gt;\n```bash\n<router-view></router-view>\n<router-view name=\"left\"></router-view>\n<router-view name=\"main\"></router-view>\n\nroutes: [\n    { \n        path: '/', components: {\n            'default': header\n            'left': left\n            'main': main\n        }\n    }\n]\n```\n\n****\npath/componentscomponentdefaultheader&lt;router-view&gt;name\n\n****\n1headerleftmainapp&lt;router-view&gt;&lt;/router-view&gt;\n2****&lt;router-view name=\"left\"&gt;&lt;/router-view&gt; \n3\n\n![vue](/images/vue19.png)\n![vue](/images/vue20.png)\n","slug":"Vue4","published":1,"updated":"2020-02-21T15:29:13.307Z","_id":"ck6iw57kg0000ozs63qqa3d4k","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><ul>\n<li><strong></strong>URLURL</li>\n<li><strong></strong>URLhash(#)hashHTTPhashhash</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>vue-router</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>window VueRouterVueVuenew VueRouter<br>new VueRouter({});#/URLhash#/<br><strong></strong><br><img src=\"/images/vue15.png\" alt=\"vue\"></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>new VueRouter({})</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- HTML --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;!-- `app`</span><br><span class=\"line\">        `&lt;router-view&gt;&lt;/router-view&gt;`</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- ==================================== --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- JavaScript --&gt;</span><br><span class=\"line\">//login</span><br><span class=\"line\">var login = &#123;</span><br><span class=\"line\">    template: <span class=\"string\">'login'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//register</span><br><span class=\"line\">var register = &#123;</span><br><span class=\"line\">    template: <span class=\"string\">'register'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Router</span><br><span class=\"line\">var  = new VueRouter(&#123;</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/URL'</span>, component: login() &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/URL'</span>, component: register() &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Vue</span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    router:    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li>1routes  routesrouters</li>\n<li>2path </li>\n<li>3component pathcomponent</li>\n<li>4component</li>\n<li>51-4Vuerouter: </li>\n<li>6loginregistervar Vue.componentVueHTML&lt;login&gt;&lt;/login&gt; login</li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li>1routernew VueRouter</li>\n<li>2Vuerouter: </li>\n<li>3&lt;script&gt;vartemplateHTMLtemplate: #id</li>\n<li>4Vueapp&lt;router-view&gt;&lt;/router-view&gt;router</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;a href=\"</span><span class=\"comment\">#/login\"&gt;&lt;/a&gt;</span></span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#/register\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>Vue-routerURLpathlogincomponent: loginlogin<br>href#/login/loginloginvue-routerURLhash#/<br>#/Vue-routerTag:&lt;router-link to=URL&gt;&lt;/router-link&gt;&lt;a&gt;</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;h1&gt;&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;a href=<span class=\"string\">\"#/login\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;router-link to=<span class=\"string\">\"register\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        var login = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var register = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">            routes: [</span><br><span class=\"line\">                &#123; path: <span class=\"string\">'/login'</span>, component: login &#125;,</span><br><span class=\"line\">                &#123; path: <span class=\"string\">'/register'</span>, component: register &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        var vm = new Vue(&#123;</span><br><span class=\"line\">            el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">            data: &#123;&#125;,</span><br><span class=\"line\">            methods: &#123;&#125;,</span><br><span class=\"line\">            router: routerObj</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>vue-router{path: , redirect: }router: []URL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/'</span>, redirect: <span class=\"string\">'/login'</span> &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/login'</span>, component: login &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/register'</span>, component: register &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>URL<a href=\"http://www.loonycoder.com/api?id=1&amp;name=&#39;loonycoder&#39;\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api?id=1&amp;name=&#39;loonycoder&#39;</a><br>URLvue-routerthis.$route<br> Vuedatamethodscreated<br><br><img src=\"/images/vue16.png\" alt=\"vue\"><br><img src=\"/images/vue17.png\" alt=\"vue\"></p>\n<p>VueRouterpathHTML<br>URLidthis.$routequerythis.$route.query.idid2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<blockquote>\n<p><a href=\"http://www.loonycoder.com\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com</a><br><a href=\"http://www.loonycoder.com/api\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api</a><br><a href=\"http://www.loonycoder.com/api/login\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api/login</a></p>\n</blockquote>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;router-link to=<span class=\"string\">\"/account\"</span>&gt;Account&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;h1&gt;Account&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;router-link to=<span class=\"string\">\"/account/login\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\">            &lt;router-link to=<span class=\"string\">\"/account/register\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        var account = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var login = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var register = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">            routes: [</span><br><span class=\"line\">                &#123; </span><br><span class=\"line\">                    path: <span class=\"string\">'/account'</span>, </span><br><span class=\"line\">                    component: account,</span><br><span class=\"line\">                    children: [</span><br><span class=\"line\">                        &#123; path: <span class=\"string\">'login'</span>, component: login &#125;,</span><br><span class=\"line\">                        &#123; path: <span class=\"string\">'register'</span>, component: register &#125;</span><br><span class=\"line\">                    ]</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        var vm = new Vue(&#123;</span><br><span class=\"line\">            el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">            data: &#123;&#125;,</span><br><span class=\"line\">            methods: &#123;&#125;,</span><br><span class=\"line\">            router: routerObj</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>routes: []children/accountURL<br><img src=\"/images/vue18.png\" alt=\"vue\"></p>\n<p><strong></strong><br>childrenpath/path: loginaccount/loginvue-router/accountlogin/vue-routerloginaccountaccount/</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>iframe<br><strong></strong>&lt;router-view&gt;&lt;/router-view&gt;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;router-view name=<span class=\"string\">\"left\"</span>&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;router-view name=<span class=\"string\">\"main\"</span>&gt;&lt;/router-view&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">routes: [</span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">        path: <span class=\"string\">'/'</span>, components: &#123;</span><br><span class=\"line\">            <span class=\"string\">'default'</span>: header</span><br><span class=\"line\">            <span class=\"string\">'left'</span>: left</span><br><span class=\"line\">            <span class=\"string\">'main'</span>: main</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>path/componentscomponentdefaultheader&lt;router-view&gt;name<br><br><strong></strong><br>1headerleftmainapp&lt;router-view&gt;&lt;/router-view&gt;<br>2<strong></strong>&lt;router-view name=left&gt;&lt;/router-view&gt; <br>3<br><br><img src=\"/images/vue19.png\" alt=\"vue\"><br><img src=\"/images/vue20.png\" alt=\"vue\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><ul>\n<li><strong></strong>URLURL</li>\n<li><strong></strong>URLhash(#)hashHTTPhashhash</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>vue-router</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>window VueRouterVueVuenew VueRouter<br>new VueRouter({});#/URLhash#/<br><strong></strong><br><img src=\"/images/vue15.png\" alt=\"vue\"></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>new VueRouter({})</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- HTML --&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;!-- `app`</span><br><span class=\"line\">        `&lt;router-view&gt;&lt;/router-view&gt;`</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- ==================================== --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- JavaScript --&gt;</span><br><span class=\"line\">//login</span><br><span class=\"line\">var login = &#123;</span><br><span class=\"line\">    template: <span class=\"string\">'login'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//register</span><br><span class=\"line\">var register = &#123;</span><br><span class=\"line\">    template: <span class=\"string\">'register'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Router</span><br><span class=\"line\">var  = new VueRouter(&#123;</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/URL'</span>, component: login() &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/URL'</span>, component: register() &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Vue</span><br><span class=\"line\">var vm = new Vue(&#123;</span><br><span class=\"line\">    el: <span class=\"string\">'app'</span>,</span><br><span class=\"line\">    data: &#123;&#125;,</span><br><span class=\"line\">    methods: &#123;&#125;,</span><br><span class=\"line\">    router:    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li>1routes  routesrouters</li>\n<li>2path </li>\n<li>3component pathcomponent</li>\n<li>4component</li>\n<li>51-4Vuerouter: </li>\n<li>6loginregistervar Vue.componentVueHTML&lt;login&gt;&lt;/login&gt; login</li>\n</ul>\n<p><strong></strong></p>\n<ul>\n<li>1routernew VueRouter</li>\n<li>2Vuerouter: </li>\n<li>3&lt;script&gt;vartemplateHTMLtemplate: #id</li>\n<li>4Vueapp&lt;router-view&gt;&lt;/router-view&gt;router</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"app&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;a href=\"</span><span class=\"comment\">#/login\"&gt;&lt;/a&gt;</span></span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"#/register\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>Vue-routerURLpathlogincomponent: loginlogin<br>href#/login/loginloginvue-routerURLhash#/<br>#/Vue-routerTag:&lt;router-link to=URL&gt;&lt;/router-link&gt;&lt;a&gt;</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;h1&gt;&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;a href=<span class=\"string\">\"#/login\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;router-link to=<span class=\"string\">\"register\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        var login = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var register = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">            routes: [</span><br><span class=\"line\">                &#123; path: <span class=\"string\">'/login'</span>, component: login &#125;,</span><br><span class=\"line\">                &#123; path: <span class=\"string\">'/register'</span>, component: register &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        var vm = new Vue(&#123;</span><br><span class=\"line\">            el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">            data: &#123;&#125;,</span><br><span class=\"line\">            methods: &#123;&#125;,</span><br><span class=\"line\">            router: routerObj</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>vue-router{path: , redirect: }router: []URL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/'</span>, redirect: <span class=\"string\">'/login'</span> &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/login'</span>, component: login &#125;,</span><br><span class=\"line\">        &#123; path: <span class=\"string\">'/register'</span>, component: register &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>URL<a href=\"http://www.loonycoder.com/api?id=1&amp;name=&#39;loonycoder&#39;\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api?id=1&amp;name=&#39;loonycoder&#39;</a><br>URLvue-routerthis.$route<br> Vuedatamethodscreated<br><br><img src=\"/images/vue16.png\" alt=\"vue\"><br><img src=\"/images/vue17.png\" alt=\"vue\"></p>\n<p>VueRouterpathHTML<br>URLidthis.$routequerythis.$route.query.idid2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<blockquote>\n<p><a href=\"http://www.loonycoder.com\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com</a><br><a href=\"http://www.loonycoder.com/api\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api</a><br><a href=\"http://www.loonycoder.com/api/login\" target=\"_blank\" rel=\"noopener\">http://www.loonycoder.com/api/login</a></p>\n</blockquote>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;router-link to=<span class=\"string\">\"/account\"</span>&gt;Account&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;template id=<span class=\"string\">\"tmp\"</span>&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;h1&gt;Account&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;router-link to=<span class=\"string\">\"/account/login\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\">            &lt;router-link to=<span class=\"string\">\"/account/register\"</span>&gt;&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"../lib/vue-router.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        var account = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'#tmp'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var login = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var register = &#123;</span><br><span class=\"line\">            template: <span class=\"string\">'&lt;h2&gt;&lt;/h2&gt;'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        var routerObj = new VueRouter(&#123;</span><br><span class=\"line\">            routes: [</span><br><span class=\"line\">                &#123; </span><br><span class=\"line\">                    path: <span class=\"string\">'/account'</span>, </span><br><span class=\"line\">                    component: account,</span><br><span class=\"line\">                    children: [</span><br><span class=\"line\">                        &#123; path: <span class=\"string\">'login'</span>, component: login &#125;,</span><br><span class=\"line\">                        &#123; path: <span class=\"string\">'register'</span>, component: register &#125;</span><br><span class=\"line\">                    ]</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        var vm = new Vue(&#123;</span><br><span class=\"line\">            el: <span class=\"string\">'#app'</span>,</span><br><span class=\"line\">            data: &#123;&#125;,</span><br><span class=\"line\">            methods: &#123;&#125;,</span><br><span class=\"line\">            router: routerObj</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>routes: []children/accountURL<br><img src=\"/images/vue18.png\" alt=\"vue\"></p>\n<p><strong></strong><br>childrenpath/path: loginaccount/loginvue-router/accountlogin/vue-routerloginaccountaccount/</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>iframe<br><strong></strong>&lt;router-view&gt;&lt;/router-view&gt;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;router-view name=<span class=\"string\">\"left\"</span>&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;router-view name=<span class=\"string\">\"main\"</span>&gt;&lt;/router-view&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">routes: [</span><br><span class=\"line\">    &#123; </span><br><span class=\"line\">        path: <span class=\"string\">'/'</span>, components: &#123;</span><br><span class=\"line\">            <span class=\"string\">'default'</span>: header</span><br><span class=\"line\">            <span class=\"string\">'left'</span>: left</span><br><span class=\"line\">            <span class=\"string\">'main'</span>: main</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><br>path/componentscomponentdefaultheader&lt;router-view&gt;name<br><br><strong></strong><br>1headerleftmainapp&lt;router-view&gt;&lt;/router-view&gt;<br>2<strong></strong>&lt;router-view name=left&gt;&lt;/router-view&gt; <br>3<br><br><img src=\"/images/vue19.png\" alt=\"vue\"><br><img src=\"/images/vue20.png\" alt=\"vue\"></p>\n"},{"title":"Mybatis","date":"2018-10-05T16:00:00.000Z","_content":"\n### \n\nMybatisxml\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserMapper {\n\n    /**\n     * \n     * @return\n     */\n    public List<User> selectAll();\n    \n    \n}\n\n```\n\n#### IUserMapper.xmlsql\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!--id-->\n    <!--resultTypeList List-->\n    <select id=\"selectAll\" resultType=\"com.loonycoder.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\n#### \n\nSqlSessionFactory\n```bash\npackage com.loonycoder;\n\n\nimport com.loonycoder.dao.IUserMapper;\nimport com.loonycoder.domain.User;\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\n\nimport java.io.InputStream;\nimport java.util.Date;\nimport java.util.List;\n\npublic class MybatisTest {\n\n    private InputStream inputStream;\n    private SqlSessionFactory sqlSessionFactory;\n    private SqlSession session;\n    private IUserMapper userDao;\n\n    //before\n    @Before\n    public void init() throws Exception{\n        //1.\n        inputStream = Resources.getResourceAsStream(\"SqlMapConfig.xml\");\n        //2.SqlSessionFactory\n        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n        sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);\n        //3.SqlSession\n        session = sqlSessionFactory.openSession();\n        //4.SqlSessiondao\n        userDao = session.getMapper(IUserMapper.class);\n    }\n\n\n    //after\n    @After\n    public void destroy() throws Exception{\n        //6.\n        session.close();\n        inputStream.close();\n    }\n\n\n    @Test\n    public void selectTest() throws Exception{\n\n        //5.\n        List<User> users= userDao.selectAll();\n        for (User user: users) {\n            System.out.println(user);\n        }\n\n    }\n\n}\n\n```\n\n#### \n![](/images/execResult1.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n    /**\n     * \n     * @param user\n     */\n    public void saveUser(User user);\n```\n\n#### IUserMapper.xmlsql\n```bash\n<insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n```\n\n**\n#{}mybatisUserget/set\n**\n\n#### \n```bash\n    @Test\n    public void insertTest(){\n        User user = new User();\n        user.setUserName(\"Lisa\");\n        user.setBirthday(new Date());\n        user.setAddress(\"\");\n        user.setSex(\"\");\n        userDao.saveUser(user);\n        session.commit();//\n    }\n```\n\n****\n\n#### \n![](/images/execResult2.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n /**\n     * \n     * @param userId\n     */\n    public void deleteUser(Integer userId);\n```\n\n#### IUserMapper.xmlsql\n```bash\n<delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n```\n\n**sqluidmybatis**\n\n#### \n```bash\n @Test\n    public void deleteTest(){\n        userDao.deleteUser(53);\n        session.commit();//\n    }\n```\n\n#### \n\n![](/images/execBefore.png)\n\n![](/images/execAfter.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n    /**\n     * \n     * @param user\n     */\n    public void updateUser(User user);\n```\n\n#### IUserMapper.xmlsql\n```bash\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{username},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n```\n\n#### \n```bash\n    @Test\n    public void updateTest(){\n        User user = new User();\n        user.setId(41);\n        user.setUserName(\"\");\n        session.commit();//\n    }\n```\n\n#### \n\n![](/images/execAfter.png)\n\n![](/images/execAfter1.png)\n\n\n\n","source":"_posts/Mybatis-2.md","raw":"---\ntitle: Mybatis\ncategories:\n    - Mybatis\n    \ndate: 2018-10-6\ntags:\n\t- Java\n\t- Java\n    - \n\n---\n\n### \n\nMybatisxml\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.User;\n\nimport java.util.List;\n\npublic interface IUserMapper {\n\n    /**\n     * \n     * @return\n     */\n    public List<User> selectAll();\n    \n    \n}\n\n```\n\n#### IUserMapper.xmlsql\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!--id-->\n    <!--resultTypeList List-->\n    <select id=\"selectAll\" resultType=\"com.loonycoder.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\n#### \n\nSqlSessionFactory\n```bash\npackage com.loonycoder;\n\n\nimport com.loonycoder.dao.IUserMapper;\nimport com.loonycoder.domain.User;\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\n\nimport java.io.InputStream;\nimport java.util.Date;\nimport java.util.List;\n\npublic class MybatisTest {\n\n    private InputStream inputStream;\n    private SqlSessionFactory sqlSessionFactory;\n    private SqlSession session;\n    private IUserMapper userDao;\n\n    //before\n    @Before\n    public void init() throws Exception{\n        //1.\n        inputStream = Resources.getResourceAsStream(\"SqlMapConfig.xml\");\n        //2.SqlSessionFactory\n        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n        sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);\n        //3.SqlSession\n        session = sqlSessionFactory.openSession();\n        //4.SqlSessiondao\n        userDao = session.getMapper(IUserMapper.class);\n    }\n\n\n    //after\n    @After\n    public void destroy() throws Exception{\n        //6.\n        session.close();\n        inputStream.close();\n    }\n\n\n    @Test\n    public void selectTest() throws Exception{\n\n        //5.\n        List<User> users= userDao.selectAll();\n        for (User user: users) {\n            System.out.println(user);\n        }\n\n    }\n\n}\n\n```\n\n#### \n![](/images/execResult1.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n    /**\n     * \n     * @param user\n     */\n    public void saveUser(User user);\n```\n\n#### IUserMapper.xmlsql\n```bash\n<insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n```\n\n**\n#{}mybatisUserget/set\n**\n\n#### \n```bash\n    @Test\n    public void insertTest(){\n        User user = new User();\n        user.setUserName(\"Lisa\");\n        user.setBirthday(new Date());\n        user.setAddress(\"\");\n        user.setSex(\"\");\n        userDao.saveUser(user);\n        session.commit();//\n    }\n```\n\n****\n\n#### \n![](/images/execResult2.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n /**\n     * \n     * @param userId\n     */\n    public void deleteUser(Integer userId);\n```\n\n#### IUserMapper.xmlsql\n```bash\n<delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n```\n\n**sqluidmybatis**\n\n#### \n```bash\n @Test\n    public void deleteTest(){\n        userDao.deleteUser(53);\n        session.commit();//\n    }\n```\n\n#### \n\n![](/images/execBefore.png)\n\n![](/images/execAfter.png)\n\n---\n\n### Mybatis\n\n#### mapper\n```bash\n    /**\n     * \n     * @param user\n     */\n    public void updateUser(User user);\n```\n\n#### IUserMapper.xmlsql\n```bash\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{username},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n```\n\n#### \n```bash\n    @Test\n    public void updateTest(){\n        User user = new User();\n        user.setId(41);\n        user.setUserName(\"\");\n        session.commit();//\n    }\n```\n\n#### \n\n![](/images/execAfter.png)\n\n![](/images/execAfter1.png)\n\n\n\n","slug":"Mybatis-2","published":1,"updated":"2020-02-21T15:30:59.665Z","_id":"ck6jadwgy0000gus642mv2prr","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Mybatisxml</p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;User&gt; selectAll();</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>SqlSessionFactory</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.dao.IUserMapper;</span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\">import org.apache.ibatis.io.Resources;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\">import org.junit.After;</span><br><span class=\"line\">import org.junit.Before;</span><br><span class=\"line\">import org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.InputStream;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class MybatisTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private InputStream inputStream;</span><br><span class=\"line\">    private SqlSessionFactory sqlSessionFactory;</span><br><span class=\"line\">    private SqlSession session;</span><br><span class=\"line\">    private IUserMapper userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    //before</span><br><span class=\"line\">    @Before</span><br><span class=\"line\">    public void init() throws Exception&#123;</span><br><span class=\"line\">        //1.</span><br><span class=\"line\">        inputStream = Resources.getResourceAsStream(<span class=\"string\">\"SqlMapConfig.xml\"</span>);</span><br><span class=\"line\">        //2.SqlSessionFactory</span><br><span class=\"line\">        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span><br><span class=\"line\">        sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);</span><br><span class=\"line\">        //3.SqlSession</span><br><span class=\"line\">        session = sqlSessionFactory.openSession();</span><br><span class=\"line\">        //4.SqlSessiondao</span><br><span class=\"line\">        userDao = session.getMapper(IUserMapper.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    //after</span><br><span class=\"line\">    @After</span><br><span class=\"line\">    public void destroy() throws Exception&#123;</span><br><span class=\"line\">        //6.</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void selectTest() throws Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //5.</span><br><span class=\"line\">        List&lt;User&gt; users= userDao.selectAll();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/execResult1.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * </span><br><span class=\"line\"> * @param user</span><br><span class=\"line\"> */</span><br><span class=\"line\">public void saveUser(User user);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong><br>#{}mybatisUserget/set<br></strong></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">insertTest</span></span>()&#123;</span><br><span class=\"line\">    User user = new User();</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">\"Lisa\"</span>);</span><br><span class=\"line\">    user.setBirthday(new Date());</span><br><span class=\"line\">    user.setAddress(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    user.setSex(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    userDao.saveUser(user);</span><br><span class=\"line\">    session.commit();//</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/execResult2.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\">    * </span><br><span class=\"line\">    * @param userId</span><br><span class=\"line\">    */</span><br><span class=\"line\">   public void deleteUser(Integer userId);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>sqluidmybatis</strong></p>\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">   public void <span class=\"function\"><span class=\"title\">deleteTest</span></span>()&#123;</span><br><span class=\"line\">       userDao.deleteUser(53);</span><br><span class=\"line\">       session.commit();//</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"/images/execBefore.png\" alt=\"\"><br><br><img src=\"/images/execAfter.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * </span><br><span class=\"line\"> * @param user</span><br><span class=\"line\"> */</span><br><span class=\"line\">public void updateUser(User user);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">    update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;username&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">&lt;/update&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">updateTest</span></span>()&#123;</span><br><span class=\"line\">    User user = new User();</span><br><span class=\"line\">    user.setId(41);</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    session.commit();//</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"/images/execAfter.png\" alt=\"\"><br><br><img src=\"/images/execAfter1.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Mybatisxml</p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IUserMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;User&gt; selectAll();</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>SqlSessionFactory</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.dao.IUserMapper;</span><br><span class=\"line\">import com.loonycoder.domain.User;</span><br><span class=\"line\">import org.apache.ibatis.io.Resources;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\">import org.junit.After;</span><br><span class=\"line\">import org.junit.Before;</span><br><span class=\"line\">import org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.InputStream;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class MybatisTest &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private InputStream inputStream;</span><br><span class=\"line\">    private SqlSessionFactory sqlSessionFactory;</span><br><span class=\"line\">    private SqlSession session;</span><br><span class=\"line\">    private IUserMapper userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    //before</span><br><span class=\"line\">    @Before</span><br><span class=\"line\">    public void init() throws Exception&#123;</span><br><span class=\"line\">        //1.</span><br><span class=\"line\">        inputStream = Resources.getResourceAsStream(<span class=\"string\">\"SqlMapConfig.xml\"</span>);</span><br><span class=\"line\">        //2.SqlSessionFactory</span><br><span class=\"line\">        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span><br><span class=\"line\">        sqlSessionFactory = sqlSessionFactoryBuilder.build(inputStream);</span><br><span class=\"line\">        //3.SqlSession</span><br><span class=\"line\">        session = sqlSessionFactory.openSession();</span><br><span class=\"line\">        //4.SqlSessiondao</span><br><span class=\"line\">        userDao = session.getMapper(IUserMapper.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    //after</span><br><span class=\"line\">    @After</span><br><span class=\"line\">    public void destroy() throws Exception&#123;</span><br><span class=\"line\">        //6.</span><br><span class=\"line\">        session.close();</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void selectTest() throws Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //5.</span><br><span class=\"line\">        List&lt;User&gt; users= userDao.selectAll();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/execResult1.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * </span><br><span class=\"line\"> * @param user</span><br><span class=\"line\"> */</span><br><span class=\"line\">public void saveUser(User user);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong><br>#{}mybatisUserget/set<br></strong></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">insertTest</span></span>()&#123;</span><br><span class=\"line\">    User user = new User();</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">\"Lisa\"</span>);</span><br><span class=\"line\">    user.setBirthday(new Date());</span><br><span class=\"line\">    user.setAddress(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    user.setSex(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    userDao.saveUser(user);</span><br><span class=\"line\">    session.commit();//</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/execResult2.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\">    * </span><br><span class=\"line\">    * @param userId</span><br><span class=\"line\">    */</span><br><span class=\"line\">   public void deleteUser(Integer userId);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>sqluidmybatis</strong></p>\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">   public void <span class=\"function\"><span class=\"title\">deleteTest</span></span>()&#123;</span><br><span class=\"line\">       userDao.deleteUser(53);</span><br><span class=\"line\">       session.commit();//</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"/images/execBefore.png\" alt=\"\"><br><br><img src=\"/images/execAfter.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h4 id=\"mapper\"><a href=\"#mapper\" class=\"headerlink\" title=\"mapper\"></a>mapper</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * </span><br><span class=\"line\"> * @param user</span><br><span class=\"line\"> */</span><br><span class=\"line\">public void updateUser(User user);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"IUserMapper-xmlsql\"><a href=\"#IUserMapper-xmlsql\" class=\"headerlink\" title=\"IUserMapper.xmlsql\"></a>IUserMapper.xmlsql</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">    update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;username&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">&lt;/update&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">updateTest</span></span>()&#123;</span><br><span class=\"line\">    User user = new User();</span><br><span class=\"line\">    user.setId(41);</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    session.commit();//</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h4><p><br><img src=\"/images/execAfter.png\" alt=\"\"><br><br><img src=\"/images/execAfter1.png\" alt=\"\"></p>\n"},{"title":"Mybatis","date":"2018-10-14T16:00:00.000Z","_content":"\n### ()\n\n\n\n\n\n\n\n\n\n#### \n\n##### \n\n\n```bash\nDROP TABLE IF EXISTS `user`;\n\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL auto_increment,\n  `username` varchar(32) NOT NULL COMMENT '',\n  `birthday` datetime default NULL COMMENT '',\n  `sex` char(1) default NULL COMMENT '',\n  `address` varchar(256) default NULL COMMENT '',\n  PRIMARY KEY  (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,'','2018-02-27 17:47:08','',''),(2,'','2018-03-02 15:09:37','',''),(3,'','2018-03-04 11:34:34','',''),(4,'','2018-03-04 12:04:06','',''),(4,'','2018-03-07 17:37:26','',''),(48,'','2018-03-08 11:44:00','','');\n\n\n\n\n\nDROP TABLE IF EXISTS `account`;\n\nCREATE TABLE `account` (\n  `ID` int(11) NOT NULL COMMENT '',\n  `UID` int(11) default NULL COMMENT '',\n  `MONEY` double default NULL COMMENT '',\n  PRIMARY KEY  (`ID`),\n  KEY `FK_Reference_8` (`UID`),\n  CONSTRAINT `FK_Reference_8` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `account`(`ID`,`UID`,`MONEY`) values (1,1,1000),(2,3,1000),(3,5,2000);\n```\n\n##### \n\ncom.loonycoder.domain\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\n\npublic class Account implements Serializable {\n    private Integer id;\n    private Integer uid;\n    private Double money;\n\n    //\n    private User user;\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getUid() {\n        return uid;\n    }\n\n    public void setUid(Integer uid) {\n        this.uid = uid;\n    }\n\n    public Double getMoney() {\n        return money;\n    }\n\n    public void setMoney(Double money) {\n        this.money = money;\n    }\n\n    @Override\n    public String toString() {\n        return \"Account{\" +\n                \"id=\" + id +\n                \", uid=\" + uid +\n                \", money=\" + money +\n                '}';\n    }\n}\n\n```\n\n\n\nAccountMapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.Account;\nimport com.loonycoder.domain.AccountUser;\n\nimport java.util.List;\n\npublic interface IAccountMapper {\n\n\n    /**\n     * \n     * @return\n     */\n    List<Account> selectAll();\n\n    /**\n     * \n     * @return\n     */\n    List<AccountUser> selectAccountUser();\n}\n\n\n```\n\n##### \n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.loonycoder.dao.IAccountMapper\">\n\n    <!--accountuserresultMap-->\n    <resultMap id=\"accountUserMap\" type=\"account\">\n        <id property=\"id\" column=\"aid\"></id>\n        <result property=\"uid\" column=\"uid\"></result>\n        <result property=\"money\" column=\"money\"></result>\n        <!--user-->\n        <association property=\"user\" column=\"uid\" javaType=\"user\">\n            <id property=\"id\" column=\"id\"></id>\n            <result property=\"userName\" column=\"username\"></result>\n            <result property=\"address\" column=\"address\"></result>\n            <result property=\"sex\" column=\"sex\"></result>\n            <result property=\"birthday\" column=\"birthday\"></result>\n        </association>\n    </resultMap>\n\n\n    <select id=\"selectAll\" resultMap=\"accountUserMap\">\n        select u.*,a.id as aid,a.uid,a.money from account a,user u where u.id = a.uid;\n    </select>\n</mapper>\n```\n\nSqlMapConfig.xmlmapper\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!--${}-->\n    <properties resource=\"jdbcConfig.properties\">\n    </properties>\n    <!-- typealias-->\n    <typeAliases >\n        <!--package-->\n        <package name=\"com.loonycoder.domain\"></package>\n        <!--<typeAlias type=\"com.loonycoder.domain.User\" alias=\"user\"></typeAlias>-->\n    </typeAliases>\n    <!---->\n    <environments default=\"mysql\">\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!---->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"${jdbc.driver}\" />\n                <property name=\"url\" value=\"${jdbc.url}\" />\n                <property name=\"username\" value=\"${jdbc.username}\" />\n                <property name=\"password\" value=\"${jdbc.password}\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--mapper-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IAccountMapper.xml\" />\n        <!--<mapper class=\"com.loonycoder.dao.IUserMapper\" />-->\n    </mappers>\n</configuration>\n```\n\n##### \n```bash\n    @Test\n    public void selectAllAccount(){\n        List<Account> accts = accountMapper.selectAll();\n        for (Account acct : accts) {\n            System.out.println(\"\");\n            System.out.println(acct);\n            System.out.println(acct.getUser());\n        }\n    }\n```\n\n##### \n![result](/images/mybatis1.png)\n\n---\n\n### ()\n\n\n- \n\n##### \nUser\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.List;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String userName;\n    private Date birthday;\n    private String sex;\n    private String address;\n\n    private List<Account> accounts;\n\n    public List<Account> getAccounts() {\n        return accounts;\n    }\n\n    public void setAccounts(List<Account> accounts) {\n        this.accounts = accounts;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", userName='\" + userName + '\\'' +\n                \", birthday=\" + birthday +\n                \", sex='\" + sex + '\\'' +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n##### \n\nUser\nIUserMapper.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!-- type-->\n    <resultMap id=\"userMap\" type=\"com.loonycoder.domain.User\">\n        <!--idpropertycolumn-->\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n    </resultMap>\n    <!--UserresultMap-->\n    <resultMap id=\"userAccountMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <!--useraccounts-->\n        <!--ofType-->\n        <collection property=\"accounts\" ofType=\"account\">\n            <id property=\"id\" column=\"aid\"></id>\n            <result property=\"uid\" column=\"uid\"></result>\n            <result property=\"money\" column=\"money\"></result>\n        </collection>\n    </resultMap>\n    <!--id-->\n    <!--resultTypeList List-->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"userAccountMap\">\n        select * from user u left outer join account a on u.id = a.uid;\n    </select>\n\n    <insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n\n    <delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{userName},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n    \n    <select id=\"selectUserByCondition\" resultMap=\"userMap\" parameterType=\"user\">\n          select * from user\n          <where>\n            <if test=\"sex != null and sex != '' \">\n                and sex = #{sex}\n            </if>\n          </where>\n\n    </select>\n</mapper>\n```\n\n##### \n```bash\n    @Test\n    public void selectTest() throws Exception{\n\n        //5.\n        List<User> users= userDao.selectAll();\n        for (User user: users) {\n            System.out.println(\"\");\n            System.out.println(user);\n            System.out.println(user.getAccounts());\n        }\n\n    }\n```\n\n##### \n![result](/images/mybatis2.png)\n\n---\n\n### ()\n\n\n\n\n- \n- \n\n##### \n\n```bash\nDROP TABLE IF EXISTS `role`;\n\nCREATE TABLE `role` (\n  `ID` int(11) NOT NULL COMMENT '',\n  `ROLE_NAME` varchar(30) default NULL COMMENT '',\n  `ROLE_DESC` varchar(60) default NULL COMMENT '',\n  PRIMARY KEY  (`ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `role`(`ID`,`ROLE_NAME`,`ROLE_DESC`) values (1,'',''),(2,'',''),(3,'','');\n\n\n\n\n\nDROP TABLE IF EXISTS `user_role`;\n\nCREATE TABLE `user_role` (\n  `UID` int(11) NOT NULL COMMENT '',\n  `RID` int(11) NOT NULL COMMENT '',\n  PRIMARY KEY  (`UID`,`RID`),\n  KEY `FK_Reference_10` (`RID`),\n  CONSTRAINT `FK_Reference_10` FOREIGN KEY (`RID`) REFERENCES `role` (`ID`),\n  CONSTRAINT `FK_Reference_9` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\ninsert  into `user_role`(`UID`,`RID`) values (1,1),(3,1),(3,2);\n\n```\n\n##### \n\n\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\n\npublic class Role implements Serializable {\n    private Integer roleId;\n    private String roleName;\n    private String roleDesc;\n\n    public Integer getRoleId() {\n        return roleId;\n    }\n\n    public void setRoleId(Integer roleId) {\n        this.roleId = roleId;\n    }\n\n    public String getRoleName() {\n        return roleName;\n    }\n\n    public void setRoleName(String roleName) {\n        this.roleName = roleName;\n    }\n\n    public String getRoleDesc() {\n        return roleDesc;\n    }\n\n    public void setRoleDesc(String roleDesc) {\n        this.roleDesc = roleDesc;\n    }\n\n    @Override\n    public String toString() {\n        return \"Role{\" +\n                \"roleId=\" + roleId +\n                \", roleName='\" + roleName + '\\'' +\n                \", roleDesc='\" + roleDesc + '\\'' +\n                '}';\n    }\n}\n\n```\n\n##### \nRoleMapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.Role;\n\nimport java.util.List;\n\npublic interface IRoleMapper {\n\n\n    /**\n     * \n     * @return\n     */\n    public List<Role> selectAll();\n}\n\n```\n\n##### \nIRoleMapper.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.loonycoder.dao.IRoleMapper\">\n    <!--roleresultMap-->\n    <resultMap id=\"roleMap\" type=\"role\">\n        <id property=\"roleId\" column=\"rid\"></id>\n        <result property=\"roleName\" column=\"role_name\"></result>\n        <result property=\"roleDesc\" column=\"role_desc\"></result>\n        <collection property=\"users\" ofType=\"user\">\n            <id property=\"id\" column=\"id\"></id>\n            <result property=\"userName\" column=\"username\"></result>\n            <result property=\"address\" column=\"address\"></result>\n            <result property=\"sex\" column=\"sex\"></result>\n            <result property=\"birthday\" column=\"birthday\"></result>\n        </collection>\n    </resultMap>\n\n    <!---->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"roleMap\">\n        select u.*,r.id as rid,r.role_name,r.role_desc from role r\n        left outer join user_role ur on r.id = ur.rid\n        left outer join user u on u.id = ur.uid\n    </select>\n</mapper>\n\n```\n\nSqlMapConfig.xml\n```bash\n<!--mapper-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IAccountMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IRoleMapper.xml\" />\n        <!--<mapper class=\"com.loonycoder.dao.IUserMapper\" />-->\n    </mappers>\n```\n\n##### \n\n```bash\n    @Test\n    public void selectRoleAll(){\n        List<Role> roles = roleMapper.selectAll();\n        for (Role role:roles) {\n            System.out.println(\"\");\n            System.out.println(role);\n            System.out.println(role.getUsers());\n        }\n    }\n```\n\n##### \n![result](/images/mybatis3.png)\n\n---\n\n##### \n\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.List;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String userName;\n    private Date birthday;\n    private String sex;\n    private String address;\n\n\n//    \n    private List<Role> roles;\n\n    public List<Role> getRoles() {\n        return roles;\n    }\n\n    public void setRoles(List<Role> roles) {\n        this.roles = roles;\n    }\n\n    private List<Account> accounts;\n\n    public List<Account> getAccounts() {\n        return accounts;\n    }\n\n    public void setAccounts(List<Account> accounts) {\n        this.accounts = accounts;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", userName='\" + userName + '\\'' +\n                \", birthday=\" + birthday +\n                \", sex='\" + sex + '\\'' +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!-- type-->\n    <resultMap id=\"userMap\" type=\"com.loonycoder.domain.User\">\n        <!--idpropertycolumn-->\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n    </resultMap>\n    <!--UserresultMap-->\n    <resultMap id=\"userAccountMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <!--useraccounts-->\n        <!--ofType-->\n        <collection property=\"accounts\" ofType=\"account\">\n            <id property=\"id\" column=\"aid\"></id>\n            <result property=\"uid\" column=\"uid\"></result>\n            <result property=\"money\" column=\"money\"></result>\n        </collection>\n    </resultMap>\n    \n    <!--useruserRoleMap-->\n    <resultMap id=\"userRoleMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <collection property=\"roles\" ofType=\"role\">\n            <id property=\"roleId\" column=\"rid\"></id>\n            <result property=\"roleName\" column=\"role_name\"></result>\n            <result property=\"roleDesc\" column=\"role_desc\"></result>\n        </collection>\n    </resultMap>\n    <!--id-->\n    <!--resultTypeList List-->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"userAccountMap\">\n        select * from user u left outer join account a on u.id = a.uid;\n    </select>\n\n    <select id=\"selectUserRoleAll\" resultMap=\"userRoleMap\">\n        select u.*,r.id as rid,r.role_name,r.role_desc from user u\n        left outer join user_role ur on u.id = ur.uid\n        left outer join role r on r.id = ur.rid\n    </select>\n\n    <insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n\n    <delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{userName},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n    \n    <select id=\"selectUserByCondition\" resultMap=\"userMap\" parameterType=\"user\">\n          select * from user\n          <where>\n            <if test=\"sex != null and sex != '' \">\n                and sex = #{sex}\n            </if>\n          </where>\n\n    </select>\n</mapper>\n```\n\nUserMapper\n```bash\n/**\n     * \n     * @return\n     */\n    public List<User> selectUserRoleAll();\n```\n\n\n```bash\n    @Test\n    public void selectUserRoleAll(){\n        List<User> users = userDao.selectUserRoleAll();\n        for (User user:users) {\n            System.out.println(\"\");\n            System.out.println(user);\n            System.out.println(user.getRoles());\n        }\n    }\n```\n\n\n![result](/images/mybatis4.png)\n","source":"_posts/Mybatis-3.md","raw":"---\ntitle: Mybatis\ncategories:\n    - Mybatis\n    \ndate: 2018-10-15\ntags:\n\t- Java\n\t- Java\n    - \n\n---\n\n### ()\n\n\n\n\n\n\n\n\n\n#### \n\n##### \n\n\n```bash\nDROP TABLE IF EXISTS `user`;\n\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL auto_increment,\n  `username` varchar(32) NOT NULL COMMENT '',\n  `birthday` datetime default NULL COMMENT '',\n  `sex` char(1) default NULL COMMENT '',\n  `address` varchar(256) default NULL COMMENT '',\n  PRIMARY KEY  (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,'','2018-02-27 17:47:08','',''),(2,'','2018-03-02 15:09:37','',''),(3,'','2018-03-04 11:34:34','',''),(4,'','2018-03-04 12:04:06','',''),(4,'','2018-03-07 17:37:26','',''),(48,'','2018-03-08 11:44:00','','');\n\n\n\n\n\nDROP TABLE IF EXISTS `account`;\n\nCREATE TABLE `account` (\n  `ID` int(11) NOT NULL COMMENT '',\n  `UID` int(11) default NULL COMMENT '',\n  `MONEY` double default NULL COMMENT '',\n  PRIMARY KEY  (`ID`),\n  KEY `FK_Reference_8` (`UID`),\n  CONSTRAINT `FK_Reference_8` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `account`(`ID`,`UID`,`MONEY`) values (1,1,1000),(2,3,1000),(3,5,2000);\n```\n\n##### \n\ncom.loonycoder.domain\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\n\npublic class Account implements Serializable {\n    private Integer id;\n    private Integer uid;\n    private Double money;\n\n    //\n    private User user;\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getUid() {\n        return uid;\n    }\n\n    public void setUid(Integer uid) {\n        this.uid = uid;\n    }\n\n    public Double getMoney() {\n        return money;\n    }\n\n    public void setMoney(Double money) {\n        this.money = money;\n    }\n\n    @Override\n    public String toString() {\n        return \"Account{\" +\n                \"id=\" + id +\n                \", uid=\" + uid +\n                \", money=\" + money +\n                '}';\n    }\n}\n\n```\n\n\n\nAccountMapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.Account;\nimport com.loonycoder.domain.AccountUser;\n\nimport java.util.List;\n\npublic interface IAccountMapper {\n\n\n    /**\n     * \n     * @return\n     */\n    List<Account> selectAll();\n\n    /**\n     * \n     * @return\n     */\n    List<AccountUser> selectAccountUser();\n}\n\n\n```\n\n##### \n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.loonycoder.dao.IAccountMapper\">\n\n    <!--accountuserresultMap-->\n    <resultMap id=\"accountUserMap\" type=\"account\">\n        <id property=\"id\" column=\"aid\"></id>\n        <result property=\"uid\" column=\"uid\"></result>\n        <result property=\"money\" column=\"money\"></result>\n        <!--user-->\n        <association property=\"user\" column=\"uid\" javaType=\"user\">\n            <id property=\"id\" column=\"id\"></id>\n            <result property=\"userName\" column=\"username\"></result>\n            <result property=\"address\" column=\"address\"></result>\n            <result property=\"sex\" column=\"sex\"></result>\n            <result property=\"birthday\" column=\"birthday\"></result>\n        </association>\n    </resultMap>\n\n\n    <select id=\"selectAll\" resultMap=\"accountUserMap\">\n        select u.*,a.id as aid,a.uid,a.money from account a,user u where u.id = a.uid;\n    </select>\n</mapper>\n```\n\nSqlMapConfig.xmlmapper\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<!--mybatis-->\n<configuration>\n    <!--${}-->\n    <properties resource=\"jdbcConfig.properties\">\n    </properties>\n    <!-- typealias-->\n    <typeAliases >\n        <!--package-->\n        <package name=\"com.loonycoder.domain\"></package>\n        <!--<typeAlias type=\"com.loonycoder.domain.User\" alias=\"user\"></typeAlias>-->\n    </typeAliases>\n    <!---->\n    <environments default=\"mysql\">\n        <environment id=\"mysql\">\n            <!---->\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <!---->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"${jdbc.driver}\" />\n                <property name=\"url\" value=\"${jdbc.url}\" />\n                <property name=\"username\" value=\"${jdbc.username}\" />\n                <property name=\"password\" value=\"${jdbc.password}\" />\n            </dataSource>\n        </environment>\n    </environments>\n\n    <!--mapper-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IAccountMapper.xml\" />\n        <!--<mapper class=\"com.loonycoder.dao.IUserMapper\" />-->\n    </mappers>\n</configuration>\n```\n\n##### \n```bash\n    @Test\n    public void selectAllAccount(){\n        List<Account> accts = accountMapper.selectAll();\n        for (Account acct : accts) {\n            System.out.println(\"\");\n            System.out.println(acct);\n            System.out.println(acct.getUser());\n        }\n    }\n```\n\n##### \n![result](/images/mybatis1.png)\n\n---\n\n### ()\n\n\n- \n\n##### \nUser\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.List;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String userName;\n    private Date birthday;\n    private String sex;\n    private String address;\n\n    private List<Account> accounts;\n\n    public List<Account> getAccounts() {\n        return accounts;\n    }\n\n    public void setAccounts(List<Account> accounts) {\n        this.accounts = accounts;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", userName='\" + userName + '\\'' +\n                \", birthday=\" + birthday +\n                \", sex='\" + sex + '\\'' +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n##### \n\nUser\nIUserMapper.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!-- type-->\n    <resultMap id=\"userMap\" type=\"com.loonycoder.domain.User\">\n        <!--idpropertycolumn-->\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n    </resultMap>\n    <!--UserresultMap-->\n    <resultMap id=\"userAccountMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <!--useraccounts-->\n        <!--ofType-->\n        <collection property=\"accounts\" ofType=\"account\">\n            <id property=\"id\" column=\"aid\"></id>\n            <result property=\"uid\" column=\"uid\"></result>\n            <result property=\"money\" column=\"money\"></result>\n        </collection>\n    </resultMap>\n    <!--id-->\n    <!--resultTypeList List-->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"userAccountMap\">\n        select * from user u left outer join account a on u.id = a.uid;\n    </select>\n\n    <insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n\n    <delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{userName},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n    \n    <select id=\"selectUserByCondition\" resultMap=\"userMap\" parameterType=\"user\">\n          select * from user\n          <where>\n            <if test=\"sex != null and sex != '' \">\n                and sex = #{sex}\n            </if>\n          </where>\n\n    </select>\n</mapper>\n```\n\n##### \n```bash\n    @Test\n    public void selectTest() throws Exception{\n\n        //5.\n        List<User> users= userDao.selectAll();\n        for (User user: users) {\n            System.out.println(\"\");\n            System.out.println(user);\n            System.out.println(user.getAccounts());\n        }\n\n    }\n```\n\n##### \n![result](/images/mybatis2.png)\n\n---\n\n### ()\n\n\n\n\n- \n- \n\n##### \n\n```bash\nDROP TABLE IF EXISTS `role`;\n\nCREATE TABLE `role` (\n  `ID` int(11) NOT NULL COMMENT '',\n  `ROLE_NAME` varchar(30) default NULL COMMENT '',\n  `ROLE_DESC` varchar(60) default NULL COMMENT '',\n  PRIMARY KEY  (`ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\ninsert  into `role`(`ID`,`ROLE_NAME`,`ROLE_DESC`) values (1,'',''),(2,'',''),(3,'','');\n\n\n\n\n\nDROP TABLE IF EXISTS `user_role`;\n\nCREATE TABLE `user_role` (\n  `UID` int(11) NOT NULL COMMENT '',\n  `RID` int(11) NOT NULL COMMENT '',\n  PRIMARY KEY  (`UID`,`RID`),\n  KEY `FK_Reference_10` (`RID`),\n  CONSTRAINT `FK_Reference_10` FOREIGN KEY (`RID`) REFERENCES `role` (`ID`),\n  CONSTRAINT `FK_Reference_9` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\ninsert  into `user_role`(`UID`,`RID`) values (1,1),(3,1),(3,2);\n\n```\n\n##### \n\n\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\n\npublic class Role implements Serializable {\n    private Integer roleId;\n    private String roleName;\n    private String roleDesc;\n\n    public Integer getRoleId() {\n        return roleId;\n    }\n\n    public void setRoleId(Integer roleId) {\n        this.roleId = roleId;\n    }\n\n    public String getRoleName() {\n        return roleName;\n    }\n\n    public void setRoleName(String roleName) {\n        this.roleName = roleName;\n    }\n\n    public String getRoleDesc() {\n        return roleDesc;\n    }\n\n    public void setRoleDesc(String roleDesc) {\n        this.roleDesc = roleDesc;\n    }\n\n    @Override\n    public String toString() {\n        return \"Role{\" +\n                \"roleId=\" + roleId +\n                \", roleName='\" + roleName + '\\'' +\n                \", roleDesc='\" + roleDesc + '\\'' +\n                '}';\n    }\n}\n\n```\n\n##### \nRoleMapper\n```bash\npackage com.loonycoder.dao;\n\nimport com.loonycoder.domain.Role;\n\nimport java.util.List;\n\npublic interface IRoleMapper {\n\n\n    /**\n     * \n     * @return\n     */\n    public List<Role> selectAll();\n}\n\n```\n\n##### \nIRoleMapper.xml\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.loonycoder.dao.IRoleMapper\">\n    <!--roleresultMap-->\n    <resultMap id=\"roleMap\" type=\"role\">\n        <id property=\"roleId\" column=\"rid\"></id>\n        <result property=\"roleName\" column=\"role_name\"></result>\n        <result property=\"roleDesc\" column=\"role_desc\"></result>\n        <collection property=\"users\" ofType=\"user\">\n            <id property=\"id\" column=\"id\"></id>\n            <result property=\"userName\" column=\"username\"></result>\n            <result property=\"address\" column=\"address\"></result>\n            <result property=\"sex\" column=\"sex\"></result>\n            <result property=\"birthday\" column=\"birthday\"></result>\n        </collection>\n    </resultMap>\n\n    <!---->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"roleMap\">\n        select u.*,r.id as rid,r.role_name,r.role_desc from role r\n        left outer join user_role ur on r.id = ur.rid\n        left outer join user u on u.id = ur.uid\n    </select>\n</mapper>\n\n```\n\nSqlMapConfig.xml\n```bash\n<!--mapper-->\n    <mappers>\n        <mapper resource=\"com/loonycoder/dao/IUserMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IAccountMapper.xml\" />\n        <mapper resource=\"com/loonycoder/dao/IRoleMapper.xml\" />\n        <!--<mapper class=\"com.loonycoder.dao.IUserMapper\" />-->\n    </mappers>\n```\n\n##### \n\n```bash\n    @Test\n    public void selectRoleAll(){\n        List<Role> roles = roleMapper.selectAll();\n        for (Role role:roles) {\n            System.out.println(\"\");\n            System.out.println(role);\n            System.out.println(role.getUsers());\n        }\n    }\n```\n\n##### \n![result](/images/mybatis3.png)\n\n---\n\n##### \n\n\n```bash\npackage com.loonycoder.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.List;\n\npublic class User implements Serializable {\n    private Integer id;\n    private String userName;\n    private Date birthday;\n    private String sex;\n    private String address;\n\n\n//    \n    private List<Role> roles;\n\n    public List<Role> getRoles() {\n        return roles;\n    }\n\n    public void setRoles(List<Role> roles) {\n        this.roles = roles;\n    }\n\n    private List<Account> accounts;\n\n    public List<Account> getAccounts() {\n        return accounts;\n    }\n\n    public void setAccounts(List<Account> accounts) {\n        this.accounts = accounts;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", userName='\" + userName + '\\'' +\n                \", birthday=\" + birthday +\n                \", sex='\" + sex + '\\'' +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n\n```\n\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<!--namespacemapper-->\n<mapper namespace=\"com.loonycoder.dao.IUserMapper\">\n    <!-- type-->\n    <resultMap id=\"userMap\" type=\"com.loonycoder.domain.User\">\n        <!--idpropertycolumn-->\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n    </resultMap>\n    <!--UserresultMap-->\n    <resultMap id=\"userAccountMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <!--useraccounts-->\n        <!--ofType-->\n        <collection property=\"accounts\" ofType=\"account\">\n            <id property=\"id\" column=\"aid\"></id>\n            <result property=\"uid\" column=\"uid\"></result>\n            <result property=\"money\" column=\"money\"></result>\n        </collection>\n    </resultMap>\n    \n    <!--useruserRoleMap-->\n    <resultMap id=\"userRoleMap\" type=\"user\">\n        <id property=\"id\" column=\"id\"></id>\n        <result property=\"userName\" column=\"username\"></result>\n        <result property=\"sex\" column=\"sex\"></result>\n        <result property=\"address\" column=\"address\"></result>\n        <result property=\"birthday\" column=\"birthday\"></result>\n        <collection property=\"roles\" ofType=\"role\">\n            <id property=\"roleId\" column=\"rid\"></id>\n            <result property=\"roleName\" column=\"role_name\"></result>\n            <result property=\"roleDesc\" column=\"role_desc\"></result>\n        </collection>\n    </resultMap>\n    <!--id-->\n    <!--resultTypeList List-->\n    <!---->\n    <select id=\"selectAll\" resultMap=\"userAccountMap\">\n        select * from user u left outer join account a on u.id = a.uid;\n    </select>\n\n    <select id=\"selectUserRoleAll\" resultMap=\"userRoleMap\">\n        select u.*,r.id as rid,r.role_name,r.role_desc from user u\n        left outer join user_role ur on u.id = ur.uid\n        left outer join role r on r.id = ur.rid\n    </select>\n\n    <insert id=\"saveUser\" parameterType=\"com.loonycoder.domain.User\">\n        insert into user (username,sex,birthday,address) values (#{userName},#{sex},#{birthday},#{address});\n    </insert>\n\n    <delete id=\"deleteUser\" parameterType=\"java.lang.Integer\">\n        delete from user where id = #{uid};\n    </delete>\n\n    <update id=\"updateUser\" parameterType=\"com.loonycoder.domain.User\">\n        update user set username = #{userName},sex = #{sex},birthday = #{birthday},address = #{address} where id = #{id};\n    </update>\n    \n    <select id=\"selectUserByCondition\" resultMap=\"userMap\" parameterType=\"user\">\n          select * from user\n          <where>\n            <if test=\"sex != null and sex != '' \">\n                and sex = #{sex}\n            </if>\n          </where>\n\n    </select>\n</mapper>\n```\n\nUserMapper\n```bash\n/**\n     * \n     * @return\n     */\n    public List<User> selectUserRoleAll();\n```\n\n\n```bash\n    @Test\n    public void selectUserRoleAll(){\n        List<User> users = userDao.selectUserRoleAll();\n        for (User user:users) {\n            System.out.println(\"\");\n            System.out.println(user);\n            System.out.println(user.getRoles());\n        }\n    }\n```\n\n\n![result](/images/mybatis4.png)\n","slug":"Mybatis-3","published":1,"updated":"2020-02-21T15:31:14.115Z","_id":"ck6jmftg20000sgs6bses2hfq","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br></p>\n<p><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP TABLE IF EXISTS `user`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL auto_increment,</span><br><span class=\"line\">  `username` varchar(32) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `birthday` datetime default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `sex` char(1) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `address` varchar(256) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,<span class=\"string\">''</span>,<span class=\"string\">'2018-02-27 17:47:08'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-02 15:09:37'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 11:34:34'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 12:04:06'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-07 17:37:26'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(48,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-08 11:44:00'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS `account`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `account` (</span><br><span class=\"line\">  `ID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `UID` int(11) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `MONEY` double default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`ID`),</span><br><span class=\"line\">  KEY `FK_Reference_8` (`UID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_8` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `account`(`ID`,`UID`,`MONEY`) values (1,1,1000),(2,3,1000),(3,5,2000);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br>com.loonycoder.domain<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\">public class Account implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private Integer uid;</span><br><span class=\"line\">    private Double money;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    private User user;</span><br><span class=\"line\"></span><br><span class=\"line\">    public User <span class=\"function\"><span class=\"title\">getUser</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUser(User user) &#123;</span><br><span class=\"line\">        this.user = user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getUid</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> uid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUid(Integer uid) &#123;</span><br><span class=\"line\">        this.uid = uid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Double <span class=\"function\"><span class=\"title\">getMoney</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> money;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setMoney(Double money) &#123;</span><br><span class=\"line\">        this.money = money;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"Account&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", uid=\"</span> + uid +</span><br><span class=\"line\">                <span class=\"string\">\", money=\"</span> + money +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>AccountMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.Account;</span><br><span class=\"line\">import com.loonycoder.domain.AccountUser;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IAccountMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    List&lt;Account&gt; selectAll();</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    List&lt;AccountUser&gt; selectAccountUser();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IAccountMapper\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--accountuserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"accountUserMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--user--&gt;</span><br><span class=\"line\">        &lt;association property=<span class=\"string\">\"user\"</span> column=<span class=\"string\">\"uid\"</span> javaType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/association&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"accountUserMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,a.id as aid,a.uid,a.money from account a,user u <span class=\"built_in\">where</span> u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SqlMapConfig.xmlmapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!--<span class=\"variable\">$&#123;&#125;</span>--&gt;</span><br><span class=\"line\">    &lt;properties resource=<span class=\"string\">\"jdbcConfig.properties\"</span>&gt;</span><br><span class=\"line\">    &lt;/properties&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span><span class=\"built_in\">alias</span>--&gt;</span><br><span class=\"line\">    &lt;typeAliases &gt;</span><br><span class=\"line\">        &lt;!--package--&gt;</span><br><span class=\"line\">        &lt;package name=<span class=\"string\">\"com.loonycoder.domain\"</span>&gt;&lt;/package&gt;</span><br><span class=\"line\">        &lt;!--&lt;typeAlias <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span> <span class=\"built_in\">alias</span>=<span class=\"string\">\"user\"</span>&gt;&lt;/typeAlias&gt;--&gt;</span><br><span class=\"line\">    &lt;/typeAliases&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.driver&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.url&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.username&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.password&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IAccountMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;!--&lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span> /&gt;--&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectAllAccount</span></span>()&#123;</span><br><span class=\"line\">    List&lt;Account&gt; accts = accountMapper.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Account acct : accts) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(acct);</span><br><span class=\"line\">        System.out.println(acct.getUser());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis1.png\" alt=\"result\"></p>\n<hr>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p></p>\n<ul>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>User</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String sex;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    private List&lt;Account&gt; accounts;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Account&gt; <span class=\"function\"><span class=\"title\">getAccounts</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAccounts(List&lt;Account&gt; accounts) &#123;</span><br><span class=\"line\">        this.accounts = accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUserName(String userName) &#123;</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getSex</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setSex(String sex) &#123;</span><br><span class=\"line\">        this.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", userName='\"</span> + userName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", sex='</span><span class=\"string\">\" + sex + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                \"</span>, address=<span class=\"string\">'\" + address + '</span>\\<span class=\"string\">''</span> +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>User<br>IUserMapper.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span>--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        &lt;!--idpropertycolumn--&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--UserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userAccountMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--useraccounts--&gt;</span><br><span class=\"line\">        &lt;!--ofType--&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"accounts\"</span> ofType=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"userAccountMap\"</span>&gt;</span><br><span class=\"line\">        select * from user u left outer join account a on u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;userName&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">    &lt;/update&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserByCondition\"</span> resultMap=<span class=\"string\">\"userMap\"</span> parameterType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">          select * from user</span><br><span class=\"line\">          &lt;<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\">            &lt;<span class=\"keyword\">if</span> <span class=\"built_in\">test</span>=<span class=\"string\">\"sex != null and sex != '' \"</span>&gt;</span><br><span class=\"line\">                and sex = <span class=\"comment\">#&#123;sex&#125;</span></span><br><span class=\"line\">            &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">          &lt;/<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void selectTest() throws Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //5.</span><br><span class=\"line\">    List&lt;User&gt; users= userDao.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(user);</span><br><span class=\"line\">        System.out.println(user.getAccounts());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis2.png\" alt=\"result\"></p>\n<hr>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br><br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP TABLE IF EXISTS `role`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `role` (</span><br><span class=\"line\">  `ID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `ROLE_NAME` varchar(30) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `ROLE_DESC` varchar(60) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`ID`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `role`(`ID`,`ROLE_NAME`,`ROLE_DESC`) values (1,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS `user_role`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user_role` (</span><br><span class=\"line\">  `UID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `RID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`UID`,`RID`),</span><br><span class=\"line\">  KEY `FK_Reference_10` (`RID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_10` FOREIGN KEY (`RID`) REFERENCES `role` (`ID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_9` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user_role`(`UID`,`RID`) values (1,1),(3,1),(3,2);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\">public class Role implements Serializable &#123;</span><br><span class=\"line\">    private Integer roleId;</span><br><span class=\"line\">    private String roleName;</span><br><span class=\"line\">    private String roleDesc;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getRoleId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleId(Integer roleId) &#123;</span><br><span class=\"line\">        this.roleId = roleId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getRoleName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleName(String roleName) &#123;</span><br><span class=\"line\">        this.roleName = roleName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getRoleDesc</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleDesc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleDesc(String roleDesc) &#123;</span><br><span class=\"line\">        this.roleDesc = roleDesc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"Role&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"roleId=\"</span> + roleId +</span><br><span class=\"line\">                <span class=\"string\">\", roleName='\"</span> + roleName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", roleDesc='</span><span class=\"string\">\" + roleDesc + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                '&#125;';</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>RoleMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.Role;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IRoleMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;Role&gt; selectAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>IRoleMapper.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IRoleMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!--roleresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"roleMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"role\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"roleId\"</span> column=<span class=\"string\">\"rid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"roleName\"</span> column=<span class=\"string\">\"role_name\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"roleDesc\"</span> column=<span class=\"string\">\"role_desc\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"users\"</span> ofType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"roleMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,r.id as rid,r.role_name,r.role_desc from role r</span><br><span class=\"line\">        left outer join user_role ur on r.id = ur.rid</span><br><span class=\"line\">        left outer join user u on u.id = ur.uid</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IAccountMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IRoleMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;!--&lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span> /&gt;--&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectRoleAll</span></span>()&#123;</span><br><span class=\"line\">    List&lt;Role&gt; roles = roleMapper.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Role role:roles) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(role);</span><br><span class=\"line\">        System.out.println(role.getUsers());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis3.png\" alt=\"result\"></p>\n<hr>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String sex;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//    </span><br><span class=\"line\">    private List&lt;Role&gt; roles;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Role&gt; <span class=\"function\"><span class=\"title\">getRoles</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoles(List&lt;Role&gt; roles) &#123;</span><br><span class=\"line\">        this.roles = roles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private List&lt;Account&gt; accounts;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Account&gt; <span class=\"function\"><span class=\"title\">getAccounts</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAccounts(List&lt;Account&gt; accounts) &#123;</span><br><span class=\"line\">        this.accounts = accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUserName(String userName) &#123;</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getSex</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setSex(String sex) &#123;</span><br><span class=\"line\">        this.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", userName='\"</span> + userName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", sex='</span><span class=\"string\">\" + sex + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                \"</span>, address=<span class=\"string\">'\" + address + '</span>\\<span class=\"string\">''</span> +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span>--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        &lt;!--idpropertycolumn--&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--UserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userAccountMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--useraccounts--&gt;</span><br><span class=\"line\">        &lt;!--ofType--&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"accounts\"</span> ofType=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;!--useruserRoleMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userRoleMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"roles\"</span> ofType=<span class=\"string\">\"role\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"roleId\"</span> column=<span class=\"string\">\"rid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"roleName\"</span> column=<span class=\"string\">\"role_name\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"roleDesc\"</span> column=<span class=\"string\">\"role_desc\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"userAccountMap\"</span>&gt;</span><br><span class=\"line\">        select * from user u left outer join account a on u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserRoleAll\"</span> resultMap=<span class=\"string\">\"userRoleMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,r.id as rid,r.role_name,r.role_desc from user u</span><br><span class=\"line\">        left outer join user_role ur on u.id = ur.uid</span><br><span class=\"line\">        left outer join role r on r.id = ur.rid</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;userName&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">    &lt;/update&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserByCondition\"</span> resultMap=<span class=\"string\">\"userMap\"</span> parameterType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">          select * from user</span><br><span class=\"line\">          &lt;<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\">            &lt;<span class=\"keyword\">if</span> <span class=\"built_in\">test</span>=<span class=\"string\">\"sex != null and sex != '' \"</span>&gt;</span><br><span class=\"line\">                and sex = <span class=\"comment\">#&#123;sex&#125;</span></span><br><span class=\"line\">            &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">          &lt;/<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>UserMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;User&gt; selectUserRoleAll();</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectUserRoleAll</span></span>()&#123;</span><br><span class=\"line\">    List&lt;User&gt; users = userDao.selectUserRoleAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user:users) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(user);</span><br><span class=\"line\">        System.out.println(user.getRoles());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/mybatis4.png\" alt=\"result\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br></p>\n<p><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP TABLE IF EXISTS `user`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL auto_increment,</span><br><span class=\"line\">  `username` varchar(32) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `birthday` datetime default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `sex` char(1) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `address` varchar(256) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,<span class=\"string\">''</span>,<span class=\"string\">'2018-02-27 17:47:08'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-02 15:09:37'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 11:34:34'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-04 12:04:06'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(4,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-07 17:37:26'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(48,<span class=\"string\">''</span>,<span class=\"string\">'2018-03-08 11:44:00'</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS `account`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `account` (</span><br><span class=\"line\">  `ID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `UID` int(11) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `MONEY` double default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`ID`),</span><br><span class=\"line\">  KEY `FK_Reference_8` (`UID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_8` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `account`(`ID`,`UID`,`MONEY`) values (1,1,1000),(2,3,1000),(3,5,2000);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br>com.loonycoder.domain<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\">public class Account implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private Integer uid;</span><br><span class=\"line\">    private Double money;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    private User user;</span><br><span class=\"line\"></span><br><span class=\"line\">    public User <span class=\"function\"><span class=\"title\">getUser</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUser(User user) &#123;</span><br><span class=\"line\">        this.user = user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getUid</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> uid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUid(Integer uid) &#123;</span><br><span class=\"line\">        this.uid = uid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Double <span class=\"function\"><span class=\"title\">getMoney</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> money;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setMoney(Double money) &#123;</span><br><span class=\"line\">        this.money = money;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"Account&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", uid=\"</span> + uid +</span><br><span class=\"line\">                <span class=\"string\">\", money=\"</span> + money +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>AccountMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.Account;</span><br><span class=\"line\">import com.loonycoder.domain.AccountUser;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IAccountMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    List&lt;Account&gt; selectAll();</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    List&lt;AccountUser&gt; selectAccountUser();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IAccountMapper\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--accountuserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"accountUserMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--user--&gt;</span><br><span class=\"line\">        &lt;association property=<span class=\"string\">\"user\"</span> column=<span class=\"string\">\"uid\"</span> javaType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/association&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"accountUserMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,a.id as aid,a.uid,a.money from account a,user u <span class=\"built_in\">where</span> u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SqlMapConfig.xmlmapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--mybatis--&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!--<span class=\"variable\">$&#123;&#125;</span>--&gt;</span><br><span class=\"line\">    &lt;properties resource=<span class=\"string\">\"jdbcConfig.properties\"</span>&gt;</span><br><span class=\"line\">    &lt;/properties&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span><span class=\"built_in\">alias</span>--&gt;</span><br><span class=\"line\">    &lt;typeAliases &gt;</span><br><span class=\"line\">        &lt;!--package--&gt;</span><br><span class=\"line\">        &lt;package name=<span class=\"string\">\"com.loonycoder.domain\"</span>&gt;&lt;/package&gt;</span><br><span class=\"line\">        &lt;!--&lt;typeAlias <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span> <span class=\"built_in\">alias</span>=<span class=\"string\">\"user\"</span>&gt;&lt;/typeAlias&gt;--&gt;</span><br><span class=\"line\">    &lt;/typeAliases&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;environments default=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">\"mysql\"</span>&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;transactionManager <span class=\"built_in\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!----&gt;</span><br><span class=\"line\">            &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"driver\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.driver&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"url\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.url&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"username\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.username&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">\"password\"</span> value=<span class=\"string\">\"<span class=\"variable\">$&#123;jdbc.password&#125;</span>\"</span> /&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IAccountMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;!--&lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span> /&gt;--&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectAllAccount</span></span>()&#123;</span><br><span class=\"line\">    List&lt;Account&gt; accts = accountMapper.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Account acct : accts) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(acct);</span><br><span class=\"line\">        System.out.println(acct.getUser());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis1.png\" alt=\"result\"></p>\n<hr>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p></p>\n<ul>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>User</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String sex;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    private List&lt;Account&gt; accounts;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Account&gt; <span class=\"function\"><span class=\"title\">getAccounts</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAccounts(List&lt;Account&gt; accounts) &#123;</span><br><span class=\"line\">        this.accounts = accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUserName(String userName) &#123;</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getSex</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setSex(String sex) &#123;</span><br><span class=\"line\">        this.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", userName='\"</span> + userName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", sex='</span><span class=\"string\">\" + sex + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                \"</span>, address=<span class=\"string\">'\" + address + '</span>\\<span class=\"string\">''</span> +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>User<br>IUserMapper.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span>--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        &lt;!--idpropertycolumn--&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--UserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userAccountMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--useraccounts--&gt;</span><br><span class=\"line\">        &lt;!--ofType--&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"accounts\"</span> ofType=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"userAccountMap\"</span>&gt;</span><br><span class=\"line\">        select * from user u left outer join account a on u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;userName&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">    &lt;/update&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserByCondition\"</span> resultMap=<span class=\"string\">\"userMap\"</span> parameterType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">          select * from user</span><br><span class=\"line\">          &lt;<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\">            &lt;<span class=\"keyword\">if</span> <span class=\"built_in\">test</span>=<span class=\"string\">\"sex != null and sex != '' \"</span>&gt;</span><br><span class=\"line\">                and sex = <span class=\"comment\">#&#123;sex&#125;</span></span><br><span class=\"line\">            &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">          &lt;/<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void selectTest() throws Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //5.</span><br><span class=\"line\">    List&lt;User&gt; users= userDao.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user: users) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(user);</span><br><span class=\"line\">        System.out.println(user.getAccounts());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis2.png\" alt=\"result\"></p>\n<hr>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><p><br><br><br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP TABLE IF EXISTS `role`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `role` (</span><br><span class=\"line\">  `ID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `ROLE_NAME` varchar(30) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `ROLE_DESC` varchar(60) default NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`ID`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `role`(`ID`,`ROLE_NAME`,`ROLE_DESC`) values (1,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(2,<span class=\"string\">''</span>,<span class=\"string\">''</span>),(3,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS `user_role`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user_role` (</span><br><span class=\"line\">  `UID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  `RID` int(11) NOT NULL COMMENT <span class=\"string\">''</span>,</span><br><span class=\"line\">  PRIMARY KEY  (`UID`,`RID`),</span><br><span class=\"line\">  KEY `FK_Reference_10` (`RID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_10` FOREIGN KEY (`RID`) REFERENCES `role` (`ID`),</span><br><span class=\"line\">  CONSTRAINT `FK_Reference_9` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `user_role`(`UID`,`RID`) values (1,1),(3,1),(3,2);</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\"></span><br><span class=\"line\">public class Role implements Serializable &#123;</span><br><span class=\"line\">    private Integer roleId;</span><br><span class=\"line\">    private String roleName;</span><br><span class=\"line\">    private String roleDesc;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getRoleId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleId(Integer roleId) &#123;</span><br><span class=\"line\">        this.roleId = roleId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getRoleName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleName(String roleName) &#123;</span><br><span class=\"line\">        this.roleName = roleName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getRoleDesc</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roleDesc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoleDesc(String roleDesc) &#123;</span><br><span class=\"line\">        this.roleDesc = roleDesc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"Role&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"roleId=\"</span> + roleId +</span><br><span class=\"line\">                <span class=\"string\">\", roleName='\"</span> + roleName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", roleDesc='</span><span class=\"string\">\" + roleDesc + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                '&#125;';</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>RoleMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.dao;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.loonycoder.domain.Role;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public interface IRoleMapper &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;Role&gt; selectAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>IRoleMapper.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IRoleMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!--roleresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"roleMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"role\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"roleId\"</span> column=<span class=\"string\">\"rid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"roleName\"</span> column=<span class=\"string\">\"role_name\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"roleDesc\"</span> column=<span class=\"string\">\"role_desc\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"users\"</span> ofType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"roleMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,r.id as rid,r.role_name,r.role_desc from role r</span><br><span class=\"line\">        left outer join user_role ur on r.id = ur.rid</span><br><span class=\"line\">        left outer join user u on u.id = ur.uid</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>SqlMapConfig.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--mapper--&gt;</span><br><span class=\"line\">    &lt;mappers&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IUserMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IAccountMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;mapper resource=<span class=\"string\">\"com/loonycoder/dao/IRoleMapper.xml\"</span> /&gt;</span><br><span class=\"line\">        &lt;!--&lt;mapper class=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span> /&gt;--&gt;</span><br><span class=\"line\">    &lt;/mappers&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectRoleAll</span></span>()&#123;</span><br><span class=\"line\">    List&lt;Role&gt; roles = roleMapper.selectAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Role role:roles) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(role);</span><br><span class=\"line\">        System.out.println(role.getUsers());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"/images/mybatis3.png\" alt=\"result\"></p>\n<hr>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.loonycoder.domain;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.Serializable;</span><br><span class=\"line\">import java.util.Date;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User implements Serializable &#123;</span><br><span class=\"line\">    private Integer id;</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    private Date birthday;</span><br><span class=\"line\">    private String sex;</span><br><span class=\"line\">    private String address;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//    </span><br><span class=\"line\">    private List&lt;Role&gt; roles;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Role&gt; <span class=\"function\"><span class=\"title\">getRoles</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> roles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setRoles(List&lt;Role&gt; roles) &#123;</span><br><span class=\"line\">        this.roles = roles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    private List&lt;Account&gt; accounts;</span><br><span class=\"line\"></span><br><span class=\"line\">    public List&lt;Account&gt; <span class=\"function\"><span class=\"title\">getAccounts</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAccounts(List&lt;Account&gt; accounts) &#123;</span><br><span class=\"line\">        this.accounts = accounts;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Integer <span class=\"function\"><span class=\"title\">getId</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setId(Integer id) &#123;</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setUserName(String userName) &#123;</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Date <span class=\"function\"><span class=\"title\">getBirthday</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setBirthday(Date birthday) &#123;</span><br><span class=\"line\">        this.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getSex</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setSex(String sex) &#123;</span><br><span class=\"line\">        this.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getAddress</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setAddress(String address) &#123;</span><br><span class=\"line\">        this.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"User&#123;\"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"id=\"</span> + id +</span><br><span class=\"line\">                <span class=\"string\">\", userName='\"</span> + userName + <span class=\"string\">'\\'</span><span class=\"string\">' +</span></span><br><span class=\"line\"><span class=\"string\">                \", birthday=\" + birthday +</span></span><br><span class=\"line\"><span class=\"string\">                \", sex='</span><span class=\"string\">\" + sex + '\\'' +</span></span><br><span class=\"line\"><span class=\"string\">                \"</span>, address=<span class=\"string\">'\" + address + '</span>\\<span class=\"string\">''</span> +</span><br><span class=\"line\">                <span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></span><br><span class=\"line\">        <span class=\"string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span>&gt;</span><br><span class=\"line\">&lt;!--namespacemapper--&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">\"com.loonycoder.dao.IUserMapper\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- <span class=\"built_in\">type</span>--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        &lt;!--idpropertycolumn--&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--UserresultMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userAccountMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;!--useraccounts--&gt;</span><br><span class=\"line\">        &lt;!--ofType--&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"accounts\"</span> ofType=<span class=\"string\">\"account\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"aid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"uid\"</span> column=<span class=\"string\">\"uid\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"money\"</span> column=<span class=\"string\">\"money\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;!--useruserRoleMap--&gt;</span><br><span class=\"line\">    &lt;resultMap id=<span class=\"string\">\"userRoleMap\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">        &lt;id property=<span class=\"string\">\"id\"</span> column=<span class=\"string\">\"id\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"userName\"</span> column=<span class=\"string\">\"username\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"sex\"</span> column=<span class=\"string\">\"sex\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"address\"</span> column=<span class=\"string\">\"address\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;result property=<span class=\"string\">\"birthday\"</span> column=<span class=\"string\">\"birthday\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;collection property=<span class=\"string\">\"roles\"</span> ofType=<span class=\"string\">\"role\"</span>&gt;</span><br><span class=\"line\">            &lt;id property=<span class=\"string\">\"roleId\"</span> column=<span class=\"string\">\"rid\"</span>&gt;&lt;/id&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"roleName\"</span> column=<span class=\"string\">\"role_name\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">            &lt;result property=<span class=\"string\">\"roleDesc\"</span> column=<span class=\"string\">\"role_desc\"</span>&gt;&lt;/result&gt;</span><br><span class=\"line\">        &lt;/collection&gt;</span><br><span class=\"line\">    &lt;/resultMap&gt;</span><br><span class=\"line\">    &lt;!--id--&gt;</span><br><span class=\"line\">    &lt;!--resultTypeList List--&gt;</span><br><span class=\"line\">    &lt;!----&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectAll\"</span> resultMap=<span class=\"string\">\"userAccountMap\"</span>&gt;</span><br><span class=\"line\">        select * from user u left outer join account a on u.id = a.uid;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserRoleAll\"</span> resultMap=<span class=\"string\">\"userRoleMap\"</span>&gt;</span><br><span class=\"line\">        select u.*,r.id as rid,r.role_name,r.role_desc from user u</span><br><span class=\"line\">        left outer join user_role ur on u.id = ur.uid</span><br><span class=\"line\">        left outer join role r on r.id = ur.rid</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;insert id=<span class=\"string\">\"saveUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        insert into user (username,sex,birthday,address) values (<span class=\"comment\">#&#123;userName&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;);</span></span><br><span class=\"line\">    &lt;/insert&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;delete id=<span class=\"string\">\"deleteUser\"</span> parameterType=<span class=\"string\">\"java.lang.Integer\"</span>&gt;</span><br><span class=\"line\">        delete from user <span class=\"built_in\">where</span> id = <span class=\"comment\">#&#123;uid&#125;;</span></span><br><span class=\"line\">    &lt;/delete&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;update id=<span class=\"string\">\"updateUser\"</span> parameterType=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">        update user <span class=\"built_in\">set</span> username = <span class=\"comment\">#&#123;userName&#125;,sex = #&#123;sex&#125;,birthday = #&#123;birthday&#125;,address = #&#123;address&#125; where id = #&#123;id&#125;;</span></span><br><span class=\"line\">    &lt;/update&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;select id=<span class=\"string\">\"selectUserByCondition\"</span> resultMap=<span class=\"string\">\"userMap\"</span> parameterType=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">          select * from user</span><br><span class=\"line\">          &lt;<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\">            &lt;<span class=\"keyword\">if</span> <span class=\"built_in\">test</span>=<span class=\"string\">\"sex != null and sex != '' \"</span>&gt;</span><br><span class=\"line\">                and sex = <span class=\"comment\">#&#123;sex&#125;</span></span><br><span class=\"line\">            &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">          &lt;/<span class=\"built_in\">where</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n\n<p>UserMapper</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\">     * </span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public List&lt;User&gt; selectUserRoleAll();</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">selectUserRoleAll</span></span>()&#123;</span><br><span class=\"line\">    List&lt;User&gt; users = userDao.selectUserRoleAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user:users) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        System.out.println(user);</span><br><span class=\"line\">        System.out.println(user.getRoles());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"/images/mybatis4.png\" alt=\"result\"></p>\n"},{"title":"HTTPNginx","date":"2018-11-20T16:00:00.000Z","_content":"\n![nginx](/images/nginx.jpg)\nNginxHTTPIMAPPOP3nginx5\n**Nginx**\n1httpNginxhttphttp\n2\n3Nginx\n\n### \n#### \n- CentOS 7\n- Nginx-1.12.2\n- JDK 8.0\n- Tomcat 8\n\n#### \n- VMware fusion\n- SecureCRT\n\n### Nginx\n\n#### \n1gcc\n```bash\nyum install gcc-c++\n```\n2PCREperlperlnginxhttppcre\n```bash\nyum install -y pcre pcre-devel\n```\n3Zlibzlibnginxhttpgzip\n```bash\nyum install -y zlib zlib-devel\n```\n4OpenSSLnginxhttps(SSLhttp)\n```bash\nyum install -y openssl openssl-devel\n```\n\n#### \nnginxnginx-1.12.2.tar.gzSecureCRTgzLinux\n> SecureCRTgzcommand not foundLinuxlrsz\n\n```bash\nyum -y indtall lrzsz\n```\nrz\n\n**1**\n```bash\ntar zxvf nginx-1.12.2.tar.gz\n```\n**2Makefile**\n```bash\n[root@localhost ~]# cd nginx-1.12.2\n[root@localhost nginx-1.12.2]# ./configure\n```\n![nginx](/images/nginx1.png)\nMakefile\n![nginx](/images/nginx2.png)\n****\nMakefileMakefileMakefileShell\n\n**3**\n\n```bash\n[root@localhost nginx-1.12.2]# make\n```\n\n**4**\n\n```bash\n[root@localhost nginx-1.12.2]# make install\n```\nNginx\n\n---\n\n### Nginx\nNginxCentOS7/usr/local/nginx\n![nginx](/images/nginx3.png)\n#### Nginx\n```bash\n[root@localhost nginx]# cd sbin\n[root@localhost sbin]# ./nginx\n```\nNginxIPip addrNginx\n1pingIP\n```bash\nping ip\n```\nping\n2CentOS780\n```bash\n[root@localhost sbin]# systemctl stop firewalld.service #firewall\n[root@localhost sbin]# systemctl disable firewalld.service #firewall\n[root@localhost sbin]# firewall-cmd --state #notrunningrunning\n```\n\n![nginx](/images/nginx4.png)\n\n#### Nginx\n```bash\n[root@localhost sbin]# ps aux|grep nginx\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -s stop\n```\n\n```bash\n[root@localhost sbin]# ./nginx -s quit\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -s reload\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -t\n```\n\n---\n\n### \nNginxNginx\nindex.html\n\n1****\n```bash\n# \n[root@localhost sbin]# cd ../\n\n# `my`\n[root@localhost nginx]# mkdir my\n\n# `my``index.html`\n[root@localhost nginx]# cd my\n[root@localhost my]# vi index.html\n```\n\n```bash\n<html>\n\n<head>\n<title>Hello</title>\n</head>\n<body>\n\n<h2>Hello Nginx!</h2>\n</body>\n</html>\n```\n\n2**Nginx**\n/usr/local/nginx/conf/nginx.conf\n```bash\n[root@localhost my]# cd ../conf\n[root@localhost conf]# vi nginx.conf\n```\nhttp {}server {}\n```bash\nserver {\n    listen 81;\n    server_name localhost;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\n81/nginxmyNginx192.168.148.132:81index.html\n\n#### \n****.InternetIP**DNS**DNSIP\nIPIP\nhostsIPDNS\nhostshosts(MacOS)\n\n1**hosts**\n```bash\ncp /private/etc/hosts ~/Desktop/\nvi ~/Desktop/hosts\n```\n\n```bash\n192.168.148.132 www.loonycoder.com\n```\n\n```bash\ncp ~/Desktop/hosts /private/etc/\n```\n\n2**Nginx**\n```bash\n[root@localhost conf]# vi /usr/local/nginx/conf/nginx.conf\n```\nserver {}8180\n```bash\nserver {\n    listen 80;\n    server_name localhost;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\nNginx\n```bash\n[root@localhost conf]# cd ../sbin\n[root@localhost sbin]# ./nginx -s stop\n[root@localhost sbin]# ./nginx\n```\n192.168.148.132NginxWelcomenginx.conf80Nginxserver_namelocalhost80\nnginx.conf\n```bash\nserver {\n    listen 80;\n    server_name www.loonycoder.com;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\nserver_nameNginx<www.loonycoder.com>index.html192.168.148.132NginxIP\n\n---\n\n### Nginx\n> \nReverse ProxyInternetInternet\n\n> \n![nginx](/images/nginx5.png)\n****PCInternetInternetPCInternetInternetPC\n\n> \n![nginx](/images/nginx6.png)\n****Internet\n\n#### \nNginx\n1JDK8Tomcat8\nrzJDKTomcatTomcatJDK\n```bash\n# \ntar zxvf jdk-8u191-linux-x64.tar.gz\n\n# JDK\nvi /etc/profile\n```\nprofile\n```bash\nexport JAVA_HOME=/root/jdk1.8.0_191    \nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin\n```\n:wq!\n```bash\n[root@localhost ~]# source /etc/profile\n```\n\njava -versionJDK\nTomcatbin./startup.shTomcat<http://192.168.148.132:8080/>Tomcat\n\n2Tomcat\ntomcat/webapps/ROOT/index.html\n```bash\n[root@localhost ROOT]# vi index.html\n```\n\n```bash\n<html>\n<head>\n<title>Hello</title>\n</head>\n<body>\n<h2>Hello Tomcat!</h2>\n</body>\n</html>\n```\n\n<http://192.168.148.132:8080/>\n![nginx](/images/nginx7.png)\n\n3\n****Nginx80Tomcat8080\nip:8080WebNginx\n- 3.1\nhosts\n```bash\n192.168.148.132 site.loonycoder.com\n```\n<site.loonycoder.com>nginx\n<site.loonycoder.com><loonycoder.com>\n\n- 3.2 Nginx\n```bash\nupstream site {\n        server 192.168.148.132:8080;\n}\nserver {\n        listen 80;\n        server_name site.loonycoder.com;\n        location / {\n            proxy_pass http://site;\n            index index.html;\n        }\n}\n```\nserver {}proxy_passhttp://sitesiteupstream site {}site\n```bash\n# upstream site {\n#         server 192.168.148.132:8080;\n# }\nserver {\n        listen 80;\n        server_name site.loonycoder.com;\n        location / {\n            # proxy_pass http://site;\n            proxy_pass http://192.168.148.132:8080;\n            index index.html;\n        }\n}\n```\n\n****upstream site {}\n\n---\n\n### Nginx\n> \n**Load Balance**\n**** \n1.****Tomcat\n****copy 2Tomcattomcat-2tomcat-3:\n```bash\n[root@localhost ~]# cp ~/apache-tomcat-8.5.33 ~/tomcat-2\n[root@localhost ~]# cp ~/apache-tomcat-8.5.33 ~/tomcat-3\n```\n81808280/tomcat/conf/server.xml<Server port=\"8005\"<Connector port=\"8080\"\n```bash\n# tomcat-2`/conf/server.xml`\n<Server port=\"8006\" shutdown=\"SHUTDOWN\">\n        <Connector port=\"8180\" protocol=\"HTTP/1.1\"  \n\n# tomcat-3`/conf/server.xml`\n<Server port=\"8007\" shutdown=\"SHUTDOWN\">\n        <Connector port=\"8280\" protocol=\"HTTP/1.1\"\n```\nTomcat808081808280\n\n2.****\nNginx\n```bash\n[root@localhost ~]# vi /usr/local/nginx/conf/nginx.conf\n```\nupstream site {}\n```bash\nupstream site {\n     server 192.168.148.132:8080;\n     server 192.168.148.132:8180;\n     server 192.168.148.132:8280;\n}\nserver {\n    listen 80;\n    server_name site.loonycoder.com;\n    location / {\n        proxy_pass http://site;\n        index index.html;\n    }\n}\n```\nNginx3site.loonycoder.com\ntomcat-2tomcat-3/webapps/ROOT/index.html\nTomcatsite.loonycoder.com\n\n```bash\nupstream site {\n     server 192.168.148.132:8080;\n     server 192.168.148.132:8180 weight=2;\n     server 192.168.148.132:8280;\n}\n```","source":"_posts/nginx.md","raw":"---\ntitle: HTTPNginx\ncategories:\n    - Nginx\n    \ndate: 2018-11-21\ntags:\n\t- HTTP\n\n---\n\n![nginx](/images/nginx.jpg)\nNginxHTTPIMAPPOP3nginx5\n**Nginx**\n1httpNginxhttphttp\n2\n3Nginx\n\n### \n#### \n- CentOS 7\n- Nginx-1.12.2\n- JDK 8.0\n- Tomcat 8\n\n#### \n- VMware fusion\n- SecureCRT\n\n### Nginx\n\n#### \n1gcc\n```bash\nyum install gcc-c++\n```\n2PCREperlperlnginxhttppcre\n```bash\nyum install -y pcre pcre-devel\n```\n3Zlibzlibnginxhttpgzip\n```bash\nyum install -y zlib zlib-devel\n```\n4OpenSSLnginxhttps(SSLhttp)\n```bash\nyum install -y openssl openssl-devel\n```\n\n#### \nnginxnginx-1.12.2.tar.gzSecureCRTgzLinux\n> SecureCRTgzcommand not foundLinuxlrsz\n\n```bash\nyum -y indtall lrzsz\n```\nrz\n\n**1**\n```bash\ntar zxvf nginx-1.12.2.tar.gz\n```\n**2Makefile**\n```bash\n[root@localhost ~]# cd nginx-1.12.2\n[root@localhost nginx-1.12.2]# ./configure\n```\n![nginx](/images/nginx1.png)\nMakefile\n![nginx](/images/nginx2.png)\n****\nMakefileMakefileMakefileShell\n\n**3**\n\n```bash\n[root@localhost nginx-1.12.2]# make\n```\n\n**4**\n\n```bash\n[root@localhost nginx-1.12.2]# make install\n```\nNginx\n\n---\n\n### Nginx\nNginxCentOS7/usr/local/nginx\n![nginx](/images/nginx3.png)\n#### Nginx\n```bash\n[root@localhost nginx]# cd sbin\n[root@localhost sbin]# ./nginx\n```\nNginxIPip addrNginx\n1pingIP\n```bash\nping ip\n```\nping\n2CentOS780\n```bash\n[root@localhost sbin]# systemctl stop firewalld.service #firewall\n[root@localhost sbin]# systemctl disable firewalld.service #firewall\n[root@localhost sbin]# firewall-cmd --state #notrunningrunning\n```\n\n![nginx](/images/nginx4.png)\n\n#### Nginx\n```bash\n[root@localhost sbin]# ps aux|grep nginx\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -s stop\n```\n\n```bash\n[root@localhost sbin]# ./nginx -s quit\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -s reload\n```\n\n#### Nginx\n```bash\n[root@localhost sbin]# ./nginx -t\n```\n\n---\n\n### \nNginxNginx\nindex.html\n\n1****\n```bash\n# \n[root@localhost sbin]# cd ../\n\n# `my`\n[root@localhost nginx]# mkdir my\n\n# `my``index.html`\n[root@localhost nginx]# cd my\n[root@localhost my]# vi index.html\n```\n\n```bash\n<html>\n\n<head>\n<title>Hello</title>\n</head>\n<body>\n\n<h2>Hello Nginx!</h2>\n</body>\n</html>\n```\n\n2**Nginx**\n/usr/local/nginx/conf/nginx.conf\n```bash\n[root@localhost my]# cd ../conf\n[root@localhost conf]# vi nginx.conf\n```\nhttp {}server {}\n```bash\nserver {\n    listen 81;\n    server_name localhost;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\n81/nginxmyNginx192.168.148.132:81index.html\n\n#### \n****.InternetIP**DNS**DNSIP\nIPIP\nhostsIPDNS\nhostshosts(MacOS)\n\n1**hosts**\n```bash\ncp /private/etc/hosts ~/Desktop/\nvi ~/Desktop/hosts\n```\n\n```bash\n192.168.148.132 www.loonycoder.com\n```\n\n```bash\ncp ~/Desktop/hosts /private/etc/\n```\n\n2**Nginx**\n```bash\n[root@localhost conf]# vi /usr/local/nginx/conf/nginx.conf\n```\nserver {}8180\n```bash\nserver {\n    listen 80;\n    server_name localhost;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\nNginx\n```bash\n[root@localhost conf]# cd ../sbin\n[root@localhost sbin]# ./nginx -s stop\n[root@localhost sbin]# ./nginx\n```\n192.168.148.132NginxWelcomenginx.conf80Nginxserver_namelocalhost80\nnginx.conf\n```bash\nserver {\n    listen 80;\n    server_name www.loonycoder.com;\n    location / {\n        root my;\n        index index.html;\n    }\n}\n```\nserver_nameNginx<www.loonycoder.com>index.html192.168.148.132NginxIP\n\n---\n\n### Nginx\n> \nReverse ProxyInternetInternet\n\n> \n![nginx](/images/nginx5.png)\n****PCInternetInternetPCInternetInternetPC\n\n> \n![nginx](/images/nginx6.png)\n****Internet\n\n#### \nNginx\n1JDK8Tomcat8\nrzJDKTomcatTomcatJDK\n```bash\n# \ntar zxvf jdk-8u191-linux-x64.tar.gz\n\n# JDK\nvi /etc/profile\n```\nprofile\n```bash\nexport JAVA_HOME=/root/jdk1.8.0_191    \nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin\n```\n:wq!\n```bash\n[root@localhost ~]# source /etc/profile\n```\n\njava -versionJDK\nTomcatbin./startup.shTomcat<http://192.168.148.132:8080/>Tomcat\n\n2Tomcat\ntomcat/webapps/ROOT/index.html\n```bash\n[root@localhost ROOT]# vi index.html\n```\n\n```bash\n<html>\n<head>\n<title>Hello</title>\n</head>\n<body>\n<h2>Hello Tomcat!</h2>\n</body>\n</html>\n```\n\n<http://192.168.148.132:8080/>\n![nginx](/images/nginx7.png)\n\n3\n****Nginx80Tomcat8080\nip:8080WebNginx\n- 3.1\nhosts\n```bash\n192.168.148.132 site.loonycoder.com\n```\n<site.loonycoder.com>nginx\n<site.loonycoder.com><loonycoder.com>\n\n- 3.2 Nginx\n```bash\nupstream site {\n        server 192.168.148.132:8080;\n}\nserver {\n        listen 80;\n        server_name site.loonycoder.com;\n        location / {\n            proxy_pass http://site;\n            index index.html;\n        }\n}\n```\nserver {}proxy_passhttp://sitesiteupstream site {}site\n```bash\n# upstream site {\n#         server 192.168.148.132:8080;\n# }\nserver {\n        listen 80;\n        server_name site.loonycoder.com;\n        location / {\n            # proxy_pass http://site;\n            proxy_pass http://192.168.148.132:8080;\n            index index.html;\n        }\n}\n```\n\n****upstream site {}\n\n---\n\n### Nginx\n> \n**Load Balance**\n**** \n1.****Tomcat\n****copy 2Tomcattomcat-2tomcat-3:\n```bash\n[root@localhost ~]# cp ~/apache-tomcat-8.5.33 ~/tomcat-2\n[root@localhost ~]# cp ~/apache-tomcat-8.5.33 ~/tomcat-3\n```\n81808280/tomcat/conf/server.xml<Server port=\"8005\"<Connector port=\"8080\"\n```bash\n# tomcat-2`/conf/server.xml`\n<Server port=\"8006\" shutdown=\"SHUTDOWN\">\n        <Connector port=\"8180\" protocol=\"HTTP/1.1\"  \n\n# tomcat-3`/conf/server.xml`\n<Server port=\"8007\" shutdown=\"SHUTDOWN\">\n        <Connector port=\"8280\" protocol=\"HTTP/1.1\"\n```\nTomcat808081808280\n\n2.****\nNginx\n```bash\n[root@localhost ~]# vi /usr/local/nginx/conf/nginx.conf\n```\nupstream site {}\n```bash\nupstream site {\n     server 192.168.148.132:8080;\n     server 192.168.148.132:8180;\n     server 192.168.148.132:8280;\n}\nserver {\n    listen 80;\n    server_name site.loonycoder.com;\n    location / {\n        proxy_pass http://site;\n        index index.html;\n    }\n}\n```\nNginx3site.loonycoder.com\ntomcat-2tomcat-3/webapps/ROOT/index.html\nTomcatsite.loonycoder.com\n\n```bash\nupstream site {\n     server 192.168.148.132:8080;\n     server 192.168.148.132:8180 weight=2;\n     server 192.168.148.132:8280;\n}\n```","slug":"nginx","published":1,"updated":"2020-02-21T15:32:21.607Z","_id":"ck6kiel0d0000eys6hx1edm7a","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"/images/nginx.jpg\" alt=\"nginx\"><br>NginxHTTPIMAPPOP3nginx5<br><strong>Nginx</strong><br>1httpNginxhttphttp<br>2<br>3Nginx</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>CentOS 7</li>\n<li>Nginx-1.12.2</li>\n<li>JDK 8.0</li>\n<li>Tomcat 8</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>VMware fusion</li>\n<li>SecureCRT</li>\n</ul>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1gcc</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++</span><br></pre></td></tr></table></figure>\n<p>2PCREperlperlnginxhttppcre</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure>\n<p>3Zlibzlibnginxhttpgzip</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure>\n<p>4OpenSSLnginxhttps(SSLhttp)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nginxnginx-1.12.2.tar.gzSecureCRTgzLinux</p>\n<blockquote>\n<p>SecureCRTgzcommand not foundLinuxlrsz<br></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y indtall lrzsz</span><br></pre></td></tr></table></figure>\n<p>rz</p>\n<p><strong>1</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf nginx-1.12.2.tar.gz</span><br></pre></td></tr></table></figure>\n<p><strong>2Makefile</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cd nginx-1.12.2</span></span><br><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># ./configure</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/nginx1.png\" alt=\"nginx\"><br>Makefile<br><img src=\"/images/nginx2.png\" alt=\"nginx\"><br><strong></strong><br>MakefileMakefileMakefileShell</p>\n<p><strong>3</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># make</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>4</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># make install</span></span><br></pre></td></tr></table></figure>\n<p>Nginx</p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><p>NginxCentOS7/usr/local/nginx<br><img src=\"/images/nginx3.png\" alt=\"nginx\"></p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># cd sbin</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx</span></span><br></pre></td></tr></table></figure>\n<p>NginxIPip addrNginx<br>1pingIP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping ip</span><br></pre></td></tr></table></figure>\n<p>ping<br>2CentOS780</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># systemctl stop firewalld.service #firewall</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># systemctl disable firewalld.service #firewall</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># firewall-cmd --state #notrunningrunning</span></span><br></pre></td></tr></table></figure>\n<p><br><img src=\"/images/nginx4.png\" alt=\"nginx\"></p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ps aux|grep nginx</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s stop</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s quit</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s reload</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -t</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>NginxNginx<br>index.html</p>\n<p>1<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># cd ../</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># `my`</span></span><br><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># mkdir my</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># `my``index.html`</span></span><br><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># cd my</span></span><br><span class=\"line\">[root@localhost my]<span class=\"comment\"># vi index.html</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;Hello Nginx!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>2<strong>Nginx</strong><br>/usr/local/nginx/conf/nginx.conf</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost my]<span class=\"comment\"># cd ../conf</span></span><br><span class=\"line\">[root@localhost conf]<span class=\"comment\"># vi nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>http {}server {}</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 81;</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>81/nginxmyNginx192.168.148.132:81index.html</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong>.InternetIP<strong>DNS</strong>DNSIP<br>IPIP<br>hostsIPDNS<br>hostshosts(MacOS)</p>\n<p>1<strong>hosts</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /private/etc/hosts ~/Desktop/</span><br><span class=\"line\">vi ~/Desktop/hosts</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.148.132 www.loonycoder.com</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp ~/Desktop/hosts /private/etc/</span><br></pre></td></tr></table></figure>\n\n<p>2<strong>Nginx</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost conf]<span class=\"comment\"># vi /usr/local/nginx/conf/nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>server {}8180</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost conf]<span class=\"comment\"># cd ../sbin</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s stop</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx</span></span><br></pre></td></tr></table></figure>\n<p>192.168.148.132NginxWelcomenginx.conf80Nginxserver_namelocalhost80<br>nginx.conf</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name www.loonycoder.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server_nameNginx&lt;<a href=\"http://www.loonycoder.com&gt;index.html192.168.148.132NginxIP\" target=\"_blank\" rel=\"noopener\">www.loonycoder.com&gt;index.html192.168.148.132NginxIP</a></p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><blockquote>\n<p><br>Reverse ProxyInternetInternet</p>\n</blockquote>\n<blockquote>\n<p><br><img src=\"/images/nginx5.png\" alt=\"nginx\"><br><strong></strong>PCInternetInternetPCInternetInternetPC</p>\n</blockquote>\n<blockquote>\n<p><br><img src=\"/images/nginx6.png\" alt=\"nginx\"><br><strong></strong>Internet</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Nginx<br>1JDK8Tomcat8<br>rzJDKTomcatTomcatJDK</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">tar zxvf jdk-8u191-linux-x64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># JDK</span></span><br><span class=\"line\">vi /etc/profile</span><br></pre></td></tr></table></figure>\n<p>profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/root/jdk1.8.0_191    </span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/jre/lib/rt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure>\n<p>:wq!</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># source /etc/profile</span></span><br></pre></td></tr></table></figure>\n\n<p>java -versionJDK<br>Tomcatbin./startup.shTomcat<a href=\"http://192.168.148.132:8080/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:8080/</a>Tomcat</p>\n<p>2Tomcat<br>tomcat/webapps/ROOT/index.html</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ROOT]<span class=\"comment\"># vi index.html</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello Tomcat!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"http://192.168.148.132:8080/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:8080/</a><br><img src=\"/images/nginx7.png\" alt=\"nginx\"></p>\n<p>3<br><strong></strong>Nginx80Tomcat8080<br>ip:8080WebNginx</p>\n<ul>\n<li><p>3.1<br>hosts</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.148.132 site.loonycoder.com</span><br></pre></td></tr></table></figure>\n<p>&lt;site.loonycoder.com&gt;nginx<br>&lt;site.loonycoder.com&gt;&lt;loonycoder.com&gt;</p>\n</li>\n<li><p>3.2 Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">        server 192.168.148.132:8080;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name site.loonycoder.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            proxy_pass http://site;</span><br><span class=\"line\">            index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server {}proxy_pass<a href=\"http://sitesiteupstream\" target=\"_blank\" rel=\"noopener\">http://sitesiteupstream</a> site {}site</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># upstream site &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#         server 192.168.148.132:8080;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name site.loonycoder.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            <span class=\"comment\"># proxy_pass http://site;</span></span><br><span class=\"line\">            proxy_pass http://192.168.148.132:8080;</span><br><span class=\"line\">            index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><strong></strong>upstream site {}</p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><blockquote>\n<p><br><strong>Load Balance</strong><br><strong></strong> <br>1.<strong></strong>Tomcat<br><strong></strong>copy 2Tomcattomcat-2tomcat-3:</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cp ~/apache-tomcat-8.5.33 ~/tomcat-2</span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cp ~/apache-tomcat-8.5.33 ~/tomcat-3</span></span><br></pre></td></tr></table></figure>\n<p>81808280/tomcat/conf/server.xml&lt;Server port=8005&lt;Connector port=8080</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># tomcat-2`/conf/server.xml`</span></span><br><span class=\"line\">&lt;Server port=<span class=\"string\">\"8006\"</span> shutdown=<span class=\"string\">\"SHUTDOWN\"</span>&gt;</span><br><span class=\"line\">        &lt;Connector port=<span class=\"string\">\"8180\"</span> protocol=<span class=\"string\">\"HTTP/1.1\"</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tomcat-3`/conf/server.xml`</span></span><br><span class=\"line\">&lt;Server port=<span class=\"string\">\"8007\"</span> shutdown=<span class=\"string\">\"SHUTDOWN\"</span>&gt;</span><br><span class=\"line\">        &lt;Connector port=<span class=\"string\">\"8280\"</span> protocol=<span class=\"string\">\"HTTP/1.1\"</span></span><br></pre></td></tr></table></figure>\n<p>Tomcat808081808280</p>\n<p>2.<strong></strong><br>Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># vi /usr/local/nginx/conf/nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>upstream site {}</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">     server 192.168.148.132:8080;</span><br><span class=\"line\">     server 192.168.148.132:8180;</span><br><span class=\"line\">     server 192.168.148.132:8280;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name site.loonycoder.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        proxy_pass http://site;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginx3site.loonycoder.com<br>tomcat-2tomcat-3/webapps/ROOT/index.html<br>Tomcatsite.loonycoder.com<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">     server 192.168.148.132:8080;</span><br><span class=\"line\">     server 192.168.148.132:8180 weight=2;</span><br><span class=\"line\">     server 192.168.148.132:8280;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/nginx.jpg\" alt=\"nginx\"><br>NginxHTTPIMAPPOP3nginx5<br><strong>Nginx</strong><br>1httpNginxhttphttp<br>2<br>3Nginx</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>CentOS 7</li>\n<li>Nginx-1.12.2</li>\n<li>JDK 8.0</li>\n<li>Tomcat 8</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>VMware fusion</li>\n<li>SecureCRT</li>\n</ul>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1gcc</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++</span><br></pre></td></tr></table></figure>\n<p>2PCREperlperlnginxhttppcre</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure>\n<p>3Zlibzlibnginxhttpgzip</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure>\n<p>4OpenSSLnginxhttps(SSLhttp)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nginxnginx-1.12.2.tar.gzSecureCRTgzLinux</p>\n<blockquote>\n<p>SecureCRTgzcommand not foundLinuxlrsz<br></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y indtall lrzsz</span><br></pre></td></tr></table></figure>\n<p>rz</p>\n<p><strong>1</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf nginx-1.12.2.tar.gz</span><br></pre></td></tr></table></figure>\n<p><strong>2Makefile</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cd nginx-1.12.2</span></span><br><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># ./configure</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/nginx1.png\" alt=\"nginx\"><br>Makefile<br><img src=\"/images/nginx2.png\" alt=\"nginx\"><br><strong></strong><br>MakefileMakefileMakefileShell</p>\n<p><strong>3</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># make</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>4</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx-1.12.2]<span class=\"comment\"># make install</span></span><br></pre></td></tr></table></figure>\n<p>Nginx</p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><p>NginxCentOS7/usr/local/nginx<br><img src=\"/images/nginx3.png\" alt=\"nginx\"></p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># cd sbin</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx</span></span><br></pre></td></tr></table></figure>\n<p>NginxIPip addrNginx<br>1pingIP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping ip</span><br></pre></td></tr></table></figure>\n<p>ping<br>2CentOS780</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># systemctl stop firewalld.service #firewall</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># systemctl disable firewalld.service #firewall</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># firewall-cmd --state #notrunningrunning</span></span><br></pre></td></tr></table></figure>\n<p><br><img src=\"/images/nginx4.png\" alt=\"nginx\"></p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ps aux|grep nginx</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s stop</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s quit</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s reload</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -t</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>NginxNginx<br>index.html</p>\n<p>1<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># cd ../</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># `my`</span></span><br><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># mkdir my</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># `my``index.html`</span></span><br><span class=\"line\">[root@localhost nginx]<span class=\"comment\"># cd my</span></span><br><span class=\"line\">[root@localhost my]<span class=\"comment\"># vi index.html</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;Hello Nginx!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>2<strong>Nginx</strong><br>/usr/local/nginx/conf/nginx.conf</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost my]<span class=\"comment\"># cd ../conf</span></span><br><span class=\"line\">[root@localhost conf]<span class=\"comment\"># vi nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>http {}server {}</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 81;</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>81/nginxmyNginx192.168.148.132:81index.html</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong>.InternetIP<strong>DNS</strong>DNSIP<br>IPIP<br>hostsIPDNS<br>hostshosts(MacOS)</p>\n<p>1<strong>hosts</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /private/etc/hosts ~/Desktop/</span><br><span class=\"line\">vi ~/Desktop/hosts</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.148.132 www.loonycoder.com</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp ~/Desktop/hosts /private/etc/</span><br></pre></td></tr></table></figure>\n\n<p>2<strong>Nginx</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost conf]<span class=\"comment\"># vi /usr/local/nginx/conf/nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>server {}8180</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name localhost;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost conf]<span class=\"comment\"># cd ../sbin</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx -s stop</span></span><br><span class=\"line\">[root@localhost sbin]<span class=\"comment\"># ./nginx</span></span><br></pre></td></tr></table></figure>\n<p>192.168.148.132NginxWelcomenginx.conf80Nginxserver_namelocalhost80<br>nginx.conf</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name www.loonycoder.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root my;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server_nameNginx&lt;<a href=\"http://www.loonycoder.com&gt;index.html192.168.148.132NginxIP\" target=\"_blank\" rel=\"noopener\">www.loonycoder.com&gt;index.html192.168.148.132NginxIP</a></p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><blockquote>\n<p><br>Reverse ProxyInternetInternet</p>\n</blockquote>\n<blockquote>\n<p><br><img src=\"/images/nginx5.png\" alt=\"nginx\"><br><strong></strong>PCInternetInternetPCInternetInternetPC</p>\n</blockquote>\n<blockquote>\n<p><br><img src=\"/images/nginx6.png\" alt=\"nginx\"><br><strong></strong>Internet</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Nginx<br>1JDK8Tomcat8<br>rzJDKTomcatTomcatJDK</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">tar zxvf jdk-8u191-linux-x64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># JDK</span></span><br><span class=\"line\">vi /etc/profile</span><br></pre></td></tr></table></figure>\n<p>profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/root/jdk1.8.0_191    </span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/jre/lib/rt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure>\n<p>:wq!</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># source /etc/profile</span></span><br></pre></td></tr></table></figure>\n\n<p>java -versionJDK<br>Tomcatbin./startup.shTomcat<a href=\"http://192.168.148.132:8080/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:8080/</a>Tomcat</p>\n<p>2Tomcat<br>tomcat/webapps/ROOT/index.html</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ROOT]<span class=\"comment\"># vi index.html</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello Tomcat!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"http://192.168.148.132:8080/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:8080/</a><br><img src=\"/images/nginx7.png\" alt=\"nginx\"></p>\n<p>3<br><strong></strong>Nginx80Tomcat8080<br>ip:8080WebNginx</p>\n<ul>\n<li><p>3.1<br>hosts</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.148.132 site.loonycoder.com</span><br></pre></td></tr></table></figure>\n<p>&lt;site.loonycoder.com&gt;nginx<br>&lt;site.loonycoder.com&gt;&lt;loonycoder.com&gt;</p>\n</li>\n<li><p>3.2 Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">        server 192.168.148.132:8080;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name site.loonycoder.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            proxy_pass http://site;</span><br><span class=\"line\">            index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>server {}proxy_pass<a href=\"http://sitesiteupstream\" target=\"_blank\" rel=\"noopener\">http://sitesiteupstream</a> site {}site</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># upstream site &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#         server 192.168.148.132:8080;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name site.loonycoder.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            <span class=\"comment\"># proxy_pass http://site;</span></span><br><span class=\"line\">            proxy_pass http://192.168.148.132:8080;</span><br><span class=\"line\">            index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><strong></strong>upstream site {}</p>\n<hr>\n<h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><blockquote>\n<p><br><strong>Load Balance</strong><br><strong></strong> <br>1.<strong></strong>Tomcat<br><strong></strong>copy 2Tomcattomcat-2tomcat-3:</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cp ~/apache-tomcat-8.5.33 ~/tomcat-2</span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cp ~/apache-tomcat-8.5.33 ~/tomcat-3</span></span><br></pre></td></tr></table></figure>\n<p>81808280/tomcat/conf/server.xml&lt;Server port=8005&lt;Connector port=8080</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># tomcat-2`/conf/server.xml`</span></span><br><span class=\"line\">&lt;Server port=<span class=\"string\">\"8006\"</span> shutdown=<span class=\"string\">\"SHUTDOWN\"</span>&gt;</span><br><span class=\"line\">        &lt;Connector port=<span class=\"string\">\"8180\"</span> protocol=<span class=\"string\">\"HTTP/1.1\"</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tomcat-3`/conf/server.xml`</span></span><br><span class=\"line\">&lt;Server port=<span class=\"string\">\"8007\"</span> shutdown=<span class=\"string\">\"SHUTDOWN\"</span>&gt;</span><br><span class=\"line\">        &lt;Connector port=<span class=\"string\">\"8280\"</span> protocol=<span class=\"string\">\"HTTP/1.1\"</span></span><br></pre></td></tr></table></figure>\n<p>Tomcat808081808280</p>\n<p>2.<strong></strong><br>Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># vi /usr/local/nginx/conf/nginx.conf</span></span><br></pre></td></tr></table></figure>\n<p>upstream site {}</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">     server 192.168.148.132:8080;</span><br><span class=\"line\">     server 192.168.148.132:8180;</span><br><span class=\"line\">     server 192.168.148.132:8280;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name site.loonycoder.com;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        proxy_pass http://site;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Nginx3site.loonycoder.com<br>tomcat-2tomcat-3/webapps/ROOT/index.html<br>Tomcatsite.loonycoder.com<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream site &#123;</span><br><span class=\"line\">     server 192.168.148.132:8080;</span><br><span class=\"line\">     server 192.168.148.132:8180 weight=2;</span><br><span class=\"line\">     server 192.168.148.132:8280;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Docker","date":"2018-11-13T16:00:00.000Z","_content":"\n![docker](/images/docker1.jpg)\n**Docker**Docker\n\n#### \n> 1.\nVirtualization\n\n- \nhypervisorOSVMwareworkstation\n\n> 2.\nhypervisor virtualization, HV****\n\n****\n1UbuntuCentOSWindows\n2\nOpenVZSolaris ZonesLinuxLXCemulation layerhypervisor layer\n\n#### Docker\n1\n2DockerDockercopy-on-write\n\n\n#### Docker\n\n##### Docker\nDocker-C/SDockerDockerDockerDockerRESTful APIDockerDockerDocker\n![docker](/images/docker2.png)\n\n##### Docker\n**** DockerDocker\n\n##### Registry \nDockerRegistryRegistryDockerRegistryDocker Hub\n\n##### Docker\nDockerDocker\n![docker](/images/docker3.png)\n\n#### Docker\nCentOS7\nCentOS7Docker\n```bash\nyum install docker\n```\n![docker](/images/docker4.png)\n\n**Docker**\n```bash\n[root@localhost ~]# docker -v\nDocker version 1.13.1, build 8633870/1.13.1\n```\n\n#### Docker\nsystemctlservicechkconfig\n\n1.Docker\n```bash\nsystemctl start docker\n```\n2.Docker\n```bash\nsystemctl stop docker\n```\n3.Docker\n```bash\nsystemctl restart docker\n```\n4.Docker\n```bash\nsystemctl status docker\n```\n5.Docker\n```bash\nsystemctl enable docker\n```\n6.Docker\n```bash\ndocker info\n```\n7.Docker\n```bash\ndocker -help\n```\n\n#### Docker\nDockerbootfsDockerDocker\n![docker](/images/docker5.png)\n\n1\n```bash\n[root@localhost ~]# docker images\n```\n![docker](/images/docker6.png)\n\n- REPOSITORY: \n- TAG \n- IMAGE IDID\n- CREATED\n- SIZE\n\nDocker/var/lib/docker\n\n2\n```bash\n[root@localhost ~]# docker search \n```\n![docker](/images/docker7.png)\n\n3Docker Hub\nDocker HubDocker<https://hub.docker.com/explore/> pull\n```bash\n[root@localhost ~]# docker pull \n[root@localhost ~]# docker pull :\n```\nDockerustcustc\n```bash\n[root@localhost ~]# vi /etc/docker/daemon.json\n```\n\n```bash\n{\n        \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]\n}\n```\nDocker\n```bash\n[root@localhost ~]# systemctl restart docker\n```\n\n4\n\n```bash\n[root@localhost ~]# docker rmi $IMAGE_ID  #$IMAGE_ID`docker images`\n```\n\n```bash\n[root@localhost ~]# docker rmi `docker images -q`\n```\n\n#### Docker\n1.\n```bash\n[root@localhost ~]# docker ps\n```\n2.\n```bash\n[root@localhost ~]# docker ps -a\n```\n3.\n```bash\n[root@localhost ~]# docker ps -|\n```\n4.\n```bash\n[root@localhost ~]# docker ps -f status=exited\n```\n5.\n\n```bash\n[root@localhost ~]# docker rm $CONTAINER_ID/NAME\n```\n\n```bash\n[root@localhost ~]# docker rm `docker ps -a -q`\n```\n\n#### \n\n****\n1.docker run\n2.-i: \n3.-t: \n4.name: \n5.-v: -v\n6.-d: run-d-i -t\n7.-p -p\n\n##### \nmycentos5:\n```bash\nroot@localhost ~]# docker run -it --name=mycentos5 centos:7 /bin/bash\n[root@53f33e279914 /]#\n```\ndocker ps\n![docker](/images/docker8.png)\nexit\n```bash\n[root@53f33e279914 /]# exit\nexit\n[root@localhost ~]#\n```\ndocker ps\n\n##### \nmycentos6\n```bash\n[root@localhost ~]# docker run -di --name=mycentos6 centos:7\n```\ndocker ps\n\n```bash\n[root@localhost ~]# docker exec -it mycentos6 /bin/bash\n```\nexit\n\n##### \n\n```bash\n[root@localhost ~]# docker stop \n```\n\n```bash\n[root@localhost ~]# docker start \n```\n\n#### \n\n##### \n\n```bash\n[root@localhost ~]# docker cp  :\n```\n\n```bash\n[root@localhost ~]# docker cp : \n```\n##### \n\n```bash\n[root@localhost ~]# docker run -di -v :\n```\n##### \n```bash\n[root@localhost ~]# docker inspect mycentos5\n```\n\n****\n\n#### MySQL\n1.MySQL\n```bash\n[root@localhost ~]# docker pull mysql:5.7\n```\n2.MySQL\n```bash\n[root@localhost ~]# docker run -di --name docker_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql:5.7\n```\ndocker_mysqlMySQL5.7MySQLroot\n- -p  :\n- -e  MYSQL_ROOT_PASSWORDroot\n3.MySQLMySQL\n```bash\n[root@localhost ~]# docker exec -it docker_mysql /bin/bash\n```\nMySQL\n```bash\nmysql -u root -p\n```\n4.MySQL\n![docker](/images/docker9.png)\n\n#### Tomcat\n1.Tomcat-8 && JDK-8 \n```bash\n[root@localhost ~]# docker pull tomcat:8-jre8\n```\n2.Web\nDockerTomcatweb/root//root/site/index.html\n```bash\n<html>\n<head>\n<title>Hello</title>\n</head>\n<body>\n<h2>Hello Docker-Tomcat!</h2>\n</body>\n</html>\n```\n3.Tomcat\n```bash\n[root@localhost ~]# docker run -di --name=docker_tomcat -p 9000:8080 -v /root/site/:/usr/local/tomcat/webapps/ROOT --privileged=true tomcat:8-jre8\n```\nTomcatWiedocker_tomcat-di-p 9000:80809000->80809000Tomcat8080--privilegedroot\n![docker](/images/docker10.png)\nTomcatNginxMySQLDocker\n****\n/root/site/docker_tomcat/usr/local/tomcat/webapps/ROOT\nDockerdocker exec -it docker_tomcat /bin/bashdocker_tomcatlsTomcatdocker_tomcat/usr/local/tomcat\n<http://192.168.148.132:9000/>/root/site/index.html\n![docker](/images/docker11.png)\nTomcat/usr/local/tomcat/conf/server.xml\n\n#### Nginx\n1.Nginx\n```bash\ndocker pull nginx\n```\n2.Nginx\n```bash\ndocker run -di --name=docker_nginx -p 80:80 nginx\n```\n\n![docker](/images/docker12.png)\n<http://192.168.148.132/>Nginx\n\n#### \nMySQLTomcatNginxRedis\n\n#### \n1.\n\n```bash\ndocker commit docker_tomcat my_tomcat\n```\ndocker_tomcatmy_tomcat\n2.\ntar\n```bash\ndocker save -o my_tomcat.tar my_tomcat\n```\n-o\n3.\ndocker_tomcat.tarDocker\n```bash\ndocker load -i my_tomcat.tar\n```\n-i\n\n","source":"_posts/docker.md","raw":"---\ntitle: Docker\ncategories:\n    - Docker\n    \ndate: 2018-11-14\ntags:\n\t- DevOps\n    - \n---\n\n![docker](/images/docker1.jpg)\n**Docker**Docker\n\n#### \n> 1.\nVirtualization\n\n- \nhypervisorOSVMwareworkstation\n\n> 2.\nhypervisor virtualization, HV****\n\n****\n1UbuntuCentOSWindows\n2\nOpenVZSolaris ZonesLinuxLXCemulation layerhypervisor layer\n\n#### Docker\n1\n2DockerDockercopy-on-write\n\n\n#### Docker\n\n##### Docker\nDocker-C/SDockerDockerDockerDockerRESTful APIDockerDockerDocker\n![docker](/images/docker2.png)\n\n##### Docker\n**** DockerDocker\n\n##### Registry \nDockerRegistryRegistryDockerRegistryDocker Hub\n\n##### Docker\nDockerDocker\n![docker](/images/docker3.png)\n\n#### Docker\nCentOS7\nCentOS7Docker\n```bash\nyum install docker\n```\n![docker](/images/docker4.png)\n\n**Docker**\n```bash\n[root@localhost ~]# docker -v\nDocker version 1.13.1, build 8633870/1.13.1\n```\n\n#### Docker\nsystemctlservicechkconfig\n\n1.Docker\n```bash\nsystemctl start docker\n```\n2.Docker\n```bash\nsystemctl stop docker\n```\n3.Docker\n```bash\nsystemctl restart docker\n```\n4.Docker\n```bash\nsystemctl status docker\n```\n5.Docker\n```bash\nsystemctl enable docker\n```\n6.Docker\n```bash\ndocker info\n```\n7.Docker\n```bash\ndocker -help\n```\n\n#### Docker\nDockerbootfsDockerDocker\n![docker](/images/docker5.png)\n\n1\n```bash\n[root@localhost ~]# docker images\n```\n![docker](/images/docker6.png)\n\n- REPOSITORY: \n- TAG \n- IMAGE IDID\n- CREATED\n- SIZE\n\nDocker/var/lib/docker\n\n2\n```bash\n[root@localhost ~]# docker search \n```\n![docker](/images/docker7.png)\n\n3Docker Hub\nDocker HubDocker<https://hub.docker.com/explore/> pull\n```bash\n[root@localhost ~]# docker pull \n[root@localhost ~]# docker pull :\n```\nDockerustcustc\n```bash\n[root@localhost ~]# vi /etc/docker/daemon.json\n```\n\n```bash\n{\n        \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]\n}\n```\nDocker\n```bash\n[root@localhost ~]# systemctl restart docker\n```\n\n4\n\n```bash\n[root@localhost ~]# docker rmi $IMAGE_ID  #$IMAGE_ID`docker images`\n```\n\n```bash\n[root@localhost ~]# docker rmi `docker images -q`\n```\n\n#### Docker\n1.\n```bash\n[root@localhost ~]# docker ps\n```\n2.\n```bash\n[root@localhost ~]# docker ps -a\n```\n3.\n```bash\n[root@localhost ~]# docker ps -|\n```\n4.\n```bash\n[root@localhost ~]# docker ps -f status=exited\n```\n5.\n\n```bash\n[root@localhost ~]# docker rm $CONTAINER_ID/NAME\n```\n\n```bash\n[root@localhost ~]# docker rm `docker ps -a -q`\n```\n\n#### \n\n****\n1.docker run\n2.-i: \n3.-t: \n4.name: \n5.-v: -v\n6.-d: run-d-i -t\n7.-p -p\n\n##### \nmycentos5:\n```bash\nroot@localhost ~]# docker run -it --name=mycentos5 centos:7 /bin/bash\n[root@53f33e279914 /]#\n```\ndocker ps\n![docker](/images/docker8.png)\nexit\n```bash\n[root@53f33e279914 /]# exit\nexit\n[root@localhost ~]#\n```\ndocker ps\n\n##### \nmycentos6\n```bash\n[root@localhost ~]# docker run -di --name=mycentos6 centos:7\n```\ndocker ps\n\n```bash\n[root@localhost ~]# docker exec -it mycentos6 /bin/bash\n```\nexit\n\n##### \n\n```bash\n[root@localhost ~]# docker stop \n```\n\n```bash\n[root@localhost ~]# docker start \n```\n\n#### \n\n##### \n\n```bash\n[root@localhost ~]# docker cp  :\n```\n\n```bash\n[root@localhost ~]# docker cp : \n```\n##### \n\n```bash\n[root@localhost ~]# docker run -di -v :\n```\n##### \n```bash\n[root@localhost ~]# docker inspect mycentos5\n```\n\n****\n\n#### MySQL\n1.MySQL\n```bash\n[root@localhost ~]# docker pull mysql:5.7\n```\n2.MySQL\n```bash\n[root@localhost ~]# docker run -di --name docker_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql:5.7\n```\ndocker_mysqlMySQL5.7MySQLroot\n- -p  :\n- -e  MYSQL_ROOT_PASSWORDroot\n3.MySQLMySQL\n```bash\n[root@localhost ~]# docker exec -it docker_mysql /bin/bash\n```\nMySQL\n```bash\nmysql -u root -p\n```\n4.MySQL\n![docker](/images/docker9.png)\n\n#### Tomcat\n1.Tomcat-8 && JDK-8 \n```bash\n[root@localhost ~]# docker pull tomcat:8-jre8\n```\n2.Web\nDockerTomcatweb/root//root/site/index.html\n```bash\n<html>\n<head>\n<title>Hello</title>\n</head>\n<body>\n<h2>Hello Docker-Tomcat!</h2>\n</body>\n</html>\n```\n3.Tomcat\n```bash\n[root@localhost ~]# docker run -di --name=docker_tomcat -p 9000:8080 -v /root/site/:/usr/local/tomcat/webapps/ROOT --privileged=true tomcat:8-jre8\n```\nTomcatWiedocker_tomcat-di-p 9000:80809000->80809000Tomcat8080--privilegedroot\n![docker](/images/docker10.png)\nTomcatNginxMySQLDocker\n****\n/root/site/docker_tomcat/usr/local/tomcat/webapps/ROOT\nDockerdocker exec -it docker_tomcat /bin/bashdocker_tomcatlsTomcatdocker_tomcat/usr/local/tomcat\n<http://192.168.148.132:9000/>/root/site/index.html\n![docker](/images/docker11.png)\nTomcat/usr/local/tomcat/conf/server.xml\n\n#### Nginx\n1.Nginx\n```bash\ndocker pull nginx\n```\n2.Nginx\n```bash\ndocker run -di --name=docker_nginx -p 80:80 nginx\n```\n\n![docker](/images/docker12.png)\n<http://192.168.148.132/>Nginx\n\n#### \nMySQLTomcatNginxRedis\n\n#### \n1.\n\n```bash\ndocker commit docker_tomcat my_tomcat\n```\ndocker_tomcatmy_tomcat\n2.\ntar\n```bash\ndocker save -o my_tomcat.tar my_tomcat\n```\n-o\n3.\ndocker_tomcat.tarDocker\n```bash\ndocker load -i my_tomcat.tar\n```\n-i\n\n","slug":"docker","published":1,"updated":"2020-02-21T15:32:12.616Z","_id":"ck6kroww40000k5s67wajeknm","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"/images/docker1.jpg\" alt=\"docker\"><br><strong>Docker</strong>Docker</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p>1.<br>Virtualization</p>\n</blockquote>\n<ul>\n<li><br>hypervisorOSVMwareworkstation</li>\n</ul>\n<blockquote>\n<p>2.<br>hypervisor virtualization, HV<strong></strong></p>\n</blockquote>\n<p><strong></strong><br>1UbuntuCentOSWindows<br>2<br>OpenVZSolaris ZonesLinuxLXCemulation layerhypervisor layer</p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>1<br>2DockerDockercopy-on-write<br></p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p>Docker-C/SDockerDockerDockerDockerRESTful APIDockerDockerDocker<br><img src=\"/images/docker2.png\" alt=\"docker\"></p>\n<h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p><strong></strong> DockerDocker</p>\n<h5 id=\"Registry-\"><a href=\"#Registry-\" class=\"headerlink\" title=\"Registry \"></a>Registry </h5><p>DockerRegistryRegistryDockerRegistryDocker Hub</p>\n<h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p>DockerDocker<br><img src=\"/images/docker3.png\" alt=\"docker\"></p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>CentOS7<br>CentOS7Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install docker</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker4.png\" alt=\"docker\"></p>\n<p><strong>Docker</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker -v</span></span><br><span class=\"line\">Docker version 1.13.1, build 8633870/1.13.1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>systemctlservicechkconfig</p>\n<p>1.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>2.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop docker</span><br></pre></td></tr></table></figure>\n<p>3.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n<p>4.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n<p>5.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n<p>6.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker info</span><br></pre></td></tr></table></figure>\n<p>7.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>DockerbootfsDockerDocker<br><img src=\"/images/docker5.png\" alt=\"docker\"></p>\n<p>1</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker images</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker6.png\" alt=\"docker\"></p>\n<ul>\n<li>REPOSITORY: </li>\n<li>TAG </li>\n<li>IMAGE IDID</li>\n<li>CREATED</li>\n<li>SIZE</li>\n</ul>\n<p>Docker/var/lib/docker</p>\n<p>2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker search </span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker7.png\" alt=\"docker\"></p>\n<p>3Docker Hub<br>Docker HubDocker<a href=\"https://hub.docker.com/explore/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/explore/</a> pull</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull </span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull :</span></span><br></pre></td></tr></table></figure>\n<p>Dockerustcustc</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># vi /etc/docker/daemon.json</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"string\">\"registry-mirrors\"</span>: [<span class=\"string\">\"https://docker.mirrors.ustc.edu.cn\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># systemctl restart docker</span></span><br></pre></td></tr></table></figure>\n\n<p>4<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rmi $IMAGE_ID  #$IMAGE_ID`docker images`</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rmi `docker images -q`</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>1.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps</span></span><br></pre></td></tr></table></figure>\n<p>2.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -a</span></span><br></pre></td></tr></table></figure>\n<p>3.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -|</span></span><br></pre></td></tr></table></figure>\n<p>4.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -f status=exited</span></span><br></pre></td></tr></table></figure>\n<p>5.<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rm $CONTAINER_ID/NAME</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rm `docker ps -a -q`</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><br>1.docker run<br>2.-i: <br>3.-t: <br>4.name: <br>5.-v: -v<br>6.-d: run-d-i -t<br>7.-p -p</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mycentos5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@localhost ~]<span class=\"comment\"># docker run -it --name=mycentos5 centos:7 /bin/bash</span></span><br><span class=\"line\">[root@53f33e279914 /]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>docker ps<br><img src=\"/images/docker8.png\" alt=\"docker\"><br>exit</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@53f33e279914 /]<span class=\"comment\"># exit</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>docker ps</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mycentos6</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name=mycentos6 centos:7</span></span><br></pre></td></tr></table></figure>\n<p>docker ps<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker exec -it mycentos6 /bin/bash</span></span><br></pre></td></tr></table></figure>\n<p>exit</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker stop </span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker start </span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker cp  :</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker cp : </span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di -v :</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker inspect mycentos5</span></span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<h4 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h4><p>1.MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull mysql:5.7</span></span><br></pre></td></tr></table></figure>\n<p>2.MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name docker_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql:5.7</span></span><br></pre></td></tr></table></figure>\n<p>docker_mysqlMySQL5.7MySQLroot</p>\n<ul>\n<li>-p  :</li>\n<li>-e  MYSQL_ROOT_PASSWORDroot</li>\n</ul>\n<p>3.MySQLMySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker exec -it docker_mysql /bin/bash</span></span><br></pre></td></tr></table></figure>\n<p>MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br></pre></td></tr></table></figure>\n<p>4.MySQL<br><img src=\"/images/docker9.png\" alt=\"docker\"></p>\n<h4 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h4><p>1.Tomcat-8 &amp;&amp; JDK-8 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull tomcat:8-jre8</span></span><br></pre></td></tr></table></figure>\n<p>2.Web<br>DockerTomcatweb/root//root/site/index.html</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello Docker-Tomcat!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>3.Tomcat</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name=docker_tomcat -p 9000:8080 -v /root/site/:/usr/local/tomcat/webapps/ROOT --privileged=true tomcat:8-jre8</span></span><br></pre></td></tr></table></figure>\n<p>TomcatWiedocker_tomcat-di-p 9000:80809000-&gt;80809000Tomcat8080privilegedroot<br><img src=\"/images/docker10.png\" alt=\"docker\"><br>TomcatNginxMySQLDocker<br><strong></strong><br>/root/site/docker_tomcat/usr/local/tomcat/webapps/ROOT<br>Dockerdocker exec -it docker_tomcat /bin/bashdocker_tomcatlsTomcatdocker_tomcat/usr/local/tomcat<br><a href=\"http://192.168.148.132:9000/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:9000/</a>/root/site/index.html<br><img src=\"/images/docker11.png\" alt=\"docker\"><br>Tomcat/usr/local/tomcat/conf/server.xml</p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>1.Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nginx</span><br></pre></td></tr></table></figure>\n<p>2.Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -di --name=docker_nginx -p 80:80 nginx</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"/images/docker12.png\" alt=\"docker\"><br><a href=\"http://192.168.148.132/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132/</a>Nginx</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MySQLTomcatNginxRedis</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1.<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker commit docker_tomcat my_tomcat</span><br></pre></td></tr></table></figure>\n<p>docker_tomcatmy_tomcat<br>2.<br>tar</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save -o my_tomcat.tar my_tomcat</span><br></pre></td></tr></table></figure>\n<p>-o<br>3.<br>docker_tomcat.tarDocker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load -i my_tomcat.tar</span><br></pre></td></tr></table></figure>\n<p>-i</p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/docker1.jpg\" alt=\"docker\"><br><strong>Docker</strong>Docker</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p>1.<br>Virtualization</p>\n</blockquote>\n<ul>\n<li><br>hypervisorOSVMwareworkstation</li>\n</ul>\n<blockquote>\n<p>2.<br>hypervisor virtualization, HV<strong></strong></p>\n</blockquote>\n<p><strong></strong><br>1UbuntuCentOSWindows<br>2<br>OpenVZSolaris ZonesLinuxLXCemulation layerhypervisor layer</p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>1<br>2DockerDockercopy-on-write<br></p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p>Docker-C/SDockerDockerDockerDockerRESTful APIDockerDockerDocker<br><img src=\"/images/docker2.png\" alt=\"docker\"></p>\n<h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p><strong></strong> DockerDocker</p>\n<h5 id=\"Registry-\"><a href=\"#Registry-\" class=\"headerlink\" title=\"Registry \"></a>Registry </h5><p>DockerRegistryRegistryDockerRegistryDocker Hub</p>\n<h5 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h5><p>DockerDocker<br><img src=\"/images/docker3.png\" alt=\"docker\"></p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>CentOS7<br>CentOS7Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install docker</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker4.png\" alt=\"docker\"></p>\n<p><strong>Docker</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker -v</span></span><br><span class=\"line\">Docker version 1.13.1, build 8633870/1.13.1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>systemctlservicechkconfig</p>\n<p>1.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>2.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop docker</span><br></pre></td></tr></table></figure>\n<p>3.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n<p>4.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n<p>5.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n<p>6.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker info</span><br></pre></td></tr></table></figure>\n<p>7.Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>DockerbootfsDockerDocker<br><img src=\"/images/docker5.png\" alt=\"docker\"></p>\n<p>1</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker images</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker6.png\" alt=\"docker\"></p>\n<ul>\n<li>REPOSITORY: </li>\n<li>TAG </li>\n<li>IMAGE IDID</li>\n<li>CREATED</li>\n<li>SIZE</li>\n</ul>\n<p>Docker/var/lib/docker</p>\n<p>2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker search </span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker7.png\" alt=\"docker\"></p>\n<p>3Docker Hub<br>Docker HubDocker<a href=\"https://hub.docker.com/explore/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/explore/</a> pull</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull </span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull :</span></span><br></pre></td></tr></table></figure>\n<p>Dockerustcustc</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># vi /etc/docker/daemon.json</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"string\">\"registry-mirrors\"</span>: [<span class=\"string\">\"https://docker.mirrors.ustc.edu.cn\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Docker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># systemctl restart docker</span></span><br></pre></td></tr></table></figure>\n\n<p>4<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rmi $IMAGE_ID  #$IMAGE_ID`docker images`</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rmi `docker images -q`</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p>1.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps</span></span><br></pre></td></tr></table></figure>\n<p>2.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -a</span></span><br></pre></td></tr></table></figure>\n<p>3.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -|</span></span><br></pre></td></tr></table></figure>\n<p>4.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker ps -f status=exited</span></span><br></pre></td></tr></table></figure>\n<p>5.<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rm $CONTAINER_ID/NAME</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker rm `docker ps -a -q`</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><br>1.docker run<br>2.-i: <br>3.-t: <br>4.name: <br>5.-v: -v<br>6.-d: run-d-i -t<br>7.-p -p</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mycentos5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@localhost ~]<span class=\"comment\"># docker run -it --name=mycentos5 centos:7 /bin/bash</span></span><br><span class=\"line\">[root@53f33e279914 /]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>docker ps<br><img src=\"/images/docker8.png\" alt=\"docker\"><br>exit</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@53f33e279914 /]<span class=\"comment\"># exit</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">[root@localhost ~]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n<p>docker ps</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mycentos6</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name=mycentos6 centos:7</span></span><br></pre></td></tr></table></figure>\n<p>docker ps<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker exec -it mycentos6 /bin/bash</span></span><br></pre></td></tr></table></figure>\n<p>exit</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker stop </span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker start </span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker cp  :</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker cp : </span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di -v :</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker inspect mycentos5</span></span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<h4 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h4><p>1.MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull mysql:5.7</span></span><br></pre></td></tr></table></figure>\n<p>2.MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name docker_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql:5.7</span></span><br></pre></td></tr></table></figure>\n<p>docker_mysqlMySQL5.7MySQLroot</p>\n<ul>\n<li>-p  :</li>\n<li>-e  MYSQL_ROOT_PASSWORDroot</li>\n</ul>\n<p>3.MySQLMySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker exec -it docker_mysql /bin/bash</span></span><br></pre></td></tr></table></figure>\n<p>MySQL</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br></pre></td></tr></table></figure>\n<p>4.MySQL<br><img src=\"/images/docker9.png\" alt=\"docker\"></p>\n<h4 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h4><p>1.Tomcat-8 &amp;&amp; JDK-8 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker pull tomcat:8-jre8</span></span><br></pre></td></tr></table></figure>\n<p>2.Web<br>DockerTomcatweb/root//root/site/index.html</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;title&gt;Hello&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h2&gt;Hello Docker-Tomcat!&lt;/h2&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>3.Tomcat</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># docker run -di --name=docker_tomcat -p 9000:8080 -v /root/site/:/usr/local/tomcat/webapps/ROOT --privileged=true tomcat:8-jre8</span></span><br></pre></td></tr></table></figure>\n<p>TomcatWiedocker_tomcat-di-p 9000:80809000-&gt;80809000Tomcat8080privilegedroot<br><img src=\"/images/docker10.png\" alt=\"docker\"><br>TomcatNginxMySQLDocker<br><strong></strong><br>/root/site/docker_tomcat/usr/local/tomcat/webapps/ROOT<br>Dockerdocker exec -it docker_tomcat /bin/bashdocker_tomcatlsTomcatdocker_tomcat/usr/local/tomcat<br><a href=\"http://192.168.148.132:9000/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132:9000/</a>/root/site/index.html<br><img src=\"/images/docker11.png\" alt=\"docker\"><br>Tomcat/usr/local/tomcat/conf/server.xml</p>\n<h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><p>1.Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nginx</span><br></pre></td></tr></table></figure>\n<p>2.Nginx</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -di --name=docker_nginx -p 80:80 nginx</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"/images/docker12.png\" alt=\"docker\"><br><a href=\"http://192.168.148.132/\" target=\"_blank\" rel=\"noopener\">http://192.168.148.132/</a>Nginx</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>MySQLTomcatNginxRedis</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>1.<br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker commit docker_tomcat my_tomcat</span><br></pre></td></tr></table></figure>\n<p>docker_tomcatmy_tomcat<br>2.<br>tar</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save -o my_tomcat.tar my_tomcat</span><br></pre></td></tr></table></figure>\n<p>-o<br>3.<br>docker_tomcat.tarDocker</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load -i my_tomcat.tar</span><br></pre></td></tr></table></figure>\n<p>-i</p>\n"},{"title":"","date":"2018-08-15T16:00:00.000Z","_content":"\n### \n\n#### \n************\n**********O(1)**\n\n##### O\n B nB **O(n)**(big O(n))\n******f(N)****** O(f(N))**\n aN + bN + C  **O(n)**\n\n##### \n****\n 1,2,3,4,5 **O(N)**M: O(M * N) O(1)  O(N) \n****\n 1,2,3,4,5 Right Left RightLeftRightRightright left\n logN  log(M * logN)\n\n#### \n****\n****\n\n\n\n\n************\n********\n\n##### \n****\n```bash\npublic class Code_Recursive {\n\n    public static void countDown(int integer) {\n        if (integer >= 1) {\n            System.out.println(integer);\n            countDown(integer - 1);\n        }\n    }\n\n    public static void main(String[] args) {\n        countDown(3);\n    }\n}\n```\n321 \n- \n-  sys \n- integer1\n\n****\n![math](/images/math1.png)\ncountDown(3)countDown\nJavaJava\n\n##### \n**master**\n![math](/images/math2.png)\n\n#### \nO(N )\n\n![math](/images/math3.png)\n\n```bash\npublic class Code_00_BubbleSort {\n\n    public static void bubbleSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n\n        for (int i = arr.length - 1; i > 0; i--) {\n            for (int j = 0; j < i; j++) {\n                if (arr[j] > arr[j + 1]) {\n                    swap(arr, j, j + 1);\n                }\n            }\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        bubbleSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\narr[3,2,0,7,4]bubbleSortarr.length-1arr.length-1\n\n#### \nO(N)\nminIndex,minIndexminIndex\n\n![math](/images/math4.png)\n\n```bash\npublic class Code_01_SelectionSort {\n\n    public static void selectionSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n        for (int i = 0; i < arr.length - 1; i++) {\n            int minIndex = i;\n            for (int j = i + 1; j < arr.length; j++) {\n                minIndex = arr[j] < arr[minIndex] ? j : minIndex;\n            }\n            swap(arr, i, minIndex);\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        selectionSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \nO(N)\n\n\n- \n\t- 1.minIndex\n\t- 2.minIndex\n- \n\t- minIndexminIndexswap\n- \n\t- arr.length\n\n\n![math](/images/math5.png)\n****\n- sortfor()n~arr.length\n- **minIndex**for(int i=n)\n- arr[minIndex] > arr[i]minIndexminIndex\n- ****n~arr.lengthswap\n- sort(arr, n + 1)n+1arr.length\n\n\n```bash\npublic class Code_01_Recursive_SelectionSort {\n\n    public static void sort(int[] arr, int n) {\n        int minIndex = n;\n        if (arr.length < 2 || arr == null || n >= arr.length) {\n            return;\n        }\n        for (int i = n; i < arr.length; i++) {\n            if (arr[minIndex] > arr[i]) {\n                minIndex = i;\n            }\n        }\n        swap(arr, n, minIndex);\n        sort(arr, n + 1);\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        sort(arr, 0);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \nO(N)\n10101203040\n![math](/images/math6.png)\n\n\n```bash\npublic class Code_02_InsertionSort {\n\n    public static void insertionSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n\n        for (int i = 1; i < arr.length; i++) {\n            for (int j = i - 1; j >= 0 && arr[j] > arr[j + 1]; j--) {\n                System.out.println(\"arr[\" + j + \"], arr[\" + (j + 1) + \"]\");\n                swap(arr, j, j + 1);\n            }\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        insertionSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \n\n```bash\npublic class Code_02_Recursive_InsertionSort {\n\n    public static void sort(int[] arr, int n) {\n        if (arr.length < 2 || arr == null || n >= arr.length) {\n            return;\n        }\n        for (int i = n; i < arr.length; i++) {\n            for (int j = i - 1; j >= 0 && arr[j] > arr[j + 1]; j--) {\n                swap(arr, j, j + 1);\n            }\n        }\n        sort(arr, n + 1);\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        sort(arr, 1);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n","source":"_posts/Algorithm.md","raw":"---\ntitle: \ncategories:\n    - \n    \ndate: 2018-08-16\ntags:\n\t- \n    - \n---\n\n### \n\n#### \n************\n**********O(1)**\n\n##### O\n B nB **O(n)**(big O(n))\n******f(N)****** O(f(N))**\n aN + bN + C  **O(n)**\n\n##### \n****\n 1,2,3,4,5 **O(N)**M: O(M * N) O(1)  O(N) \n****\n 1,2,3,4,5 Right Left RightLeftRightRightright left\n logN  log(M * logN)\n\n#### \n****\n****\n\n\n\n\n************\n********\n\n##### \n****\n```bash\npublic class Code_Recursive {\n\n    public static void countDown(int integer) {\n        if (integer >= 1) {\n            System.out.println(integer);\n            countDown(integer - 1);\n        }\n    }\n\n    public static void main(String[] args) {\n        countDown(3);\n    }\n}\n```\n321 \n- \n-  sys \n- integer1\n\n****\n![math](/images/math1.png)\ncountDown(3)countDown\nJavaJava\n\n##### \n**master**\n![math](/images/math2.png)\n\n#### \nO(N )\n\n![math](/images/math3.png)\n\n```bash\npublic class Code_00_BubbleSort {\n\n    public static void bubbleSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n\n        for (int i = arr.length - 1; i > 0; i--) {\n            for (int j = 0; j < i; j++) {\n                if (arr[j] > arr[j + 1]) {\n                    swap(arr, j, j + 1);\n                }\n            }\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        bubbleSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\narr[3,2,0,7,4]bubbleSortarr.length-1arr.length-1\n\n#### \nO(N)\nminIndex,minIndexminIndex\n\n![math](/images/math4.png)\n\n```bash\npublic class Code_01_SelectionSort {\n\n    public static void selectionSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n        for (int i = 0; i < arr.length - 1; i++) {\n            int minIndex = i;\n            for (int j = i + 1; j < arr.length; j++) {\n                minIndex = arr[j] < arr[minIndex] ? j : minIndex;\n            }\n            swap(arr, i, minIndex);\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        selectionSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \nO(N)\n\n\n- \n\t- 1.minIndex\n\t- 2.minIndex\n- \n\t- minIndexminIndexswap\n- \n\t- arr.length\n\n\n![math](/images/math5.png)\n****\n- sortfor()n~arr.length\n- **minIndex**for(int i=n)\n- arr[minIndex] > arr[i]minIndexminIndex\n- ****n~arr.lengthswap\n- sort(arr, n + 1)n+1arr.length\n\n\n```bash\npublic class Code_01_Recursive_SelectionSort {\n\n    public static void sort(int[] arr, int n) {\n        int minIndex = n;\n        if (arr.length < 2 || arr == null || n >= arr.length) {\n            return;\n        }\n        for (int i = n; i < arr.length; i++) {\n            if (arr[minIndex] > arr[i]) {\n                minIndex = i;\n            }\n        }\n        swap(arr, n, minIndex);\n        sort(arr, n + 1);\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        sort(arr, 0);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \nO(N)\n10101203040\n![math](/images/math6.png)\n\n\n```bash\npublic class Code_02_InsertionSort {\n\n    public static void insertionSort(int[] arr) {\n        if (arr.length < 2 || arr == null) {\n            return;\n        }\n\n        for (int i = 1; i < arr.length; i++) {\n            for (int j = i - 1; j >= 0 && arr[j] > arr[j + 1]; j--) {\n                System.out.println(\"arr[\" + j + \"], arr[\" + (j + 1) + \"]\");\n                swap(arr, j, j + 1);\n            }\n        }\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        insertionSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n#### \n\n```bash\npublic class Code_02_Recursive_InsertionSort {\n\n    public static void sort(int[] arr, int n) {\n        if (arr.length < 2 || arr == null || n >= arr.length) {\n            return;\n        }\n        for (int i = n; i < arr.length; i++) {\n            for (int j = i - 1; j >= 0 && arr[j] > arr[j + 1]; j--) {\n                swap(arr, j, j + 1);\n            }\n        }\n        sort(arr, n + 1);\n    }\n\n    public static void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = {3, 2, 0, 7, 4};\n        System.out.println(Arrays.toString(arr));\n        sort(arr, 1);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n```\n\n","slug":"Algorithm","published":1,"updated":"2020-02-21T15:29:49.781Z","_id":"ck6ksnjp70000r3s61a960tn3","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><strong></strong><strong></strong><br><strong></strong><strong></strong><strong>O(1)</strong></p>\n<h5 id=\"O\"><a href=\"#O\" class=\"headerlink\" title=\"O\"></a>O</h5><p> B nB <strong>O(n)</strong>(big O(n))<br><strong></strong><strong>f(N)</strong><strong></strong> O(f(N))**<br> aN + bN + C  <strong>O(n)</strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><br> 1,2,3,4,5 <strong>O(N)</strong>M: O(M * N) O(1)  O(N) <br><strong></strong><br> 1,2,3,4,5 Right Left RightLeftRightRightright left<br> logN  log(M * logN)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><br><strong></strong><br><br><br><br><br><strong></strong><strong></strong><strong></strong><br><strong></strong><strong></strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_Recursive &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void countDown(int <span class=\"built_in\">integer</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">integer</span> &gt;= 1) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"built_in\">integer</span>);</span><br><span class=\"line\">            countDown(<span class=\"built_in\">integer</span> - 1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        countDown(3);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>321 </p>\n<ul>\n<li></li>\n<li> sys </li>\n<li>integer1</li>\n</ul>\n<p><strong></strong><br><img src=\"/images/math1.png\" alt=\"math\"><br>countDown(3)countDown<br>JavaJava</p>\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p><strong>master</strong><br><img src=\"/images/math2.png\" alt=\"math\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N )<br><br><img src=\"/images/math3.png\" alt=\"math\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_00_BubbleSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void bubbleSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = arr.length - 1; i &gt; 0; i--) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = 0; j &lt; i; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class=\"line\">                    swap(arr, j, j + 1);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        bubbleSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>arr[3,2,0,7,4]bubbleSortarr.length-1arr.length-1</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br>minIndex,minIndexminIndex<br><br><img src=\"/images/math4.png\" alt=\"math\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_01_SelectionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void selectionSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class=\"line\">            int minIndex = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i + 1; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">                minIndex = arr[j] &lt; arr[minIndex] ? j : minIndex;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            swap(arr, i, minIndex);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        selectionSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br></p>\n<ul>\n<li><ul>\n<li>1.minIndex</li>\n<li>2.minIndex</li>\n</ul>\n</li>\n<li><ul>\n<li>minIndexminIndexswap</li>\n</ul>\n</li>\n<li><ul>\n<li>arr.length</li>\n</ul>\n</li>\n</ul>\n<p><br><img src=\"/images/math5.png\" alt=\"math\"><br><strong></strong></p>\n<ul>\n<li>sortfor()n~arr.length</li>\n<li><strong>minIndex</strong>for(int i=n)</li>\n<li>arr[minIndex] &gt; arr[i]minIndexminIndex</li>\n<li><strong></strong>n~arr.lengthswap</li>\n<li>sort(arr, n + 1)n+1arr.length</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_01_Recursive_SelectionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void sort(int[] arr, int n) &#123;</span><br><span class=\"line\">        int minIndex = n;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null || n &gt;= arr.length) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = n; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr[minIndex] &gt; arr[i]) &#123;</span><br><span class=\"line\">                minIndex = i;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        swap(arr, n, minIndex);</span><br><span class=\"line\">        sort(arr, n + 1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        sort(arr, 0);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br>10101203040<br><img src=\"/images/math6.png\" alt=\"math\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_02_InsertionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void insertionSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = 1; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i - 1; j &gt;= 0 &amp;&amp; arr[j] &gt; arr[j + 1]; j--) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"arr[\"</span> + j + <span class=\"string\">\"], arr[\"</span> + (j + 1) + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">                swap(arr, j, j + 1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        insertionSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_02_Recursive_InsertionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void sort(int[] arr, int n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null || n &gt;= arr.length) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = n; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i - 1; j &gt;= 0 &amp;&amp; arr[j] &gt; arr[j + 1]; j--) &#123;</span><br><span class=\"line\">                swap(arr, j, j + 1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sort(arr, n + 1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        sort(arr, 1);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><strong></strong><strong></strong><br><strong></strong><strong></strong><strong>O(1)</strong></p>\n<h5 id=\"O\"><a href=\"#O\" class=\"headerlink\" title=\"O\"></a>O</h5><p> B nB <strong>O(n)</strong>(big O(n))<br><strong></strong><strong>f(N)</strong><strong></strong> O(f(N))**<br> aN + bN + C  <strong>O(n)</strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong><br> 1,2,3,4,5 <strong>O(N)</strong>M: O(M * N) O(1)  O(N) <br><strong></strong><br> 1,2,3,4,5 Right Left RightLeftRightRightright left<br> logN  log(M * logN)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><br><strong></strong><br><br><br><br><br><strong></strong><strong></strong><strong></strong><br><strong></strong><strong></strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_Recursive &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void countDown(int <span class=\"built_in\">integer</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">integer</span> &gt;= 1) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"built_in\">integer</span>);</span><br><span class=\"line\">            countDown(<span class=\"built_in\">integer</span> - 1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        countDown(3);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>321 </p>\n<ul>\n<li></li>\n<li> sys </li>\n<li>integer1</li>\n</ul>\n<p><strong></strong><br><img src=\"/images/math1.png\" alt=\"math\"><br>countDown(3)countDown<br>JavaJava</p>\n<h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><p><strong>master</strong><br><img src=\"/images/math2.png\" alt=\"math\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N )<br><br><img src=\"/images/math3.png\" alt=\"math\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_00_BubbleSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void bubbleSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = arr.length - 1; i &gt; 0; i--) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = 0; j &lt; i; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class=\"line\">                    swap(arr, j, j + 1);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        bubbleSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>arr[3,2,0,7,4]bubbleSortarr.length-1arr.length-1</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br>minIndex,minIndexminIndex<br><br><img src=\"/images/math4.png\" alt=\"math\"><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_01_SelectionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void selectionSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class=\"line\">            int minIndex = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i + 1; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">                minIndex = arr[j] &lt; arr[minIndex] ? j : minIndex;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            swap(arr, i, minIndex);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        selectionSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br></p>\n<ul>\n<li><ul>\n<li>1.minIndex</li>\n<li>2.minIndex</li>\n</ul>\n</li>\n<li><ul>\n<li>minIndexminIndexswap</li>\n</ul>\n</li>\n<li><ul>\n<li>arr.length</li>\n</ul>\n</li>\n</ul>\n<p><br><img src=\"/images/math5.png\" alt=\"math\"><br><strong></strong></p>\n<ul>\n<li>sortfor()n~arr.length</li>\n<li><strong>minIndex</strong>for(int i=n)</li>\n<li>arr[minIndex] &gt; arr[i]minIndexminIndex</li>\n<li><strong></strong>n~arr.lengthswap</li>\n<li>sort(arr, n + 1)n+1arr.length</li>\n</ul>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_01_Recursive_SelectionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void sort(int[] arr, int n) &#123;</span><br><span class=\"line\">        int minIndex = n;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null || n &gt;= arr.length) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = n; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr[minIndex] &gt; arr[i]) &#123;</span><br><span class=\"line\">                minIndex = i;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        swap(arr, n, minIndex);</span><br><span class=\"line\">        sort(arr, n + 1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        sort(arr, 0);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>O(N)<br>10101203040<br><img src=\"/images/math6.png\" alt=\"math\"></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_02_InsertionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void insertionSort(int[] arr) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = 1; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i - 1; j &gt;= 0 &amp;&amp; arr[j] &gt; arr[j + 1]; j--) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"arr[\"</span> + j + <span class=\"string\">\"], arr[\"</span> + (j + 1) + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">                swap(arr, j, j + 1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        insertionSort(arr);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Code_02_Recursive_InsertionSort &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void sort(int[] arr, int n) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (arr.length &lt; 2 || arr == null || n &gt;= arr.length) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (int i = n; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int j = i - 1; j &gt;= 0 &amp;&amp; arr[j] &gt; arr[j + 1]; j--) &#123;</span><br><span class=\"line\">                swap(arr, j, j + 1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sort(arr, n + 1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void swap(int[] arr, int i, int j) &#123;</span><br><span class=\"line\">        int tmp = arr[i];</span><br><span class=\"line\">        arr[i] = arr[j];</span><br><span class=\"line\">        arr[j] = tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        int[] arr = &#123;3, 2, 0, 7, 4&#125;;</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">        sort(arr, 1);</span><br><span class=\"line\">        System.out.println(Arrays.toString(arr));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"","date":"2020-02-13T16:00:00.000Z","_content":"\nJava106\n\n### Apache Dubbo\n\nAFailover Cluster\nBFailfast Cluster\nCFailsafe Cluster\nDFailback Cluster\n\n**A**\n\n****\nDubbozkDubbodubbonettyDubboFailover Cluster\n\n\n\n- Failfast Cluster\n\n- Failsafe Cluster\n\n- Failback Cluster\n\n- Forking Cluster\n forks=\"2\" \n- Broadcast Cluster\n \n\n---\n\n### Kafka:\n\nAtopictopicqueuetopictopictopic\nBkafkatopicpartitiontopic\nCpartition\nDoneway\n\n**BD**\n\n****\n![kafka](/images/kafka1.png)\n![kafka](/images/kafka2.png)\nKafka**topic**\npatitionKafkaZookeeperTopicISR(in-sync replica)KafkaISR\noneway****\noneway\n\n---\n\n### :\n\nA\nBO(n)\nC\nDO(nlogn)\n\n**ABD**\n\n****\n\n1 \n n  n/2  1 n  2; n  4 2  n  log(n) \n n  n/2  n-1  O(n)\n O(nlogn)\n\n2\n 1 1n\n O(n)\n\n---\n\n### JVM:\n\nA\nBJava\nCJVM\nDOOM\n\n**ABCD**\n\n****\n**** \n**** javanative\n**** javanative\n\n**** JVMOOMjvm\n JDK7JDK8Metaspace\n\n---\n\n### TCP:\n\nATIME_WAIT2MSL\nBestablishedTCPshutdownclose\nCFINackackCLOSING\nDTCPTCP\n\n**AD**\n\n****\n![TCP](/images/tcp1.png)\nA2\n- TCP\n- \n\nBshutdownTCPclosesocket\n\nCackFIN_WAIT_2\nclientserverESTABLISHEDclientclientserverfinclientclientFIN_WAIT_1\nserverfinackCLOSE_WAITserverclientserverserverclient\nserverserverclientfinserverserverLAST_ACKclient\nclientserverfinackTIME_WAITTIME_WAIT2CLOSEDserverackCLOSED\n\nDTCPIPTCPTCP\n\n---\n\n### B+B:\n\nAB+\nBB+\nCB+\nD1/22/3\n\n**ABC**\n\n****\nB+\n1B+;\n2B+;\n3B+\n\n---\n\n### Netty:\n\nANetty\"\"\"IO\"\nBNIONettyChannelEventLoopEventLoop\nCEventLoopChannel\nDpipeline\n\n**ABCD**\n\n****\nNettyIObosssocketWorker\nWorkerIOEventLoopGroupEventLoopEventLoop\nNIONettyChannelEventLoopEventLoop\nEventLoopChannel\nEventLoopNetty4ChannelWorker\nChannelPipelineChannelHandler\nHandlerChannel\npipelinetaskChannelEventLoop\n\n### MybatisSQL:\n\nSqlSessionFactory\nSqlSession\nStatementHandler\nParameterHandler\nResultSetHandler\nExecutor\nTypeHandler\n\nA\nB\nC\nD\n\n**B**\n\n****\n![mybatisflow](/images/mybatisflow.png)\nsqlSqlSessionFactorySqlSession\nsqlsqlSessionExecutorExecutorSqlSessionquery()StatementHandlerStatementHandlerStatementHandler\nStatementHandlerParameterHandlersetParametersJDBC Statement JDBC\nResultSetHandlerhandleResultSetsJDBCResultSetsql\n\n---\n\n### :\n\n\n\n\n\n\nA\nB\nC\nD\n\n**B**\n\n****\n![thread](/images/thread.png)\n\n\n\n\n\n\n---\n\n### :\n\nAclassClass\nBClass\nCstatic0null\nD\n\n**A**\n\n****\n![classloader](/images/classloader.png)\nclassClass\n\n\nClass\nClass\n\nstatic0nullfinalfinal\n\n\nClass.forName()\n\n","source":"_posts/interview.md","raw":"---\ntitle: \ncategories:\n    - Interview\n    \ndate: 2020-2-14\ntags:\n\t- Java\n    - \n---\n\nJava106\n\n### Apache Dubbo\n\nAFailover Cluster\nBFailfast Cluster\nCFailsafe Cluster\nDFailback Cluster\n\n**A**\n\n****\nDubbozkDubbodubbonettyDubboFailover Cluster\n\n\n\n- Failfast Cluster\n\n- Failsafe Cluster\n\n- Failback Cluster\n\n- Forking Cluster\n forks=\"2\" \n- Broadcast Cluster\n \n\n---\n\n### Kafka:\n\nAtopictopicqueuetopictopictopic\nBkafkatopicpartitiontopic\nCpartition\nDoneway\n\n**BD**\n\n****\n![kafka](/images/kafka1.png)\n![kafka](/images/kafka2.png)\nKafka**topic**\npatitionKafkaZookeeperTopicISR(in-sync replica)KafkaISR\noneway****\noneway\n\n---\n\n### :\n\nA\nBO(n)\nC\nDO(nlogn)\n\n**ABD**\n\n****\n\n1 \n n  n/2  1 n  2; n  4 2  n  log(n) \n n  n/2  n-1  O(n)\n O(nlogn)\n\n2\n 1 1n\n O(n)\n\n---\n\n### JVM:\n\nA\nBJava\nCJVM\nDOOM\n\n**ABCD**\n\n****\n**** \n**** javanative\n**** javanative\n\n**** JVMOOMjvm\n JDK7JDK8Metaspace\n\n---\n\n### TCP:\n\nATIME_WAIT2MSL\nBestablishedTCPshutdownclose\nCFINackackCLOSING\nDTCPTCP\n\n**AD**\n\n****\n![TCP](/images/tcp1.png)\nA2\n- TCP\n- \n\nBshutdownTCPclosesocket\n\nCackFIN_WAIT_2\nclientserverESTABLISHEDclientclientserverfinclientclientFIN_WAIT_1\nserverfinackCLOSE_WAITserverclientserverserverclient\nserverserverclientfinserverserverLAST_ACKclient\nclientserverfinackTIME_WAITTIME_WAIT2CLOSEDserverackCLOSED\n\nDTCPIPTCPTCP\n\n---\n\n### B+B:\n\nAB+\nBB+\nCB+\nD1/22/3\n\n**ABC**\n\n****\nB+\n1B+;\n2B+;\n3B+\n\n---\n\n### Netty:\n\nANetty\"\"\"IO\"\nBNIONettyChannelEventLoopEventLoop\nCEventLoopChannel\nDpipeline\n\n**ABCD**\n\n****\nNettyIObosssocketWorker\nWorkerIOEventLoopGroupEventLoopEventLoop\nNIONettyChannelEventLoopEventLoop\nEventLoopChannel\nEventLoopNetty4ChannelWorker\nChannelPipelineChannelHandler\nHandlerChannel\npipelinetaskChannelEventLoop\n\n### MybatisSQL:\n\nSqlSessionFactory\nSqlSession\nStatementHandler\nParameterHandler\nResultSetHandler\nExecutor\nTypeHandler\n\nA\nB\nC\nD\n\n**B**\n\n****\n![mybatisflow](/images/mybatisflow.png)\nsqlSqlSessionFactorySqlSession\nsqlsqlSessionExecutorExecutorSqlSessionquery()StatementHandlerStatementHandlerStatementHandler\nStatementHandlerParameterHandlersetParametersJDBC Statement JDBC\nResultSetHandlerhandleResultSetsJDBCResultSetsql\n\n---\n\n### :\n\n\n\n\n\n\nA\nB\nC\nD\n\n**B**\n\n****\n![thread](/images/thread.png)\n\n\n\n\n\n\n---\n\n### :\n\nAclassClass\nBClass\nCstatic0null\nD\n\n**A**\n\n****\n![classloader](/images/classloader.png)\nclassClass\n\n\nClass\nClass\n\nstatic0nullfinalfinal\n\n\nClass.forName()\n\n","slug":"interview","published":1,"updated":"2020-02-19T13:58:12.461Z","_id":"ck6td8ged0000f8s63nte520m","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Java106</p>\n<h3 id=\"Apache-Dubbo\"><a href=\"#Apache-Dubbo\" class=\"headerlink\" title=\"Apache Dubbo\"></a>Apache Dubbo</h3><p>AFailover Cluster<br>BFailfast Cluster<br>CFailsafe Cluster<br>DFailback Cluster</p>\n<p><strong>A</strong></p>\n<p><strong></strong><br>DubbozkDubbodubbonettyDubboFailover Cluster</p>\n<p></p>\n<ul>\n<li>Failfast Cluster<br></li>\n<li>Failsafe Cluster<br></li>\n<li>Failback Cluster<br></li>\n<li>Forking Cluster<br> forks=2 </li>\n<li>Broadcast Cluster<br> </li>\n</ul>\n<hr>\n<h3 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka:\"></a>Kafka:</h3><p>Atopictopicqueuetopictopictopic<br>Bkafkatopicpartitiontopic<br>Cpartition<br>Doneway</p>\n<p><strong>BD</strong></p>\n<p><strong></strong><br><img src=\"/images/kafka1.png\" alt=\"kafka\"><br><img src=\"/images/kafka2.png\" alt=\"kafka\"><br>Kafka<strong>topic</strong><br>patitionKafkaZookeeperTopicISR(in-sync replica)KafkaISR<br>oneway<strong></strong><br>oneway</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>A<br>BO(n)<br>C<br>DO(nlogn)</p>\n<p><strong>ABD</strong></p>\n<p><strong></strong><br><br>1 <br> n  n/2  1 n  2; n  4 2  n  log(n) <br> n  n/2  n-1  O(n)<br> O(nlogn)</p>\n<p>2<br> 1 1n<br> O(n)</p>\n<hr>\n<h3 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM:\"></a>JVM:</h3><p>A<br>BJava<br>CJVM<br>DOOM</p>\n<p><strong>ABCD</strong></p>\n<p><strong></strong><br><strong></strong> <br><strong></strong> javanative<br><strong></strong> javanative<br><br><strong></strong> JVMOOMjvm<br> JDK7JDK8Metaspace</p>\n<hr>\n<h3 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP:\"></a>TCP:</h3><p>ATIME_WAIT2MSL<br>BestablishedTCPshutdownclose<br>CFINackackCLOSING<br>DTCPTCP</p>\n<p><strong>AD</strong></p>\n<p><strong></strong><br><img src=\"/images/tcp1.png\" alt=\"TCP\"><br>A2</p>\n<ul>\n<li>TCP</li>\n<li></li>\n</ul>\n<p>BshutdownTCPclosesocket</p>\n<p>CackFIN_WAIT_2<br>clientserverESTABLISHEDclientclientserverfinclientclientFIN_WAIT_1<br>serverfinackCLOSE_WAITserverclientserverserverclient<br>serverserverclientfinserverserverLAST_ACKclient<br>clientserverfinackTIME_WAITTIME_WAIT2CLOSEDserverackCLOSED</p>\n<p>DTCPIPTCPTCP</p>\n<hr>\n<h3 id=\"B-B\"><a href=\"#B-B\" class=\"headerlink\" title=\"B+B:\"></a>B+B:</h3><p>AB+<br>BB+<br>CB+<br>D1/22/3</p>\n<p><strong>ABC</strong></p>\n<p><strong></strong><br>B+<br>1B+;<br>2B+;<br>3B+</p>\n<hr>\n<h3 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty:\"></a>Netty:</h3><p>ANettyIO<br>BNIONettyChannelEventLoopEventLoop<br>CEventLoopChannel<br>Dpipeline</p>\n<p><strong>ABCD</strong></p>\n<p><strong></strong><br>NettyIObosssocketWorker<br>WorkerIOEventLoopGroupEventLoopEventLoop<br>NIONettyChannelEventLoopEventLoop<br>EventLoopChannel<br>EventLoopNetty4ChannelWorker<br>ChannelPipelineChannelHandler<br>HandlerChannel<br>pipelinetaskChannelEventLoop</p>\n<h3 id=\"MybatisSQL\"><a href=\"#MybatisSQL\" class=\"headerlink\" title=\"MybatisSQL:\"></a>MybatisSQL:</h3><p>SqlSessionFactory<br>SqlSession<br>StatementHandler<br>ParameterHandler<br>ResultSetHandler<br>Executor<br>TypeHandler</p>\n<p>A<br>B<br>C<br>D</p>\n<p><strong>B</strong></p>\n<p><strong></strong><br><img src=\"/images/mybatisflow.png\" alt=\"mybatisflow\"><br>sqlSqlSessionFactorySqlSession<br>sqlsqlSessionExecutorExecutorSqlSessionquery()StatementHandlerStatementHandlerStatementHandler<br>StatementHandlerParameterHandlersetParametersJDBC Statement JDBC<br>ResultSetHandlerhandleResultSetsJDBCResultSetsql</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p><br><br><br></p>\n<p>A<br>B<br>C<br>D</p>\n<p><strong>B</strong></p>\n<p><strong></strong><br><img src=\"/images/thread.png\" alt=\"thread\"><br><br><br><br><br></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>AclassClass<br>BClass<br>Cstatic0null<br>D</p>\n<p><strong>A</strong></p>\n<p><strong></strong><br><img src=\"/images/classloader.png\" alt=\"classloader\"><br>classClass<br><br><br>Class<br>Class<br><br>static0nullfinalfinal<br><br><br>Class.forName()</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Java106</p>\n<h3 id=\"Apache-Dubbo\"><a href=\"#Apache-Dubbo\" class=\"headerlink\" title=\"Apache Dubbo\"></a>Apache Dubbo</h3><p>AFailover Cluster<br>BFailfast Cluster<br>CFailsafe Cluster<br>DFailback Cluster</p>\n<p><strong>A</strong></p>\n<p><strong></strong><br>DubbozkDubbodubbonettyDubboFailover Cluster</p>\n<p></p>\n<ul>\n<li>Failfast Cluster<br></li>\n<li>Failsafe Cluster<br></li>\n<li>Failback Cluster<br></li>\n<li>Forking Cluster<br> forks=2 </li>\n<li>Broadcast Cluster<br> </li>\n</ul>\n<hr>\n<h3 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka:\"></a>Kafka:</h3><p>Atopictopicqueuetopictopictopic<br>Bkafkatopicpartitiontopic<br>Cpartition<br>Doneway</p>\n<p><strong>BD</strong></p>\n<p><strong></strong><br><img src=\"/images/kafka1.png\" alt=\"kafka\"><br><img src=\"/images/kafka2.png\" alt=\"kafka\"><br>Kafka<strong>topic</strong><br>patitionKafkaZookeeperTopicISR(in-sync replica)KafkaISR<br>oneway<strong></strong><br>oneway</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>A<br>BO(n)<br>C<br>DO(nlogn)</p>\n<p><strong>ABD</strong></p>\n<p><strong></strong><br><br>1 <br> n  n/2  1 n  2; n  4 2  n  log(n) <br> n  n/2  n-1  O(n)<br> O(nlogn)</p>\n<p>2<br> 1 1n<br> O(n)</p>\n<hr>\n<h3 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM:\"></a>JVM:</h3><p>A<br>BJava<br>CJVM<br>DOOM</p>\n<p><strong>ABCD</strong></p>\n<p><strong></strong><br><strong></strong> <br><strong></strong> javanative<br><strong></strong> javanative<br><br><strong></strong> JVMOOMjvm<br> JDK7JDK8Metaspace</p>\n<hr>\n<h3 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP:\"></a>TCP:</h3><p>ATIME_WAIT2MSL<br>BestablishedTCPshutdownclose<br>CFINackackCLOSING<br>DTCPTCP</p>\n<p><strong>AD</strong></p>\n<p><strong></strong><br><img src=\"/images/tcp1.png\" alt=\"TCP\"><br>A2</p>\n<ul>\n<li>TCP</li>\n<li></li>\n</ul>\n<p>BshutdownTCPclosesocket</p>\n<p>CackFIN_WAIT_2<br>clientserverESTABLISHEDclientclientserverfinclientclientFIN_WAIT_1<br>serverfinackCLOSE_WAITserverclientserverserverclient<br>serverserverclientfinserverserverLAST_ACKclient<br>clientserverfinackTIME_WAITTIME_WAIT2CLOSEDserverackCLOSED</p>\n<p>DTCPIPTCPTCP</p>\n<hr>\n<h3 id=\"B-B\"><a href=\"#B-B\" class=\"headerlink\" title=\"B+B:\"></a>B+B:</h3><p>AB+<br>BB+<br>CB+<br>D1/22/3</p>\n<p><strong>ABC</strong></p>\n<p><strong></strong><br>B+<br>1B+;<br>2B+;<br>3B+</p>\n<hr>\n<h3 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty:\"></a>Netty:</h3><p>ANettyIO<br>BNIONettyChannelEventLoopEventLoop<br>CEventLoopChannel<br>Dpipeline</p>\n<p><strong>ABCD</strong></p>\n<p><strong></strong><br>NettyIObosssocketWorker<br>WorkerIOEventLoopGroupEventLoopEventLoop<br>NIONettyChannelEventLoopEventLoop<br>EventLoopChannel<br>EventLoopNetty4ChannelWorker<br>ChannelPipelineChannelHandler<br>HandlerChannel<br>pipelinetaskChannelEventLoop</p>\n<h3 id=\"MybatisSQL\"><a href=\"#MybatisSQL\" class=\"headerlink\" title=\"MybatisSQL:\"></a>MybatisSQL:</h3><p>SqlSessionFactory<br>SqlSession<br>StatementHandler<br>ParameterHandler<br>ResultSetHandler<br>Executor<br>TypeHandler</p>\n<p>A<br>B<br>C<br>D</p>\n<p><strong>B</strong></p>\n<p><strong></strong><br><img src=\"/images/mybatisflow.png\" alt=\"mybatisflow\"><br>sqlSqlSessionFactorySqlSession<br>sqlsqlSessionExecutorExecutorSqlSessionquery()StatementHandlerStatementHandlerStatementHandler<br>StatementHandlerParameterHandlersetParametersJDBC Statement JDBC<br>ResultSetHandlerhandleResultSetsJDBCResultSetsql</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p><br><br><br></p>\n<p>A<br>B<br>C<br>D</p>\n<p><strong>B</strong></p>\n<p><strong></strong><br><img src=\"/images/thread.png\" alt=\"thread\"><br><br><br><br><br></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>AclassClass<br>BClass<br>Cstatic0null<br>D</p>\n<p><strong>A</strong></p>\n<p><strong></strong><br><img src=\"/images/classloader.png\" alt=\"classloader\"><br>classClass<br><br><br>Class<br>Class<br><br>static0nullfinalfinal<br><br><br>Class.forName()</p>\n"},{"title":"SpringSpring","date":"2018-10-21T16:00:00.000Z","_content":"\n![Spring](/images/spring_logo.jpg)\n\n### \nSpring javaSpringJavaJ2EEwebSpring JavaPojo\n\n---\n\n### \n<font style=\"color: red\"><b>1 IoC(Inversion of Control): <b></font>\n\n\nbeanSpringbeanbean\n\nIoC DI\n\nIoC  JNDIIoC\n\nnewjavaSpringxmlSpring\n\nDI(Dependency Injection)IoC\n\n<font style=\"color: red\"><b>2AOP(Aspect-Oriented Programming): <b></font>\n\n\t\n\nAOPAOP\n\n \n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                           http://www.springframework.org/schema/beans/spring-beans.xsd\n                           http://www.springframework.org/schema/aop \n                           http://www.springframework.org/schema/aop/spring-aop.xsd\">\n    <!-- 1  -->\n    <bean id=\"userServiceId\" class=\"com.loonycoder.service.UserServiceImpl\"></bean>\n    <!-- 2  -->\n    <bean id=\"myAspectId\" class=\"com.loonycoder.service.MyAspect\"></bean>\n    <!-- 3 aop \n        3.1 \n        3.2  <aop:config>\n                proxy-target-class=\"true\" cglib\n            <aop:pointcut>  \n            <aop:advisor>   \n                advice-ref \n                pointcut-ref \n        3.3 \n            execution(* com.loonycoder.service.*.*(..))\n                                           \n \n    -->\n    <aop:config proxy-target-class=\"true\">\n        <aop:pointcut expression=\"execution(* com.loonycoder.service.*.*(..))\" id=\"myPointCut\"/>\n        <aop:advisor advice-ref=\"myAspectId\" pointcut-ref=\"myPointCut\"/>\n    </aop:config>\n</beans>\n```\n\n  \n-   \n-   \n  \nInvocationHandlerJDKProxy\n\n3\n1. settersetting\n```bash\n<!-- User user = new User(); -->\n        <bean id=\"user\" class=\"com.loonycoder.domain.User\">\n            <property name=\"name\" value=\"\"></property>\n            <property name=\"age\" value=\"18\"></property>\n            <property name=\"sex\" value=\"\"></property>\n        </bean>\n```\n\n2. constructor\n```bash\n<!-- User user = new User();-->\n<!-- index0 -->\n<bean id=\"user\" class=\"com.loonycoder.domain.User\">\n    <constructor-arg type=\"java.lang.String\" index=\"0\" value=\"\"></constructor-arg>\n    <constructor-arg type=\"java.lang.Integer\" index=\"1\" value=\"18\"></constructor-arg>\n    <constructor-arg type=\"java.lang.String\" index=\"2\" value=\"\"></constructor-arg>\n</bean>\n```\nInterface\n\n4\n1)scope=\"singleton\"\n\n****\n- lazy-init=\"true\" \n- lazy-init=\"false\" \n\n2)scope=\"prototype\"\n\n5Spring\n<font style=\"color: red\"><b>Spring </b></font>\nSpringSpring\nSpringSpringSpringSpring\n\n### \n![spring](/images/spring-framework.gif)\n\n Spring \n**1. Data Access/Integration**\n\n/ JDBCORMOXMJMS  Transactions \n- JDBC  JDBC \n- ORM  API JPAJDOHibernate  iBatis \n- OXM /XML  JAXBCastorXMLBeansJiBX  XStream\n- JMS  Java \n- Transactions  POJO\n\n**2. Web **\n\nSpring  Web  WebServletStruts  Portlet \n- Web  Web  Servlet  IoC  Web \n- Servlet Spring MVC Web \n- Struts  Spring  Struts Web \n- Portlet  Portlet  MV C Web-Servlet \n\n**3. Core Container**\n\nSpring  Beans Core Context  Expression Language \n- Beans  BeanFactorySpring  Bean\n- Core  Spring  IoC  DI \n- Context  Beans ApplicationContext \n- Expression Language \n\n**4. **\n\nSpring AOPAspectsInstrumentation  Test \n- AOP \n- Aspects  AspectJ AOP\n- Instrumentation \n- Test  Spring  JUnit  TestNG \n\n\n","source":"_posts/Spring-1.md","raw":"---\ntitle: SpringSpring\ncategories:\n    - Java\n    \ndate: 2018-10-22\ntags:\n\t- \n    - Spring\n---\n\n![Spring](/images/spring_logo.jpg)\n\n### \nSpring javaSpringJavaJ2EEwebSpring JavaPojo\n\n---\n\n### \n<font style=\"color: red\"><b>1 IoC(Inversion of Control): <b></font>\n\n\nbeanSpringbeanbean\n\nIoC DI\n\nIoC  JNDIIoC\n\nnewjavaSpringxmlSpring\n\nDI(Dependency Injection)IoC\n\n<font style=\"color: red\"><b>2AOP(Aspect-Oriented Programming): <b></font>\n\n\t\n\nAOPAOP\n\n \n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n                           http://www.springframework.org/schema/beans/spring-beans.xsd\n                           http://www.springframework.org/schema/aop \n                           http://www.springframework.org/schema/aop/spring-aop.xsd\">\n    <!-- 1  -->\n    <bean id=\"userServiceId\" class=\"com.loonycoder.service.UserServiceImpl\"></bean>\n    <!-- 2  -->\n    <bean id=\"myAspectId\" class=\"com.loonycoder.service.MyAspect\"></bean>\n    <!-- 3 aop \n        3.1 \n        3.2  <aop:config>\n                proxy-target-class=\"true\" cglib\n            <aop:pointcut>  \n            <aop:advisor>   \n                advice-ref \n                pointcut-ref \n        3.3 \n            execution(* com.loonycoder.service.*.*(..))\n                                           \n \n    -->\n    <aop:config proxy-target-class=\"true\">\n        <aop:pointcut expression=\"execution(* com.loonycoder.service.*.*(..))\" id=\"myPointCut\"/>\n        <aop:advisor advice-ref=\"myAspectId\" pointcut-ref=\"myPointCut\"/>\n    </aop:config>\n</beans>\n```\n\n  \n-   \n-   \n  \nInvocationHandlerJDKProxy\n\n3\n1. settersetting\n```bash\n<!-- User user = new User(); -->\n        <bean id=\"user\" class=\"com.loonycoder.domain.User\">\n            <property name=\"name\" value=\"\"></property>\n            <property name=\"age\" value=\"18\"></property>\n            <property name=\"sex\" value=\"\"></property>\n        </bean>\n```\n\n2. constructor\n```bash\n<!-- User user = new User();-->\n<!-- index0 -->\n<bean id=\"user\" class=\"com.loonycoder.domain.User\">\n    <constructor-arg type=\"java.lang.String\" index=\"0\" value=\"\"></constructor-arg>\n    <constructor-arg type=\"java.lang.Integer\" index=\"1\" value=\"18\"></constructor-arg>\n    <constructor-arg type=\"java.lang.String\" index=\"2\" value=\"\"></constructor-arg>\n</bean>\n```\nInterface\n\n4\n1)scope=\"singleton\"\n\n****\n- lazy-init=\"true\" \n- lazy-init=\"false\" \n\n2)scope=\"prototype\"\n\n5Spring\n<font style=\"color: red\"><b>Spring </b></font>\nSpringSpring\nSpringSpringSpringSpring\n\n### \n![spring](/images/spring-framework.gif)\n\n Spring \n**1. Data Access/Integration**\n\n/ JDBCORMOXMJMS  Transactions \n- JDBC  JDBC \n- ORM  API JPAJDOHibernate  iBatis \n- OXM /XML  JAXBCastorXMLBeansJiBX  XStream\n- JMS  Java \n- Transactions  POJO\n\n**2. Web **\n\nSpring  Web  WebServletStruts  Portlet \n- Web  Web  Servlet  IoC  Web \n- Servlet Spring MVC Web \n- Struts  Spring  Struts Web \n- Portlet  Portlet  MV C Web-Servlet \n\n**3. Core Container**\n\nSpring  Beans Core Context  Expression Language \n- Beans  BeanFactorySpring  Bean\n- Core  Spring  IoC  DI \n- Context  Beans ApplicationContext \n- Expression Language \n\n**4. **\n\nSpring AOPAspectsInstrumentation  Test \n- AOP \n- Aspects  AspectJ AOP\n- Instrumentation \n- Test  Spring  JUnit  TestNG \n\n\n","slug":"Spring-1","published":1,"updated":"2020-02-21T15:31:31.345Z","_id":"ck6w88hgm0000pos68yi7dcp4","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Spring javaSpringJavaJ2EEwebSpring JavaPojo</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><font style=\"color: red\"><b>1 IoC(Inversion of Control): <b></font><br> </p>\n<p>beanSpringbeanbean  </p>\n<p>IoC DI</p>\n<p>IoC  JNDIIoC</p>\n<p>newjavaSpringxmlSpring </p>\n<p>DI(Dependency Injection)IoC</p>\n<p><font style=\"color: red\"><b>2AOP(Aspect-Oriented Programming): <b></font> </p>\n<pre><code>  </code></pre><p>AOPAOP</p>\n<p> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">       xmlns:aop=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/aop </span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/aop/spring-aop.xsd\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- 1  --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"userServiceId\"</span> class=<span class=\"string\">\"com.loonycoder.service.UserServiceImpl\"</span>&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;!-- 2  --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"myAspectId\"</span> class=<span class=\"string\">\"com.loonycoder.service.MyAspect\"</span>&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;!-- 3 aop </span><br><span class=\"line\">        3.1 </span><br><span class=\"line\">        3.2  &lt;aop:config&gt;</span><br><span class=\"line\">                proxy-target-class=<span class=\"string\">\"true\"</span> cglib</span><br><span class=\"line\">            &lt;aop:pointcut&gt;  </span><br><span class=\"line\">            &lt;aop:advisor&gt;   </span><br><span class=\"line\">                advice-ref </span><br><span class=\"line\">                pointcut-ref </span><br><span class=\"line\">        3.3 </span><br><span class=\"line\">            execution(* com.loonycoder.service.*.*(..))</span><br><span class=\"line\">                                           </span><br><span class=\"line\"> </span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;aop:config proxy-target-class=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">        &lt;aop:pointcut expression=<span class=\"string\">\"execution(* com.loonycoder.service.*.*(..))\"</span> id=<span class=\"string\">\"myPointCut\"</span>/&gt;</span><br><span class=\"line\">        &lt;aop:advisor advice-ref=<span class=\"string\">\"myAspectId\"</span> pointcut-ref=<span class=\"string\">\"myPointCut\"</span>/&gt;</span><br><span class=\"line\">    &lt;/aop:config&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<ul>\n<li>  </li>\n<li><br><br>InvocationHandlerJDKProxy</li>\n</ul>\n<p>3</p>\n<ol>\n<li><p>settersetting</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- User user = new User(); --&gt;</span><br><span class=\"line\">        &lt;bean id=<span class=\"string\">\"user\"</span> class=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"18\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"sex\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>constructor</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- User user = new User();--&gt;</span><br><span class=\"line\">&lt;!-- index0 --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"user\"</span> class=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.String\"</span> index=<span class=\"string\">\"0\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.Integer\"</span> index=<span class=\"string\">\"1\"</span> value=<span class=\"string\">\"18\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.String\"</span> index=<span class=\"string\">\"2\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>Interface</p>\n</li>\n</ol>\n<p>4<br>1)scope=singleton</p>\n<p><strong></strong></p>\n<ul>\n<li>lazy-init=true  </li>\n<li>lazy-init=false </li>\n</ul>\n<p>2)scope=prototype</p>\n<p>5Spring<br><font style=\"color: red\"><b>Spring </b></font><br>SpringSpring<br>SpringSpringSpringSpring</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/images/spring-framework.gif\" alt=\"spring\"></p>\n<p> Spring <br><strong>1. Data Access/Integration</strong></p>\n<p>/ JDBCORMOXMJMS  Transactions </p>\n<ul>\n<li>JDBC  JDBC </li>\n<li>ORM  API JPAJDOHibernate  iBatis </li>\n<li>OXM /XML  JAXBCastorXMLBeansJiBX  XStream</li>\n<li>JMS  Java </li>\n<li>Transactions  POJO</li>\n</ul>\n<p><strong>2. Web </strong></p>\n<p>Spring  Web  WebServletStruts  Portlet </p>\n<ul>\n<li>Web  Web  Servlet  IoC  Web </li>\n<li>Servlet Spring MVC Web </li>\n<li>Struts  Spring  Struts Web </li>\n<li>Portlet  Portlet  MV C Web-Servlet </li>\n</ul>\n<p><strong>3. Core Container</strong></p>\n<p>Spring  Beans Core Context  Expression Language </p>\n<ul>\n<li>Beans  BeanFactorySpring  Bean</li>\n<li>Core  Spring  IoC  DI </li>\n<li>Context  Beans ApplicationContext </li>\n<li>Expression Language </li>\n</ul>\n<p><strong>4. </strong></p>\n<p>Spring AOPAspectsInstrumentation  Test </p>\n<ul>\n<li>AOP </li>\n<li>Aspects  AspectJ AOP</li>\n<li>Instrumentation </li>\n<li>Test  Spring  JUnit  TestNG </li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Spring javaSpringJavaJ2EEwebSpring JavaPojo</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><font style=\"color: red\"><b>1 IoC(Inversion of Control): <b></font><br> </p>\n<p>beanSpringbeanbean  </p>\n<p>IoC DI</p>\n<p>IoC  JNDIIoC</p>\n<p>newjavaSpringxmlSpring </p>\n<p>DI(Dependency Injection)IoC</p>\n<p><font style=\"color: red\"><b>2AOP(Aspect-Oriented Programming): <b></font> </p>\n<pre><code>  </code></pre><p>AOPAOP</p>\n<p> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\">&lt;beans xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">       xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">       xmlns:aop=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">\"http://www.springframework.org/schema/beans </span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/aop </span></span><br><span class=\"line\"><span class=\"string\">                           http://www.springframework.org/schema/aop/spring-aop.xsd\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- 1  --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"userServiceId\"</span> class=<span class=\"string\">\"com.loonycoder.service.UserServiceImpl\"</span>&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;!-- 2  --&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"myAspectId\"</span> class=<span class=\"string\">\"com.loonycoder.service.MyAspect\"</span>&gt;&lt;/bean&gt;</span><br><span class=\"line\">    &lt;!-- 3 aop </span><br><span class=\"line\">        3.1 </span><br><span class=\"line\">        3.2  &lt;aop:config&gt;</span><br><span class=\"line\">                proxy-target-class=<span class=\"string\">\"true\"</span> cglib</span><br><span class=\"line\">            &lt;aop:pointcut&gt;  </span><br><span class=\"line\">            &lt;aop:advisor&gt;   </span><br><span class=\"line\">                advice-ref </span><br><span class=\"line\">                pointcut-ref </span><br><span class=\"line\">        3.3 </span><br><span class=\"line\">            execution(* com.loonycoder.service.*.*(..))</span><br><span class=\"line\">                                           </span><br><span class=\"line\"> </span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;aop:config proxy-target-class=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">        &lt;aop:pointcut expression=<span class=\"string\">\"execution(* com.loonycoder.service.*.*(..))\"</span> id=<span class=\"string\">\"myPointCut\"</span>/&gt;</span><br><span class=\"line\">        &lt;aop:advisor advice-ref=<span class=\"string\">\"myAspectId\"</span> pointcut-ref=<span class=\"string\">\"myPointCut\"</span>/&gt;</span><br><span class=\"line\">    &lt;/aop:config&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<ul>\n<li>  </li>\n<li><br><br>InvocationHandlerJDKProxy</li>\n</ul>\n<p>3</p>\n<ol>\n<li><p>settersetting</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- User user = new User(); --&gt;</span><br><span class=\"line\">        &lt;bean id=<span class=\"string\">\"user\"</span> class=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"18\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">            &lt;property name=<span class=\"string\">\"sex\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/property&gt;</span><br><span class=\"line\">        &lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>constructor</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- User user = new User();--&gt;</span><br><span class=\"line\">&lt;!-- index0 --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"user\"</span> class=<span class=\"string\">\"com.loonycoder.domain.User\"</span>&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.String\"</span> index=<span class=\"string\">\"0\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.Integer\"</span> index=<span class=\"string\">\"1\"</span> value=<span class=\"string\">\"18\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"java.lang.String\"</span> index=<span class=\"string\">\"2\"</span> value=<span class=\"string\">\"\"</span>&gt;&lt;/constructor-arg&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>Interface</p>\n</li>\n</ol>\n<p>4<br>1)scope=singleton</p>\n<p><strong></strong></p>\n<ul>\n<li>lazy-init=true  </li>\n<li>lazy-init=false </li>\n</ul>\n<p>2)scope=prototype</p>\n<p>5Spring<br><font style=\"color: red\"><b>Spring </b></font><br>SpringSpring<br>SpringSpringSpringSpring</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/images/spring-framework.gif\" alt=\"spring\"></p>\n<p> Spring <br><strong>1. Data Access/Integration</strong></p>\n<p>/ JDBCORMOXMJMS  Transactions </p>\n<ul>\n<li>JDBC  JDBC </li>\n<li>ORM  API JPAJDOHibernate  iBatis </li>\n<li>OXM /XML  JAXBCastorXMLBeansJiBX  XStream</li>\n<li>JMS  Java </li>\n<li>Transactions  POJO</li>\n</ul>\n<p><strong>2. Web </strong></p>\n<p>Spring  Web  WebServletStruts  Portlet </p>\n<ul>\n<li>Web  Web  Servlet  IoC  Web </li>\n<li>Servlet Spring MVC Web </li>\n<li>Struts  Spring  Struts Web </li>\n<li>Portlet  Portlet  MV C Web-Servlet </li>\n</ul>\n<p><strong>3. Core Container</strong></p>\n<p>Spring  Beans Core Context  Expression Language </p>\n<ul>\n<li>Beans  BeanFactorySpring  Bean</li>\n<li>Core  Spring  IoC  DI </li>\n<li>Context  Beans ApplicationContext </li>\n<li>Expression Language </li>\n</ul>\n<p><strong>4. </strong></p>\n<p>Spring AOPAspectsInstrumentation  Test </p>\n<ul>\n<li>AOP </li>\n<li>Aspects  AspectJ AOP</li>\n<li>Instrumentation </li>\n<li>Test  Spring  JUnit  TestNG </li>\n</ul>\n"},{"title":"SpringIoC","date":"2018-10-29T16:00:00.000Z","_content":"\n![Spring](/images/spring_logo.jpg)\n\n<https://javadoop.com/post/spring-ioc>\n\n\n\n\n---\n\n### \n Spring \n```bash\npublic static void main(String[] args) {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"classpath:Application.xml\");\n}\n```\n Spring  maven  dependencies  Spring \n```bash\n<dependency>\n  <groupId>org.springframework</groupId>\n  <artifactId>spring-context</artifactId>\n  <version>4.3.11.RELEASE</version>\n</dependency>\n```\n> spring-context  spring-corespring-beansspring-aopspring-expression  jar \n\n SpringMVC Spring Spring  web  Spring Spring \n<code>ApplicationContext context = new ClassPathXmlApplicationContext(...)</code> ClassPath  xml  xml  ApplicationContext  ClassPathXmlApplicationContext  ApplicationContext \n![spring](/images/spring-ioc1.png)\n>  Spring \n\n\nClassPathXmlApplicationContext  ApplicationContext  \n**FileSystemXmlApplicationContext****AnnotationConfigApplicationContext**\n\n1. **FileSystemXmlApplicationContext** xml  ClassPathXmlApplicationContext \n\n2. **AnnotationConfigApplicationContext** java \n\n ClassPathXmlApplicationContext \n\n ApplicationContext\n\n\n```bash\npublic interface MessageService {\n    String getMessage();\n}\n```\n\n```bash\npublic class MessageServiceImpl implements MessageService {\n    public String getMessage() {\n        return \"hello world\";\n    }\n}\n```\n\n **resources**  Application.xml  Application-xxx.xml \n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns=\"http://www.springframework.org/schema/beans\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\" default-autowire=\"byName\">\n    <bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\"/>\n</beans>\n```\n\n```bash\npublic class App {\n    public static void main(String[] args) {\n        //  ApplicationContext\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"classpath:Application.xml\");\n\n        System.out.println(\"context \");\n\n        //  context  Bean new MessageServiceImpl() \n        MessageService messageService = context.getBean(MessageService.class);\n        // : hello world\n        System.out.println(messageService.getMessage());\n    }\n}\n```\n Spring  ApplicationContext  IOC ApplicationContext  Bean Bean \n\n---\n\n### BeanFactory \nBeanFactory bean  bean \n\n BeanFactory  ApplicationContext  BeanFactory BeanFactory \n![spring](/images/spring-ioc2.png)\nApplicationContext \n\n- ApplicationContext  ListableBeanFactory Listable  Bean BeanFactory  Bean \n- ApplicationContext  HierarchicalBeanFactoryHierarchical  BeanFactory BeanFactory \n- AutowireCapableBeanFactory  Autowire  Bean ApplicationContext  ApplicationContext  getAutowireCapableBeanFactory() \n- ConfigurableListableBeanFactory  ApplicationContext \n- \n BeanFactoryListableBeanFactoryHierarchicalBeanFactoryAutowireCapableBeanFactoryApplicationContext \n\n---\n\n### \n\n\n ClassPathXmlApplicationContext \n\n```bash\npublic class ClassPathXmlApplicationContext extends AbstractXmlApplicationContext {\n  private Resource[] configResources;\n\n  //  ApplicationContext \n  public ClassPathXmlApplicationContext(ApplicationContext parent) {\n    super(parent);\n  }\n  ...\n  public ClassPathXmlApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent)\n      throws BeansException {\n\n    super(parent);\n    // (tab)\n    setConfigLocations(configLocations);\n    if (refresh) {\n      refresh(); // \n    }\n  }\n    ...\n}\n```\n\n <code>refresh()</code> refresh() init()  ApplicationContext  refresh() refresh()  ApplicationContext \n\nrefresh() \n```bash\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n   //  refresh() \n   synchronized (this.startupShutdownMonitor) {\n\n      // \n      prepareRefresh();\n\n      //  Bean  BeanFactory \n      //  Bean \n      // ( beanName-> beanDefinition  map)\n      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n      //  BeanFactory  BeanPostProcessor bean\n      // \n      prepareBeanFactory(beanFactory);\n\n      try {\n         //  BeanFactoryPostProcessor Bean \n         // Spring  postProcessBeanFactory \n\n         //  Bean \n         //  BeanFactoryPostProcessor \n         postProcessBeanFactory(beanFactory);\n         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) \n         invokeBeanFactoryPostProcessors(beanFactory);\n\n         //  BeanPostProcessor  BeanFactoryPostProcessor \n         // : postProcessBeforeInitialization  postProcessAfterInitialization\n         //  Bean  Bean \n         registerBeanPostProcessors(beanFactory);\n\n         //  ApplicationContext  MessageSource\n         initMessageSource();\n\n         //  ApplicationContext \n         initApplicationEventMulticaster();\n\n         // ()\n         //  Bean singleton beans \n         onRefresh();\n\n         //  ApplicationListener \n         registerListeners();\n\n         // \n         //  singleton beans\n         //lazy-init \n         finishBeanFactoryInitialization(beanFactory);\n\n         // ApplicationContext \n         finishRefresh();\n      }\n\n      catch (BeansException ex) {\n         if (logger.isWarnEnabled()) {\n            logger.warn(\"Exception encountered during context initialization - \" +\n                  \"cancelling refresh attempt: \" + ex);\n         }\n\n         // Destroy already created singletons to avoid dangling resources.\n         //  singleton  Beans bean \n         destroyBeans();\n\n         // Reset 'active' flag.\n         cancelRefresh(ex);\n\n         // \n         throw ex;\n      }\n\n      finally {\n         // Reset common introspection caches in Spring's core, since we\n         // might not ever need metadata for singleton beans anymore...\n         resetCommonCaches();\n      }\n   }\n}\n```\n\n refresh() \n\n---\n\n####  Bean  Bean\n refresh()  obtainFreshBeanFactory()\n\n**** BeanFactory Bean Bean \n\nBean  Bean \n\n// AbstractApplicationContext.java\n```bash\nprotected ConfigurableListableBeanFactory obtainFreshBeanFactory() {\n   //  BeanFactory () BeanFactory Bean  Bean \n   refreshBeanFactory();\n\n   //  BeanFactory\n   ConfigurableListableBeanFactory beanFactory = getBeanFactory();\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Bean factory for \" + getDisplayName() + \": \" + beanFactory);\n   }\n   return beanFactory;\n}\n```\n// AbstractRefreshableApplicationContext.java 120\n```bash\n@Override\nprotected final void refreshBeanFactory() throws BeansException {\n   //  ApplicationContext  BeanFactory  Bean BeanFactory\n   //  BeanFactory  BeanFactory\n   // ApplicationContext  BeanFactory\n   if (hasBeanFactory()) {\n      destroyBeans();\n      closeBeanFactory();\n   }\n   try {\n      //  DefaultListableBeanFactory\n      DefaultListableBeanFactory beanFactory = createBeanFactory();\n      //  BeanFactory \n      beanFactory.setSerializationId(getId());\n\n      // \n      //  BeanFactory  Bean \n      customizeBeanFactory(beanFactory);\n\n      //  Bean  BeanFactory \n      loadBeanDefinitions(beanFactory);\n      synchronized (this.beanFactoryMonitor) {\n         this.beanFactory = beanFactory;\n      }\n   }\n   catch (IOException ex) {\n      throw new ApplicationContextException(\"I/O error parsing bean definition source for \" + getDisplayName(), ex);\n   }\n}\n```\n\n>  ApplicationContext ApplicationContext  BeanFactory BeanFactory  BeanFactoryDefaultListableBeanFactory BeanFactory \n\n **DefaultListableBeanFactory**  ConfigurableListableBeanFactory BeanFactory \n![spring](/images/spring-ioc2.png)\n\n ConfigurableListableBeanFactory  DefaultListableBeanFactory DefaultListableBeanFactory  AbstractAutowireCapableBeanFactory  DefaultListableBeanFactory  BeanFactory \n\n>  Spring IOC  bean\n ApplicationContext  AutowireCapableBeanFactory DefaultListableBeanFactory \n ApplicationContext  Spring\n\n BeanDefinition** BeanFactory  Bean  Bean **\n\n BeanDefinition  Spring  Bean Bean  BeanDefinition  Spring  BeanFactory \n\n Bean  Bean  BeanDefinition \n> BeanDefinition  Bean  Bean  Bean  Bean \n\n**BeanDefinition **\n BeanDefinition \n```bash\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n   //  sington  prototype \n   //  request, session, globalSession, application, websocket \n   //  web \n   String SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n   String SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n   // \n   int ROLE_APPLICATION = 0;\n   int ROLE_SUPPORT = 1;\n   int ROLE_INFRASTRUCTURE = 2;\n\n   //  Bean bean  java \n   //  Bean \n   void setParentName(String parentName);\n\n   //  Bean\n   String getParentName();\n\n   //  Bean \n   void setBeanClassName(String beanClassName);\n\n   //  Bean \n   String getBeanClassName();\n\n\n   //  bean  scope\n   void setScope(String scope);\n\n   String getScope();\n\n   // \n   void setLazyInit(boolean lazyInit);\n\n   boolean isLazyInit();\n\n   //  Bean  Bean( @Autowire )\n   //  depends-on=\"\" \n   void setDependsOn(String... dependsOn);\n\n   //  Bean \n   String[] getDependsOn();\n\n   //  Bean  Bean \n   //  false\n   void setAutowireCandidate(boolean autowireCandidate);\n\n   //  Bean  Bean \n   boolean isAutowireCandidate();\n\n   // Spring  primary  true  bean\n   void setPrimary(boolean primary);\n\n   //  primary \n   boolean isPrimary();\n\n   //  Bean \n   // \n   void setFactoryBeanName(String factoryBeanName);\n   // \n   String getFactoryBeanName();\n   //  \n   void setFactoryMethodName(String factoryMethodName);\n   //  \n   String getFactoryMethodName();\n\n   // \n   ConstructorArgumentValues getConstructorArgumentValues();\n\n   // Bean  bean \n   MutablePropertyValues getPropertyValues();\n\n   //  singleton\n   boolean isSingleton();\n\n   //  prototype\n   boolean isPrototype();\n\n   //  Bean  abstract\n   //  bean ......\n   boolean isAbstract();\n\n   int getRole();\n   String getDescription();\n   String getResourceDescription();\n   BeanDefinition getOriginatingBeanDefinition();\n}\n```\n\n>  BeanDefinition \n getInstance() \n\n BeanDefinition  refreshBeanFactory() \n```bash\ncustomizeBeanFactory(beanFactory);\nloadBeanDefinitions(beanFactory);\n```\n\n\n\n**customizeBeanFactory**\n\ncustomizeBeanFactory(beanFactory)  BeanDefinition \n```bash\nprotected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) {\n   if (this.allowBeanDefinitionOverriding != null) {\n      //  Bean \n      beanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n   }\n   if (this.allowCircularReferences != null) {\n      //  Bean \n      beanFactory.setAllowCircularReferences(this.allowCircularReferences);\n   }\n}\n```\nBeanDefinition  bean  id  nameallowBeanDefinitionOverriding  null\n\nA  B B  A A  BB  C C  A\n\nSpring  A  B B  A \n\n Bean  Spring \n\n\n\n**Bean:loadBeanDefinitions**\n\n loadBeanDefinitions(beanFactory)  Bean BeanFactory \n\n XmlBeanDefinitionReader \n\n// AbstractXmlApplicationContext.java 80\n```bash\n/**  XmlBeanDefinitionReader  Bean*/\n@Override\nprotected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {\n   //  BeanFactory  XmlBeanDefinitionReader\n   XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);\n\n   // Configure the bean definition reader with this context's\n   // resource loading environment.\n   beanDefinitionReader.setEnvironment(this.getEnvironment());\n   beanDefinitionReader.setResourceLoader(this);\n   beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));\n\n   //  BeanDefinitionReader\n   // \n   initBeanDefinitionReader(beanDefinitionReader);\n   // \n   loadBeanDefinitions(beanDefinitionReader);\n}\n```\n Reader  xml \n\n// AbstractXmlApplicationContext.java 120\n```bash\nprotected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException {\n   Resource[] configResources = getConfigResources();\n   if (configResources != null) {\n      // \n      reader.loadBeanDefinitions(configResources);\n   }\n   String[] configLocations = getConfigLocations();\n   if (configLocations != null) {\n      // 2\n      reader.loadBeanDefinitions(configLocations);\n   }\n}\n\n//  Resource \n@Override\npublic int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException {\n   Assert.notNull(resources, \"Resource array must not be null\");\n   int counter = 0;\n   //  for  resource\n   for (Resource resource : resources) {\n      // \n      counter += loadBeanDefinitions(resource);\n   }\n   //  counter BeanDefinition\n   return counter;\n}\n\n// XmlBeanDefinitionReader 303\n@Override\npublic int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException {\n   return loadBeanDefinitions(new EncodedResource(resource));\n}\n\n// XmlBeanDefinitionReader 314\npublic int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException {\n   Assert.notNull(encodedResource, \"EncodedResource must not be null\");\n   if (logger.isInfoEnabled()) {\n      logger.info(\"Loading XML bean definitions from \" + encodedResource.getResource());\n   }\n   //  ThreadLocal \n   Set<EncodedResource> currentResources = this.resourcesCurrentlyBeingLoaded.get();\n   if (currentResources == null) {\n      currentResources = new HashSet<EncodedResource>(4);\n      this.resourcesCurrentlyBeingLoaded.set(currentResources);\n   }\n   if (!currentResources.add(encodedResource)) {\n      throw new BeanDefinitionStoreException(\n            \"Detected cyclic loading of \" + encodedResource + \" - check your import definitions!\");\n   }\n   try {\n      InputStream inputStream = encodedResource.getResource().getInputStream();\n      try {\n         InputSource inputSource = new InputSource(inputStream);\n         if (encodedResource.getEncoding() != null) {\n            inputSource.setEncoding(encodedResource.getEncoding());\n         }\n         // \n         return doLoadBeanDefinitions(inputSource, encodedResource.getResource());\n      }\n      finally {\n         inputStream.close();\n      }\n   }\n   catch (IOException ex) {\n      throw new BeanDefinitionStoreException(\n            \"IOException parsing XML document from \" + encodedResource.getResource(), ex);\n   }\n   finally {\n      currentResources.remove(encodedResource);\n      if (currentResources.isEmpty()) {\n         this.resourcesCurrentlyBeingLoaded.remove();\n      }\n   }\n}\n\n//  388 \nprotected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)\n      throws BeanDefinitionStoreException {\n   try {\n      //  xml  Document \n      Document doc = doLoadDocument(inputSource, resource);\n      // \n      return registerBeanDefinitions(doc, resource);\n   }\n   catch (...\n}\n//  505 \n//  Bean\npublic int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException {\n   BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();\n   int countBefore = getRegistry().getBeanDefinitionCount();\n   // \n   documentReader.registerBeanDefinitions(doc, createReaderContext(resource));\n   return getRegistry().getBeanDefinitionCount() - countBefore;\n}\n// DefaultBeanDefinitionDocumentReader 90\n@Override\npublic void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) {\n   this.readerContext = readerContext;\n   logger.debug(\"Loading bean definitions\");\n   Element root = doc.getDocumentElement();\n   //  xml \n   doRegisterBeanDefinitions(root);\n}  \n```\n\n DOM  for \n\n**doRegisterBeanDefinitions**\n```bash\n// DefaultBeanDefinitionDocumentReader 116\nprotected void doRegisterBeanDefinitions(Element root) {\n   // BeanDefinitionParserDelegate  Bean \n   //  parent? \n   //  <beans />  <beans />  root  xml  <beans /> \n   BeanDefinitionParserDelegate parent = this.delegate;\n   this.delegate = createDelegate(getReaderContext(), root, parent);\n\n   if (this.delegate.isDefaultNamespace(root)) {\n      //  <beans ... profile=\"dev\" />  profile \n      //  profile  profile return  <beans /> \n      //  profile  profile \n      String profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);\n      if (StringUtils.hasText(profileSpec)) {\n         String[] specifiedProfiles = StringUtils.tokenizeToStringArray(\n               profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n         if (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) {\n            if (logger.isInfoEnabled()) {\n               logger.info(\"Skipped XML bean definition file due to specified profiles [\" + profileSpec +\n                     \"] not matching: \" + getReaderContext().getResource());\n            }\n            return;\n         }\n      }\n   }\n\n   preProcessXml(root); // \n   // \n   parseBeanDefinitions(root, this.delegate);\n   postProcessXml(root); // \n\n   this.delegate = parent;\n}\n```\n\npreProcessXml(root)  postProcessXml(root) \n\n profile  profile \n\n parseBeanDefinitions(root, this.delegate) :\n\n```bash\n// default namespace  <import /><alias /><bean />  <beans />\n//  custom \nprotected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) {\n   if (delegate.isDefaultNamespace(root)) {\n      NodeList nl = root.getChildNodes();\n      for (int i = 0; i < nl.getLength(); i++) {\n         Node node = nl.item(i);\n         if (node instanceof Element) {\n            Element ele = (Element) node;\n            if (delegate.isDefaultNamespace(ele)) {\n               //  default namespace \n               parseDefaultElement(ele, delegate);\n            }\n            else {\n               //  namespace \n               delegate.parseCustomElement(ele);\n            }\n         }\n      }\n   }\n   else {\n      delegate.parseCustomElement(root);\n   }\n}\n```\n\n parseDefaultElement(ele, delegate);  delegate.parseCustomElement(ele); \n\nparseDefaultElement(ele, delegate)  <code>&lt;import /&gt;&lt;alias /&gt;&lt;bean /&gt;&lt;beans /&gt;</code>\n\n>  default  namespace \n>```bash\nhttp://www.springframework.org/schema/beans\n```\n>  namespace  xml xmlns \n> ```bash\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns=\"http://www.springframework.org/schema/beans\"\n       xsi:schemaLocation=\"\n            http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans.xsd\"\n       default-autowire=\"byName\">\n```\n>  delegate.parseCustomElement(element)  <code> &lt;mvc /&gt;&lt;task /&gt;&lt;context /&gt;&lt;aop /&gt;</code>\n  default  xml  namespace  .xsd  parser  MvcNamespaceHandlerTaskNamespaceHandlerContextNamespaceHandlerAopNamespaceHandler \n>  <code>&lt;context:property-placeholder location=\"classpath:xx.properties\" /&gt;</code> ContextNamespaceHandler \n> ```bash\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xmlns=\"http://www.springframework.org/schema/beans\"\n      xmlns:context=\"http://www.springframework.org/schema/context\"\n      xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n      xsi:schemaLocation=\"\n           http://www.springframework.org/schema/beans \n           http://www.springframework.org/schema/beans/spring-beans.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context.xsd\n           http://www.springframework.org/schema/mvc   \n           http://www.springframework.org/schema/mvc/spring-mvc.xsd  \n       \"\n      default-autowire=\"byName\">\n    </bean>\n```\n <code>&lt;<dubbo /&gt;</code>  DubboNamespaceHandler \n default \n```bash\nprivate void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) {\n   if (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) {\n      //  <import /> \n      importBeanDefinitionResource(ele);\n   }\n   else if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) {\n      //  <alias /> \n      // <alias name=\"fromName\" alias=\"toName\"/>\n      processAliasRegistration(ele);\n   }\n   else if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) {\n      //  <bean /> \n      processBeanDefinition(ele, delegate);\n   }\n   else if (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) {\n      //  <beans /> \n      doRegisterBeanDefinitions(ele);\n   }\n}\n```\n <bean /> \n\n**processBeanDefinition  bean **\n processBeanDefinition  <code>&lt;bean /&gt;</code> \n\n// DefaultBeanDefinitionDocumentReader 298\n```bash\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n   //  <bean />  BeanDefinitionHolder \n   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n\n   // \n\n   if (bdHolder != null) {\n      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n      try {\n         // Register the final decorated instance.\n         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n      }\n      catch (BeanDefinitionStoreException ex) {\n         getReaderContext().error(\"Failed to register bean definition with name '\" +\n               bdHolder.getBeanName() + \"'\", ele, ex);\n      }\n      // Send registration event.\n      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n   }\n}\n```\n <code>&lt;bean /&gt;</code> \n\nProperty||\n:-:|:-:|\nclass|\nname| idname()\nscope|\nconstructor arguments|\nproperties|\nautowiring mode|no()byNamebyType constructor\nlazy-initialization mode|(bean)\ninitialization method|bean \ndestruction method|bean  \n\n\n Spring \n\n\n```bash\n<bean id=\"exampleBean\" name=\"name1, name2, name3\" class=\"com.loonycoder.ExampleBean\"\n      scope=\"singleton\" lazy-init=\"true\" init-method=\"init\" destroy-method=\"cleanup\">\n\n    <!--  -->\n    <constructor-arg type=\"int\" value=\"7500000\"/>\n    <constructor-arg name=\"years\" value=\"7500000\"/>\n    <constructor-arg index=\"0\" value=\"7500000\"/>\n\n    <!-- property  -->\n    <property name=\"beanOne\">\n        <ref bean=\"anotherExampleBean\"/>\n    </property>\n    <property name=\"beanTwo\" ref=\"yetAnotherBean\"/>\n    <property name=\"integerProperty\" value=\"1\"/>\n</bean>\n```\n factory-beanfactory-method<code>&lt;lockup-method /&gt;&lt;replaced-method /&gt;&lt;meta /&gt;&lt;qualifier /&gt;</code>  Spring  bean \n\n bean  BeanDefinitionHolder \n\n// BeanDefinitionParserDelegate 428\n```bash\npublic BeanDefinitionHolder parseBeanDefinitionElement(Element ele) {\n    return parseBeanDefinitionElement(ele, null);\n}\n\npublic BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) {\n   String id = ele.getAttribute(ID_ATTRIBUTE);\n   String nameAttr = ele.getAttribute(NAME_ATTRIBUTE);\n\n   List<String> aliases = new ArrayList<String>();\n\n   //  name    \n   //  name \n   //  id  name 20\n   if (StringUtils.hasLength(nameAttr)) {\n      String[] nameArr = StringUtils.tokenizeToStringArray(nameAttr, MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n      aliases.addAll(Arrays.asList(nameArr));\n   }\n\n   String beanName = id;\n   // id, beanName\n   if (!StringUtils.hasText(beanName) && !aliases.isEmpty()) {\n      beanName = aliases.remove(0);\n      if (logger.isDebugEnabled()) {\n         logger.debug(\"No XML 'id' specified - using '\" + beanName +\n               \"' as bean name and \" + aliases + \" as aliases\");\n      }\n   }\n\n   if (containingBean == null) {\n      checkNameUniqueness(beanName, aliases, ele);\n   }\n\n   //  <bean ...>...</bean>  BeanDefinition,\n   //  BeanDefinition \n   AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean);\n\n   //  <bean />  BeanDefinition \n   if (beanDefinition != null) {\n      //  id  name beanName  null\n      // \n      if (!StringUtils.hasText(beanName)) {\n         try {\n            if (containingBean != null) {//  containingBean  null \n               beanName = BeanDefinitionReaderUtils.generateBeanName(\n                     beanDefinition, this.readerContext.getRegistry(), true);\n            }\n            else {\n               //  id  name\n               //   1. beanName com.loonycoder.service.MessageServiceImpl#0\n               //   2. beanClassName com.loonycoder.service.MessageServiceImpl\n\n               beanName = this.readerContext.generateBeanName(beanDefinition);\n\n               String beanClassName = beanDefinition.getBeanClassName();\n               if (beanClassName != null &&\n                     beanName.startsWith(beanClassName) && beanName.length() > beanClassName.length() &&\n                     !this.readerContext.getRegistry().isBeanNameInUse(beanClassName)) {\n                  //  beanClassName  Bean \n                  aliases.add(beanClassName);\n               }\n            }\n            if (logger.isDebugEnabled()) {\n               logger.debug(\"Neither XML 'id' nor 'name' specified - \" +\n                     \"using generated bean name [\" + beanName + \"]\");\n            }\n         }\n         catch (Exception ex) {\n            error(ex.getMessage(), ele);\n            return null;\n         }\n      }\n      String[] aliasesArray = StringUtils.toStringArray(aliases);\n      //  BeanDefinitionHolder\n      return new BeanDefinitionHolder(beanDefinition, beanName, aliasesArray);\n   }\n\n   return null;\n}\n```\n BeanDefinition \n```bash\npublic AbstractBeanDefinition parseBeanDefinitionElement(\n      Element ele, String beanName, BeanDefinition containingBean) {\n\n   this.parseState.push(new BeanEntry(beanName));\n\n   String className = null;\n   if (ele.hasAttribute(CLASS_ATTRIBUTE)) {\n      className = ele.getAttribute(CLASS_ATTRIBUTE).trim();\n   }\n\n   try {\n      String parent = null;\n      if (ele.hasAttribute(PARENT_ATTRIBUTE)) {\n         parent = ele.getAttribute(PARENT_ATTRIBUTE);\n      }\n      //  BeanDefinition\n      AbstractBeanDefinition bd = createBeanDefinition(className, parent);\n\n      //  BeanDefinition  AbstractBeanDefinition \n      parseBeanDefinitionAttributes(ele, beanName, containingBean, bd);\n      bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT));\n\n      /**\n       *  <bean>......</bean> \n       *  bd \n       */\n\n      //  <meta />\n      parseMetaElements(ele, bd);\n      //  <lookup-method />\n      parseLookupOverrideSubElements(ele, bd.getMethodOverrides());\n      //  <replaced-method />\n      parseReplacedMethodSubElements(ele, bd.getMethodOverrides());\n    //  <constructor-arg />\n      parseConstructorArgElements(ele, bd);\n      //  <property />\n      parsePropertyElements(ele, bd);\n      //  <qualifier />\n      parseQualifierElements(ele, bd);\n\n      bd.setResource(this.readerContext.getResource());\n      bd.setSource(extractSource(ele));\n\n      return bd;\n   }\n   catch (ClassNotFoundException ex) {\n      error(\"Bean class [\" + className + \"] not found\", ele, ex);\n   }\n   catch (NoClassDefFoundError err) {\n      error(\"Class that bean class [\" + className + \"] depends on not found\", ele, err);\n   }\n   catch (Throwable ex) {\n      error(\"Unexpected failure during bean definition parsing\", ele, ex);\n   }\n   finally {\n      this.parseState.pop();\n   }\n\n   return null;\n}\n```\n <code>&lt;bean /&gt;</code>  BeanDefinitionHolder \n\n <code>&lt;bean /&gt;</code> :\n```bash\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n   //  <bean />  BeanDefinitionHolder\n   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n   if (bdHolder != null) {\n      // \n      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n      try {\n         //  Bean \n         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n      }\n      catch (BeanDefinitionStoreException ex) {\n         getReaderContext().error(\"Failed to register bean definition with name '\" +\n               bdHolder.getBeanName() + \"'\", ele, ex);\n      }\n      // \n      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n   }\n}\n```\n <code>&lt;bean /&gt;</code>  BeanDefinitionHolder  BeanDefinition  beanNamealiases  BeanDefinition \n```bash\npublic class BeanDefinitionHolder implements BeanMetadataElement {\n\n  private final BeanDefinition beanDefinition;\n\n  private final String beanName;\n\n  private final String[] aliases;\n...\n```\n BeanDefinition\n\n Bean \n\n** Bean**\n// BeanDefinitionReaderUtils 143\n```bash\npublic static void registerBeanDefinition(\n      BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)\n      throws BeanDefinitionStoreException {\n\n   String beanName = definitionHolder.getBeanName();\n   //  Bean\n   registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());\n\n   //  Bean \n   String[] aliases = definitionHolder.getAliases();\n   if (aliases != null) {\n      for (String alias : aliases) {\n         // alias -> beanName  map \n         //  alias  beanName\n         registry.registerAlias(beanName, alias);\n      }\n   }\n}\n```\n Bean\n\n// DefaultListableBeanFactory 793\n```bash\n@Override\npublic void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n      throws BeanDefinitionStoreException {\n\n   Assert.hasText(beanName, \"Bean name must not be empty\");\n   Assert.notNull(beanDefinition, \"BeanDefinition must not be null\");\n\n   if (beanDefinition instanceof AbstractBeanDefinition) {\n      try {\n         ((AbstractBeanDefinition) beanDefinition).validate();\n      }\n      catch (BeanDefinitionValidationException ex) {\n         throw new BeanDefinitionStoreException(...);\n      }\n   }\n\n   // old?   bean  allowBeanDefinitionOverriding\n   BeanDefinition oldBeanDefinition;\n\n   //  Bean  beanDefinitionMap \n   oldBeanDefinition = this.beanDefinitionMap.get(beanName);\n\n   //  Bean \n   if (oldBeanDefinition != null) {\n      if (!isAllowBeanDefinitionOverriding()) {\n         // \n         throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription()...\n      }\n      else if (oldBeanDefinition.getRole() < beanDefinition.getRole()) {\n         // log... Bean  Bean \n      }\n      else if (!beanDefinition.equals(oldBeanDefinition)) {\n         // log... Bean  Bean\n      }\n      else {\n         // log... Bean  Bean equals  true  Bean\n      }\n      // \n      this.beanDefinitionMap.put(beanName, beanDefinition);\n   }\n   else {\n      //  Bean .\n      // \"Bean\" Bean \n      //  Spring    singleton beans\n      if (hasBeanCreationStarted()) {\n         // Cannot modify startup-time collection elements anymore (for stable iteration)\n         synchronized (this.beanDefinitionMap) {\n            this.beanDefinitionMap.put(beanName, beanDefinition);\n            List<String> updatedDefinitions = new ArrayList<String>(this.beanDefinitionNames.size() + 1);\n            updatedDefinitions.addAll(this.beanDefinitionNames);\n            updatedDefinitions.add(beanName);\n            this.beanDefinitionNames = updatedDefinitions;\n            if (this.manualSingletonNames.contains(beanName)) {\n               Set<String> updatedSingletons = new LinkedHashSet<String>(this.manualSingletonNames);\n               updatedSingletons.remove(beanName);\n               this.manualSingletonNames = updatedSingletons;\n            }\n         }\n      }\n      else {\n         // \n\n         //  BeanDefinition  map  map  BeanDefinition\n         this.beanDefinitionMap.put(beanName, beanDefinition);\n         //  ArrayList bean  Bean \n         this.beanDefinitionNames.add(beanName);\n         //  LinkedHashSet singleton bean\n         //  remove  Bean \n         //  bean \n         //     registerSingleton(String beanName, Object singletonObject)\n         // Spring \"\" Bean\n         //  \"environment\"\"systemProperties\"  bean Bean \n         this.manualSingletonNames.remove(beanName);\n      }\n      // \n      this.frozenBeanDefinitionNames = null;\n   }\n\n   if (oldBeanDefinition != null || containsSingleton(beanName)) {\n      resetBeanDefinition(beanName);\n   }\n}\n```\n Bean <code>&lt;bean /&gt;</code>  BeanDefinition BeanDefinition \n\n---------  ---------\n\n\n\n#### Bean \n refresh()  obtainFreshBeanFactory() \n\n\n\n```bash\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n   //  refresh() \n   synchronized (this.startupShutdownMonitor) {\n\n      // \n      prepareRefresh();\n\n      //  Bean  BeanFactory \n      //  Bean \n      // ( beanName-> beanDefinition  map)\n      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n      //  BeanFactory  BeanPostProcessor bean\n      // \n      prepareBeanFactory(beanFactory);\n\n      try {\n         //  BeanFactoryPostProcessor Bean \n         // Spring  postProcessBeanFactory \n\n         //  Bean \n         //  BeanFactoryPostProcessor \n         postProcessBeanFactory(beanFactory);\n         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) \n         invokeBeanFactoryPostProcessors(beanFactory);          \n\n\n\n         //  BeanPostProcessor  BeanFactoryPostProcessor \n         // : postProcessBeforeInitialization  postProcessAfterInitialization\n         //  Bean \n         registerBeanPostProcessors(beanFactory);\n\n         //  ApplicationContext  MessageSource\n         initMessageSource();\n\n         //  ApplicationContext \n         initApplicationEventMulticaster();\n\n         // ()\n         //  Bean singleton beans \n         onRefresh();\n\n         //  ApplicationListener \n         registerListeners();\n\n         // \n         //  singleton beans\n         //lazy-init \n         finishBeanFactoryInitialization(beanFactory);\n\n         // ApplicationContext \n         finishRefresh();\n      }\n\n      catch (BeansException ex) {\n         if (logger.isWarnEnabled()) {\n            logger.warn(\"Exception encountered during context initialization - \" +\n                  \"cancelling refresh attempt: \" + ex);\n         }\n\n         // Destroy already created singletons to avoid dangling resources.\n         //  singleton  Beans bean \n         destroyBeans();\n\n         // Reset 'active' flag.\n         cancelRefresh(ex);\n\n         // \n         throw ex;\n      }\n\n      finally {\n         // Reset common introspection caches in Spring's core, since we\n         // might not ever need metadata for singleton beans anymore...\n         resetCommonCaches();\n      }\n   }\n}\n```\n\n####  Bean : prepareBeanFactory\nSpring  xml  bean \"\" bean\n\n prepareBeanFactory(factory) \n```bash\n/**\n * Configure the factory's standard context characteristics,\n * such as the context's ClassLoader and post-processors.\n * @param beanFactory the BeanFactory to configure\n */\nprotected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n   //  BeanFactory  BeanFactory \n   //  ApplicationContext \n   beanFactory.setBeanClassLoader(getClassLoader());\n\n   //  BeanExpressionResolver\n   beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));\n   // \n   beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));\n\n   //  BeanPostProcessor processor \n   //  Aware  beans  processor \n   //  ApplicationContext  implement ApplicationContextAware\n   //  ApplicationContextAware\n   //    EnvironmentAwareResourceLoaderAware \n   beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));\n\n   //  bean \n   // Spring \n   beanFactory.ignoreDependencyInterface(EnvironmentAware.class);\n   beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);\n   beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);\n   beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);\n   beanFactory.ignoreDependencyInterface(MessageSourceAware.class);\n   beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);\n\n   /**\n    *  bean  bean \n    * \" ApplicationContext  BeanFactory\"\n    * ApplicationContext  ResourceLoaderApplicationEventPublisherMessageSource\n    *  this this  ApplicationContext\n    *  MessageSource  MessageSource  bean\n    */\n   beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);\n   beanFactory.registerResolvableDependency(ResourceLoader.class, this);\n   beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);\n   beanFactory.registerResolvableDependency(ApplicationContext.class, this);\n\n   //  BeanPostProcessor  bean  ApplicationListener \n   //  listener  \n   beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));\n\n   //  beanloadTimeWeaver\n   // tips: ltw  AspectJ  Spring AOP \n   \n   if (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n      beanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n      // Set a temporary ClassLoader for type matching.\n      beanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n   }\n\n   /**\n    * Spring  \"\"  bean\n    * \n    */\n\n   //  \"environment\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) {\n      beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());\n   }\n   //  \"systemProperties\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) {\n      beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());\n   }\n   //  \"systemEnvironment\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) {\n      beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());\n   }\n}\n```\n\nSpring  bean \n\n####  singleton beans\n <code>finishBeanFactoryInitialization(beanFactory);</code>  singleton beans\n\n********Spring  singleton beans \n\n BeanFactory  BeanFactoryPostProcessor  Bean  postProcessBeanFactory(factory)  Spring  Bean <code>environment</code><code>systemProperties</code> \n\n singleton beans  Spring  singleton beans\n// AbstractApplicationContext.java 834\n```bash\n//  singleton beans\nprotected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) {\n\n   //  conversionService  Bean ConversionService\n   //  Bean \n   //  beanFactory.getBean(...) \n   if (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &&\n         beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {\n      beanFactory.setConversionService(\n            beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));\n   }\n\n   // Register a default embedded value resolver if no bean post-processor\n   // (such as a PropertyPlaceholderConfigurer bean) registered any before:\n   // at this point, primarily for resolution in annotation attribute values.\n   if (!beanFactory.hasEmbeddedValueResolver()) {\n      beanFactory.addEmbeddedValueResolver(new StringValueResolver() {\n         @Override\n         public String resolveStringValue(String strVal) {\n            return getEnvironment().resolvePlaceholders(strVal);\n         }\n      });\n   }\n\n   //  LoadTimeWeaverAware  Bean\n   //  AspectJ \n   String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, false, false);\n   for (String weaverAwareName : weaverAwareNames) {\n      getBean(weaverAwareName);\n   }\n\n   // Stop using the temporary ClassLoader for type matching.\n   beanFactory.setTempClassLoader(null);\n\n   // Spring  singleton beans \n   //  bean \n   beanFactory.freezeConfiguration();\n\n   // \n   beanFactory.preInstantiateSingletons();\n}\n```\n DefaultListableBeanFactory \n\n**preInstantiateSingletons**\n// DefaultListableBeanFactory 728\n```bash\n@Override\npublic void preInstantiateSingletons() throws BeansException {\n   if (this.logger.isDebugEnabled()) {\n      this.logger.debug(\"Pre-instantiating singletons in \" + this);\n   }\n   // this.beanDefinitionNames  beanNames\n   List<String> beanNames = new ArrayList<String>(this.beanDefinitionNames);\n\n   //  singleton beans \n   for (String beanName : beanNames) {\n\n      //  Bean  <bean id=\"\" class=\"\" parent=\"\" />  parent\n      //  \"Bean \"\n      RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n\n      //  singletons 'abstract = true'\n      if (!bd.isAbstract() && bd.isSingleton() && !bd.isLazyInit()) {\n         //  FactoryBean( FactoryBean)\n         if (isFactoryBean(beanName)) {\n            // FactoryBean  beanName  &  getBeangetBean \n            final FactoryBean<?> factory = (FactoryBean<?>) getBean(FACTORY_BEAN_PREFIX + beanName);\n            //  FactoryBean  SmartFactoryBean \n            boolean isEagerInit;\n            if (System.getSecurityManager() != null && factory instanceof SmartFactoryBean) {\n               isEagerInit = AccessController.doPrivileged(new PrivilegedAction<Boolean>() {\n                  @Override\n                  public Boolean run() {\n                     return ((SmartFactoryBean<?>) factory).isEagerInit();\n                  }\n               }, getAccessControlContext());\n            }\n            else {\n               isEagerInit = (factory instanceof SmartFactoryBean &&\n                     ((SmartFactoryBean<?>) factory).isEagerInit());\n            }\n            if (isEagerInit) {\n\n               getBean(beanName);\n            }\n         }\n         else {\n            //  Bean getBean(beanName) \n            getBean(beanName);\n         }\n      }\n   }\n\n   //  singleton beans \n   //  bean  SmartInitializingSingleton \n   for (String beanName : beanNames) {\n      Object singletonInstance = getSingleton(beanName);\n      if (singletonInstance instanceof SmartInitializingSingleton) {\n         final SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;\n         if (System.getSecurityManager() != null) {\n            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n               @Override\n               public Object run() {\n                  smartSingleton.afterSingletonsInstantiated();\n                  return null;\n               }\n            }, getAccessControlContext());\n         }\n         else {\n            smartSingleton.afterSingletonsInstantiated();\n         }\n      }\n   }\n}\n```\n getBean(beanName)  BeanFactory  Bean\n\n**getBean**\n FactoryBean  FactoryBean\n\n// AbstractBeanFactory 196\n```bash\n@Override\npublic Object getBean(String name) throws BeansException {\n   return doGetBean(name, null, null, false);\n}\n\n//  Bean  getBean  Bean \n// \n@SuppressWarnings(\"unchecked\")\nprotected <T> T doGetBean(\n      final String name, final Class<T> requiredType, final Object[] args, boolean typeCheckOnly)\n      throws BeansException {\n   //   beanName FactoryBean( &)\n   //  getBean Bean \n   final String beanName = transformedBeanName(name);\n\n   // \n   Object bean; \n\n   // \n   Object sharedInstance = getSingleton(beanName);\n\n   //  args  getBean(beanName)\n   //  args  null  args  Bean Bean\n   if (sharedInstance != null && args == null) {\n      if (logger.isDebugEnabled()) {\n         if (isSingletonCurrentlyInCreation(beanName)) {\n            logger.debug(\"...\");\n         }\n         else {\n            logger.debug(\"Returning cached instance of singleton bean '\" + beanName + \"'\");\n         }\n      }\n      //  Bean  sharedInstance\n      //  FactoryBean \n      // (FactoryBean )\n      bean = getObjectForBeanInstance(sharedInstance, name, beanName, null);\n   }\n\n   else {\n      if (isPrototypeCurrentlyInCreation(beanName)) {\n         //  beanName  prototype  bean\n         // \n         throw new BeanCurrentlyInCreationException(beanName);\n      }\n\n      //  BeanDefinition \n      BeanFactory parentBeanFactory = getParentBeanFactory();\n      if (parentBeanFactory != null && !containsBeanDefinition(beanName)) {\n         //  BeanDefinition\n         String nameToLookup = originalBeanName(name);\n         if (args != null) {\n            // \n            return (T) parentBeanFactory.getBean(nameToLookup, args);\n         }\n         else {\n            // No args -> delegate to standard getBean method.\n            return parentBeanFactory.getBean(nameToLookup, requiredType);\n         }\n      }\n\n      if (!typeCheckOnly) {\n         // typeCheckOnly  false beanName  alreadyCreated  Set \n         markBeanAsCreated(beanName);\n      }\n\n      /*\n       * \n       *  Bean  singleton  Bean  Bean\n       *  prototype  Bean  Bean\n       */\n      try {\n         final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);\n         checkMergedBeanDefinition(mbd, beanName, args);\n\n         //  Bean\n         //  depends-on \n         String[] dependsOn = mbd.getDependsOn();\n         if (dependsOn != null) {\n            for (String dep : dependsOn) {\n               // \n               if (isDependent(beanName, dep)) {\n                  throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n                        \"'Circular depends-on relationship between '\" + beanName + \"' and '\" + dep + \"'\");\n               }\n               // \n               registerDependentBean(dep, beanName);\n               // \n               getBean(dep);\n            }\n         }\n\n         //  singleton scope  singleton \n         if (mbd.isSingleton()) {\n            sharedInstance = getSingleton(beanName, new ObjectFactory<Object>() {\n               @Override\n               public Object getObject() throws BeansException {\n                  try {\n                     //  Bean\n                     return createBean(beanName, mbd, args);\n                  }\n                  catch (BeansException ex) {\n                     destroySingleton(beanName);\n                     throw ex;\n                  }\n               }\n            });\n            bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);\n         }\n\n         //  prototype scope  prototype \n         else if (mbd.isPrototype()) {\n            // Its a prototype -> create a new instance.\n            Object prototypeInstance = null;\n            try {\n               beforePrototypeCreation(beanName);\n               //  Bean\n               prototypeInstance = createBean(beanName, mbd, args);\n            }\n            finally {\n               afterPrototypeCreation(beanName);\n            }\n            bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);\n         }\n\n         //  singleton  prototype \n         else {\n            String scopeName = mbd.getScope();\n            final Scope scope = this.scopes.get(scopeName);\n            if (scope == null) {\n               throw new IllegalStateException(\"No Scope registered for scope name '\" + scopeName + \"'\");\n            }\n            try {\n               Object scopedInstance = scope.get(beanName, new ObjectFactory<Object>() {\n                  @Override\n                  public Object getObject() throws BeansException {\n                     beforePrototypeCreation(beanName);\n                     try {\n                        //  Bean\n                        return createBean(beanName, mbd, args);\n                     }\n                     finally {\n                        afterPrototypeCreation(beanName);\n                     }\n                  }\n               });\n               bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);\n            }\n            catch (IllegalStateException ex) {\n               throw new BeanCreationException(beanName,\n                     \"Scope '\" + scopeName + \"' is not active for the current thread; consider \" +\n                     \"defining a scoped proxy for this bean if you intend to refer to it from a singleton\",\n                     ex);\n            }\n         }\n      }\n      catch (BeansException ex) {\n         cleanupAfterBeanCreationFailure(beanName);\n         throw ex;\n      }\n   }\n\n   // \n   if (requiredType != null && bean != null && !requiredType.isInstance(bean)) {\n      try {\n         return getTypeConverter().convertIfNecessary(bean, requiredType);\n      }\n      catch (TypeMismatchException ex) {\n         if (logger.isDebugEnabled()) {\n            logger.debug(\"Failed to convert bean '\" + name + \"' to required type '\" +\n                  ClassUtils.getQualifiedName(requiredType) + \"'\", ex);\n         }\n         throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n      }\n   }\n   return (T) bean;\n}\n```\n createBean \n```bash\nprotected abstract Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException;\n```\n args  Bean args  null\n\n AbstractAutowireCapableBeanFactoryAutowireCapable\n\n @Autowired \n```bash\npublic class MessageServiceImpl implements MessageService {\n    @Autowired\n    private UserService userService;\n\n    public String getMessage() {\n        return userService.getMessage();\n    }\n}\n```\n```bash\n<bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\" />\n```\n xml   Spring \n\n\n\n// AbstractAutowireCapableBeanFactory 447\n```bash\n/**\n * Central method of this class: creates a bean instance,\n * populates the bean instance, applies post-processors, etc.\n * @see #doCreateBean\n */\n@Override\nprotected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException {\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Creating instance of bean '\" + beanName + \"'\");\n   }\n   RootBeanDefinition mbdToUse = mbd;\n\n   //  BeanDefinition  Class \n   Class<?> resolvedClass = resolveBeanClass(mbd, beanName);\n   if (resolvedClass != null && !mbd.hasBeanClass() && mbd.getBeanClassName() != null) {\n      mbdToUse = new RootBeanDefinition(mbd);\n      mbdToUse.setBeanClass(resolvedClass);\n   }\n\n   // MethodOverrides bean  <lookup-method /> \n   //  <replaced-method /> bean \n   // \n   try {\n      mbdToUse.prepareMethodOverrides();\n   }\n   catch (BeanDefinitionValidationException ex) {\n      throw new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),\n            beanName, \"Validation of method overrides failed\", ex);\n   }\n\n   try {\n      //  InstantiationAwareBeanPostProcessor \n      //  Spring AOP \n      Object bean = resolveBeforeInstantiation(beanName, mbdToUse);\n      if (bean != null) {\n         return bean; \n      }\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(mbdToUse.getResourceDescription(), beanName,\n            \"BeanPostProcessor before instantiation of bean failed\", ex);\n   }\n   //  bean\n   Object beanInstance = doCreateBean(beanName, mbdToUse, args);\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Finished creating instance of bean '\" + beanName + \"'\");\n   }\n   return beanInstance;\n}\n```\n\n**Bean**\n doCreateBean \n```bash\n/**\n * Actually create the specified bean. Pre-creation processing has already happened\n * at this point, e.g. checking {@code postProcessBeforeInstantiation} callbacks.\n * <p>Differentiates between default bean instantiation, use of a\n * factory method, and autowiring a constructor.\n * @param beanName the name of the bean\n * @param mbd the merged bean definition for the bean\n * @param args explicit arguments to use for constructor or factory method invocation\n * @return a new instance of the bean\n * @throws BeanCreationException if the bean could not be created\n * @see #instantiateBean\n * @see #instantiateUsingFactoryMethod\n * @see #autowireConstructor\n */\nprotected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args)\n      throws BeanCreationException {\n\n   // Instantiate the bean.\n   BeanWrapper instanceWrapper = null;\n   if (mbd.isSingleton()) {\n      instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);\n   }\n   if (instanceWrapper == null) {\n      //  FactoryBean Bean\n      instanceWrapper = createBeanInstance(beanName, mbd, args);\n   }\n   //  Bean    \"bean \"\n   final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null);\n   // \n   Class<?> beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null);\n   mbd.resolvedTargetType = beanType;\n\n   // MergedBeanDefinitionPostProcessor\n   synchronized (mbd.postProcessingLock) {\n      if (!mbd.postProcessed) {\n         try {\n            // MergedBeanDefinitionPostProcessor\n            applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);\n         }\n         catch (Throwable ex) {\n            throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n                  \"Post-processing of merged bean definition failed\", ex);\n         }\n         mbd.postProcessed = true;\n      }\n   }\n\n   // Eagerly cache singletons to be able to resolve circular references\n   // even when triggered by lifecycle interfaces like BeanFactoryAware.\n   // \n   boolean earlySingletonExposure = (mbd.isSingleton() && this.allowCircularReferences &&\n         isSingletonCurrentlyInCreation(beanName));\n   if (earlySingletonExposure) {\n      if (logger.isDebugEnabled()) {\n         logger.debug(\"Eagerly caching bean '\" + beanName +\n               \"' to allow for resolving potential circular references\");\n      }\n      addSingletonFactory(beanName, new ObjectFactory<Object>() {\n         @Override\n         public Object getObject() throws BeansException {\n            return getEarlyBeanReference(beanName, mbd, bean);\n         }\n      });\n   }\n\n   // Initialize the bean instance.\n   Object exposedObject = bean;\n   try {\n      // \n      populateBean(beanName, mbd, instanceWrapper);\n      if (exposedObject != null) {\n         //  init-method  InitializingBean  BeanPostProcessor \n         //  bean \n         exposedObject = initializeBean(beanName, exposedObject, mbd);\n      }\n   }\n   catch (Throwable ex) {\n      if (ex instanceof BeanCreationException && beanName.equals(((BeanCreationException) ex).getBeanName())) {\n         throw (BeanCreationException) ex;\n      }\n      else {\n         throw new BeanCreationException(\n               mbd.getResourceDescription(), beanName, \"Initialization of bean failed\", ex);\n      }\n   }\n\n   if (earlySingletonExposure) {\n      // \n      Object earlySingletonReference = getSingleton(beanName, false);\n      if (earlySingletonReference != null) {\n         if (exposedObject == bean) {\n            exposedObject = earlySingletonReference;\n         }\n         else if (!this.allowRawInjectionDespiteWrapping && hasDependentBean(beanName)) {\n            String[] dependentBeans = getDependentBeans(beanName);\n            Set<String> actualDependentBeans = new LinkedHashSet<String>(dependentBeans.length);\n            for (String dependentBean : dependentBeans) {\n               if (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) {\n                  actualDependentBeans.add(dependentBean);\n               }\n            }\n            if (!actualDependentBeans.isEmpty()) {\n               throw new BeanCurrentlyInCreationException(beanName,\n                     \"Bean with name '\" + beanName + \"' has been injected into other beans [\" +\n                     StringUtils.collectionToCommaDelimitedString(actualDependentBeans) +\n                     \"] in its raw version as part of a circular reference, but has eventually been \" +\n                     \"wrapped. This means that said other beans do not use the final version of the \" +\n                     \"bean. This is often the result of over-eager type matching - consider using \" +\n                     \"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\");\n            }\n         }\n      }\n   }\n\n   // Register bean as disposable.\n   try {\n      registerDisposableBeanIfNecessary(beanName, bean, mbd);\n   }\n   catch (BeanDefinitionValidationException ex) {\n      throw new BeanCreationException(\n            mbd.getResourceDescription(), beanName, \"Invalid destruction signature\", ex);\n   }\n\n   return exposedObject;\n}\n```\n doCreateBean \n\n doCreateBean  Bean  createBeanInstance  populateBean  initializeBean \n\n\n\n** Bean **\n createBeanInstance \n```bash\nprotected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) {\n   //  class\n   Class<?> beanClass = resolveBeanClass(mbd, beanName);\n\n   // \n   if (beanClass != null && !Modifier.isPublic(beanClass.getModifiers()) && !mbd.isNonPublicAccessAllowed()) {\n      throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n            \"Bean class isn't public, and non-public access not allowed: \" + beanClass.getName());\n   }\n\n   if (mbd.getFactoryMethodName() != null)  {\n      //  FactoryBean\n      return instantiateUsingFactoryMethod(beanName, mbd, args);\n   }\n\n   //  prototype bean\n   //  \n   boolean resolved = false;\n   boolean autowireNecessary = false;\n   if (args == null) {\n      synchronized (mbd.constructorArgumentLock) {\n         if (mbd.resolvedConstructorOrFactoryMethod != null) {\n            resolved = true;\n            autowireNecessary = mbd.constructorArgumentsResolved;\n         }\n      }\n   }\n   if (resolved) {\n      if (autowireNecessary) {\n         // \n         return autowireConstructor(beanName, mbd, null, null);\n      }\n      else {\n         // \n         return instantiateBean(beanName, mbd);\n      }\n   }\n\n   // \n   Constructor<?>[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);\n   if (ctors != null ||\n         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR ||\n         mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args))  {\n      // \n      return autowireConstructor(beanName, mbd, ctors, args);\n   }\n\n   // \n   return instantiateBean(beanName, mbd);\n}\n```\n\n****\n```bash\nprotected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) {\n   try {\n      Object beanInstance;\n      final BeanFactory parent = this;\n      if (System.getSecurityManager() != null) {\n         beanInstance = AccessController.doPrivileged(new PrivilegedAction<Object>() {\n            @Override\n            public Object run() {\n\n               return getInstantiationStrategy().instantiate(mbd, beanName, parent);\n            }\n         }, getAccessControlContext());\n      }\n      else {\n         // \n         beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n      }\n      // \n      BeanWrapper bw = new BeanWrapperImpl(beanInstance);\n      initBeanWrapper(bw);\n      return bw;\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(\n            mbd.getResourceDescription(), beanName, \"Instantiation of bean failed\", ex);\n   }\n}\n```\n\n```bash\nbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n```\n:\n\n// SimpleInstantiationStrategy 59\n```bash\n@Override\npublic Object instantiate(RootBeanDefinition bd, String beanName, BeanFactory owner) {\n\n   //  java  CGLIB,\n   //  \"\" lookup-method  replaced-method \n   if (bd.getMethodOverrides().isEmpty()) {\n      Constructor<?> constructorToUse;\n      synchronized (bd.constructorArgumentLock) {\n         constructorToUse = (Constructor<?>) bd.resolvedConstructorOrFactoryMethod;\n         if (constructorToUse == null) {\n            final Class<?> clazz = bd.getBeanClass();\n            if (clazz.isInterface()) {\n               throw new BeanInstantiationException(clazz, \"Specified class is an interface\");\n            }\n            try {\n               if (System.getSecurityManager() != null) {\n                  constructorToUse = AccessController.doPrivileged(new PrivilegedExceptionAction<Constructor<?>>() {\n                     @Override\n                     public Constructor<?> run() throws Exception {\n                        return clazz.getDeclaredConstructor((Class[]) null);\n                     }\n                  });\n               }\n               else {\n                  constructorToUse = clazz.getDeclaredConstructor((Class[]) null);\n               }\n               bd.resolvedConstructorOrFactoryMethod = constructorToUse;\n            }\n            catch (Throwable ex) {\n               throw new BeanInstantiationException(clazz, \"No default constructor found\", ex);\n            }\n         }\n      }\n      // \n      return BeanUtils.instantiateClass(constructorToUse);\n   }\n   else {\n      //  CGLIB  CGLIB \n      // tips:  CGLIB  override  JDK \n      return instantiateWithMethodInjection(bd, beanName, owner);\n   }\n}\n```\n\n**bean **\n createBeanInstance(...)  populateBean(...) \n\n// AbstractAutowireCapableBeanFactory 1203\n```bash\nprotected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) {\n   // bean \n   PropertyValues pvs = mbd.getPropertyValues();\n\n   if (bw == null) {\n      if (!pvs.isEmpty()) {\n         throw new BeanCreationException(\n               mbd.getResourceDescription(), beanName, \"Cannot apply property values to null instance\");\n      }\n      else {\n         // Skip property population phase for null instance.\n         return;\n      }\n   }\n\n   // bean \n   // InstantiationAwareBeanPostProcessor  bean \n   // \n   boolean continueWithPropertyPopulation = true;\n   if (!mbd.isSynthetic() && hasInstantiationAwareBeanPostProcessors()) {\n      for (BeanPostProcessor bp : getBeanPostProcessors()) {\n         if (bp instanceof InstantiationAwareBeanPostProcessor) {\n            InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n            //  false BeanPostProcessor \n            if (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) {\n               continueWithPropertyPopulation = false;\n               break;\n            }\n         }\n      }\n   }\n\n   if (!continueWithPropertyPopulation) {\n      return;\n   }\n\n   if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME ||\n         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) {\n      MutablePropertyValues newPvs = new MutablePropertyValues(pvs);\n\n      //  bean  bean\n      if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) {\n         autowireByName(beanName, mbd, bw, newPvs);\n      }\n\n      // \n      if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) {\n         autowireByType(beanName, mbd, bw, newPvs);\n      }\n\n      pvs = newPvs;\n   }\n\n   boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();\n   boolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE);\n\n   if (hasInstAwareBpps || needsDepCheck) {\n      PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n      if (hasInstAwareBpps) {\n         for (BeanPostProcessor bp : getBeanPostProcessors()) {\n            if (bp instanceof InstantiationAwareBeanPostProcessor) {\n               InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n               //  BeanPostProcessor : AutowiredAnnotationBeanPostProcessor\n               //  @Autowired@Value \n               pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);\n               if (pvs == null) {\n                  return;\n               }\n            }\n         }\n      }\n      if (needsDepCheck) {\n         checkDependencies(beanName, mbd, filteredPds, pvs);\n      }\n   }\n   //  bean \n   applyPropertyValues(beanName, mbd, bw, pvs);\n}\n```\n\n**initializeBean**\n\n```bash\nprotected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) {\n   if (System.getSecurityManager() != null) {\n      AccessController.doPrivileged(new PrivilegedAction<Object>() {\n         @Override\n         public Object run() {\n            invokeAwareMethods(beanName, bean);\n            return null;\n         }\n      }, getAccessControlContext());\n   }\n   else {\n      //  bean  BeanNameAwareBeanClassLoaderAware  BeanFactoryAware \n      invokeAwareMethods(beanName, bean);\n   }\n\n   Object wrappedBean = bean;\n   if (mbd == null || !mbd.isSynthetic()) {\n      // BeanPostProcessor  postProcessBeforeInitialization \n      wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);\n   }\n\n   try {\n      //  bean  init-method\n      //  bean  InitializingBean  afterPropertiesSet() \n      invokeInitMethods(beanName, wrappedBean, mbd);\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(\n            (mbd != null ? mbd.getResourceDescription() : null),\n            beanName, \"Invocation of init method failed\", ex);\n   }\n\n   if (mbd == null || !mbd.isSynthetic()) {\n      // BeanPostProcessor  postProcessAfterInitialization \n      wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);\n   }\n   return wrappedBean;\n}\n```\nBeanPostProcessor  init-method\n\n---\n\n### \n\n#### idname\n Bean  Spring beanName 0 aliases\n\n Spring  Bean  beanName\n```bash\nbeanFactory.getBean(\"beanName or alias\");\n```\n <code>&lt;bean /&gt;</code>  id  name\n```bash\n<bean id=\"messageService\" name=\"m1, m2, m3\" class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName  messageService 3  m1m2m3\n```bash\n<bean name=\"m1, m2, m3\" class=\"com.loonycoder.service.MessageServiceImpl\" />\n```\nbeanName  m1 2  m2m3\n```bash\n<bean class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName com.loonycoder.service.MessageServiceImpl#0\n\n 1  com.loonycoder.service.MessageServiceImpl\n```bash\n<bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName  messageService\n\n####  Bean \nallowBeanDefinitionOverriding  null Bean id  name \n\n Bean \n\n A  B B  A A  BB  C C  A allowCircularReferences  null\n\n\n\n Juergen Hoeller  jira \n```bash\npublic class NoBeanOverridingContextLoader extends ContextLoader {\n\n  @Override\n  protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) {\n    super.customizeContext(servletContext, applicationContext);\n    AbstractRefreshableApplicationContext arac = (AbstractRefreshableApplicationContext) applicationContext;\n    arac.setAllowBeanDefinitionOverriding(false);\n  }\n}\n```\n```bash\npublic class MyContextLoaderListener extends org.springframework.web.context.ContextLoaderListener {\n\n  @Override\n  protected ContextLoader createContextLoader() {\n    return new NoBeanOverridingContextLoader();\n  }\n\n}\n```\n```bash\n<listener>\n    <listener-class>com.loonycoder.MyContextLoaderListener</listener-class>  \n</listener>\n```\n\n#### profile\n\n```bash\n<beans profile=\"development\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"...\">\n\n    <jdbc:embedded-database id=\"dataSource\">\n        <jdbc:script location=\"classpath:com/loonycoder/config/sql/schema.sql\"/>\n        <jdbc:script location=\"classpath:com/oonycoder/config/sql/test-data.sql\"/>\n    </jdbc:embedded-database>\n</beans>\n```\n```bash\n<beans profile=\"production\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xsi:schemaLocation=\"...\">\n\n    <jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/datasource\"/>\n</beans>\n```\n profile=\"\"\n\n\n```bash\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xsi:schemaLocation=\"...\">\n\n    <beans profile=\"development\">\n        <jdbc:embedded-database id=\"dataSource\">\n            <jdbc:script location=\"classpath:com/loonycoder/config/sql/schema.sql\"/>\n            <jdbc:script location=\"classpath:com/loonycoder/config/sql/test-data.sql\"/>\n        </jdbc:embedded-database>\n    </beans>\n\n    <beans profile=\"production\">\n        <jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/datasource\"/>\n    </beans>\n</beans>\n```\n\n\n profile Spring  spring.profiles.active \n\nSpring  spring.profiles.active JVM web.xml JNDI\n\n\n```bash\n-Dspring.profiles.active=\"profile1,profile2\"\n```\n> profile \n\n Environment  profile\n```bash\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\nctx.getEnvironment().setActiveProfiles(\"development\");\nctx.register(SomeConfig.class, StandaloneDataConfig.class, JndiDataConfig.class);\nctx.refresh(); // \n```\n Spring Boot  application.propertiesapplication-dev.propertiesapplication-prod.properties  application.properties application-{profile}.properties  profile\n```bash\njava -Dspring.profiles.active=prod -jar JavaDoop.jar\n```\n\n####  Bean\n factory-bean  FactoryBean  Spring  Bean FactoryBean\n\n Spring \n\n\n```bash\n<bean id=\"clientService\"\n    class=\"examples.ClientService\"\n    factory-method=\"createInstance\"/>\n```\n```bash\npublic class ClientService {\n    private static ClientService clientService = new ClientService();\n    private ClientService() {}\n\n    // \n    public static ClientService createInstance() {\n        return clientService;\n    }\n}\n```\n\n```bash\n<bean id=\"serviceLocator\" class=\"examples.DefaultServiceLocator\">\n    <!-- inject any dependencies required by this locator bean -->\n</bean>\n\n<bean id=\"clientService\"\n    factory-bean=\"serviceLocator\"\n    factory-method=\"createClientServiceInstance\"/>\n\n<bean id=\"accountService\"\n    factory-bean=\"serviceLocator\"\n    factory-method=\"createAccountServiceInstance\"/>\n```\n```bash\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    private static AccountService accountService = new AccountServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n\n    public AccountService createAccountServiceInstance() {\n        return accountService;\n    }\n}\n```\n\n#### FactoryBean\nFactoryBean  Bean \n```bash\npublic interface FactoryBean<T> {\n    T getObject() throws Exception;\n    Class<T> getObjectType();\n    boolean isSingleton();\n}\n```\n```bash\npublic class Person { \n    private Car car ;\n    private void setCar(Car car){ this.car = car;  }  \n}\n```\n Person  Bean Car  Car  Car \n```bash\npublic class MyCarFactoryBean implements FactoryBean<Car>{\n    private String make; \n    private int year ;\n\n    public void setMake(String m){ this.make =m ; }\n\n    public void setYear(int y){ this.year = y; }\n\n    public Car getObject(){ \n      //  Car \n      CarBuilder cb = CarBuilder.car();\n\n      if(year!=0) cb.setYear(this.year);\n      if(StringUtils.hasText(this.make)) cb.setMake( this.make ); \n      return cb.factory(); \n    }\n\n    public Class<Car> getObjectType() { return Car.class ; } \n\n    public boolean isSingleton() { return false; }\n}\n```\n\n```bash\n<bean class = \"com.loonycoder.MyCarFactoryBean\" id = \"car\">\n  <property name = \"make\" value =\"Honda\"/>\n  <property name = \"year\" value =\"1994\"/>\n</bean>\n<bean class = \"com.loonycoder.Person\" id = \"josh\">\n  <property name = \"car\" ref = \"car\"/>\n</bean>\n```\nid  car  bean  FactoryBean Person  Bean  FactoryBean  Spring \n\n xml  Bean  java  config \n```bash\n@Configuration \npublic class CarConfiguration { \n\n    @Bean \n    public MyCarFactoryBean carFactoryBean(){ \n      MyCarFactoryBean cfb = new MyCarFactoryBean();\n      cfb.setMake(\"Honda\");\n      cfb.setYear(1994);\n      return cfb;\n    }\n\n    @Bean\n    public Person aPerson(){ \n    Person person = new Person();\n      // \n    person.setCar(carFactoryBean().getObject());\n    return person; \n    } \n}\n```\n MyCarFactoryBean  Bean  FactoryBean FactoryBean \n\n####  Bean \n\n```bash\n<bean id=\"exampleInitBean\" class=\"examples.ExampleBean\" init-method=\"init\"/>\n```\n```bash\npublic class AnotherExampleBean implements InitializingBean {\n\n    public void afterPropertiesSet() {\n        // do some initialization work\n    }\n}\n```\n```bash\n@Bean(initMethod = \"init\")\npublic Foo foo() {\n    return new Foo();\n}\n```\n```bash\n@PostConstruct\npublic void init() {\n\n}\n```\n\n####  Bean \n```bash\n<bean id=\"exampleInitBean\" class=\"examples.ExampleBean\" destroy-method=\"cleanup\"/>\n```\n```bash\npublic class AnotherExampleBean implements DisposableBean {\n\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n```\n```bash\n@Bean(destroyMethod = \"cleanup\")\npublic Bar bar() {\n    return new Bar();\n}\n```\n```bash\n@PreDestroy\npublic void cleanup() {\n\n}\n```\n\n#### ConversionService\n\n\n controller \n\n StringInteger  controller  Date  ConversionService \n```bash\n<bean id=\"conversionService\"\n  class=\"org.springframework.context.support.ConversionServiceFactoryBean\">\n  <property name=\"converters\">\n    <list>\n      <bean class=\"com.loonycoder.learning.utils.StringToEnumConverterFactory\"/>\n    </list>\n  </property>\n</bean>\n```\nConversionService  convert \n\n Converter \n\n\n```bash\npublic class StringToDateConverter implements Converter<String, Date> {\n\n    @Override\n    public Date convert(String source) {\n        try {\n            return DateUtils.parseDate(source, \"yyyy-MM-dd\", \"yyyy-MM-dd HH:mm:ss\", \"yyyy-MM-dd HH:mm\", \"HH:mm:ss\", \"HH:mm\");\n        } catch (ParseException e) {\n            return null;\n        }\n    }\n}\n```\n Bean  Date \n\n#### Bean \n Bean \n```bash\nRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n```\n <code>&lt;bean parent=\"\" /&gt;</code>  parent  Spring \n\n java child bean  parent bean \n\nSpring  AbstractBeanDefinition  <code>ChildBeanDefinition</code>  child bean\n\n:\n```bash\n<bean id=\"inheritedTestBean\" abstract=\"true\" class=\"org.springframework.beans.TestBean\">\n    <property name=\"name\" value=\"parent\"/>\n    <property name=\"age\" value=\"1\"/>\n</bean>\n\n<bean id=\"inheritsWithDifferentClass\" class=\"org.springframework.beans.DerivedTestBean\"\n        parent=\"inheritedTestBean\" init-method=\"initialize\">\n\n    <property name=\"name\" value=\"override\"/>\n</bean>\n```\nparent bean  <code>abstract=\"true\"</code> child bean  parent bean  name \n\nchild bean  scopeinit-methoddestroy-method \n\n parent bean  abstract = true  Spring  singleton beans  bean\n\n parent bean class bean  parent bean abstract = true\n```bash\n<bean id=\"inheritedTestBeanWithoutClass\" abstract=\"true\">\n    <property name=\"name\" value=\"parent\"/>\n    <property name=\"age\" value=\"1\"/>\n</bean>\n```\n\n#### \n Bean  singleton singleton  singleton prototype  prototype \n\n singleton  prototype  bean\n\n bean  BeanFactory  Spring \n\n Lookup method\n\n**lookup-method**\n Spring Reference \n```bash\npackage fiona.apple;\n\n// no more Spring imports!\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        // grab a new instance of the appropriate Command interface\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract Command createCommand();\n}\n```\nxml  <code>&lt;lookup-method /&gt;</code>\n```bash\n<!-- a stateful bean deployed as a prototype (non-singleton) -->\n<bean id=\"myCommand\" class=\"fiona.apple.AsyncCommand\" scope=\"prototype\">\n    <!-- inject dependencies here as required -->\n</bean>\n\n<!-- commandProcessor uses statefulCommandHelper -->\n<bean id=\"commandManager\" class=\"fiona.apple.CommandManager\">\n    <lookup-method name=\"createCommand\" bean=\"myCommand\"/>\n</bean>\n```\nSpring  **CGLIB**  final class final\n\nlookup-method  <code>&lt;lookup-method /&gt;</code> \n```bash\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup(\"myCommand\")\n    protected abstract Command createCommand();\n}\n```\n> <code>&lt;context:component-scan base-package=\"com.loonycoder\" /&gt;</code>\n\n\n```bash\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup\n    protected abstract MyCommand createCommand();\n}\n```\n>  MyCommand Command  Command\n\n**replaced-method**\n bean \n```bash\npublic class MyValueCalculator {\n\n    public String computeValue(String input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n```\n MethodReplacer \n```bash\npublic class ReplacementComputeValue implements org.springframework.beans.factory.support.MethodReplacer {\n\n    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {\n        // get the input value, work with it, and return a computed result\n        String input = (String) args[0];\n        ...\n        return ...;\n    }\n}\n```\n\n```bash\n<bean id=\"myValueCalculator\" class=\"x.y.z.MyValueCalculator\">\n    <!--  computeValue  -->\n    <replaced-method name=\"computeValue\" replacer=\"replacementComputeValue\">\n        <arg-type>String</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id=\"replacementComputeValue\" class=\"a.b.c.ReplacementComputeValue\"/>\n```\n> arg-type \n\n#### BeanPostProcessor\n BeanPostProcessor  Spring \n```bash\npublic interface BeanPostProcessor {\n\n   Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;\n\n   Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;\n\n}\n```\n bean  postProcessBeforeInitialization  postProcessAfterInitialization \n\n BeanPostProcessor Spring  BeanFactory  obtainFactory()  prepareBeanFactory(factory)Spring  BeanPostProcessorApplicationContextAwareProcessorApplicationListenerDetector\n\n bean  bean  bean  null\n\n bean  Spring  bean \n\n bean  BeanPostProcessor \n\n bean  AbstractAutowireCapableBeanFactory#initBean \n\n Aware  bean BeanPostProcessor  postProcessBeforeInitialization  init-method BeanPostProcessor  postProcessAfterInitialization \n\n---\n\n### \n\n\n Spring  Spring \n\n Spring  singleton beans  Spring \n\n\n","source":"_posts/Spring-2.md","raw":"---\ntitle: SpringIoC\ncategories:\n    - Java\n    \ndate: 2018-10-30\ntags:\n\t- \n    - Spring\n---\n\n![Spring](/images/spring_logo.jpg)\n\n<https://javadoop.com/post/spring-ioc>\n\n\n\n\n---\n\n### \n Spring \n```bash\npublic static void main(String[] args) {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"classpath:Application.xml\");\n}\n```\n Spring  maven  dependencies  Spring \n```bash\n<dependency>\n  <groupId>org.springframework</groupId>\n  <artifactId>spring-context</artifactId>\n  <version>4.3.11.RELEASE</version>\n</dependency>\n```\n> spring-context  spring-corespring-beansspring-aopspring-expression  jar \n\n SpringMVC Spring Spring  web  Spring Spring \n<code>ApplicationContext context = new ClassPathXmlApplicationContext(...)</code> ClassPath  xml  xml  ApplicationContext  ClassPathXmlApplicationContext  ApplicationContext \n![spring](/images/spring-ioc1.png)\n>  Spring \n\n\nClassPathXmlApplicationContext  ApplicationContext  \n**FileSystemXmlApplicationContext****AnnotationConfigApplicationContext**\n\n1. **FileSystemXmlApplicationContext** xml  ClassPathXmlApplicationContext \n\n2. **AnnotationConfigApplicationContext** java \n\n ClassPathXmlApplicationContext \n\n ApplicationContext\n\n\n```bash\npublic interface MessageService {\n    String getMessage();\n}\n```\n\n```bash\npublic class MessageServiceImpl implements MessageService {\n    public String getMessage() {\n        return \"hello world\";\n    }\n}\n```\n\n **resources**  Application.xml  Application-xxx.xml \n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns=\"http://www.springframework.org/schema/beans\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\" default-autowire=\"byName\">\n    <bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\"/>\n</beans>\n```\n\n```bash\npublic class App {\n    public static void main(String[] args) {\n        //  ApplicationContext\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"classpath:Application.xml\");\n\n        System.out.println(\"context \");\n\n        //  context  Bean new MessageServiceImpl() \n        MessageService messageService = context.getBean(MessageService.class);\n        // : hello world\n        System.out.println(messageService.getMessage());\n    }\n}\n```\n Spring  ApplicationContext  IOC ApplicationContext  Bean Bean \n\n---\n\n### BeanFactory \nBeanFactory bean  bean \n\n BeanFactory  ApplicationContext  BeanFactory BeanFactory \n![spring](/images/spring-ioc2.png)\nApplicationContext \n\n- ApplicationContext  ListableBeanFactory Listable  Bean BeanFactory  Bean \n- ApplicationContext  HierarchicalBeanFactoryHierarchical  BeanFactory BeanFactory \n- AutowireCapableBeanFactory  Autowire  Bean ApplicationContext  ApplicationContext  getAutowireCapableBeanFactory() \n- ConfigurableListableBeanFactory  ApplicationContext \n- \n BeanFactoryListableBeanFactoryHierarchicalBeanFactoryAutowireCapableBeanFactoryApplicationContext \n\n---\n\n### \n\n\n ClassPathXmlApplicationContext \n\n```bash\npublic class ClassPathXmlApplicationContext extends AbstractXmlApplicationContext {\n  private Resource[] configResources;\n\n  //  ApplicationContext \n  public ClassPathXmlApplicationContext(ApplicationContext parent) {\n    super(parent);\n  }\n  ...\n  public ClassPathXmlApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent)\n      throws BeansException {\n\n    super(parent);\n    // (tab)\n    setConfigLocations(configLocations);\n    if (refresh) {\n      refresh(); // \n    }\n  }\n    ...\n}\n```\n\n <code>refresh()</code> refresh() init()  ApplicationContext  refresh() refresh()  ApplicationContext \n\nrefresh() \n```bash\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n   //  refresh() \n   synchronized (this.startupShutdownMonitor) {\n\n      // \n      prepareRefresh();\n\n      //  Bean  BeanFactory \n      //  Bean \n      // ( beanName-> beanDefinition  map)\n      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n      //  BeanFactory  BeanPostProcessor bean\n      // \n      prepareBeanFactory(beanFactory);\n\n      try {\n         //  BeanFactoryPostProcessor Bean \n         // Spring  postProcessBeanFactory \n\n         //  Bean \n         //  BeanFactoryPostProcessor \n         postProcessBeanFactory(beanFactory);\n         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) \n         invokeBeanFactoryPostProcessors(beanFactory);\n\n         //  BeanPostProcessor  BeanFactoryPostProcessor \n         // : postProcessBeforeInitialization  postProcessAfterInitialization\n         //  Bean  Bean \n         registerBeanPostProcessors(beanFactory);\n\n         //  ApplicationContext  MessageSource\n         initMessageSource();\n\n         //  ApplicationContext \n         initApplicationEventMulticaster();\n\n         // ()\n         //  Bean singleton beans \n         onRefresh();\n\n         //  ApplicationListener \n         registerListeners();\n\n         // \n         //  singleton beans\n         //lazy-init \n         finishBeanFactoryInitialization(beanFactory);\n\n         // ApplicationContext \n         finishRefresh();\n      }\n\n      catch (BeansException ex) {\n         if (logger.isWarnEnabled()) {\n            logger.warn(\"Exception encountered during context initialization - \" +\n                  \"cancelling refresh attempt: \" + ex);\n         }\n\n         // Destroy already created singletons to avoid dangling resources.\n         //  singleton  Beans bean \n         destroyBeans();\n\n         // Reset 'active' flag.\n         cancelRefresh(ex);\n\n         // \n         throw ex;\n      }\n\n      finally {\n         // Reset common introspection caches in Spring's core, since we\n         // might not ever need metadata for singleton beans anymore...\n         resetCommonCaches();\n      }\n   }\n}\n```\n\n refresh() \n\n---\n\n####  Bean  Bean\n refresh()  obtainFreshBeanFactory()\n\n**** BeanFactory Bean Bean \n\nBean  Bean \n\n// AbstractApplicationContext.java\n```bash\nprotected ConfigurableListableBeanFactory obtainFreshBeanFactory() {\n   //  BeanFactory () BeanFactory Bean  Bean \n   refreshBeanFactory();\n\n   //  BeanFactory\n   ConfigurableListableBeanFactory beanFactory = getBeanFactory();\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Bean factory for \" + getDisplayName() + \": \" + beanFactory);\n   }\n   return beanFactory;\n}\n```\n// AbstractRefreshableApplicationContext.java 120\n```bash\n@Override\nprotected final void refreshBeanFactory() throws BeansException {\n   //  ApplicationContext  BeanFactory  Bean BeanFactory\n   //  BeanFactory  BeanFactory\n   // ApplicationContext  BeanFactory\n   if (hasBeanFactory()) {\n      destroyBeans();\n      closeBeanFactory();\n   }\n   try {\n      //  DefaultListableBeanFactory\n      DefaultListableBeanFactory beanFactory = createBeanFactory();\n      //  BeanFactory \n      beanFactory.setSerializationId(getId());\n\n      // \n      //  BeanFactory  Bean \n      customizeBeanFactory(beanFactory);\n\n      //  Bean  BeanFactory \n      loadBeanDefinitions(beanFactory);\n      synchronized (this.beanFactoryMonitor) {\n         this.beanFactory = beanFactory;\n      }\n   }\n   catch (IOException ex) {\n      throw new ApplicationContextException(\"I/O error parsing bean definition source for \" + getDisplayName(), ex);\n   }\n}\n```\n\n>  ApplicationContext ApplicationContext  BeanFactory BeanFactory  BeanFactoryDefaultListableBeanFactory BeanFactory \n\n **DefaultListableBeanFactory**  ConfigurableListableBeanFactory BeanFactory \n![spring](/images/spring-ioc2.png)\n\n ConfigurableListableBeanFactory  DefaultListableBeanFactory DefaultListableBeanFactory  AbstractAutowireCapableBeanFactory  DefaultListableBeanFactory  BeanFactory \n\n>  Spring IOC  bean\n ApplicationContext  AutowireCapableBeanFactory DefaultListableBeanFactory \n ApplicationContext  Spring\n\n BeanDefinition** BeanFactory  Bean  Bean **\n\n BeanDefinition  Spring  Bean Bean  BeanDefinition  Spring  BeanFactory \n\n Bean  Bean  BeanDefinition \n> BeanDefinition  Bean  Bean  Bean  Bean \n\n**BeanDefinition **\n BeanDefinition \n```bash\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n   //  sington  prototype \n   //  request, session, globalSession, application, websocket \n   //  web \n   String SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n   String SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n   // \n   int ROLE_APPLICATION = 0;\n   int ROLE_SUPPORT = 1;\n   int ROLE_INFRASTRUCTURE = 2;\n\n   //  Bean bean  java \n   //  Bean \n   void setParentName(String parentName);\n\n   //  Bean\n   String getParentName();\n\n   //  Bean \n   void setBeanClassName(String beanClassName);\n\n   //  Bean \n   String getBeanClassName();\n\n\n   //  bean  scope\n   void setScope(String scope);\n\n   String getScope();\n\n   // \n   void setLazyInit(boolean lazyInit);\n\n   boolean isLazyInit();\n\n   //  Bean  Bean( @Autowire )\n   //  depends-on=\"\" \n   void setDependsOn(String... dependsOn);\n\n   //  Bean \n   String[] getDependsOn();\n\n   //  Bean  Bean \n   //  false\n   void setAutowireCandidate(boolean autowireCandidate);\n\n   //  Bean  Bean \n   boolean isAutowireCandidate();\n\n   // Spring  primary  true  bean\n   void setPrimary(boolean primary);\n\n   //  primary \n   boolean isPrimary();\n\n   //  Bean \n   // \n   void setFactoryBeanName(String factoryBeanName);\n   // \n   String getFactoryBeanName();\n   //  \n   void setFactoryMethodName(String factoryMethodName);\n   //  \n   String getFactoryMethodName();\n\n   // \n   ConstructorArgumentValues getConstructorArgumentValues();\n\n   // Bean  bean \n   MutablePropertyValues getPropertyValues();\n\n   //  singleton\n   boolean isSingleton();\n\n   //  prototype\n   boolean isPrototype();\n\n   //  Bean  abstract\n   //  bean ......\n   boolean isAbstract();\n\n   int getRole();\n   String getDescription();\n   String getResourceDescription();\n   BeanDefinition getOriginatingBeanDefinition();\n}\n```\n\n>  BeanDefinition \n getInstance() \n\n BeanDefinition  refreshBeanFactory() \n```bash\ncustomizeBeanFactory(beanFactory);\nloadBeanDefinitions(beanFactory);\n```\n\n\n\n**customizeBeanFactory**\n\ncustomizeBeanFactory(beanFactory)  BeanDefinition \n```bash\nprotected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) {\n   if (this.allowBeanDefinitionOverriding != null) {\n      //  Bean \n      beanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n   }\n   if (this.allowCircularReferences != null) {\n      //  Bean \n      beanFactory.setAllowCircularReferences(this.allowCircularReferences);\n   }\n}\n```\nBeanDefinition  bean  id  nameallowBeanDefinitionOverriding  null\n\nA  B B  A A  BB  C C  A\n\nSpring  A  B B  A \n\n Bean  Spring \n\n\n\n**Bean:loadBeanDefinitions**\n\n loadBeanDefinitions(beanFactory)  Bean BeanFactory \n\n XmlBeanDefinitionReader \n\n// AbstractXmlApplicationContext.java 80\n```bash\n/**  XmlBeanDefinitionReader  Bean*/\n@Override\nprotected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {\n   //  BeanFactory  XmlBeanDefinitionReader\n   XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);\n\n   // Configure the bean definition reader with this context's\n   // resource loading environment.\n   beanDefinitionReader.setEnvironment(this.getEnvironment());\n   beanDefinitionReader.setResourceLoader(this);\n   beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));\n\n   //  BeanDefinitionReader\n   // \n   initBeanDefinitionReader(beanDefinitionReader);\n   // \n   loadBeanDefinitions(beanDefinitionReader);\n}\n```\n Reader  xml \n\n// AbstractXmlApplicationContext.java 120\n```bash\nprotected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException {\n   Resource[] configResources = getConfigResources();\n   if (configResources != null) {\n      // \n      reader.loadBeanDefinitions(configResources);\n   }\n   String[] configLocations = getConfigLocations();\n   if (configLocations != null) {\n      // 2\n      reader.loadBeanDefinitions(configLocations);\n   }\n}\n\n//  Resource \n@Override\npublic int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException {\n   Assert.notNull(resources, \"Resource array must not be null\");\n   int counter = 0;\n   //  for  resource\n   for (Resource resource : resources) {\n      // \n      counter += loadBeanDefinitions(resource);\n   }\n   //  counter BeanDefinition\n   return counter;\n}\n\n// XmlBeanDefinitionReader 303\n@Override\npublic int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException {\n   return loadBeanDefinitions(new EncodedResource(resource));\n}\n\n// XmlBeanDefinitionReader 314\npublic int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException {\n   Assert.notNull(encodedResource, \"EncodedResource must not be null\");\n   if (logger.isInfoEnabled()) {\n      logger.info(\"Loading XML bean definitions from \" + encodedResource.getResource());\n   }\n   //  ThreadLocal \n   Set<EncodedResource> currentResources = this.resourcesCurrentlyBeingLoaded.get();\n   if (currentResources == null) {\n      currentResources = new HashSet<EncodedResource>(4);\n      this.resourcesCurrentlyBeingLoaded.set(currentResources);\n   }\n   if (!currentResources.add(encodedResource)) {\n      throw new BeanDefinitionStoreException(\n            \"Detected cyclic loading of \" + encodedResource + \" - check your import definitions!\");\n   }\n   try {\n      InputStream inputStream = encodedResource.getResource().getInputStream();\n      try {\n         InputSource inputSource = new InputSource(inputStream);\n         if (encodedResource.getEncoding() != null) {\n            inputSource.setEncoding(encodedResource.getEncoding());\n         }\n         // \n         return doLoadBeanDefinitions(inputSource, encodedResource.getResource());\n      }\n      finally {\n         inputStream.close();\n      }\n   }\n   catch (IOException ex) {\n      throw new BeanDefinitionStoreException(\n            \"IOException parsing XML document from \" + encodedResource.getResource(), ex);\n   }\n   finally {\n      currentResources.remove(encodedResource);\n      if (currentResources.isEmpty()) {\n         this.resourcesCurrentlyBeingLoaded.remove();\n      }\n   }\n}\n\n//  388 \nprotected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)\n      throws BeanDefinitionStoreException {\n   try {\n      //  xml  Document \n      Document doc = doLoadDocument(inputSource, resource);\n      // \n      return registerBeanDefinitions(doc, resource);\n   }\n   catch (...\n}\n//  505 \n//  Bean\npublic int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException {\n   BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();\n   int countBefore = getRegistry().getBeanDefinitionCount();\n   // \n   documentReader.registerBeanDefinitions(doc, createReaderContext(resource));\n   return getRegistry().getBeanDefinitionCount() - countBefore;\n}\n// DefaultBeanDefinitionDocumentReader 90\n@Override\npublic void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) {\n   this.readerContext = readerContext;\n   logger.debug(\"Loading bean definitions\");\n   Element root = doc.getDocumentElement();\n   //  xml \n   doRegisterBeanDefinitions(root);\n}  \n```\n\n DOM  for \n\n**doRegisterBeanDefinitions**\n```bash\n// DefaultBeanDefinitionDocumentReader 116\nprotected void doRegisterBeanDefinitions(Element root) {\n   // BeanDefinitionParserDelegate  Bean \n   //  parent? \n   //  <beans />  <beans />  root  xml  <beans /> \n   BeanDefinitionParserDelegate parent = this.delegate;\n   this.delegate = createDelegate(getReaderContext(), root, parent);\n\n   if (this.delegate.isDefaultNamespace(root)) {\n      //  <beans ... profile=\"dev\" />  profile \n      //  profile  profile return  <beans /> \n      //  profile  profile \n      String profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);\n      if (StringUtils.hasText(profileSpec)) {\n         String[] specifiedProfiles = StringUtils.tokenizeToStringArray(\n               profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n         if (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) {\n            if (logger.isInfoEnabled()) {\n               logger.info(\"Skipped XML bean definition file due to specified profiles [\" + profileSpec +\n                     \"] not matching: \" + getReaderContext().getResource());\n            }\n            return;\n         }\n      }\n   }\n\n   preProcessXml(root); // \n   // \n   parseBeanDefinitions(root, this.delegate);\n   postProcessXml(root); // \n\n   this.delegate = parent;\n}\n```\n\npreProcessXml(root)  postProcessXml(root) \n\n profile  profile \n\n parseBeanDefinitions(root, this.delegate) :\n\n```bash\n// default namespace  <import /><alias /><bean />  <beans />\n//  custom \nprotected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) {\n   if (delegate.isDefaultNamespace(root)) {\n      NodeList nl = root.getChildNodes();\n      for (int i = 0; i < nl.getLength(); i++) {\n         Node node = nl.item(i);\n         if (node instanceof Element) {\n            Element ele = (Element) node;\n            if (delegate.isDefaultNamespace(ele)) {\n               //  default namespace \n               parseDefaultElement(ele, delegate);\n            }\n            else {\n               //  namespace \n               delegate.parseCustomElement(ele);\n            }\n         }\n      }\n   }\n   else {\n      delegate.parseCustomElement(root);\n   }\n}\n```\n\n parseDefaultElement(ele, delegate);  delegate.parseCustomElement(ele); \n\nparseDefaultElement(ele, delegate)  <code>&lt;import /&gt;&lt;alias /&gt;&lt;bean /&gt;&lt;beans /&gt;</code>\n\n>  default  namespace \n>```bash\nhttp://www.springframework.org/schema/beans\n```\n>  namespace  xml xmlns \n> ```bash\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns=\"http://www.springframework.org/schema/beans\"\n       xsi:schemaLocation=\"\n            http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans.xsd\"\n       default-autowire=\"byName\">\n```\n>  delegate.parseCustomElement(element)  <code> &lt;mvc /&gt;&lt;task /&gt;&lt;context /&gt;&lt;aop /&gt;</code>\n  default  xml  namespace  .xsd  parser  MvcNamespaceHandlerTaskNamespaceHandlerContextNamespaceHandlerAopNamespaceHandler \n>  <code>&lt;context:property-placeholder location=\"classpath:xx.properties\" /&gt;</code> ContextNamespaceHandler \n> ```bash\n<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xmlns=\"http://www.springframework.org/schema/beans\"\n      xmlns:context=\"http://www.springframework.org/schema/context\"\n      xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n      xsi:schemaLocation=\"\n           http://www.springframework.org/schema/beans \n           http://www.springframework.org/schema/beans/spring-beans.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context.xsd\n           http://www.springframework.org/schema/mvc   \n           http://www.springframework.org/schema/mvc/spring-mvc.xsd  \n       \"\n      default-autowire=\"byName\">\n    </bean>\n```\n <code>&lt;<dubbo /&gt;</code>  DubboNamespaceHandler \n default \n```bash\nprivate void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) {\n   if (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) {\n      //  <import /> \n      importBeanDefinitionResource(ele);\n   }\n   else if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) {\n      //  <alias /> \n      // <alias name=\"fromName\" alias=\"toName\"/>\n      processAliasRegistration(ele);\n   }\n   else if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) {\n      //  <bean /> \n      processBeanDefinition(ele, delegate);\n   }\n   else if (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) {\n      //  <beans /> \n      doRegisterBeanDefinitions(ele);\n   }\n}\n```\n <bean /> \n\n**processBeanDefinition  bean **\n processBeanDefinition  <code>&lt;bean /&gt;</code> \n\n// DefaultBeanDefinitionDocumentReader 298\n```bash\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n   //  <bean />  BeanDefinitionHolder \n   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n\n   // \n\n   if (bdHolder != null) {\n      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n      try {\n         // Register the final decorated instance.\n         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n      }\n      catch (BeanDefinitionStoreException ex) {\n         getReaderContext().error(\"Failed to register bean definition with name '\" +\n               bdHolder.getBeanName() + \"'\", ele, ex);\n      }\n      // Send registration event.\n      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n   }\n}\n```\n <code>&lt;bean /&gt;</code> \n\nProperty||\n:-:|:-:|\nclass|\nname| idname()\nscope|\nconstructor arguments|\nproperties|\nautowiring mode|no()byNamebyType constructor\nlazy-initialization mode|(bean)\ninitialization method|bean \ndestruction method|bean  \n\n\n Spring \n\n\n```bash\n<bean id=\"exampleBean\" name=\"name1, name2, name3\" class=\"com.loonycoder.ExampleBean\"\n      scope=\"singleton\" lazy-init=\"true\" init-method=\"init\" destroy-method=\"cleanup\">\n\n    <!--  -->\n    <constructor-arg type=\"int\" value=\"7500000\"/>\n    <constructor-arg name=\"years\" value=\"7500000\"/>\n    <constructor-arg index=\"0\" value=\"7500000\"/>\n\n    <!-- property  -->\n    <property name=\"beanOne\">\n        <ref bean=\"anotherExampleBean\"/>\n    </property>\n    <property name=\"beanTwo\" ref=\"yetAnotherBean\"/>\n    <property name=\"integerProperty\" value=\"1\"/>\n</bean>\n```\n factory-beanfactory-method<code>&lt;lockup-method /&gt;&lt;replaced-method /&gt;&lt;meta /&gt;&lt;qualifier /&gt;</code>  Spring  bean \n\n bean  BeanDefinitionHolder \n\n// BeanDefinitionParserDelegate 428\n```bash\npublic BeanDefinitionHolder parseBeanDefinitionElement(Element ele) {\n    return parseBeanDefinitionElement(ele, null);\n}\n\npublic BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) {\n   String id = ele.getAttribute(ID_ATTRIBUTE);\n   String nameAttr = ele.getAttribute(NAME_ATTRIBUTE);\n\n   List<String> aliases = new ArrayList<String>();\n\n   //  name    \n   //  name \n   //  id  name 20\n   if (StringUtils.hasLength(nameAttr)) {\n      String[] nameArr = StringUtils.tokenizeToStringArray(nameAttr, MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n      aliases.addAll(Arrays.asList(nameArr));\n   }\n\n   String beanName = id;\n   // id, beanName\n   if (!StringUtils.hasText(beanName) && !aliases.isEmpty()) {\n      beanName = aliases.remove(0);\n      if (logger.isDebugEnabled()) {\n         logger.debug(\"No XML 'id' specified - using '\" + beanName +\n               \"' as bean name and \" + aliases + \" as aliases\");\n      }\n   }\n\n   if (containingBean == null) {\n      checkNameUniqueness(beanName, aliases, ele);\n   }\n\n   //  <bean ...>...</bean>  BeanDefinition,\n   //  BeanDefinition \n   AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean);\n\n   //  <bean />  BeanDefinition \n   if (beanDefinition != null) {\n      //  id  name beanName  null\n      // \n      if (!StringUtils.hasText(beanName)) {\n         try {\n            if (containingBean != null) {//  containingBean  null \n               beanName = BeanDefinitionReaderUtils.generateBeanName(\n                     beanDefinition, this.readerContext.getRegistry(), true);\n            }\n            else {\n               //  id  name\n               //   1. beanName com.loonycoder.service.MessageServiceImpl#0\n               //   2. beanClassName com.loonycoder.service.MessageServiceImpl\n\n               beanName = this.readerContext.generateBeanName(beanDefinition);\n\n               String beanClassName = beanDefinition.getBeanClassName();\n               if (beanClassName != null &&\n                     beanName.startsWith(beanClassName) && beanName.length() > beanClassName.length() &&\n                     !this.readerContext.getRegistry().isBeanNameInUse(beanClassName)) {\n                  //  beanClassName  Bean \n                  aliases.add(beanClassName);\n               }\n            }\n            if (logger.isDebugEnabled()) {\n               logger.debug(\"Neither XML 'id' nor 'name' specified - \" +\n                     \"using generated bean name [\" + beanName + \"]\");\n            }\n         }\n         catch (Exception ex) {\n            error(ex.getMessage(), ele);\n            return null;\n         }\n      }\n      String[] aliasesArray = StringUtils.toStringArray(aliases);\n      //  BeanDefinitionHolder\n      return new BeanDefinitionHolder(beanDefinition, beanName, aliasesArray);\n   }\n\n   return null;\n}\n```\n BeanDefinition \n```bash\npublic AbstractBeanDefinition parseBeanDefinitionElement(\n      Element ele, String beanName, BeanDefinition containingBean) {\n\n   this.parseState.push(new BeanEntry(beanName));\n\n   String className = null;\n   if (ele.hasAttribute(CLASS_ATTRIBUTE)) {\n      className = ele.getAttribute(CLASS_ATTRIBUTE).trim();\n   }\n\n   try {\n      String parent = null;\n      if (ele.hasAttribute(PARENT_ATTRIBUTE)) {\n         parent = ele.getAttribute(PARENT_ATTRIBUTE);\n      }\n      //  BeanDefinition\n      AbstractBeanDefinition bd = createBeanDefinition(className, parent);\n\n      //  BeanDefinition  AbstractBeanDefinition \n      parseBeanDefinitionAttributes(ele, beanName, containingBean, bd);\n      bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT));\n\n      /**\n       *  <bean>......</bean> \n       *  bd \n       */\n\n      //  <meta />\n      parseMetaElements(ele, bd);\n      //  <lookup-method />\n      parseLookupOverrideSubElements(ele, bd.getMethodOverrides());\n      //  <replaced-method />\n      parseReplacedMethodSubElements(ele, bd.getMethodOverrides());\n    //  <constructor-arg />\n      parseConstructorArgElements(ele, bd);\n      //  <property />\n      parsePropertyElements(ele, bd);\n      //  <qualifier />\n      parseQualifierElements(ele, bd);\n\n      bd.setResource(this.readerContext.getResource());\n      bd.setSource(extractSource(ele));\n\n      return bd;\n   }\n   catch (ClassNotFoundException ex) {\n      error(\"Bean class [\" + className + \"] not found\", ele, ex);\n   }\n   catch (NoClassDefFoundError err) {\n      error(\"Class that bean class [\" + className + \"] depends on not found\", ele, err);\n   }\n   catch (Throwable ex) {\n      error(\"Unexpected failure during bean definition parsing\", ele, ex);\n   }\n   finally {\n      this.parseState.pop();\n   }\n\n   return null;\n}\n```\n <code>&lt;bean /&gt;</code>  BeanDefinitionHolder \n\n <code>&lt;bean /&gt;</code> :\n```bash\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n   //  <bean />  BeanDefinitionHolder\n   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n   if (bdHolder != null) {\n      // \n      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n      try {\n         //  Bean \n         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n      }\n      catch (BeanDefinitionStoreException ex) {\n         getReaderContext().error(\"Failed to register bean definition with name '\" +\n               bdHolder.getBeanName() + \"'\", ele, ex);\n      }\n      // \n      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n   }\n}\n```\n <code>&lt;bean /&gt;</code>  BeanDefinitionHolder  BeanDefinition  beanNamealiases  BeanDefinition \n```bash\npublic class BeanDefinitionHolder implements BeanMetadataElement {\n\n  private final BeanDefinition beanDefinition;\n\n  private final String beanName;\n\n  private final String[] aliases;\n...\n```\n BeanDefinition\n\n Bean \n\n** Bean**\n// BeanDefinitionReaderUtils 143\n```bash\npublic static void registerBeanDefinition(\n      BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)\n      throws BeanDefinitionStoreException {\n\n   String beanName = definitionHolder.getBeanName();\n   //  Bean\n   registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());\n\n   //  Bean \n   String[] aliases = definitionHolder.getAliases();\n   if (aliases != null) {\n      for (String alias : aliases) {\n         // alias -> beanName  map \n         //  alias  beanName\n         registry.registerAlias(beanName, alias);\n      }\n   }\n}\n```\n Bean\n\n// DefaultListableBeanFactory 793\n```bash\n@Override\npublic void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n      throws BeanDefinitionStoreException {\n\n   Assert.hasText(beanName, \"Bean name must not be empty\");\n   Assert.notNull(beanDefinition, \"BeanDefinition must not be null\");\n\n   if (beanDefinition instanceof AbstractBeanDefinition) {\n      try {\n         ((AbstractBeanDefinition) beanDefinition).validate();\n      }\n      catch (BeanDefinitionValidationException ex) {\n         throw new BeanDefinitionStoreException(...);\n      }\n   }\n\n   // old?   bean  allowBeanDefinitionOverriding\n   BeanDefinition oldBeanDefinition;\n\n   //  Bean  beanDefinitionMap \n   oldBeanDefinition = this.beanDefinitionMap.get(beanName);\n\n   //  Bean \n   if (oldBeanDefinition != null) {\n      if (!isAllowBeanDefinitionOverriding()) {\n         // \n         throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription()...\n      }\n      else if (oldBeanDefinition.getRole() < beanDefinition.getRole()) {\n         // log... Bean  Bean \n      }\n      else if (!beanDefinition.equals(oldBeanDefinition)) {\n         // log... Bean  Bean\n      }\n      else {\n         // log... Bean  Bean equals  true  Bean\n      }\n      // \n      this.beanDefinitionMap.put(beanName, beanDefinition);\n   }\n   else {\n      //  Bean .\n      // \"Bean\" Bean \n      //  Spring    singleton beans\n      if (hasBeanCreationStarted()) {\n         // Cannot modify startup-time collection elements anymore (for stable iteration)\n         synchronized (this.beanDefinitionMap) {\n            this.beanDefinitionMap.put(beanName, beanDefinition);\n            List<String> updatedDefinitions = new ArrayList<String>(this.beanDefinitionNames.size() + 1);\n            updatedDefinitions.addAll(this.beanDefinitionNames);\n            updatedDefinitions.add(beanName);\n            this.beanDefinitionNames = updatedDefinitions;\n            if (this.manualSingletonNames.contains(beanName)) {\n               Set<String> updatedSingletons = new LinkedHashSet<String>(this.manualSingletonNames);\n               updatedSingletons.remove(beanName);\n               this.manualSingletonNames = updatedSingletons;\n            }\n         }\n      }\n      else {\n         // \n\n         //  BeanDefinition  map  map  BeanDefinition\n         this.beanDefinitionMap.put(beanName, beanDefinition);\n         //  ArrayList bean  Bean \n         this.beanDefinitionNames.add(beanName);\n         //  LinkedHashSet singleton bean\n         //  remove  Bean \n         //  bean \n         //     registerSingleton(String beanName, Object singletonObject)\n         // Spring \"\" Bean\n         //  \"environment\"\"systemProperties\"  bean Bean \n         this.manualSingletonNames.remove(beanName);\n      }\n      // \n      this.frozenBeanDefinitionNames = null;\n   }\n\n   if (oldBeanDefinition != null || containsSingleton(beanName)) {\n      resetBeanDefinition(beanName);\n   }\n}\n```\n Bean <code>&lt;bean /&gt;</code>  BeanDefinition BeanDefinition \n\n---------  ---------\n\n\n\n#### Bean \n refresh()  obtainFreshBeanFactory() \n\n\n\n```bash\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n   //  refresh() \n   synchronized (this.startupShutdownMonitor) {\n\n      // \n      prepareRefresh();\n\n      //  Bean  BeanFactory \n      //  Bean \n      // ( beanName-> beanDefinition  map)\n      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n      //  BeanFactory  BeanPostProcessor bean\n      // \n      prepareBeanFactory(beanFactory);\n\n      try {\n         //  BeanFactoryPostProcessor Bean \n         // Spring  postProcessBeanFactory \n\n         //  Bean \n         //  BeanFactoryPostProcessor \n         postProcessBeanFactory(beanFactory);\n         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) \n         invokeBeanFactoryPostProcessors(beanFactory);          \n\n\n\n         //  BeanPostProcessor  BeanFactoryPostProcessor \n         // : postProcessBeforeInitialization  postProcessAfterInitialization\n         //  Bean \n         registerBeanPostProcessors(beanFactory);\n\n         //  ApplicationContext  MessageSource\n         initMessageSource();\n\n         //  ApplicationContext \n         initApplicationEventMulticaster();\n\n         // ()\n         //  Bean singleton beans \n         onRefresh();\n\n         //  ApplicationListener \n         registerListeners();\n\n         // \n         //  singleton beans\n         //lazy-init \n         finishBeanFactoryInitialization(beanFactory);\n\n         // ApplicationContext \n         finishRefresh();\n      }\n\n      catch (BeansException ex) {\n         if (logger.isWarnEnabled()) {\n            logger.warn(\"Exception encountered during context initialization - \" +\n                  \"cancelling refresh attempt: \" + ex);\n         }\n\n         // Destroy already created singletons to avoid dangling resources.\n         //  singleton  Beans bean \n         destroyBeans();\n\n         // Reset 'active' flag.\n         cancelRefresh(ex);\n\n         // \n         throw ex;\n      }\n\n      finally {\n         // Reset common introspection caches in Spring's core, since we\n         // might not ever need metadata for singleton beans anymore...\n         resetCommonCaches();\n      }\n   }\n}\n```\n\n####  Bean : prepareBeanFactory\nSpring  xml  bean \"\" bean\n\n prepareBeanFactory(factory) \n```bash\n/**\n * Configure the factory's standard context characteristics,\n * such as the context's ClassLoader and post-processors.\n * @param beanFactory the BeanFactory to configure\n */\nprotected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n   //  BeanFactory  BeanFactory \n   //  ApplicationContext \n   beanFactory.setBeanClassLoader(getClassLoader());\n\n   //  BeanExpressionResolver\n   beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));\n   // \n   beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));\n\n   //  BeanPostProcessor processor \n   //  Aware  beans  processor \n   //  ApplicationContext  implement ApplicationContextAware\n   //  ApplicationContextAware\n   //    EnvironmentAwareResourceLoaderAware \n   beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));\n\n   //  bean \n   // Spring \n   beanFactory.ignoreDependencyInterface(EnvironmentAware.class);\n   beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);\n   beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);\n   beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);\n   beanFactory.ignoreDependencyInterface(MessageSourceAware.class);\n   beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);\n\n   /**\n    *  bean  bean \n    * \" ApplicationContext  BeanFactory\"\n    * ApplicationContext  ResourceLoaderApplicationEventPublisherMessageSource\n    *  this this  ApplicationContext\n    *  MessageSource  MessageSource  bean\n    */\n   beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);\n   beanFactory.registerResolvableDependency(ResourceLoader.class, this);\n   beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);\n   beanFactory.registerResolvableDependency(ApplicationContext.class, this);\n\n   //  BeanPostProcessor  bean  ApplicationListener \n   //  listener  \n   beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));\n\n   //  beanloadTimeWeaver\n   // tips: ltw  AspectJ  Spring AOP \n   \n   if (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n      beanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n      // Set a temporary ClassLoader for type matching.\n      beanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n   }\n\n   /**\n    * Spring  \"\"  bean\n    * \n    */\n\n   //  \"environment\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) {\n      beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());\n   }\n   //  \"systemProperties\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) {\n      beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());\n   }\n   //  \"systemEnvironment\"  bean Spring  \"\" \n   if (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) {\n      beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());\n   }\n}\n```\n\nSpring  bean \n\n####  singleton beans\n <code>finishBeanFactoryInitialization(beanFactory);</code>  singleton beans\n\n********Spring  singleton beans \n\n BeanFactory  BeanFactoryPostProcessor  Bean  postProcessBeanFactory(factory)  Spring  Bean <code>environment</code><code>systemProperties</code> \n\n singleton beans  Spring  singleton beans\n// AbstractApplicationContext.java 834\n```bash\n//  singleton beans\nprotected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) {\n\n   //  conversionService  Bean ConversionService\n   //  Bean \n   //  beanFactory.getBean(...) \n   if (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &&\n         beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {\n      beanFactory.setConversionService(\n            beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));\n   }\n\n   // Register a default embedded value resolver if no bean post-processor\n   // (such as a PropertyPlaceholderConfigurer bean) registered any before:\n   // at this point, primarily for resolution in annotation attribute values.\n   if (!beanFactory.hasEmbeddedValueResolver()) {\n      beanFactory.addEmbeddedValueResolver(new StringValueResolver() {\n         @Override\n         public String resolveStringValue(String strVal) {\n            return getEnvironment().resolvePlaceholders(strVal);\n         }\n      });\n   }\n\n   //  LoadTimeWeaverAware  Bean\n   //  AspectJ \n   String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, false, false);\n   for (String weaverAwareName : weaverAwareNames) {\n      getBean(weaverAwareName);\n   }\n\n   // Stop using the temporary ClassLoader for type matching.\n   beanFactory.setTempClassLoader(null);\n\n   // Spring  singleton beans \n   //  bean \n   beanFactory.freezeConfiguration();\n\n   // \n   beanFactory.preInstantiateSingletons();\n}\n```\n DefaultListableBeanFactory \n\n**preInstantiateSingletons**\n// DefaultListableBeanFactory 728\n```bash\n@Override\npublic void preInstantiateSingletons() throws BeansException {\n   if (this.logger.isDebugEnabled()) {\n      this.logger.debug(\"Pre-instantiating singletons in \" + this);\n   }\n   // this.beanDefinitionNames  beanNames\n   List<String> beanNames = new ArrayList<String>(this.beanDefinitionNames);\n\n   //  singleton beans \n   for (String beanName : beanNames) {\n\n      //  Bean  <bean id=\"\" class=\"\" parent=\"\" />  parent\n      //  \"Bean \"\n      RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n\n      //  singletons 'abstract = true'\n      if (!bd.isAbstract() && bd.isSingleton() && !bd.isLazyInit()) {\n         //  FactoryBean( FactoryBean)\n         if (isFactoryBean(beanName)) {\n            // FactoryBean  beanName  &  getBeangetBean \n            final FactoryBean<?> factory = (FactoryBean<?>) getBean(FACTORY_BEAN_PREFIX + beanName);\n            //  FactoryBean  SmartFactoryBean \n            boolean isEagerInit;\n            if (System.getSecurityManager() != null && factory instanceof SmartFactoryBean) {\n               isEagerInit = AccessController.doPrivileged(new PrivilegedAction<Boolean>() {\n                  @Override\n                  public Boolean run() {\n                     return ((SmartFactoryBean<?>) factory).isEagerInit();\n                  }\n               }, getAccessControlContext());\n            }\n            else {\n               isEagerInit = (factory instanceof SmartFactoryBean &&\n                     ((SmartFactoryBean<?>) factory).isEagerInit());\n            }\n            if (isEagerInit) {\n\n               getBean(beanName);\n            }\n         }\n         else {\n            //  Bean getBean(beanName) \n            getBean(beanName);\n         }\n      }\n   }\n\n   //  singleton beans \n   //  bean  SmartInitializingSingleton \n   for (String beanName : beanNames) {\n      Object singletonInstance = getSingleton(beanName);\n      if (singletonInstance instanceof SmartInitializingSingleton) {\n         final SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;\n         if (System.getSecurityManager() != null) {\n            AccessController.doPrivileged(new PrivilegedAction<Object>() {\n               @Override\n               public Object run() {\n                  smartSingleton.afterSingletonsInstantiated();\n                  return null;\n               }\n            }, getAccessControlContext());\n         }\n         else {\n            smartSingleton.afterSingletonsInstantiated();\n         }\n      }\n   }\n}\n```\n getBean(beanName)  BeanFactory  Bean\n\n**getBean**\n FactoryBean  FactoryBean\n\n// AbstractBeanFactory 196\n```bash\n@Override\npublic Object getBean(String name) throws BeansException {\n   return doGetBean(name, null, null, false);\n}\n\n//  Bean  getBean  Bean \n// \n@SuppressWarnings(\"unchecked\")\nprotected <T> T doGetBean(\n      final String name, final Class<T> requiredType, final Object[] args, boolean typeCheckOnly)\n      throws BeansException {\n   //   beanName FactoryBean( &)\n   //  getBean Bean \n   final String beanName = transformedBeanName(name);\n\n   // \n   Object bean; \n\n   // \n   Object sharedInstance = getSingleton(beanName);\n\n   //  args  getBean(beanName)\n   //  args  null  args  Bean Bean\n   if (sharedInstance != null && args == null) {\n      if (logger.isDebugEnabled()) {\n         if (isSingletonCurrentlyInCreation(beanName)) {\n            logger.debug(\"...\");\n         }\n         else {\n            logger.debug(\"Returning cached instance of singleton bean '\" + beanName + \"'\");\n         }\n      }\n      //  Bean  sharedInstance\n      //  FactoryBean \n      // (FactoryBean )\n      bean = getObjectForBeanInstance(sharedInstance, name, beanName, null);\n   }\n\n   else {\n      if (isPrototypeCurrentlyInCreation(beanName)) {\n         //  beanName  prototype  bean\n         // \n         throw new BeanCurrentlyInCreationException(beanName);\n      }\n\n      //  BeanDefinition \n      BeanFactory parentBeanFactory = getParentBeanFactory();\n      if (parentBeanFactory != null && !containsBeanDefinition(beanName)) {\n         //  BeanDefinition\n         String nameToLookup = originalBeanName(name);\n         if (args != null) {\n            // \n            return (T) parentBeanFactory.getBean(nameToLookup, args);\n         }\n         else {\n            // No args -> delegate to standard getBean method.\n            return parentBeanFactory.getBean(nameToLookup, requiredType);\n         }\n      }\n\n      if (!typeCheckOnly) {\n         // typeCheckOnly  false beanName  alreadyCreated  Set \n         markBeanAsCreated(beanName);\n      }\n\n      /*\n       * \n       *  Bean  singleton  Bean  Bean\n       *  prototype  Bean  Bean\n       */\n      try {\n         final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);\n         checkMergedBeanDefinition(mbd, beanName, args);\n\n         //  Bean\n         //  depends-on \n         String[] dependsOn = mbd.getDependsOn();\n         if (dependsOn != null) {\n            for (String dep : dependsOn) {\n               // \n               if (isDependent(beanName, dep)) {\n                  throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n                        \"'Circular depends-on relationship between '\" + beanName + \"' and '\" + dep + \"'\");\n               }\n               // \n               registerDependentBean(dep, beanName);\n               // \n               getBean(dep);\n            }\n         }\n\n         //  singleton scope  singleton \n         if (mbd.isSingleton()) {\n            sharedInstance = getSingleton(beanName, new ObjectFactory<Object>() {\n               @Override\n               public Object getObject() throws BeansException {\n                  try {\n                     //  Bean\n                     return createBean(beanName, mbd, args);\n                  }\n                  catch (BeansException ex) {\n                     destroySingleton(beanName);\n                     throw ex;\n                  }\n               }\n            });\n            bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);\n         }\n\n         //  prototype scope  prototype \n         else if (mbd.isPrototype()) {\n            // Its a prototype -> create a new instance.\n            Object prototypeInstance = null;\n            try {\n               beforePrototypeCreation(beanName);\n               //  Bean\n               prototypeInstance = createBean(beanName, mbd, args);\n            }\n            finally {\n               afterPrototypeCreation(beanName);\n            }\n            bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);\n         }\n\n         //  singleton  prototype \n         else {\n            String scopeName = mbd.getScope();\n            final Scope scope = this.scopes.get(scopeName);\n            if (scope == null) {\n               throw new IllegalStateException(\"No Scope registered for scope name '\" + scopeName + \"'\");\n            }\n            try {\n               Object scopedInstance = scope.get(beanName, new ObjectFactory<Object>() {\n                  @Override\n                  public Object getObject() throws BeansException {\n                     beforePrototypeCreation(beanName);\n                     try {\n                        //  Bean\n                        return createBean(beanName, mbd, args);\n                     }\n                     finally {\n                        afterPrototypeCreation(beanName);\n                     }\n                  }\n               });\n               bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);\n            }\n            catch (IllegalStateException ex) {\n               throw new BeanCreationException(beanName,\n                     \"Scope '\" + scopeName + \"' is not active for the current thread; consider \" +\n                     \"defining a scoped proxy for this bean if you intend to refer to it from a singleton\",\n                     ex);\n            }\n         }\n      }\n      catch (BeansException ex) {\n         cleanupAfterBeanCreationFailure(beanName);\n         throw ex;\n      }\n   }\n\n   // \n   if (requiredType != null && bean != null && !requiredType.isInstance(bean)) {\n      try {\n         return getTypeConverter().convertIfNecessary(bean, requiredType);\n      }\n      catch (TypeMismatchException ex) {\n         if (logger.isDebugEnabled()) {\n            logger.debug(\"Failed to convert bean '\" + name + \"' to required type '\" +\n                  ClassUtils.getQualifiedName(requiredType) + \"'\", ex);\n         }\n         throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n      }\n   }\n   return (T) bean;\n}\n```\n createBean \n```bash\nprotected abstract Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException;\n```\n args  Bean args  null\n\n AbstractAutowireCapableBeanFactoryAutowireCapable\n\n @Autowired \n```bash\npublic class MessageServiceImpl implements MessageService {\n    @Autowired\n    private UserService userService;\n\n    public String getMessage() {\n        return userService.getMessage();\n    }\n}\n```\n```bash\n<bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\" />\n```\n xml   Spring \n\n\n\n// AbstractAutowireCapableBeanFactory 447\n```bash\n/**\n * Central method of this class: creates a bean instance,\n * populates the bean instance, applies post-processors, etc.\n * @see #doCreateBean\n */\n@Override\nprotected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException {\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Creating instance of bean '\" + beanName + \"'\");\n   }\n   RootBeanDefinition mbdToUse = mbd;\n\n   //  BeanDefinition  Class \n   Class<?> resolvedClass = resolveBeanClass(mbd, beanName);\n   if (resolvedClass != null && !mbd.hasBeanClass() && mbd.getBeanClassName() != null) {\n      mbdToUse = new RootBeanDefinition(mbd);\n      mbdToUse.setBeanClass(resolvedClass);\n   }\n\n   // MethodOverrides bean  <lookup-method /> \n   //  <replaced-method /> bean \n   // \n   try {\n      mbdToUse.prepareMethodOverrides();\n   }\n   catch (BeanDefinitionValidationException ex) {\n      throw new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),\n            beanName, \"Validation of method overrides failed\", ex);\n   }\n\n   try {\n      //  InstantiationAwareBeanPostProcessor \n      //  Spring AOP \n      Object bean = resolveBeforeInstantiation(beanName, mbdToUse);\n      if (bean != null) {\n         return bean; \n      }\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(mbdToUse.getResourceDescription(), beanName,\n            \"BeanPostProcessor before instantiation of bean failed\", ex);\n   }\n   //  bean\n   Object beanInstance = doCreateBean(beanName, mbdToUse, args);\n   if (logger.isDebugEnabled()) {\n      logger.debug(\"Finished creating instance of bean '\" + beanName + \"'\");\n   }\n   return beanInstance;\n}\n```\n\n**Bean**\n doCreateBean \n```bash\n/**\n * Actually create the specified bean. Pre-creation processing has already happened\n * at this point, e.g. checking {@code postProcessBeforeInstantiation} callbacks.\n * <p>Differentiates between default bean instantiation, use of a\n * factory method, and autowiring a constructor.\n * @param beanName the name of the bean\n * @param mbd the merged bean definition for the bean\n * @param args explicit arguments to use for constructor or factory method invocation\n * @return a new instance of the bean\n * @throws BeanCreationException if the bean could not be created\n * @see #instantiateBean\n * @see #instantiateUsingFactoryMethod\n * @see #autowireConstructor\n */\nprotected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args)\n      throws BeanCreationException {\n\n   // Instantiate the bean.\n   BeanWrapper instanceWrapper = null;\n   if (mbd.isSingleton()) {\n      instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);\n   }\n   if (instanceWrapper == null) {\n      //  FactoryBean Bean\n      instanceWrapper = createBeanInstance(beanName, mbd, args);\n   }\n   //  Bean    \"bean \"\n   final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null);\n   // \n   Class<?> beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null);\n   mbd.resolvedTargetType = beanType;\n\n   // MergedBeanDefinitionPostProcessor\n   synchronized (mbd.postProcessingLock) {\n      if (!mbd.postProcessed) {\n         try {\n            // MergedBeanDefinitionPostProcessor\n            applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);\n         }\n         catch (Throwable ex) {\n            throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n                  \"Post-processing of merged bean definition failed\", ex);\n         }\n         mbd.postProcessed = true;\n      }\n   }\n\n   // Eagerly cache singletons to be able to resolve circular references\n   // even when triggered by lifecycle interfaces like BeanFactoryAware.\n   // \n   boolean earlySingletonExposure = (mbd.isSingleton() && this.allowCircularReferences &&\n         isSingletonCurrentlyInCreation(beanName));\n   if (earlySingletonExposure) {\n      if (logger.isDebugEnabled()) {\n         logger.debug(\"Eagerly caching bean '\" + beanName +\n               \"' to allow for resolving potential circular references\");\n      }\n      addSingletonFactory(beanName, new ObjectFactory<Object>() {\n         @Override\n         public Object getObject() throws BeansException {\n            return getEarlyBeanReference(beanName, mbd, bean);\n         }\n      });\n   }\n\n   // Initialize the bean instance.\n   Object exposedObject = bean;\n   try {\n      // \n      populateBean(beanName, mbd, instanceWrapper);\n      if (exposedObject != null) {\n         //  init-method  InitializingBean  BeanPostProcessor \n         //  bean \n         exposedObject = initializeBean(beanName, exposedObject, mbd);\n      }\n   }\n   catch (Throwable ex) {\n      if (ex instanceof BeanCreationException && beanName.equals(((BeanCreationException) ex).getBeanName())) {\n         throw (BeanCreationException) ex;\n      }\n      else {\n         throw new BeanCreationException(\n               mbd.getResourceDescription(), beanName, \"Initialization of bean failed\", ex);\n      }\n   }\n\n   if (earlySingletonExposure) {\n      // \n      Object earlySingletonReference = getSingleton(beanName, false);\n      if (earlySingletonReference != null) {\n         if (exposedObject == bean) {\n            exposedObject = earlySingletonReference;\n         }\n         else if (!this.allowRawInjectionDespiteWrapping && hasDependentBean(beanName)) {\n            String[] dependentBeans = getDependentBeans(beanName);\n            Set<String> actualDependentBeans = new LinkedHashSet<String>(dependentBeans.length);\n            for (String dependentBean : dependentBeans) {\n               if (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) {\n                  actualDependentBeans.add(dependentBean);\n               }\n            }\n            if (!actualDependentBeans.isEmpty()) {\n               throw new BeanCurrentlyInCreationException(beanName,\n                     \"Bean with name '\" + beanName + \"' has been injected into other beans [\" +\n                     StringUtils.collectionToCommaDelimitedString(actualDependentBeans) +\n                     \"] in its raw version as part of a circular reference, but has eventually been \" +\n                     \"wrapped. This means that said other beans do not use the final version of the \" +\n                     \"bean. This is often the result of over-eager type matching - consider using \" +\n                     \"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\");\n            }\n         }\n      }\n   }\n\n   // Register bean as disposable.\n   try {\n      registerDisposableBeanIfNecessary(beanName, bean, mbd);\n   }\n   catch (BeanDefinitionValidationException ex) {\n      throw new BeanCreationException(\n            mbd.getResourceDescription(), beanName, \"Invalid destruction signature\", ex);\n   }\n\n   return exposedObject;\n}\n```\n doCreateBean \n\n doCreateBean  Bean  createBeanInstance  populateBean  initializeBean \n\n\n\n** Bean **\n createBeanInstance \n```bash\nprotected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) {\n   //  class\n   Class<?> beanClass = resolveBeanClass(mbd, beanName);\n\n   // \n   if (beanClass != null && !Modifier.isPublic(beanClass.getModifiers()) && !mbd.isNonPublicAccessAllowed()) {\n      throw new BeanCreationException(mbd.getResourceDescription(), beanName,\n            \"Bean class isn't public, and non-public access not allowed: \" + beanClass.getName());\n   }\n\n   if (mbd.getFactoryMethodName() != null)  {\n      //  FactoryBean\n      return instantiateUsingFactoryMethod(beanName, mbd, args);\n   }\n\n   //  prototype bean\n   //  \n   boolean resolved = false;\n   boolean autowireNecessary = false;\n   if (args == null) {\n      synchronized (mbd.constructorArgumentLock) {\n         if (mbd.resolvedConstructorOrFactoryMethod != null) {\n            resolved = true;\n            autowireNecessary = mbd.constructorArgumentsResolved;\n         }\n      }\n   }\n   if (resolved) {\n      if (autowireNecessary) {\n         // \n         return autowireConstructor(beanName, mbd, null, null);\n      }\n      else {\n         // \n         return instantiateBean(beanName, mbd);\n      }\n   }\n\n   // \n   Constructor<?>[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);\n   if (ctors != null ||\n         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR ||\n         mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args))  {\n      // \n      return autowireConstructor(beanName, mbd, ctors, args);\n   }\n\n   // \n   return instantiateBean(beanName, mbd);\n}\n```\n\n****\n```bash\nprotected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) {\n   try {\n      Object beanInstance;\n      final BeanFactory parent = this;\n      if (System.getSecurityManager() != null) {\n         beanInstance = AccessController.doPrivileged(new PrivilegedAction<Object>() {\n            @Override\n            public Object run() {\n\n               return getInstantiationStrategy().instantiate(mbd, beanName, parent);\n            }\n         }, getAccessControlContext());\n      }\n      else {\n         // \n         beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n      }\n      // \n      BeanWrapper bw = new BeanWrapperImpl(beanInstance);\n      initBeanWrapper(bw);\n      return bw;\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(\n            mbd.getResourceDescription(), beanName, \"Instantiation of bean failed\", ex);\n   }\n}\n```\n\n```bash\nbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n```\n:\n\n// SimpleInstantiationStrategy 59\n```bash\n@Override\npublic Object instantiate(RootBeanDefinition bd, String beanName, BeanFactory owner) {\n\n   //  java  CGLIB,\n   //  \"\" lookup-method  replaced-method \n   if (bd.getMethodOverrides().isEmpty()) {\n      Constructor<?> constructorToUse;\n      synchronized (bd.constructorArgumentLock) {\n         constructorToUse = (Constructor<?>) bd.resolvedConstructorOrFactoryMethod;\n         if (constructorToUse == null) {\n            final Class<?> clazz = bd.getBeanClass();\n            if (clazz.isInterface()) {\n               throw new BeanInstantiationException(clazz, \"Specified class is an interface\");\n            }\n            try {\n               if (System.getSecurityManager() != null) {\n                  constructorToUse = AccessController.doPrivileged(new PrivilegedExceptionAction<Constructor<?>>() {\n                     @Override\n                     public Constructor<?> run() throws Exception {\n                        return clazz.getDeclaredConstructor((Class[]) null);\n                     }\n                  });\n               }\n               else {\n                  constructorToUse = clazz.getDeclaredConstructor((Class[]) null);\n               }\n               bd.resolvedConstructorOrFactoryMethod = constructorToUse;\n            }\n            catch (Throwable ex) {\n               throw new BeanInstantiationException(clazz, \"No default constructor found\", ex);\n            }\n         }\n      }\n      // \n      return BeanUtils.instantiateClass(constructorToUse);\n   }\n   else {\n      //  CGLIB  CGLIB \n      // tips:  CGLIB  override  JDK \n      return instantiateWithMethodInjection(bd, beanName, owner);\n   }\n}\n```\n\n**bean **\n createBeanInstance(...)  populateBean(...) \n\n// AbstractAutowireCapableBeanFactory 1203\n```bash\nprotected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) {\n   // bean \n   PropertyValues pvs = mbd.getPropertyValues();\n\n   if (bw == null) {\n      if (!pvs.isEmpty()) {\n         throw new BeanCreationException(\n               mbd.getResourceDescription(), beanName, \"Cannot apply property values to null instance\");\n      }\n      else {\n         // Skip property population phase for null instance.\n         return;\n      }\n   }\n\n   // bean \n   // InstantiationAwareBeanPostProcessor  bean \n   // \n   boolean continueWithPropertyPopulation = true;\n   if (!mbd.isSynthetic() && hasInstantiationAwareBeanPostProcessors()) {\n      for (BeanPostProcessor bp : getBeanPostProcessors()) {\n         if (bp instanceof InstantiationAwareBeanPostProcessor) {\n            InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n            //  false BeanPostProcessor \n            if (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) {\n               continueWithPropertyPopulation = false;\n               break;\n            }\n         }\n      }\n   }\n\n   if (!continueWithPropertyPopulation) {\n      return;\n   }\n\n   if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME ||\n         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) {\n      MutablePropertyValues newPvs = new MutablePropertyValues(pvs);\n\n      //  bean  bean\n      if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) {\n         autowireByName(beanName, mbd, bw, newPvs);\n      }\n\n      // \n      if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) {\n         autowireByType(beanName, mbd, bw, newPvs);\n      }\n\n      pvs = newPvs;\n   }\n\n   boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();\n   boolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE);\n\n   if (hasInstAwareBpps || needsDepCheck) {\n      PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n      if (hasInstAwareBpps) {\n         for (BeanPostProcessor bp : getBeanPostProcessors()) {\n            if (bp instanceof InstantiationAwareBeanPostProcessor) {\n               InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n               //  BeanPostProcessor : AutowiredAnnotationBeanPostProcessor\n               //  @Autowired@Value \n               pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);\n               if (pvs == null) {\n                  return;\n               }\n            }\n         }\n      }\n      if (needsDepCheck) {\n         checkDependencies(beanName, mbd, filteredPds, pvs);\n      }\n   }\n   //  bean \n   applyPropertyValues(beanName, mbd, bw, pvs);\n}\n```\n\n**initializeBean**\n\n```bash\nprotected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) {\n   if (System.getSecurityManager() != null) {\n      AccessController.doPrivileged(new PrivilegedAction<Object>() {\n         @Override\n         public Object run() {\n            invokeAwareMethods(beanName, bean);\n            return null;\n         }\n      }, getAccessControlContext());\n   }\n   else {\n      //  bean  BeanNameAwareBeanClassLoaderAware  BeanFactoryAware \n      invokeAwareMethods(beanName, bean);\n   }\n\n   Object wrappedBean = bean;\n   if (mbd == null || !mbd.isSynthetic()) {\n      // BeanPostProcessor  postProcessBeforeInitialization \n      wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);\n   }\n\n   try {\n      //  bean  init-method\n      //  bean  InitializingBean  afterPropertiesSet() \n      invokeInitMethods(beanName, wrappedBean, mbd);\n   }\n   catch (Throwable ex) {\n      throw new BeanCreationException(\n            (mbd != null ? mbd.getResourceDescription() : null),\n            beanName, \"Invocation of init method failed\", ex);\n   }\n\n   if (mbd == null || !mbd.isSynthetic()) {\n      // BeanPostProcessor  postProcessAfterInitialization \n      wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);\n   }\n   return wrappedBean;\n}\n```\nBeanPostProcessor  init-method\n\n---\n\n### \n\n#### idname\n Bean  Spring beanName 0 aliases\n\n Spring  Bean  beanName\n```bash\nbeanFactory.getBean(\"beanName or alias\");\n```\n <code>&lt;bean /&gt;</code>  id  name\n```bash\n<bean id=\"messageService\" name=\"m1, m2, m3\" class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName  messageService 3  m1m2m3\n```bash\n<bean name=\"m1, m2, m3\" class=\"com.loonycoder.service.MessageServiceImpl\" />\n```\nbeanName  m1 2  m2m3\n```bash\n<bean class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName com.loonycoder.service.MessageServiceImpl#0\n\n 1  com.loonycoder.service.MessageServiceImpl\n```bash\n<bean id=\"messageService\" class=\"com.loonycoder.service.MessageServiceImpl\">\n```\nbeanName  messageService\n\n####  Bean \nallowBeanDefinitionOverriding  null Bean id  name \n\n Bean \n\n A  B B  A A  BB  C C  A allowCircularReferences  null\n\n\n\n Juergen Hoeller  jira \n```bash\npublic class NoBeanOverridingContextLoader extends ContextLoader {\n\n  @Override\n  protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) {\n    super.customizeContext(servletContext, applicationContext);\n    AbstractRefreshableApplicationContext arac = (AbstractRefreshableApplicationContext) applicationContext;\n    arac.setAllowBeanDefinitionOverriding(false);\n  }\n}\n```\n```bash\npublic class MyContextLoaderListener extends org.springframework.web.context.ContextLoaderListener {\n\n  @Override\n  protected ContextLoader createContextLoader() {\n    return new NoBeanOverridingContextLoader();\n  }\n\n}\n```\n```bash\n<listener>\n    <listener-class>com.loonycoder.MyContextLoaderListener</listener-class>  \n</listener>\n```\n\n#### profile\n\n```bash\n<beans profile=\"development\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"...\">\n\n    <jdbc:embedded-database id=\"dataSource\">\n        <jdbc:script location=\"classpath:com/loonycoder/config/sql/schema.sql\"/>\n        <jdbc:script location=\"classpath:com/oonycoder/config/sql/test-data.sql\"/>\n    </jdbc:embedded-database>\n</beans>\n```\n```bash\n<beans profile=\"production\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xsi:schemaLocation=\"...\">\n\n    <jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/datasource\"/>\n</beans>\n```\n profile=\"\"\n\n\n```bash\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\"\n    xsi:schemaLocation=\"...\">\n\n    <beans profile=\"development\">\n        <jdbc:embedded-database id=\"dataSource\">\n            <jdbc:script location=\"classpath:com/loonycoder/config/sql/schema.sql\"/>\n            <jdbc:script location=\"classpath:com/loonycoder/config/sql/test-data.sql\"/>\n        </jdbc:embedded-database>\n    </beans>\n\n    <beans profile=\"production\">\n        <jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/datasource\"/>\n    </beans>\n</beans>\n```\n\n\n profile Spring  spring.profiles.active \n\nSpring  spring.profiles.active JVM web.xml JNDI\n\n\n```bash\n-Dspring.profiles.active=\"profile1,profile2\"\n```\n> profile \n\n Environment  profile\n```bash\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\nctx.getEnvironment().setActiveProfiles(\"development\");\nctx.register(SomeConfig.class, StandaloneDataConfig.class, JndiDataConfig.class);\nctx.refresh(); // \n```\n Spring Boot  application.propertiesapplication-dev.propertiesapplication-prod.properties  application.properties application-{profile}.properties  profile\n```bash\njava -Dspring.profiles.active=prod -jar JavaDoop.jar\n```\n\n####  Bean\n factory-bean  FactoryBean  Spring  Bean FactoryBean\n\n Spring \n\n\n```bash\n<bean id=\"clientService\"\n    class=\"examples.ClientService\"\n    factory-method=\"createInstance\"/>\n```\n```bash\npublic class ClientService {\n    private static ClientService clientService = new ClientService();\n    private ClientService() {}\n\n    // \n    public static ClientService createInstance() {\n        return clientService;\n    }\n}\n```\n\n```bash\n<bean id=\"serviceLocator\" class=\"examples.DefaultServiceLocator\">\n    <!-- inject any dependencies required by this locator bean -->\n</bean>\n\n<bean id=\"clientService\"\n    factory-bean=\"serviceLocator\"\n    factory-method=\"createClientServiceInstance\"/>\n\n<bean id=\"accountService\"\n    factory-bean=\"serviceLocator\"\n    factory-method=\"createAccountServiceInstance\"/>\n```\n```bash\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    private static AccountService accountService = new AccountServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n\n    public AccountService createAccountServiceInstance() {\n        return accountService;\n    }\n}\n```\n\n#### FactoryBean\nFactoryBean  Bean \n```bash\npublic interface FactoryBean<T> {\n    T getObject() throws Exception;\n    Class<T> getObjectType();\n    boolean isSingleton();\n}\n```\n```bash\npublic class Person { \n    private Car car ;\n    private void setCar(Car car){ this.car = car;  }  \n}\n```\n Person  Bean Car  Car  Car \n```bash\npublic class MyCarFactoryBean implements FactoryBean<Car>{\n    private String make; \n    private int year ;\n\n    public void setMake(String m){ this.make =m ; }\n\n    public void setYear(int y){ this.year = y; }\n\n    public Car getObject(){ \n      //  Car \n      CarBuilder cb = CarBuilder.car();\n\n      if(year!=0) cb.setYear(this.year);\n      if(StringUtils.hasText(this.make)) cb.setMake( this.make ); \n      return cb.factory(); \n    }\n\n    public Class<Car> getObjectType() { return Car.class ; } \n\n    public boolean isSingleton() { return false; }\n}\n```\n\n```bash\n<bean class = \"com.loonycoder.MyCarFactoryBean\" id = \"car\">\n  <property name = \"make\" value =\"Honda\"/>\n  <property name = \"year\" value =\"1994\"/>\n</bean>\n<bean class = \"com.loonycoder.Person\" id = \"josh\">\n  <property name = \"car\" ref = \"car\"/>\n</bean>\n```\nid  car  bean  FactoryBean Person  Bean  FactoryBean  Spring \n\n xml  Bean  java  config \n```bash\n@Configuration \npublic class CarConfiguration { \n\n    @Bean \n    public MyCarFactoryBean carFactoryBean(){ \n      MyCarFactoryBean cfb = new MyCarFactoryBean();\n      cfb.setMake(\"Honda\");\n      cfb.setYear(1994);\n      return cfb;\n    }\n\n    @Bean\n    public Person aPerson(){ \n    Person person = new Person();\n      // \n    person.setCar(carFactoryBean().getObject());\n    return person; \n    } \n}\n```\n MyCarFactoryBean  Bean  FactoryBean FactoryBean \n\n####  Bean \n\n```bash\n<bean id=\"exampleInitBean\" class=\"examples.ExampleBean\" init-method=\"init\"/>\n```\n```bash\npublic class AnotherExampleBean implements InitializingBean {\n\n    public void afterPropertiesSet() {\n        // do some initialization work\n    }\n}\n```\n```bash\n@Bean(initMethod = \"init\")\npublic Foo foo() {\n    return new Foo();\n}\n```\n```bash\n@PostConstruct\npublic void init() {\n\n}\n```\n\n####  Bean \n```bash\n<bean id=\"exampleInitBean\" class=\"examples.ExampleBean\" destroy-method=\"cleanup\"/>\n```\n```bash\npublic class AnotherExampleBean implements DisposableBean {\n\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n```\n```bash\n@Bean(destroyMethod = \"cleanup\")\npublic Bar bar() {\n    return new Bar();\n}\n```\n```bash\n@PreDestroy\npublic void cleanup() {\n\n}\n```\n\n#### ConversionService\n\n\n controller \n\n StringInteger  controller  Date  ConversionService \n```bash\n<bean id=\"conversionService\"\n  class=\"org.springframework.context.support.ConversionServiceFactoryBean\">\n  <property name=\"converters\">\n    <list>\n      <bean class=\"com.loonycoder.learning.utils.StringToEnumConverterFactory\"/>\n    </list>\n  </property>\n</bean>\n```\nConversionService  convert \n\n Converter \n\n\n```bash\npublic class StringToDateConverter implements Converter<String, Date> {\n\n    @Override\n    public Date convert(String source) {\n        try {\n            return DateUtils.parseDate(source, \"yyyy-MM-dd\", \"yyyy-MM-dd HH:mm:ss\", \"yyyy-MM-dd HH:mm\", \"HH:mm:ss\", \"HH:mm\");\n        } catch (ParseException e) {\n            return null;\n        }\n    }\n}\n```\n Bean  Date \n\n#### Bean \n Bean \n```bash\nRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n```\n <code>&lt;bean parent=\"\" /&gt;</code>  parent  Spring \n\n java child bean  parent bean \n\nSpring  AbstractBeanDefinition  <code>ChildBeanDefinition</code>  child bean\n\n:\n```bash\n<bean id=\"inheritedTestBean\" abstract=\"true\" class=\"org.springframework.beans.TestBean\">\n    <property name=\"name\" value=\"parent\"/>\n    <property name=\"age\" value=\"1\"/>\n</bean>\n\n<bean id=\"inheritsWithDifferentClass\" class=\"org.springframework.beans.DerivedTestBean\"\n        parent=\"inheritedTestBean\" init-method=\"initialize\">\n\n    <property name=\"name\" value=\"override\"/>\n</bean>\n```\nparent bean  <code>abstract=\"true\"</code> child bean  parent bean  name \n\nchild bean  scopeinit-methoddestroy-method \n\n parent bean  abstract = true  Spring  singleton beans  bean\n\n parent bean class bean  parent bean abstract = true\n```bash\n<bean id=\"inheritedTestBeanWithoutClass\" abstract=\"true\">\n    <property name=\"name\" value=\"parent\"/>\n    <property name=\"age\" value=\"1\"/>\n</bean>\n```\n\n#### \n Bean  singleton singleton  singleton prototype  prototype \n\n singleton  prototype  bean\n\n bean  BeanFactory  Spring \n\n Lookup method\n\n**lookup-method**\n Spring Reference \n```bash\npackage fiona.apple;\n\n// no more Spring imports!\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        // grab a new instance of the appropriate Command interface\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract Command createCommand();\n}\n```\nxml  <code>&lt;lookup-method /&gt;</code>\n```bash\n<!-- a stateful bean deployed as a prototype (non-singleton) -->\n<bean id=\"myCommand\" class=\"fiona.apple.AsyncCommand\" scope=\"prototype\">\n    <!-- inject dependencies here as required -->\n</bean>\n\n<!-- commandProcessor uses statefulCommandHelper -->\n<bean id=\"commandManager\" class=\"fiona.apple.CommandManager\">\n    <lookup-method name=\"createCommand\" bean=\"myCommand\"/>\n</bean>\n```\nSpring  **CGLIB**  final class final\n\nlookup-method  <code>&lt;lookup-method /&gt;</code> \n```bash\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup(\"myCommand\")\n    protected abstract Command createCommand();\n}\n```\n> <code>&lt;context:component-scan base-package=\"com.loonycoder\" /&gt;</code>\n\n\n```bash\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup\n    protected abstract MyCommand createCommand();\n}\n```\n>  MyCommand Command  Command\n\n**replaced-method**\n bean \n```bash\npublic class MyValueCalculator {\n\n    public String computeValue(String input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n```\n MethodReplacer \n```bash\npublic class ReplacementComputeValue implements org.springframework.beans.factory.support.MethodReplacer {\n\n    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {\n        // get the input value, work with it, and return a computed result\n        String input = (String) args[0];\n        ...\n        return ...;\n    }\n}\n```\n\n```bash\n<bean id=\"myValueCalculator\" class=\"x.y.z.MyValueCalculator\">\n    <!--  computeValue  -->\n    <replaced-method name=\"computeValue\" replacer=\"replacementComputeValue\">\n        <arg-type>String</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id=\"replacementComputeValue\" class=\"a.b.c.ReplacementComputeValue\"/>\n```\n> arg-type \n\n#### BeanPostProcessor\n BeanPostProcessor  Spring \n```bash\npublic interface BeanPostProcessor {\n\n   Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;\n\n   Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;\n\n}\n```\n bean  postProcessBeforeInitialization  postProcessAfterInitialization \n\n BeanPostProcessor Spring  BeanFactory  obtainFactory()  prepareBeanFactory(factory)Spring  BeanPostProcessorApplicationContextAwareProcessorApplicationListenerDetector\n\n bean  bean  bean  null\n\n bean  Spring  bean \n\n bean  BeanPostProcessor \n\n bean  AbstractAutowireCapableBeanFactory#initBean \n\n Aware  bean BeanPostProcessor  postProcessBeforeInitialization  init-method BeanPostProcessor  postProcessAfterInitialization \n\n---\n\n### \n\n\n Spring  Spring \n\n Spring  singleton beans  Spring \n\n\n","slug":"Spring-2","published":1,"updated":"2020-02-21T15:31:39.005Z","_id":"ck6w95e2w0007pos6gq7g6nrp","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<p><a href=\"https://javadoop.com/post/spring-ioc\" target=\"_blank\" rel=\"noopener\">https://javadoop.com/post/spring-ioc</a></p>\n<p><br></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    ApplicationContext context = new ClassPathXmlApplicationContext(<span class=\"string\">\"classpath:Application.xml\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Spring  maven  dependencies  Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class=\"line\">  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class=\"line\">  &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>spring-context  spring-corespring-beansspring-aopspring-expression  jar </p>\n</blockquote>\n<p> SpringMVC Spring Spring  web  Spring Spring <br><code>ApplicationContext context = new ClassPathXmlApplicationContext(...)</code> ClassPath  xml  xml  ApplicationContext  ClassPathXmlApplicationContext  ApplicationContext <br><img src=\"/images/spring-ioc1.png\" alt=\"spring\"></p>\n<blockquote>\n<p> Spring <br></p>\n</blockquote>\n<p>ClassPathXmlApplicationContext  ApplicationContext <br><strong>FileSystemXmlApplicationContext</strong><strong>AnnotationConfigApplicationContext</strong></p>\n<ol>\n<li><p><strong>FileSystemXmlApplicationContext</strong> xml  ClassPathXmlApplicationContext </p>\n</li>\n<li><p><strong>AnnotationConfigApplicationContext</strong> java </p>\n</li>\n</ol>\n<p> ClassPathXmlApplicationContext </p>\n<p> ApplicationContext</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface MessageService &#123;</span><br><span class=\"line\">    String getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MessageServiceImpl implements MessageService &#123;</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getMessage</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <strong>resources</strong>  Application.xml  Application-xxx.xml </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">       xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"</span> default-autowire=<span class=\"string\">\"byName\"</span>&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class App &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        //  ApplicationContext</span><br><span class=\"line\">        ApplicationContext context = new ClassPathXmlApplicationContext(<span class=\"string\">\"classpath:Application.xml\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"context \"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        //  context  Bean new MessageServiceImpl() </span><br><span class=\"line\">        MessageService messageService = context.getBean(MessageService.class);</span><br><span class=\"line\">        // : hello world</span><br><span class=\"line\">        System.out.println(messageService.getMessage());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Spring  ApplicationContext  IOC ApplicationContext  Bean Bean </p>\n<hr>\n<h3 id=\"BeanFactory-\"><a href=\"#BeanFactory-\" class=\"headerlink\" title=\"BeanFactory \"></a>BeanFactory </h3><p>BeanFactory bean  bean </p>\n<p> BeanFactory  ApplicationContext  BeanFactory BeanFactory <br><img src=\"/images/spring-ioc2.png\" alt=\"spring\"><br>ApplicationContext </p>\n<ul>\n<li>ApplicationContext  ListableBeanFactory Listable  Bean BeanFactory  Bean </li>\n<li>ApplicationContext  HierarchicalBeanFactoryHierarchical  BeanFactory BeanFactory </li>\n<li>AutowireCapableBeanFactory  Autowire  Bean ApplicationContext  ApplicationContext  getAutowireCapableBeanFactory() </li>\n<li>ConfigurableListableBeanFactory  ApplicationContext </li>\n<li><br> BeanFactoryListableBeanFactoryHierarchicalBeanFactoryAutowireCapableBeanFactoryApplicationContext </li>\n</ul>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> ClassPathXmlApplicationContext </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ClassPathXmlApplicationContext extends AbstractXmlApplicationContext &#123;</span><br><span class=\"line\">  private Resource[] configResources;</span><br><span class=\"line\"></span><br><span class=\"line\">  //  ApplicationContext </span><br><span class=\"line\">  public ClassPathXmlApplicationContext(ApplicationContext parent) &#123;</span><br><span class=\"line\">    super(parent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  public ClassPathXmlApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent)</span><br><span class=\"line\">      throws BeansException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    super(parent);</span><br><span class=\"line\">    // (tab)</span><br><span class=\"line\">    setConfigLocations(configLocations);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (refresh) &#123;</span><br><span class=\"line\">      refresh(); // </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>refresh()</code> refresh() init()  ApplicationContext  refresh() refresh()  ApplicationContext </p>\n<p>refresh() </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void refresh() throws BeansException, IllegalStateException &#123;</span><br><span class=\"line\">   //  refresh() </span><br><span class=\"line\">   synchronized (this.startupShutdownMonitor) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      // ( beanName-&gt; beanDefinition  map)</span><br><span class=\"line\">      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanFactory  BeanPostProcessor bean</span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  BeanFactoryPostProcessor Bean </span><br><span class=\"line\">         // Spring  postProcessBeanFactory </span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         //  BeanFactoryPostProcessor </span><br><span class=\"line\">         postProcessBeanFactory(beanFactory);</span><br><span class=\"line\">         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) </span><br><span class=\"line\">         invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanPostProcessor  BeanFactoryPostProcessor </span><br><span class=\"line\">         // : postProcessBeforeInitialization  postProcessAfterInitialization</span><br><span class=\"line\">         //  Bean  Bean </span><br><span class=\"line\">         registerBeanPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext  MessageSource</span><br><span class=\"line\">         initMessageSource();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext </span><br><span class=\"line\">         initApplicationEventMulticaster();</span><br><span class=\"line\"></span><br><span class=\"line\">         // ()</span><br><span class=\"line\">         //  Bean singleton beans </span><br><span class=\"line\">         onRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationListener </span><br><span class=\"line\">         registerListeners();</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         //  singleton beans</span><br><span class=\"line\">         //lazy-init </span><br><span class=\"line\">         finishBeanFactoryInitialization(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         // ApplicationContext </span><br><span class=\"line\">         finishRefresh();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class=\"line\">            logger.warn(<span class=\"string\">\"Exception encountered during context initialization - \"</span> +</span><br><span class=\"line\">                  <span class=\"string\">\"cancelling refresh attempt: \"</span> + ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         // Destroy already created singletons to avoid dangling resources.</span><br><span class=\"line\">         //  singleton  Beans bean </span><br><span class=\"line\">         destroyBeans();</span><br><span class=\"line\"></span><br><span class=\"line\">         // Reset <span class=\"string\">'active'</span> flag.</span><br><span class=\"line\">         cancelRefresh(ex);</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         // Reset common introspection caches <span class=\"keyword\">in</span> Spring<span class=\"string\">'s core, since we</span></span><br><span class=\"line\"><span class=\"string\">         // might not ever need metadata for singleton beans anymore...</span></span><br><span class=\"line\"><span class=\"string\">         resetCommonCaches();</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">   &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p> refresh() </p>\n<hr>\n<h4 id=\"-Bean--Bean\"><a href=\"#-Bean--Bean\" class=\"headerlink\" title=\" Bean  Bean\"></a> Bean  Bean</h4><p> refresh()  obtainFreshBeanFactory()</p>\n<p><strong></strong> BeanFactory Bean Bean </p>\n<p>Bean  Bean </p>\n<p>// AbstractApplicationContext.java</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected ConfigurableListableBeanFactory <span class=\"function\"><span class=\"title\">obtainFreshBeanFactory</span></span>() &#123;</span><br><span class=\"line\">   //  BeanFactory () BeanFactory Bean  Bean </span><br><span class=\"line\">   refreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanFactory</span><br><span class=\"line\">   ConfigurableListableBeanFactory beanFactory = getBeanFactory();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Bean factory for \"</span> + getDisplayName() + <span class=\"string\">\": \"</span> + beanFactory);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> beanFactory;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>// AbstractRefreshableApplicationContext.java 120</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected final void refreshBeanFactory() throws BeansException &#123;</span><br><span class=\"line\">   //  ApplicationContext  BeanFactory  Bean BeanFactory</span><br><span class=\"line\">   //  BeanFactory  BeanFactory</span><br><span class=\"line\">   // ApplicationContext  BeanFactory</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (hasBeanFactory()) &#123;</span><br><span class=\"line\">      destroyBeans();</span><br><span class=\"line\">      closeBeanFactory();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  DefaultListableBeanFactory</span><br><span class=\"line\">      DefaultListableBeanFactory beanFactory = createBeanFactory();</span><br><span class=\"line\">      //  BeanFactory </span><br><span class=\"line\">      beanFactory.setSerializationId(getId());</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      //  BeanFactory  Bean </span><br><span class=\"line\">      customizeBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      loadBeanDefinitions(beanFactory);</span><br><span class=\"line\">      synchronized (this.beanFactoryMonitor) &#123;</span><br><span class=\"line\">         this.beanFactory = beanFactory;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (IOException ex) &#123;</span><br><span class=\"line\">      throw new ApplicationContextException(<span class=\"string\">\"I/O error parsing bean definition source for \"</span> + getDisplayName(), ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> ApplicationContext ApplicationContext  BeanFactory BeanFactory  BeanFactoryDefaultListableBeanFactory BeanFactory </p>\n</blockquote>\n<p> <strong>DefaultListableBeanFactory</strong>  ConfigurableListableBeanFactory BeanFactory <br><img src=\"/images/spring-ioc2.png\" alt=\"spring\"></p>\n<p> ConfigurableListableBeanFactory  DefaultListableBeanFactory DefaultListableBeanFactory  AbstractAutowireCapableBeanFactory  DefaultListableBeanFactory  BeanFactory </p>\n<blockquote>\n<p> Spring IOC  bean<br> ApplicationContext  AutowireCapableBeanFactory DefaultListableBeanFactory <br> ApplicationContext  Spring</p>\n</blockquote>\n<p> BeanDefinition<strong> BeanFactory  Bean  Bean </strong></p>\n<p> BeanDefinition  Spring  Bean Bean  BeanDefinition  Spring  BeanFactory </p>\n<p> Bean  Bean  BeanDefinition </p>\n<blockquote>\n<p>BeanDefinition  Bean  Bean  Bean  Bean </p>\n</blockquote>\n<p><strong>BeanDefinition </strong><br> BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface BeanDefinition extends AttributeAccessor, BeanMetadataElement &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  sington  prototype </span><br><span class=\"line\">   //  request, session, globalSession, application, websocket </span><br><span class=\"line\">   //  web </span><br><span class=\"line\">   String SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;</span><br><span class=\"line\">   String SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   int ROLE_APPLICATION = 0;</span><br><span class=\"line\">   int ROLE_SUPPORT = 1;</span><br><span class=\"line\">   int ROLE_INFRASTRUCTURE = 2;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean bean  java </span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   void setParentName(String parentName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean</span><br><span class=\"line\">   String getParentName();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   void setBeanClassName(String beanClassName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String getBeanClassName();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   //  bean  scope</span><br><span class=\"line\">   void setScope(String scope);</span><br><span class=\"line\"></span><br><span class=\"line\">   String getScope();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   void setLazyInit(boolean lazyInit);</span><br><span class=\"line\"></span><br><span class=\"line\">   boolean isLazyInit();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean( @Autowire )</span><br><span class=\"line\">   //  depends-on=<span class=\"string\">\"\"</span> </span><br><span class=\"line\">   void setDependsOn(String... dependsOn);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String[] getDependsOn();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean </span><br><span class=\"line\">   //  <span class=\"literal\">false</span></span><br><span class=\"line\">   void setAutowireCandidate(boolean autowireCandidate);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean </span><br><span class=\"line\">   boolean isAutowireCandidate();</span><br><span class=\"line\"></span><br><span class=\"line\">   // Spring  primary  <span class=\"literal\">true</span>  bean</span><br><span class=\"line\">   void setPrimary(boolean primary);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  primary </span><br><span class=\"line\">   boolean isPrimary();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   void setFactoryBeanName(String factoryBeanName);</span><br><span class=\"line\">   // </span><br><span class=\"line\">   String getFactoryBeanName();</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   void setFactoryMethodName(String factoryMethodName);</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   String getFactoryMethodName();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   ConstructorArgumentValues getConstructorArgumentValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   // Bean  bean </span><br><span class=\"line\">   MutablePropertyValues getPropertyValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton</span><br><span class=\"line\">   boolean isSingleton();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  prototype</span><br><span class=\"line\">   boolean isPrototype();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  abstract</span><br><span class=\"line\">   //  bean ......</span><br><span class=\"line\">   boolean isAbstract();</span><br><span class=\"line\"></span><br><span class=\"line\">   int getRole();</span><br><span class=\"line\">   String getDescription();</span><br><span class=\"line\">   String getResourceDescription();</span><br><span class=\"line\">   BeanDefinition getOriginatingBeanDefinition();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> BeanDefinition <br> getInstance() </p>\n</blockquote>\n<p> BeanDefinition  refreshBeanFactory() </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">customizeBeanFactory(beanFactory);</span><br><span class=\"line\">loadBeanDefinitions(beanFactory);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><strong>customizeBeanFactory</strong></p>\n<p>customizeBeanFactory(beanFactory)  BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.allowBeanDefinitionOverriding != null) &#123;</span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      beanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.allowCircularReferences != null) &#123;</span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      beanFactory.setAllowCircularReferences(this.allowCircularReferences);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>BeanDefinition  bean  id  nameallowBeanDefinitionOverriding  null</p>\n<p>A  B B  A A  BB  C C  A</p>\n<p>Spring  A  B B  A </p>\n<p> Bean  Spring </p>\n<p></p>\n<p><strong>Bean:loadBeanDefinitions</strong></p>\n<p> loadBeanDefinitions(beanFactory)  Bean BeanFactory </p>\n<p> XmlBeanDefinitionReader </p>\n<p>// AbstractXmlApplicationContext.java 80</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**  XmlBeanDefinitionReader  Bean*/</span><br><span class=\"line\">@Override</span><br><span class=\"line\">protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException &#123;</span><br><span class=\"line\">   //  BeanFactory  XmlBeanDefinitionReader</span><br><span class=\"line\">   XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">   // Configure the bean definition reader with this context<span class=\"string\">'s</span></span><br><span class=\"line\"><span class=\"string\">   // resource loading environment.</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setEnvironment(this.getEnvironment());</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setResourceLoader(this);</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">   //  BeanDefinitionReader</span></span><br><span class=\"line\"><span class=\"string\">   // </span></span><br><span class=\"line\"><span class=\"string\">   initBeanDefinitionReader(beanDefinitionReader);</span></span><br><span class=\"line\"><span class=\"string\">   // </span></span><br><span class=\"line\"><span class=\"string\">   loadBeanDefinitions(beanDefinitionReader);</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p> Reader  xml </p>\n<p>// AbstractXmlApplicationContext.java 120</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException &#123;</span><br><span class=\"line\">   Resource[] configResources = getConfigResources();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (configResources != null) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      reader.loadBeanDefinitions(configResources);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   String[] configLocations = getConfigLocations();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (configLocations != null) &#123;</span><br><span class=\"line\">      // 2</span><br><span class=\"line\">      reader.loadBeanDefinitions(configLocations);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  Resource </span><br><span class=\"line\">@Override</span><br><span class=\"line\">public int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   Assert.notNull(resources, <span class=\"string\">\"Resource array must not be null\"</span>);</span><br><span class=\"line\">   int counter = 0;</span><br><span class=\"line\">   //  <span class=\"keyword\">for</span>  resource</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (Resource resource : resources) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      counter += loadBeanDefinitions(resource);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  counter BeanDefinition</span><br><span class=\"line\">   <span class=\"built_in\">return</span> counter;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// XmlBeanDefinitionReader 303</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> loadBeanDefinitions(new EncodedResource(resource));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// XmlBeanDefinitionReader 314</span><br><span class=\"line\">public int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   Assert.notNull(encodedResource, <span class=\"string\">\"EncodedResource must not be null\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isInfoEnabled()) &#123;</span><br><span class=\"line\">      logger.info(<span class=\"string\">\"Loading XML bean definitions from \"</span> + encodedResource.getResource());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  ThreadLocal </span><br><span class=\"line\">   Set&lt;EncodedResource&gt; currentResources = this.resourcesCurrentlyBeingLoaded.get();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (currentResources == null) &#123;</span><br><span class=\"line\">      currentResources = new HashSet&lt;EncodedResource&gt;(4);</span><br><span class=\"line\">      this.resourcesCurrentlyBeingLoaded.set(currentResources);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!currentResources.add(encodedResource)) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(</span><br><span class=\"line\">            <span class=\"string\">\"Detected cyclic loading of \"</span> + encodedResource + <span class=\"string\">\" - check your import definitions!\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      InputStream inputStream = encodedResource.getResource().getInputStream();</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         InputSource inputSource = new InputSource(inputStream);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (encodedResource.getEncoding() != null) &#123;</span><br><span class=\"line\">            inputSource.setEncoding(encodedResource.getEncoding());</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> doLoadBeanDefinitions(inputSource, encodedResource.getResource());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         inputStream.close();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (IOException ex) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(</span><br><span class=\"line\">            <span class=\"string\">\"IOException parsing XML document from \"</span> + encodedResource.getResource(), ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   finally &#123;</span><br><span class=\"line\">      currentResources.remove(encodedResource);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (currentResources.isEmpty()) &#123;</span><br><span class=\"line\">         this.resourcesCurrentlyBeingLoaded.remove();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  388 </span><br><span class=\"line\">protected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  xml  Document </span><br><span class=\"line\">      Document doc = doLoadDocument(inputSource, resource);</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> registerBeanDefinitions(doc, resource);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//  505 </span><br><span class=\"line\">//  Bean</span><br><span class=\"line\">public int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();</span><br><span class=\"line\">   int countBefore = getRegistry().getBeanDefinitionCount();</span><br><span class=\"line\">   // </span><br><span class=\"line\">   documentReader.registerBeanDefinitions(doc, createReaderContext(resource));</span><br><span class=\"line\">   <span class=\"built_in\">return</span> getRegistry().getBeanDefinitionCount() - countBefore;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// DefaultBeanDefinitionDocumentReader 90</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) &#123;</span><br><span class=\"line\">   this.readerContext = readerContext;</span><br><span class=\"line\">   logger.debug(<span class=\"string\">\"Loading bean definitions\"</span>);</span><br><span class=\"line\">   Element root = doc.getDocumentElement();</span><br><span class=\"line\">   //  xml </span><br><span class=\"line\">   doRegisterBeanDefinitions(root);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DOM  for </p>\n<p><strong>doRegisterBeanDefinitions</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// DefaultBeanDefinitionDocumentReader 116</span><br><span class=\"line\">protected void doRegisterBeanDefinitions(Element root) &#123;</span><br><span class=\"line\">   // BeanDefinitionParserDelegate  Bean </span><br><span class=\"line\">   //  parent? </span><br><span class=\"line\">   //  &lt;beans /&gt;  &lt;beans /&gt;  root  xml  &lt;beans /&gt; </span><br><span class=\"line\">   BeanDefinitionParserDelegate parent = this.delegate;</span><br><span class=\"line\">   this.delegate = createDelegate(getReaderContext(), root, parent);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.delegate.isDefaultNamespace(root)) &#123;</span><br><span class=\"line\">      //  &lt;beans ... profile=<span class=\"string\">\"dev\"</span> /&gt;  profile </span><br><span class=\"line\">      //  profile  profile <span class=\"built_in\">return</span>  &lt;beans /&gt; </span><br><span class=\"line\">      //  profile  profile </span><br><span class=\"line\">      String profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (StringUtils.hasText(profileSpec)) &#123;</span><br><span class=\"line\">         String[] specifiedProfiles = StringUtils.tokenizeToStringArray(</span><br><span class=\"line\">               profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isInfoEnabled()) &#123;</span><br><span class=\"line\">               logger.info(<span class=\"string\">\"Skipped XML bean definition file due to specified profiles [\"</span> + profileSpec +</span><br><span class=\"line\">                     <span class=\"string\">\"] not matching: \"</span> + getReaderContext().getResource());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   preProcessXml(root); // </span><br><span class=\"line\">   // </span><br><span class=\"line\">   parseBeanDefinitions(root, this.delegate);</span><br><span class=\"line\">   postProcessXml(root); // </span><br><span class=\"line\"></span><br><span class=\"line\">   this.delegate = parent;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>preProcessXml(root)  postProcessXml(root) </p>\n<p> profile  profile </p>\n<p> parseBeanDefinitions(root, this.delegate) :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// default namespace  &lt;import /&gt;&lt;<span class=\"built_in\">alias</span> /&gt;&lt;bean /&gt;  &lt;beans /&gt;</span><br><span class=\"line\">//  custom </span><br><span class=\"line\">protected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (delegate.isDefaultNamespace(root)) &#123;</span><br><span class=\"line\">      NodeList nl = root.getChildNodes();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (int i = 0; i &lt; nl.getLength(); i++) &#123;</span><br><span class=\"line\">         Node node = nl.item(i);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (node instanceof Element) &#123;</span><br><span class=\"line\">            Element ele = (Element) node;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (delegate.isDefaultNamespace(ele)) &#123;</span><br><span class=\"line\">               //  default namespace </span><br><span class=\"line\">               parseDefaultElement(ele, delegate);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               //  namespace </span><br><span class=\"line\">               delegate.parseCustomElement(ele);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      delegate.parseCustomElement(root);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> parseDefaultElement(ele, delegate);  delegate.parseCustomElement(ele); </p>\n<p>parseDefaultElement(ele, delegate)  <code>&lt;import /&gt;&lt;alias /&gt;&lt;bean /&gt;&lt;beans /&gt;</code></p>\n<blockquote>\n<p> default  namespace </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.springframework.org/schema/beans </span><br></pre></td></tr></table></figure>\n<p> namespace  xml xmlns </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">      xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">      xsi:schemaLocation=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">           http://www.springframework.org/schema/beans</span></span><br><span class=\"line\"><span class=\"string\">         http://www.springframework.org/schema/beans/spring-beans.xsd\"</span></span><br><span class=\"line\">      default-autowire=<span class=\"string\">\"byName\"</span>&gt; </span><br></pre></td></tr></table></figure>\n<p> delegate.parseCustomElement(element)  <code> &lt;mvc /&gt;&lt;task /&gt;&lt;context /&gt;&lt;aop /&gt;</code><br>  default  xml  namespace  .xsd  parser  MvcNamespaceHandlerTaskNamespaceHandlerContextNamespaceHandlerAopNamespaceHandler <br> <code>&lt;context:property-placeholder location=\"classpath:xx.properties\" /&gt;</code> ContextNamespaceHandler </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">     xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">     xmlns:context=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span><br><span class=\"line\">     xmlns:mvc=<span class=\"string\">\"http://www.springframework.org/schema/mvc\"</span></span><br><span class=\"line\">     xsi:schemaLocation=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/beans </span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/context</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/mvc   </span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/mvc/spring-mvc.xsd  </span></span><br><span class=\"line\"><span class=\"string\">      \"</span></span><br><span class=\"line\">     default-autowire=<span class=\"string\">\"byName\"</span>&gt;</span><br><span class=\"line\">   &lt;/bean&gt; </span><br></pre></td></tr></table></figure>\n<p> <code>&lt;<dubbo /&gt;</code>  DubboNamespaceHandler <br> default </p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;import /&gt; </span><br><span class=\"line\">      importBeanDefinitionResource(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;<span class=\"built_in\">alias</span> /&gt; </span><br><span class=\"line\">      // &lt;<span class=\"built_in\">alias</span> name=<span class=\"string\">\"fromName\"</span> <span class=\"built_in\">alias</span>=<span class=\"string\">\"toName\"</span>/&gt;</span><br><span class=\"line\">      processAliasRegistration(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;bean /&gt; </span><br><span class=\"line\">      processBeanDefinition(ele, delegate);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;beans /&gt; </span><br><span class=\"line\">      doRegisterBeanDefinitions(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <bean /> </p>\n<p><strong>processBeanDefinition  bean </strong><br> processBeanDefinition  <code>&lt;bean /&gt;</code> </p>\n<p>// DefaultBeanDefinitionDocumentReader 298</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinitionHolder </span><br><span class=\"line\">   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bdHolder != null) &#123;</span><br><span class=\"line\">      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         // Register the final decorated instance.</span><br><span class=\"line\">         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionStoreException ex) &#123;</span><br><span class=\"line\">         getReaderContext().error(<span class=\"string\">\"Failed to register bean definition with name '\"</span> +</span><br><span class=\"line\">               bdHolder.getBeanName() + <span class=\"string\">\"'\"</span>, ele, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // Send registration event.</span><br><span class=\"line\">      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code> </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Property</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">class</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">name</td>\n<td align=\"center\"> idname()</td>\n</tr>\n<tr>\n<td align=\"center\">scope</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">constructor arguments</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">properties</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">autowiring mode</td>\n<td align=\"center\">no()byNamebyType constructor</td>\n</tr>\n<tr>\n<td align=\"center\">lazy-initialization mode</td>\n<td align=\"center\">(bean)</td>\n</tr>\n<tr>\n<td align=\"center\">initialization method</td>\n<td align=\"center\">bean </td>\n</tr>\n<tr>\n<td align=\"center\">destruction method</td>\n<td align=\"center\">bean </td>\n</tr>\n</tbody></table>\n<p> Spring </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleBean\"</span> name=<span class=\"string\">\"name1, name2, name3\"</span> class=<span class=\"string\">\"com.loonycoder.ExampleBean\"</span></span><br><span class=\"line\">      scope=<span class=\"string\">\"singleton\"</span> lazy-init=<span class=\"string\">\"true\"</span> init-method=<span class=\"string\">\"init\"</span> destroy-method=<span class=\"string\">\"cleanup\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"int\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\">    &lt;constructor-arg name=<span class=\"string\">\"years\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\">    &lt;constructor-arg index=<span class=\"string\">\"0\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- property  --&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"beanOne\"</span>&gt;</span><br><span class=\"line\">        &lt;ref bean=<span class=\"string\">\"anotherExampleBean\"</span>/&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"beanTwo\"</span> ref=<span class=\"string\">\"yetAnotherBean\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"integerProperty\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p> factory-beanfactory-method<code>&lt;lockup-method /&gt;&lt;replaced-method /&gt;&lt;meta /&gt;&lt;qualifier /&gt;</code>  Spring  bean </p>\n<p> bean  BeanDefinitionHolder </p>\n<p>// BeanDefinitionParserDelegate 428</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public BeanDefinitionHolder parseBeanDefinitionElement(Element ele) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> parseBeanDefinitionElement(ele, null);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">public BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) &#123;</span><br><span class=\"line\">   String id = ele.getAttribute(ID_ATTRIBUTE);</span><br><span class=\"line\">   String nameAttr = ele.getAttribute(NAME_ATTRIBUTE);</span><br><span class=\"line\"></span><br><span class=\"line\">   List&lt;String&gt; aliases = new ArrayList&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  name    </span><br><span class=\"line\">   //  name </span><br><span class=\"line\">   //  id  name 20</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (StringUtils.hasLength(nameAttr)) &#123;</span><br><span class=\"line\">      String[] nameArr = StringUtils.tokenizeToStringArray(nameAttr, MULTI_VALUE_ATTRIBUTE_DELIMITERS);</span><br><span class=\"line\">      aliases.addAll(Arrays.asList(nameArr));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   String beanName = id;</span><br><span class=\"line\">   // id, beanName</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!StringUtils.hasText(beanName) &amp;&amp; !aliases.isEmpty()) &#123;</span><br><span class=\"line\">      beanName = aliases.remove(0);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         logger.debug(<span class=\"string\">\"No XML 'id' specified - using '\"</span> + beanName +</span><br><span class=\"line\">               <span class=\"string\">\"' as bean name and \"</span> + aliases + <span class=\"string\">\" as aliases\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (containingBean == null) &#123;</span><br><span class=\"line\">      checkNameUniqueness(beanName, aliases, ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  &lt;bean ...&gt;...&lt;/bean&gt;  BeanDefinition,</span><br><span class=\"line\">   //  BeanDefinition </span><br><span class=\"line\">   AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinition </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanDefinition != null) &#123;</span><br><span class=\"line\">      //  id  name beanName  null</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!StringUtils.hasText(beanName)) &#123;</span><br><span class=\"line\">         try &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (containingBean != null) &#123;//  containingBean  null </span><br><span class=\"line\">               beanName = BeanDefinitionReaderUtils.generateBeanName(</span><br><span class=\"line\">                     beanDefinition, this.readerContext.getRegistry(), <span class=\"literal\">true</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               //  id  name</span><br><span class=\"line\">               //   1. beanName com.loonycoder.service.MessageServiceImpl<span class=\"comment\">#0</span></span><br><span class=\"line\">               //   2. beanClassName com.loonycoder.service.MessageServiceImpl</span><br><span class=\"line\"></span><br><span class=\"line\">               beanName = this.readerContext.generateBeanName(beanDefinition);</span><br><span class=\"line\"></span><br><span class=\"line\">               String beanClassName = beanDefinition.getBeanClassName();</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (beanClassName != null &amp;&amp;</span><br><span class=\"line\">                     beanName.startsWith(beanClassName) &amp;&amp; beanName.length() &gt; beanClassName.length() &amp;&amp;</span><br><span class=\"line\">                     !this.readerContext.getRegistry().isBeanNameInUse(beanClassName)) &#123;</span><br><span class=\"line\">                  //  beanClassName  Bean </span><br><span class=\"line\">                  aliases.add(beanClassName);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">               logger.debug(<span class=\"string\">\"Neither XML 'id' nor 'name' specified - \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"using generated bean name [\"</span> + beanName + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         catch (Exception ex) &#123;</span><br><span class=\"line\">            error(ex.getMessage(), ele);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      String[] aliasesArray = StringUtils.toStringArray(aliases);</span><br><span class=\"line\">      //  BeanDefinitionHolder</span><br><span class=\"line\">      <span class=\"built_in\">return</span> new BeanDefinitionHolder(beanDefinition, beanName, aliasesArray);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public AbstractBeanDefinition parseBeanDefinitionElement(</span><br><span class=\"line\">      Element ele, String beanName, BeanDefinition containingBean) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   this.parseState.push(new BeanEntry(beanName));</span><br><span class=\"line\"></span><br><span class=\"line\">   String className = null;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (ele.hasAttribute(CLASS_ATTRIBUTE)) &#123;</span><br><span class=\"line\">      className = ele.getAttribute(CLASS_ATTRIBUTE).trim();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      String parent = null;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ele.hasAttribute(PARENT_ATTRIBUTE)) &#123;</span><br><span class=\"line\">         parent = ele.getAttribute(PARENT_ATTRIBUTE);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      //  BeanDefinition</span><br><span class=\"line\">      AbstractBeanDefinition bd = createBeanDefinition(className, parent);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanDefinition  AbstractBeanDefinition </span><br><span class=\"line\">      parseBeanDefinitionAttributes(ele, beanName, containingBean, bd);</span><br><span class=\"line\">      bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT));</span><br><span class=\"line\"></span><br><span class=\"line\">      /**</span><br><span class=\"line\">       *  &lt;bean&gt;......&lt;/bean&gt; </span><br><span class=\"line\">       *  bd </span><br><span class=\"line\">       */</span><br><span class=\"line\"></span><br><span class=\"line\">      //  &lt;meta /&gt;</span><br><span class=\"line\">      parseMetaElements(ele, bd);</span><br><span class=\"line\">      //  &lt;lookup-method /&gt;</span><br><span class=\"line\">      parseLookupOverrideSubElements(ele, bd.getMethodOverrides());</span><br><span class=\"line\">      //  &lt;replaced-method /&gt;</span><br><span class=\"line\">      parseReplacedMethodSubElements(ele, bd.getMethodOverrides());</span><br><span class=\"line\">    //  &lt;constructor-arg /&gt;</span><br><span class=\"line\">      parseConstructorArgElements(ele, bd);</span><br><span class=\"line\">      //  &lt;property /&gt;</span><br><span class=\"line\">      parsePropertyElements(ele, bd);</span><br><span class=\"line\">      //  &lt;qualifier /&gt;</span><br><span class=\"line\">      parseQualifierElements(ele, bd);</span><br><span class=\"line\"></span><br><span class=\"line\">      bd.setResource(this.readerContext.getResource());</span><br><span class=\"line\">      bd.setSource(extractSource(ele));</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"built_in\">return</span> bd;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (ClassNotFoundException ex) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Bean class [\"</span> + className + <span class=\"string\">\"] not found\"</span>, ele, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (NoClassDefFoundError err) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Class that bean class [\"</span> + className + <span class=\"string\">\"] depends on not found\"</span>, ele, err);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Unexpected failure during bean definition parsing\"</span>, ele, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   finally &#123;</span><br><span class=\"line\">      this.parseState.pop();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  BeanDefinitionHolder </p>\n<p> <code>&lt;bean /&gt;</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinitionHolder</span><br><span class=\"line\">   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bdHolder != null) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionStoreException ex) &#123;</span><br><span class=\"line\">         getReaderContext().error(<span class=\"string\">\"Failed to register bean definition with name '\"</span> +</span><br><span class=\"line\">               bdHolder.getBeanName() + <span class=\"string\">\"'\"</span>, ele, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  BeanDefinitionHolder  BeanDefinition  beanNamealiases  BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class BeanDefinitionHolder implements BeanMetadataElement &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final BeanDefinition beanDefinition;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final String beanName;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final String[] aliases;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p> BeanDefinition</p>\n<p> Bean </p>\n<p><strong> Bean</strong><br>// BeanDefinitionReaderUtils 143</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void registerBeanDefinition(</span><br><span class=\"line\">      BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   String beanName = definitionHolder.getBeanName();</span><br><span class=\"line\">   //  Bean</span><br><span class=\"line\">   registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String[] aliases = definitionHolder.getAliases();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (aliases != null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (String <span class=\"built_in\">alias</span> : aliases) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">alias</span> -&gt; beanName  map </span><br><span class=\"line\">         //  <span class=\"built_in\">alias</span>  beanName</span><br><span class=\"line\">         registry.registerAlias(beanName, <span class=\"built_in\">alias</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean</p>\n<p>// DefaultListableBeanFactory 793</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   Assert.hasText(beanName, <span class=\"string\">\"Bean name must not be empty\"</span>);</span><br><span class=\"line\">   Assert.notNull(beanDefinition, <span class=\"string\">\"BeanDefinition must not be null\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanDefinition instanceof AbstractBeanDefinition) &#123;</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         ((AbstractBeanDefinition) beanDefinition).validate();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">         throw new BeanDefinitionStoreException(...);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // old?   bean  allowBeanDefinitionOverriding</span><br><span class=\"line\">   BeanDefinition oldBeanDefinition;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  beanDefinitionMap </span><br><span class=\"line\">   oldBeanDefinition = this.beanDefinitionMap.get(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (oldBeanDefinition != null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!isAllowBeanDefinitionOverriding()) &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription()...</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (oldBeanDefinition.getRole() &lt; beanDefinition.getRole()) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!beanDefinition.equals(oldBeanDefinition)) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean equals  <span class=\"literal\">true</span>  Bean</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  Bean .</span><br><span class=\"line\">      // <span class=\"string\">\"Bean\"</span> Bean </span><br><span class=\"line\">      //  Spring    singleton beans</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (hasBeanCreationStarted()) &#123;</span><br><span class=\"line\">         // Cannot modify startup-time collection elements anymore (<span class=\"keyword\">for</span> stable iteration)</span><br><span class=\"line\">         synchronized (this.beanDefinitionMap) &#123;</span><br><span class=\"line\">            this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">            List&lt;String&gt; updatedDefinitions = new ArrayList&lt;String&gt;(this.beanDefinitionNames.size() + 1);</span><br><span class=\"line\">            updatedDefinitions.addAll(this.beanDefinitionNames);</span><br><span class=\"line\">            updatedDefinitions.add(beanName);</span><br><span class=\"line\">            this.beanDefinitionNames = updatedDefinitions;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.manualSingletonNames.contains(beanName)) &#123;</span><br><span class=\"line\">               Set&lt;String&gt; updatedSingletons = new LinkedHashSet&lt;String&gt;(this.manualSingletonNames);</span><br><span class=\"line\">               updatedSingletons.remove(beanName);</span><br><span class=\"line\">               this.manualSingletonNames = updatedSingletons;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanDefinition  map  map  BeanDefinition</span><br><span class=\"line\">         this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">         //  ArrayList bean  Bean </span><br><span class=\"line\">         this.beanDefinitionNames.add(beanName);</span><br><span class=\"line\">         //  LinkedHashSet singleton bean</span><br><span class=\"line\">         //  remove  Bean </span><br><span class=\"line\">         //  bean </span><br><span class=\"line\">         //     registerSingleton(String beanName, Object singletonObject)</span><br><span class=\"line\">         // Spring <span class=\"string\">\"\"</span> Bean</span><br><span class=\"line\">         //  <span class=\"string\">\"environment\"</span><span class=\"string\">\"systemProperties\"</span>  bean Bean </span><br><span class=\"line\">         this.manualSingletonNames.remove(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      this.frozenBeanDefinitionNames = null;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (oldBeanDefinition != null || containsSingleton(beanName)) &#123;</span><br><span class=\"line\">      resetBeanDefinition(beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean <code>&lt;bean /&gt;</code>  BeanDefinition BeanDefinition </p>\n<p>  </p>\n<p></p>\n<h4 id=\"Bean-\"><a href=\"#Bean-\" class=\"headerlink\" title=\"Bean \"></a>Bean </h4><p> refresh()  obtainFreshBeanFactory() </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void refresh() throws BeansException, IllegalStateException &#123;</span><br><span class=\"line\">   //  refresh() </span><br><span class=\"line\">   synchronized (this.startupShutdownMonitor) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      // ( beanName-&gt; beanDefinition  map)</span><br><span class=\"line\">      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanFactory  BeanPostProcessor bean</span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  BeanFactoryPostProcessor Bean </span><br><span class=\"line\">         // Spring  postProcessBeanFactory </span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         //  BeanFactoryPostProcessor </span><br><span class=\"line\">         postProcessBeanFactory(beanFactory);</span><br><span class=\"line\">         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) </span><br><span class=\"line\">         invokeBeanFactoryPostProcessors(beanFactory);          </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanPostProcessor  BeanFactoryPostProcessor </span><br><span class=\"line\">         // : postProcessBeforeInitialization  postProcessAfterInitialization</span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         registerBeanPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext  MessageSource</span><br><span class=\"line\">         initMessageSource();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext </span><br><span class=\"line\">         initApplicationEventMulticaster();</span><br><span class=\"line\"></span><br><span class=\"line\">         // ()</span><br><span class=\"line\">         //  Bean singleton beans </span><br><span class=\"line\">         onRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationListener </span><br><span class=\"line\">         registerListeners();</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         //  singleton beans</span><br><span class=\"line\">         //lazy-init </span><br><span class=\"line\">         finishBeanFactoryInitialization(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         // ApplicationContext </span><br><span class=\"line\">         finishRefresh();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class=\"line\">            logger.warn(<span class=\"string\">\"Exception encountered during context initialization - \"</span> +</span><br><span class=\"line\">                  <span class=\"string\">\"cancelling refresh attempt: \"</span> + ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         // Destroy already created singletons to avoid dangling resources.</span><br><span class=\"line\">         //  singleton  Beans bean </span><br><span class=\"line\">         destroyBeans();</span><br><span class=\"line\"></span><br><span class=\"line\">         // Reset <span class=\"string\">'active'</span> flag.</span><br><span class=\"line\">         cancelRefresh(ex);</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         // Reset common introspection caches <span class=\"keyword\">in</span> Spring<span class=\"string\">'s core, since we</span></span><br><span class=\"line\"><span class=\"string\">         // might not ever need metadata for singleton beans anymore...</span></span><br><span class=\"line\"><span class=\"string\">         resetCommonCaches();</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">   &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean--prepareBeanFactory\"><a href=\"#-Bean--prepareBeanFactory\" class=\"headerlink\" title=\" Bean : prepareBeanFactory\"></a> Bean : prepareBeanFactory</h4><p>Spring  xml  bean  bean</p>\n<p> prepareBeanFactory(factory) </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Configure the factory<span class=\"string\">'s standard context characteristics,</span></span><br><span class=\"line\"><span class=\"string\"> * such as the context'</span>s ClassLoader and post-processors.</span><br><span class=\"line\"> * @param beanFactory the BeanFactory to configure</span><br><span class=\"line\"> */</span><br><span class=\"line\">protected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\">   //  BeanFactory  BeanFactory </span><br><span class=\"line\">   //  ApplicationContext </span><br><span class=\"line\">   beanFactory.setBeanClassLoader(getClassLoader());</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanExpressionResolver</span><br><span class=\"line\">   beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));</span><br><span class=\"line\">   // </span><br><span class=\"line\">   beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanPostProcessor processor </span><br><span class=\"line\">   //  Aware  beans  processor </span><br><span class=\"line\">   //  ApplicationContext  implement ApplicationContextAware</span><br><span class=\"line\">   //  ApplicationContextAware</span><br><span class=\"line\">   //    EnvironmentAwareResourceLoaderAware </span><br><span class=\"line\">   beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   // Spring </span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(EnvironmentAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(MessageSourceAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);</span><br><span class=\"line\"></span><br><span class=\"line\">   /**</span><br><span class=\"line\">    *  bean  bean </span><br><span class=\"line\">    * <span class=\"string\">\" ApplicationContext  BeanFactory\"</span></span><br><span class=\"line\">    * ApplicationContext  ResourceLoaderApplicationEventPublisherMessageSource</span><br><span class=\"line\">    *  this this  ApplicationContext</span><br><span class=\"line\">    *  MessageSource  MessageSource  bean</span><br><span class=\"line\">    */</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ResourceLoader.class, this);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ApplicationContext.class, this);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanPostProcessor  bean  ApplicationListener </span><br><span class=\"line\">   //  listener  </span><br><span class=\"line\">   beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  beanloadTimeWeaver</span><br><span class=\"line\">   // tips: ltw  AspectJ  Spring AOP </span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));</span><br><span class=\"line\">      // Set a temporary ClassLoader <span class=\"keyword\">for</span> <span class=\"built_in\">type</span> matching.</span><br><span class=\"line\">      beanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   /**</span><br><span class=\"line\">    * Spring  <span class=\"string\">\"\"</span>  bean</span><br><span class=\"line\">    * </span><br><span class=\"line\">    */</span><br><span class=\"line\"></span><br><span class=\"line\">   //  <span class=\"string\">\"environment\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  <span class=\"string\">\"systemProperties\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  <span class=\"string\">\"systemEnvironment\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Spring  bean </p>\n<h4 id=\"-singleton-beans\"><a href=\"#-singleton-beans\" class=\"headerlink\" title=\" singleton beans\"></a> singleton beans</h4><p> <code>finishBeanFactoryInitialization(beanFactory);</code>  singleton beans</p>\n<p><strong></strong><strong></strong>Spring  singleton beans </p>\n<p> BeanFactory  BeanFactoryPostProcessor  Bean  postProcessBeanFactory(factory)  Spring  Bean <code>environment</code><code>systemProperties</code> </p>\n<p> singleton beans  Spring  singleton beans<br>// AbstractApplicationContext.java 834</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//  singleton beans</span><br><span class=\"line\">protected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  conversionService  Bean ConversionService</span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   //  beanFactory.getBean(...) </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;</span><br><span class=\"line\">         beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123;</span><br><span class=\"line\">      beanFactory.setConversionService(</span><br><span class=\"line\">            beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Register a default embedded value resolver <span class=\"keyword\">if</span> no bean post-processor</span><br><span class=\"line\">   // (such as a PropertyPlaceholderConfigurer bean) registered any before:</span><br><span class=\"line\">   // at this point, primarily <span class=\"keyword\">for</span> resolution <span class=\"keyword\">in</span> annotation attribute values.</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.hasEmbeddedValueResolver()) &#123;</span><br><span class=\"line\">      beanFactory.addEmbeddedValueResolver(new <span class=\"function\"><span class=\"title\">StringValueResolver</span></span>() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public String resolveStringValue(String strVal) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> getEnvironment().resolvePlaceholders(strVal);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  LoadTimeWeaverAware  Bean</span><br><span class=\"line\">   //  AspectJ </span><br><span class=\"line\">   String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String weaverAwareName : weaverAwareNames) &#123;</span><br><span class=\"line\">      getBean(weaverAwareName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Stop using the temporary ClassLoader <span class=\"keyword\">for</span> <span class=\"built_in\">type</span> matching.</span><br><span class=\"line\">   beanFactory.setTempClassLoader(null);</span><br><span class=\"line\"></span><br><span class=\"line\">   // Spring  singleton beans </span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   beanFactory.freezeConfiguration();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   beanFactory.preInstantiateSingletons();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> DefaultListableBeanFactory </p>\n<p><strong>preInstantiateSingletons</strong><br>// DefaultListableBeanFactory 728</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void preInstantiateSingletons() throws BeansException &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      this.logger.debug(<span class=\"string\">\"Pre-instantiating singletons in \"</span> + this);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   // this.beanDefinitionNames  beanNames</span><br><span class=\"line\">   List&lt;String&gt; beanNames = new ArrayList&lt;String&gt;(this.beanDefinitionNames);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton beans </span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  &lt;bean id=<span class=\"string\">\"\"</span> class=<span class=\"string\">\"\"</span> parent=<span class=\"string\">\"\"</span> /&gt;  parent</span><br><span class=\"line\">      //  <span class=\"string\">\"Bean \"</span></span><br><span class=\"line\">      RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  singletons <span class=\"string\">'abstract = true'</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123;</span><br><span class=\"line\">         //  FactoryBean( FactoryBean)</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (isFactoryBean(beanName)) &#123;</span><br><span class=\"line\">            // FactoryBean  beanName  &amp;  getBeangetBean </span><br><span class=\"line\">            final FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) getBean(FACTORY_BEAN_PREFIX + beanName);</span><br><span class=\"line\">            //  FactoryBean  SmartFactoryBean </span><br><span class=\"line\">            boolean isEagerInit;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (System.getSecurityManager() != null &amp;&amp; factory instanceof SmartFactoryBean) &#123;</span><br><span class=\"line\">               isEagerInit = AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() &#123;</span><br><span class=\"line\">                  @Override</span><br><span class=\"line\">                  public Boolean <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">                     <span class=\"built_in\">return</span> ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit();</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;, getAccessControlContext());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               isEagerInit = (factory instanceof SmartFactoryBean &amp;&amp;</span><br><span class=\"line\">                     ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isEagerInit) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">               getBean(beanName);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            //  Bean getBean(beanName) </span><br><span class=\"line\">            getBean(beanName);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton beans </span><br><span class=\"line\">   //  bean  SmartInitializingSingleton </span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\">      Object singletonInstance = getSingleton(beanName);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (singletonInstance instanceof SmartInitializingSingleton) &#123;</span><br><span class=\"line\">         final SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">            AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">               @Override</span><br><span class=\"line\">               public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">                  smartSingleton.afterSingletonsInstantiated();</span><br><span class=\"line\">                  <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;, getAccessControlContext());</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            smartSingleton.afterSingletonsInstantiated();</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> getBean(beanName)  BeanFactory  Bean</p>\n<p><strong>getBean</strong><br> FactoryBean  FactoryBean</p>\n<p>// AbstractBeanFactory 196</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object getBean(String name) throws BeansException &#123;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> doGetBean(name, null, null, <span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  Bean  getBean  Bean </span><br><span class=\"line\">// </span><br><span class=\"line\">@SuppressWarnings(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">protected &lt;T&gt; T doGetBean(</span><br><span class=\"line\">      final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly)</span><br><span class=\"line\">      throws BeansException &#123;</span><br><span class=\"line\">   //   beanName FactoryBean( &amp;)</span><br><span class=\"line\">   //  getBean Bean </span><br><span class=\"line\">   final String beanName = transformedBeanName(name);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Object bean; </span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Object sharedInstance = getSingleton(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  args  getBean(beanName)</span><br><span class=\"line\">   //  args  null  args  Bean Bean</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (sharedInstance != null &amp;&amp; args == null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"Returning cached instance of singleton bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      //  Bean  sharedInstance</span><br><span class=\"line\">      //  FactoryBean </span><br><span class=\"line\">      // (FactoryBean )</span><br><span class=\"line\">      bean = getObjectForBeanInstance(sharedInstance, name, beanName, null);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isPrototypeCurrentlyInCreation(beanName)) &#123;</span><br><span class=\"line\">         //  beanName  prototype  bean</span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw new BeanCurrentlyInCreationException(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanDefinition </span><br><span class=\"line\">      BeanFactory parentBeanFactory = getParentBeanFactory();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (parentBeanFactory != null &amp;&amp; !containsBeanDefinition(beanName)) &#123;</span><br><span class=\"line\">         //  BeanDefinition</span><br><span class=\"line\">         String nameToLookup = originalBeanName(name);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (args != null) &#123;</span><br><span class=\"line\">            // </span><br><span class=\"line\">            <span class=\"built_in\">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            // No args -&gt; delegate to standard getBean method.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!typeCheckOnly) &#123;</span><br><span class=\"line\">         // typeCheckOnly  <span class=\"literal\">false</span> beanName  alreadyCreated  Set </span><br><span class=\"line\">         markBeanAsCreated(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      /*</span><br><span class=\"line\">       * </span><br><span class=\"line\">       *  Bean  singleton  Bean  Bean</span><br><span class=\"line\">       *  prototype  Bean  Bean</span><br><span class=\"line\">       */</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);</span><br><span class=\"line\">         checkMergedBeanDefinition(mbd, beanName, args);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean</span><br><span class=\"line\">         //  depends-on </span><br><span class=\"line\">         String[] dependsOn = mbd.getDependsOn();</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (dependsOn != null) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String dep : dependsOn) &#123;</span><br><span class=\"line\">               // </span><br><span class=\"line\">               <span class=\"keyword\">if</span> (isDependent(beanName, dep)) &#123;</span><br><span class=\"line\">                  throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">                        <span class=\"string\">\"'Circular depends-on relationship between '\"</span> + beanName + <span class=\"string\">\"' and '\"</span> + dep + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               // </span><br><span class=\"line\">               registerDependentBean(dep, beanName);</span><br><span class=\"line\">               // </span><br><span class=\"line\">               getBean(dep);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  singleton scope  singleton </span><br><span class=\"line\">         <span class=\"keyword\">if</span> (mbd.isSingleton()) &#123;</span><br><span class=\"line\">            sharedInstance = getSingleton(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">               @Override</span><br><span class=\"line\">               public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">                  try &#123;</span><br><span class=\"line\">                     //  Bean</span><br><span class=\"line\">                     <span class=\"built_in\">return</span> createBean(beanName, mbd, args);</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                  catch (BeansException ex) &#123;</span><br><span class=\"line\">                     destroySingleton(beanName);</span><br><span class=\"line\">                     throw ex;</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  prototype scope  prototype </span><br><span class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mbd.isPrototype()) &#123;</span><br><span class=\"line\">            // Its a prototype -&gt; create a new instance.</span><br><span class=\"line\">            Object prototypeInstance = null;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               beforePrototypeCreation(beanName);</span><br><span class=\"line\">               //  Bean</span><br><span class=\"line\">               prototypeInstance = createBean(beanName, mbd, args);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            finally &#123;</span><br><span class=\"line\">               afterPrototypeCreation(beanName);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  singleton  prototype </span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            String scopeName = mbd.getScope();</span><br><span class=\"line\">            final Scope scope = this.scopes.get(scopeName);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (scope == null) &#123;</span><br><span class=\"line\">               throw new IllegalStateException(<span class=\"string\">\"No Scope registered for scope name '\"</span> + scopeName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               Object scopedInstance = scope.get(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">                  @Override</span><br><span class=\"line\">                  public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">                     beforePrototypeCreation(beanName);</span><br><span class=\"line\">                     try &#123;</span><br><span class=\"line\">                        //  Bean</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> createBean(beanName, mbd, args);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                     finally &#123;</span><br><span class=\"line\">                        afterPrototypeCreation(beanName);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;);</span><br><span class=\"line\">               bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            catch (IllegalStateException ex) &#123;</span><br><span class=\"line\">               throw new BeanCreationException(beanName,</span><br><span class=\"line\">                     <span class=\"string\">\"Scope '\"</span> + scopeName + <span class=\"string\">\"' is not active for the current thread; consider \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"defining a scoped proxy for this bean if you intend to refer to it from a singleton\"</span>,</span><br><span class=\"line\">                     ex);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         cleanupAfterBeanCreationFailure(beanName);</span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (requiredType != null &amp;&amp; bean != null &amp;&amp; !requiredType.isInstance(bean)) &#123;</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         <span class=\"built_in\">return</span> getTypeConverter().convertIfNecessary(bean, requiredType);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (TypeMismatchException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"Failed to convert bean '\"</span> + name + <span class=\"string\">\"' to required type '\"</span> +</span><br><span class=\"line\">                  ClassUtils.getQualifiedName(requiredType) + <span class=\"string\">\"'\"</span>, ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> (T) bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> createBean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected abstract Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException;</span><br></pre></td></tr></table></figure>\n<p> args  Bean args  null</p>\n<p> AbstractAutowireCapableBeanFactoryAutowireCapable</p>\n<p> @Autowired </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MessageServiceImpl implements MessageService &#123;</span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    private UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getMessage</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userService.getMessage();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p> xml   Spring </p>\n<p></p>\n<p>// AbstractAutowireCapableBeanFactory 447</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Central method of this class: creates a bean instance,</span><br><span class=\"line\"> * populates the bean instance, applies post-processors, etc.</span><br><span class=\"line\"> * @see <span class=\"comment\">#doCreateBean</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">@Override</span><br><span class=\"line\">protected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Creating instance of bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   RootBeanDefinition mbdToUse = mbd;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanDefinition  Class </span><br><span class=\"line\">   Class&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (resolvedClass != null &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != null) &#123;</span><br><span class=\"line\">      mbdToUse = new RootBeanDefinition(mbd);</span><br><span class=\"line\">      mbdToUse.setBeanClass(resolvedClass);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // MethodOverrides bean  &lt;lookup-method /&gt; </span><br><span class=\"line\">   //  &lt;replaced-method /&gt; bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      mbdToUse.prepareMethodOverrides();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),</span><br><span class=\"line\">            beanName, <span class=\"string\">\"Validation of method overrides failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  InstantiationAwareBeanPostProcessor </span><br><span class=\"line\">      //  Spring AOP </span><br><span class=\"line\">      Object bean = resolveBeforeInstantiation(beanName, mbdToUse);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (bean != null) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">return</span> bean; </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(mbdToUse.getResourceDescription(), beanName,</span><br><span class=\"line\">            <span class=\"string\">\"BeanPostProcessor before instantiation of bean failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  bean</span><br><span class=\"line\">   Object beanInstance = doCreateBean(beanName, mbdToUse, args);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Finished creating instance of bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> beanInstance;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Bean</strong><br> doCreateBean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Actually create the specified bean. Pre-creation processing has already happened</span><br><span class=\"line\"> * at this point, e.g. checking &#123;@code postProcessBeforeInstantiation&#125; callbacks.</span><br><span class=\"line\"> * &lt;p&gt;Differentiates between default bean instantiation, use of a</span><br><span class=\"line\"> * factory method, and autowiring a constructor.</span><br><span class=\"line\"> * @param beanName the name of the bean</span><br><span class=\"line\"> * @param mbd the merged bean definition <span class=\"keyword\">for</span> the bean</span><br><span class=\"line\"> * @param args explicit arguments to use <span class=\"keyword\">for</span> constructor or factory method invocation</span><br><span class=\"line\"> * @<span class=\"built_in\">return</span> a new instance of the bean</span><br><span class=\"line\"> * @throws BeanCreationException <span class=\"keyword\">if</span> the bean could not be created</span><br><span class=\"line\"> * @see <span class=\"comment\">#instantiateBean</span></span><br><span class=\"line\"> * @see <span class=\"comment\">#instantiateUsingFactoryMethod</span></span><br><span class=\"line\"> * @see <span class=\"comment\">#autowireConstructor</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args)</span><br><span class=\"line\">      throws BeanCreationException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Instantiate the bean.</span><br><span class=\"line\">   BeanWrapper instanceWrapper = null;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.isSingleton()) &#123;</span><br><span class=\"line\">      instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (instanceWrapper == null) &#123;</span><br><span class=\"line\">      //  FactoryBean Bean</span><br><span class=\"line\">      instanceWrapper = createBeanInstance(beanName, mbd, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  Bean    <span class=\"string\">\"bean \"</span></span><br><span class=\"line\">   final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null);</span><br><span class=\"line\">   // </span><br><span class=\"line\">   Class&lt;?&gt; beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null);</span><br><span class=\"line\">   mbd.resolvedTargetType = beanType;</span><br><span class=\"line\"></span><br><span class=\"line\">   // MergedBeanDefinitionPostProcessor</span><br><span class=\"line\">   synchronized (mbd.postProcessingLock) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!mbd.postProcessed) &#123;</span><br><span class=\"line\">         try &#123;</span><br><span class=\"line\">            // MergedBeanDefinitionPostProcessor</span><br><span class=\"line\">            applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         catch (Throwable ex) &#123;</span><br><span class=\"line\">            throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">                  <span class=\"string\">\"Post-processing of merged bean definition failed\"</span>, ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         mbd.postProcessed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Eagerly cache singletons to be able to resolve circular references</span><br><span class=\"line\">   // even when triggered by lifecycle interfaces like BeanFactoryAware.</span><br><span class=\"line\">   // </span><br><span class=\"line\">   boolean earlySingletonExposure = (mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp;</span><br><span class=\"line\">         isSingletonCurrentlyInCreation(beanName));</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (earlySingletonExposure) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         logger.debug(<span class=\"string\">\"Eagerly caching bean '\"</span> + beanName +</span><br><span class=\"line\">               <span class=\"string\">\"' to allow for resolving potential circular references\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      addSingletonFactory(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> getEarlyBeanReference(beanName, mbd, bean);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Initialize the bean instance.</span><br><span class=\"line\">   Object exposedObject = bean;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      populateBean(beanName, mbd, instanceWrapper);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (exposedObject != null) &#123;</span><br><span class=\"line\">         //  init-method  InitializingBean  BeanPostProcessor </span><br><span class=\"line\">         //  bean </span><br><span class=\"line\">         exposedObject = initializeBean(beanName, exposedObject, mbd);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123;</span><br><span class=\"line\">         throw (BeanCreationException) ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         throw new BeanCreationException(</span><br><span class=\"line\">               mbd.getResourceDescription(), beanName, <span class=\"string\">\"Initialization of bean failed\"</span>, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (earlySingletonExposure) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      Object earlySingletonReference = getSingleton(beanName, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (earlySingletonReference != null) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (exposedObject == bean) &#123;</span><br><span class=\"line\">            exposedObject = earlySingletonReference;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123;</span><br><span class=\"line\">            String[] dependentBeans = getDependentBeans(beanName);</span><br><span class=\"line\">            Set&lt;String&gt; actualDependentBeans = new LinkedHashSet&lt;String&gt;(dependentBeans.length);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String dependentBean : dependentBeans) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;</span><br><span class=\"line\">                  actualDependentBeans.add(dependentBean);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!actualDependentBeans.isEmpty()) &#123;</span><br><span class=\"line\">               throw new BeanCurrentlyInCreationException(beanName,</span><br><span class=\"line\">                     <span class=\"string\">\"Bean with name '\"</span> + beanName + <span class=\"string\">\"' has been injected into other beans [\"</span> +</span><br><span class=\"line\">                     StringUtils.collectionToCommaDelimitedString(actualDependentBeans) +</span><br><span class=\"line\">                     <span class=\"string\">\"] in its raw version as part of a circular reference, but has eventually been \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"wrapped. This means that said other beans do not use the final version of the \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"bean. This is often the result of over-eager type matching - consider using \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Register bean as disposable.</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      registerDisposableBeanIfNecessary(beanName, bean, mbd);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            mbd.getResourceDescription(), beanName, <span class=\"string\">\"Invalid destruction signature\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> exposedObject;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> doCreateBean </p>\n<p> doCreateBean  Bean  createBeanInstance  populateBean  initializeBean </p>\n<p></p>\n<p><strong> Bean </strong><br> createBeanInstance </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) &#123;</span><br><span class=\"line\">   //  class</span><br><span class=\"line\">   Class&lt;?&gt; beanClass = resolveBeanClass(mbd, beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanClass != null &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">            <span class=\"string\">\"Bean class isn't public, and non-public access not allowed: \"</span> + beanClass.getName());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.getFactoryMethodName() != null)  &#123;</span><br><span class=\"line\">      //  FactoryBean</span><br><span class=\"line\">      <span class=\"built_in\">return</span> instantiateUsingFactoryMethod(beanName, mbd, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  prototype bean</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   boolean resolved = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   boolean autowireNecessary = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (args == null) &#123;</span><br><span class=\"line\">      synchronized (mbd.constructorArgumentLock) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (mbd.resolvedConstructorOrFactoryMethod != null) &#123;</span><br><span class=\"line\">            resolved = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            autowireNecessary = mbd.constructorArgumentsResolved;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (resolved) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (autowireNecessary) &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> autowireConstructor(beanName, mbd, null, null);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> instantiateBean(beanName, mbd);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Constructor&lt;?&gt;[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (ctors != null ||</span><br><span class=\"line\">         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR ||</span><br><span class=\"line\">         mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args))  &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> autowireConstructor(beanName, mbd, ctors, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"built_in\">return</span> instantiateBean(beanName, mbd);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) &#123;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      Object beanInstance;</span><br><span class=\"line\">      final BeanFactory parent = this;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">         beanInstance = AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">            @Override</span><br><span class=\"line\">            public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"built_in\">return</span> getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;, getAccessControlContext());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      BeanWrapper bw = new BeanWrapperImpl(beanInstance);</span><br><span class=\"line\">      initBeanWrapper(bw);</span><br><span class=\"line\">      <span class=\"built_in\">return</span> bw;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            mbd.getResourceDescription(), beanName, <span class=\"string\">\"Instantiation of bean failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<p>// SimpleInstantiationStrategy 59</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object instantiate(RootBeanDefinition bd, String beanName, BeanFactory owner) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  java  CGLIB,</span><br><span class=\"line\">   //  <span class=\"string\">\"\"</span> lookup-method  replaced-method </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bd.getMethodOverrides().isEmpty()) &#123;</span><br><span class=\"line\">      Constructor&lt;?&gt; constructorToUse;</span><br><span class=\"line\">      synchronized (bd.constructorArgumentLock) &#123;</span><br><span class=\"line\">         constructorToUse = (Constructor&lt;?&gt;) bd.resolvedConstructorOrFactoryMethod;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (constructorToUse == null) &#123;</span><br><span class=\"line\">            final Class&lt;?&gt; clazz = bd.getBeanClass();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (clazz.isInterface()) &#123;</span><br><span class=\"line\">               throw new BeanInstantiationException(clazz, <span class=\"string\">\"Specified class is an interface\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">                  constructorToUse = AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Constructor&lt;?&gt;&gt;() &#123;</span><br><span class=\"line\">                     @Override</span><br><span class=\"line\">                     public Constructor&lt;?&gt; run() throws Exception &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> clazz.getDeclaredConstructor((Class[]) null);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  constructorToUse = clazz.getDeclaredConstructor((Class[]) null);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               bd.resolvedConstructorOrFactoryMethod = constructorToUse;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            catch (Throwable ex) &#123;</span><br><span class=\"line\">               throw new BeanInstantiationException(clazz, <span class=\"string\">\"No default constructor found\"</span>, ex);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> BeanUtils.instantiateClass(constructorToUse);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  CGLIB  CGLIB </span><br><span class=\"line\">      // tips:  CGLIB  override  JDK </span><br><span class=\"line\">      <span class=\"built_in\">return</span> instantiateWithMethodInjection(bd, beanName, owner);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>bean </strong><br> createBeanInstance()  populateBean() </p>\n<p>// AbstractAutowireCapableBeanFactory 1203</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) &#123;</span><br><span class=\"line\">   // bean </span><br><span class=\"line\">   PropertyValues pvs = mbd.getPropertyValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bw == null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!pvs.isEmpty()) &#123;</span><br><span class=\"line\">         throw new BeanCreationException(</span><br><span class=\"line\">               mbd.getResourceDescription(), beanName, <span class=\"string\">\"Cannot apply property values to null instance\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // Skip property population phase <span class=\"keyword\">for</span> null instance.</span><br><span class=\"line\">         <span class=\"built_in\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // bean </span><br><span class=\"line\">   // InstantiationAwareBeanPostProcessor  bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   boolean continueWithPropertyPopulation = <span class=\"literal\">true</span>;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (bp instanceof InstantiationAwareBeanPostProcessor) &#123;</span><br><span class=\"line\">            InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;</span><br><span class=\"line\">            //  <span class=\"literal\">false</span> BeanPostProcessor </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123;</span><br><span class=\"line\">               continueWithPropertyPopulation = <span class=\"literal\">false</span>;</span><br><span class=\"line\">               <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!continueWithPropertyPopulation) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">return</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME ||</span><br><span class=\"line\">         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123;</span><br><span class=\"line\">      MutablePropertyValues newPvs = new MutablePropertyValues(pvs);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  bean  bean</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) &#123;</span><br><span class=\"line\">         autowireByName(beanName, mbd, bw, newPvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123;</span><br><span class=\"line\">         autowireByType(beanName, mbd, bw, newPvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      pvs = newPvs;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();</span><br><span class=\"line\">   boolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (hasInstAwareBpps || needsDepCheck) &#123;</span><br><span class=\"line\">      PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (hasInstAwareBpps) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (bp instanceof InstantiationAwareBeanPostProcessor) &#123;</span><br><span class=\"line\">               InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;</span><br><span class=\"line\">               //  BeanPostProcessor : AutowiredAnnotationBeanPostProcessor</span><br><span class=\"line\">               //  @Autowired@Value </span><br><span class=\"line\">               pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (pvs == null) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">return</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (needsDepCheck) &#123;</span><br><span class=\"line\">         checkDependencies(beanName, mbd, filteredPds, pvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   applyPropertyValues(beanName, mbd, bw, pvs);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>initializeBean</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">      AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">            invokeAwareMethods(beanName, bean);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;, getAccessControlContext());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  bean  BeanNameAwareBeanClassLoaderAware  BeanFactoryAware </span><br><span class=\"line\">      invokeAwareMethods(beanName, bean);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object wrappedBean = bean;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd == null || !mbd.isSynthetic()) &#123;</span><br><span class=\"line\">      // BeanPostProcessor  postProcessBeforeInitialization </span><br><span class=\"line\">      wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  bean  init-method</span><br><span class=\"line\">      //  bean  InitializingBean  afterPropertiesSet() </span><br><span class=\"line\">      invokeInitMethods(beanName, wrappedBean, mbd);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            (mbd != null ? mbd.getResourceDescription() : null),</span><br><span class=\"line\">            beanName, <span class=\"string\">\"Invocation of init method failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd == null || !mbd.isSynthetic()) &#123;</span><br><span class=\"line\">      // BeanPostProcessor  postProcessAfterInitialization </span><br><span class=\"line\">      wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> wrappedBean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>BeanPostProcessor  init-method</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"idname\"><a href=\"#idname\" class=\"headerlink\" title=\"idname\"></a>idname</h4><p> Bean  Spring beanName 0 aliases</p>\n<p> Spring  Bean  beanName</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">beanFactory.getBean(<span class=\"string\">\"beanName or alias\"</span>);</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  id  name</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> name=<span class=\"string\">\"m1, m2, m3\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  messageService 3  m1m2m3</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean name=<span class=\"string\">\"m1, m2, m3\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  m1 2  m2m3</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName com.loonycoder.service.MessageServiceImpl#0</p>\n<p> 1  com.loonycoder.service.MessageServiceImpl</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  messageService</p>\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><p>allowBeanDefinitionOverriding  null Bean id  name </p>\n<p> Bean </p>\n<p> A  B B  A A  BB  C C  A allowCircularReferences  null</p>\n<p></p>\n<p> Juergen Hoeller  jira </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class NoBeanOverridingContextLoader extends ContextLoader &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) &#123;</span><br><span class=\"line\">    super.customizeContext(servletContext, applicationContext);</span><br><span class=\"line\">    AbstractRefreshableApplicationContext arac = (AbstractRefreshableApplicationContext) applicationContext;</span><br><span class=\"line\">    arac.setAllowBeanDefinitionOverriding(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyContextLoaderListener extends org.springframework.web.context.ContextLoaderListener &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  protected ContextLoader <span class=\"function\"><span class=\"title\">createContextLoader</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new NoBeanOverridingContextLoader();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">    &lt;listener-class&gt;com.loonycoder.MyContextLoaderListener&lt;/listener-class&gt;  </span><br><span class=\"line\">&lt;/listener&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"profile\"><a href=\"#profile\" class=\"headerlink\" title=\"profile\"></a>profile</h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans profile=<span class=\"string\">\"development\"</span></span><br><span class=\"line\">    xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jdbc=<span class=\"string\">\"http://www.springframework.org/schema/jdbc\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;jdbc:embedded-database id=<span class=\"string\">\"dataSource\"</span>&gt;</span><br><span class=\"line\">        &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/schema.sql\"</span>/&gt;</span><br><span class=\"line\">        &lt;jdbc:script location=<span class=\"string\">\"classpath:com/oonycoder/config/sql/test-data.sql\"</span>/&gt;</span><br><span class=\"line\">    &lt;/jdbc:embedded-database&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans profile=<span class=\"string\">\"production\"</span></span><br><span class=\"line\">    xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jee=<span class=\"string\">\"http://www.springframework.org/schema/jee\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;jee:jndi-lookup id=<span class=\"string\">\"dataSource\"</span> jndi-name=<span class=\"string\">\"java:comp/env/jdbc/datasource\"</span>/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p> profile=</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jdbc=<span class=\"string\">\"http://www.springframework.org/schema/jdbc\"</span></span><br><span class=\"line\">    xmlns:jee=<span class=\"string\">\"http://www.springframework.org/schema/jee\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;beans profile=<span class=\"string\">\"development\"</span>&gt;</span><br><span class=\"line\">        &lt;jdbc:embedded-database id=<span class=\"string\">\"dataSource\"</span>&gt;</span><br><span class=\"line\">            &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/schema.sql\"</span>/&gt;</span><br><span class=\"line\">            &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/test-data.sql\"</span>/&gt;</span><br><span class=\"line\">        &lt;/jdbc:embedded-database&gt;</span><br><span class=\"line\">    &lt;/beans&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;beans profile=<span class=\"string\">\"production\"</span>&gt;</span><br><span class=\"line\">        &lt;jee:jndi-lookup id=<span class=\"string\">\"dataSource\"</span> jndi-name=<span class=\"string\">\"java:comp/env/jdbc/datasource\"</span>/&gt;</span><br><span class=\"line\">    &lt;/beans&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p> profile Spring  spring.profiles.active </p>\n<p>Spring  spring.profiles.active JVM web.xml JNDI</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dspring.profiles.active=<span class=\"string\">\"profile1,profile2\"</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>profile </p>\n</blockquote>\n<p> Environment  profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();</span><br><span class=\"line\">ctx.getEnvironment().setActiveProfiles(<span class=\"string\">\"development\"</span>);</span><br><span class=\"line\">ctx.register(SomeConfig.class, StandaloneDataConfig.class, JndiDataConfig.class);</span><br><span class=\"line\">ctx.refresh(); // </span><br></pre></td></tr></table></figure>\n<p> Spring Boot  application.propertiesapplication-dev.propertiesapplication-prod.properties  application.properties application-{profile}.properties  profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -Dspring.profiles.active=prod -jar JavaDoop.jar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean\"><a href=\"#-Bean\" class=\"headerlink\" title=\" Bean\"></a> Bean</h4><p> factory-bean  FactoryBean  Spring  Bean FactoryBean</p>\n<p> Spring </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"clientService\"</span></span><br><span class=\"line\">    class=<span class=\"string\">\"examples.ClientService\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createInstance\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ClientService &#123;</span><br><span class=\"line\">    private static ClientService clientService = new ClientService();</span><br><span class=\"line\">    private <span class=\"function\"><span class=\"title\">ClientService</span></span>() &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    public static ClientService <span class=\"function\"><span class=\"title\">createInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> clientService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"serviceLocator\"</span> class=<span class=\"string\">\"examples.DefaultServiceLocator\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- inject any dependencies required by this locator bean --&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"clientService\"</span></span><br><span class=\"line\">    factory-bean=<span class=\"string\">\"serviceLocator\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createClientServiceInstance\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"accountService\"</span></span><br><span class=\"line\">    factory-bean=<span class=\"string\">\"serviceLocator\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createAccountServiceInstance\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class DefaultServiceLocator &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static ClientService clientService = new ClientServiceImpl();</span><br><span class=\"line\"></span><br><span class=\"line\">    private static AccountService accountService = new AccountServiceImpl();</span><br><span class=\"line\"></span><br><span class=\"line\">    public ClientService <span class=\"function\"><span class=\"title\">createClientServiceInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> clientService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public AccountService <span class=\"function\"><span class=\"title\">createAccountServiceInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accountService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"FactoryBean\"><a href=\"#FactoryBean\" class=\"headerlink\" title=\"FactoryBean\"></a>FactoryBean</h4><p>FactoryBean  Bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface FactoryBean&lt;T&gt; &#123;</span><br><span class=\"line\">    T getObject() throws Exception;</span><br><span class=\"line\">    Class&lt;T&gt; getObjectType();</span><br><span class=\"line\">    boolean isSingleton();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Person &#123; </span><br><span class=\"line\">    private Car car ;</span><br><span class=\"line\">    private void setCar(Car car)&#123; this.car = car;  &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Person  Bean Car  Car  Car </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyCarFactoryBean implements FactoryBean&lt;Car&gt;&#123;</span><br><span class=\"line\">    private String make; </span><br><span class=\"line\">    private int year ;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setMake(String m)&#123; this.make =m ; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setYear(int y)&#123; this.year = y; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Car <span class=\"function\"><span class=\"title\">getObject</span></span>()&#123; </span><br><span class=\"line\">      //  Car </span><br><span class=\"line\">      CarBuilder cb = CarBuilder.car();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(year!=0) cb.setYear(this.year);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(StringUtils.hasText(this.make)) cb.setMake( this.make ); </span><br><span class=\"line\">      <span class=\"built_in\">return</span> cb.factory(); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Class&lt;Car&gt; <span class=\"function\"><span class=\"title\">getObjectType</span></span>() &#123; <span class=\"built_in\">return</span> Car.class ; &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean <span class=\"function\"><span class=\"title\">isSingleton</span></span>() &#123; <span class=\"built_in\">return</span> <span class=\"literal\">false</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class = <span class=\"string\">\"com.loonycoder.MyCarFactoryBean\"</span> id = <span class=\"string\">\"car\"</span>&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"make\"</span> value =<span class=\"string\">\"Honda\"</span>/&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"year\"</span> value =<span class=\"string\">\"1994\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;bean class = <span class=\"string\">\"com.loonycoder.Person\"</span> id = <span class=\"string\">\"josh\"</span>&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"car\"</span> ref = <span class=\"string\">\"car\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>id  car  bean  FactoryBean Person  Bean  FactoryBean  Spring </p>\n<p> xml  Bean  java  config </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Configuration </span><br><span class=\"line\">public class CarConfiguration &#123; </span><br><span class=\"line\"></span><br><span class=\"line\">    @Bean </span><br><span class=\"line\">    public MyCarFactoryBean <span class=\"function\"><span class=\"title\">carFactoryBean</span></span>()&#123; </span><br><span class=\"line\">      MyCarFactoryBean cfb = new MyCarFactoryBean();</span><br><span class=\"line\">      cfb.setMake(<span class=\"string\">\"Honda\"</span>);</span><br><span class=\"line\">      cfb.setYear(1994);</span><br><span class=\"line\">      <span class=\"built_in\">return</span> cfb;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Bean</span><br><span class=\"line\">    public Person <span class=\"function\"><span class=\"title\">aPerson</span></span>()&#123; </span><br><span class=\"line\">    Person person = new Person();</span><br><span class=\"line\">      // </span><br><span class=\"line\">    person.setCar(carFactoryBean().getObject());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> person; </span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> MyCarFactoryBean  Bean  FactoryBean FactoryBean </p>\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleInitBean\"</span> class=<span class=\"string\">\"examples.ExampleBean\"</span> init-method=<span class=\"string\">\"init\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AnotherExampleBean implements InitializingBean &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">afterPropertiesSet</span></span>() &#123;</span><br><span class=\"line\">        // <span class=\"keyword\">do</span> some initialization work</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean(initMethod = <span class=\"string\">\"init\"</span>)</span><br><span class=\"line\">public Foo <span class=\"function\"><span class=\"title\">foo</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Foo();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@PostConstruct</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">init</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleInitBean\"</span> class=<span class=\"string\">\"examples.ExampleBean\"</span> destroy-method=<span class=\"string\">\"cleanup\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AnotherExampleBean implements DisposableBean &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">destroy</span></span>() &#123;</span><br><span class=\"line\">        // <span class=\"keyword\">do</span> some destruction work (like releasing pooled connections)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean(destroyMethod = <span class=\"string\">\"cleanup\"</span>)</span><br><span class=\"line\">public Bar <span class=\"function\"><span class=\"title\">bar</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Bar();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@PreDestroy</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">cleanup</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ConversionService\"><a href=\"#ConversionService\" class=\"headerlink\" title=\"ConversionService\"></a>ConversionService</h4><p></p>\n<p> controller </p>\n<p> StringInteger  controller  Date  ConversionService </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"conversionService\"</span></span><br><span class=\"line\">  class=<span class=\"string\">\"org.springframework.context.support.ConversionServiceFactoryBean\"</span>&gt;</span><br><span class=\"line\">  &lt;property name=<span class=\"string\">\"converters\"</span>&gt;</span><br><span class=\"line\">    &lt;list&gt;</span><br><span class=\"line\">      &lt;bean class=<span class=\"string\">\"com.loonycoder.learning.utils.StringToEnumConverterFactory\"</span>/&gt;</span><br><span class=\"line\">    &lt;/list&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>ConversionService  convert </p>\n<p> Converter </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringToDateConverter implements Converter&lt;String, Date&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Date convert(String <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> DateUtils.parseDate(<span class=\"built_in\">source</span>, <span class=\"string\">\"yyyy-MM-dd\"</span>, <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, <span class=\"string\">\"yyyy-MM-dd HH:mm\"</span>, <span class=\"string\">\"HH:mm:ss\"</span>, <span class=\"string\">\"HH:mm\"</span>);</span><br><span class=\"line\">        &#125; catch (ParseException e) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean  Date </p>\n<h4 id=\"Bean-\"><a href=\"#Bean-\" class=\"headerlink\" title=\"Bean \"></a>Bean </h4><p> Bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean parent=\"\" /&gt;</code>  parent  Spring </p>\n<p> java child bean  parent bean </p>\n<p>Spring  AbstractBeanDefinition  <code>ChildBeanDefinition</code>  child bean</p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritedTestBean\"</span> abstract=<span class=\"string\">\"true\"</span> class=<span class=\"string\">\"org.springframework.beans.TestBean\"</span>&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"parent\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritsWithDifferentClass\"</span> class=<span class=\"string\">\"org.springframework.beans.DerivedTestBean\"</span></span><br><span class=\"line\">        parent=<span class=\"string\">\"inheritedTestBean\"</span> init-method=<span class=\"string\">\"initialize\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"override\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>parent bean  <code>abstract=\"true\"</code> child bean  parent bean  name </p>\n<p>child bean  scopeinit-methoddestroy-method </p>\n<p> parent bean  abstract = true  Spring  singleton beans  bean</p>\n<p> parent bean class bean  parent bean abstract = true</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritedTestBeanWithoutClass\"</span> abstract=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"parent\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Bean  singleton singleton  singleton prototype  prototype </p>\n<p> singleton  prototype  bean</p>\n<p> bean  BeanFactory  Spring </p>\n<p> Lookup method</p>\n<p><strong>lookup-method</strong><br> Spring Reference </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package fiona.apple;</span><br><span class=\"line\"></span><br><span class=\"line\">// no more Spring imports!</span><br><span class=\"line\"></span><br><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        // grab a new instance of the appropriate Command interface</span><br><span class=\"line\">        Command <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        // <span class=\"built_in\">set</span> the state on the (hopefully brand new) Command instance</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // okay... but <span class=\"built_in\">where</span> is the implementation of this method?</span><br><span class=\"line\">    protected abstract Command createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>xml  <code>&lt;lookup-method /&gt;</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- a stateful bean deployed as a prototype (non-singleton) --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"myCommand\"</span> class=<span class=\"string\">\"fiona.apple.AsyncCommand\"</span> scope=<span class=\"string\">\"prototype\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- inject dependencies here as required --&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- commandProcessor uses statefulCommandHelper --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"commandManager\"</span> class=<span class=\"string\">\"fiona.apple.CommandManager\"</span>&gt;</span><br><span class=\"line\">    &lt;lookup-method name=<span class=\"string\">\"createCommand\"</span> bean=<span class=\"string\">\"myCommand\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>Spring  <strong>CGLIB</strong>  final class final</p>\n<p>lookup-method  <code>&lt;lookup-method /&gt;</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        MyCommand <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Lookup(<span class=\"string\">\"myCommand\"</span>)</span><br><span class=\"line\">    protected abstract Command createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>&lt;context:component-scan base-package=\"com.loonycoder\" /&gt;</code></p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        MyCommand <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Lookup</span><br><span class=\"line\">    protected abstract MyCommand createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p> MyCommand Command  Command</p>\n</blockquote>\n<p><strong>replaced-method</strong><br> bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyValueCalculator &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String computeValue(String input) &#123;</span><br><span class=\"line\">        // some real code...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // some other methods...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> MethodReplacer </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ReplacementComputeValue implements org.springframework.beans.factory.support.MethodReplacer &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object reimplement(Object o, Method m, Object[] args) throws Throwable &#123;</span><br><span class=\"line\">        // get the input value, work with it, and <span class=\"built_in\">return</span> a computed result</span><br><span class=\"line\">        String input = (String) args[0];</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ...;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"myValueCalculator\"</span> class=<span class=\"string\">\"x.y.z.MyValueCalculator\"</span>&gt;</span><br><span class=\"line\">    &lt;!--  computeValue  --&gt;</span><br><span class=\"line\">    &lt;replaced-method name=<span class=\"string\">\"computeValue\"</span> replacer=<span class=\"string\">\"replacementComputeValue\"</span>&gt;</span><br><span class=\"line\">        &lt;arg-type&gt;String&lt;/arg-type&gt;</span><br><span class=\"line\">    &lt;/replaced-method&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"replacementComputeValue\"</span> class=<span class=\"string\">\"a.b.c.ReplacementComputeValue\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>arg-type </p>\n</blockquote>\n<h4 id=\"BeanPostProcessor\"><a href=\"#BeanPostProcessor\" class=\"headerlink\" title=\"BeanPostProcessor\"></a>BeanPostProcessor</h4><p> BeanPostProcessor  Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface BeanPostProcessor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> bean  postProcessBeforeInitialization  postProcessAfterInitialization </p>\n<p> BeanPostProcessor Spring  BeanFactory  obtainFactory()  prepareBeanFactory(factory)Spring  BeanPostProcessorApplicationContextAwareProcessorApplicationListenerDetector</p>\n<p> bean  bean  bean  null</p>\n<p> bean  Spring  bean </p>\n<p> bean  BeanPostProcessor </p>\n<p> bean  AbstractAutowireCapableBeanFactory#initBean </p>\n<p> Aware  bean BeanPostProcessor  postProcessBeforeInitialization  init-method BeanPostProcessor  postProcessAfterInitialization </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> Spring  Spring </p>\n<p> Spring  singleton beans  Spring </p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<p><a href=\"https://javadoop.com/post/spring-ioc\" target=\"_blank\" rel=\"noopener\">https://javadoop.com/post/spring-ioc</a></p>\n<p><br></p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void main(String[] args) &#123;</span><br><span class=\"line\">    ApplicationContext context = new ClassPathXmlApplicationContext(<span class=\"string\">\"classpath:Application.xml\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Spring  maven  dependencies  Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class=\"line\">  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class=\"line\">  &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>spring-context  spring-corespring-beansspring-aopspring-expression  jar </p>\n</blockquote>\n<p> SpringMVC Spring Spring  web  Spring Spring <br><code>ApplicationContext context = new ClassPathXmlApplicationContext(...)</code> ClassPath  xml  xml  ApplicationContext  ClassPathXmlApplicationContext  ApplicationContext <br><img src=\"/images/spring-ioc1.png\" alt=\"spring\"></p>\n<blockquote>\n<p> Spring <br></p>\n</blockquote>\n<p>ClassPathXmlApplicationContext  ApplicationContext <br><strong>FileSystemXmlApplicationContext</strong><strong>AnnotationConfigApplicationContext</strong></p>\n<ol>\n<li><p><strong>FileSystemXmlApplicationContext</strong> xml  ClassPathXmlApplicationContext </p>\n</li>\n<li><p><strong>AnnotationConfigApplicationContext</strong> java </p>\n</li>\n</ol>\n<p> ClassPathXmlApplicationContext </p>\n<p> ApplicationContext</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface MessageService &#123;</span><br><span class=\"line\">    String getMessage();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MessageServiceImpl implements MessageService &#123;</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getMessage</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <strong>resources</strong>  Application.xml  Application-xxx.xml </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span> ?&gt;</span><br><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">       xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">       xsi:schemaLocation=<span class=\"string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"</span> default-autowire=<span class=\"string\">\"byName\"</span>&gt;</span><br><span class=\"line\">    &lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class App &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        //  ApplicationContext</span><br><span class=\"line\">        ApplicationContext context = new ClassPathXmlApplicationContext(<span class=\"string\">\"classpath:Application.xml\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"context \"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        //  context  Bean new MessageServiceImpl() </span><br><span class=\"line\">        MessageService messageService = context.getBean(MessageService.class);</span><br><span class=\"line\">        // : hello world</span><br><span class=\"line\">        System.out.println(messageService.getMessage());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Spring  ApplicationContext  IOC ApplicationContext  Bean Bean </p>\n<hr>\n<h3 id=\"BeanFactory-\"><a href=\"#BeanFactory-\" class=\"headerlink\" title=\"BeanFactory \"></a>BeanFactory </h3><p>BeanFactory bean  bean </p>\n<p> BeanFactory  ApplicationContext  BeanFactory BeanFactory <br><img src=\"/images/spring-ioc2.png\" alt=\"spring\"><br>ApplicationContext </p>\n<ul>\n<li>ApplicationContext  ListableBeanFactory Listable  Bean BeanFactory  Bean </li>\n<li>ApplicationContext  HierarchicalBeanFactoryHierarchical  BeanFactory BeanFactory </li>\n<li>AutowireCapableBeanFactory  Autowire  Bean ApplicationContext  ApplicationContext  getAutowireCapableBeanFactory() </li>\n<li>ConfigurableListableBeanFactory  ApplicationContext </li>\n<li><br> BeanFactoryListableBeanFactoryHierarchicalBeanFactoryAutowireCapableBeanFactoryApplicationContext </li>\n</ul>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> ClassPathXmlApplicationContext </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ClassPathXmlApplicationContext extends AbstractXmlApplicationContext &#123;</span><br><span class=\"line\">  private Resource[] configResources;</span><br><span class=\"line\"></span><br><span class=\"line\">  //  ApplicationContext </span><br><span class=\"line\">  public ClassPathXmlApplicationContext(ApplicationContext parent) &#123;</span><br><span class=\"line\">    super(parent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  public ClassPathXmlApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent)</span><br><span class=\"line\">      throws BeansException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    super(parent);</span><br><span class=\"line\">    // (tab)</span><br><span class=\"line\">    setConfigLocations(configLocations);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (refresh) &#123;</span><br><span class=\"line\">      refresh(); // </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>refresh()</code> refresh() init()  ApplicationContext  refresh() refresh()  ApplicationContext </p>\n<p>refresh() </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void refresh() throws BeansException, IllegalStateException &#123;</span><br><span class=\"line\">   //  refresh() </span><br><span class=\"line\">   synchronized (this.startupShutdownMonitor) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      // ( beanName-&gt; beanDefinition  map)</span><br><span class=\"line\">      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanFactory  BeanPostProcessor bean</span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  BeanFactoryPostProcessor Bean </span><br><span class=\"line\">         // Spring  postProcessBeanFactory </span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         //  BeanFactoryPostProcessor </span><br><span class=\"line\">         postProcessBeanFactory(beanFactory);</span><br><span class=\"line\">         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) </span><br><span class=\"line\">         invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanPostProcessor  BeanFactoryPostProcessor </span><br><span class=\"line\">         // : postProcessBeforeInitialization  postProcessAfterInitialization</span><br><span class=\"line\">         //  Bean  Bean </span><br><span class=\"line\">         registerBeanPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext  MessageSource</span><br><span class=\"line\">         initMessageSource();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext </span><br><span class=\"line\">         initApplicationEventMulticaster();</span><br><span class=\"line\"></span><br><span class=\"line\">         // ()</span><br><span class=\"line\">         //  Bean singleton beans </span><br><span class=\"line\">         onRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationListener </span><br><span class=\"line\">         registerListeners();</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         //  singleton beans</span><br><span class=\"line\">         //lazy-init </span><br><span class=\"line\">         finishBeanFactoryInitialization(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         // ApplicationContext </span><br><span class=\"line\">         finishRefresh();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class=\"line\">            logger.warn(<span class=\"string\">\"Exception encountered during context initialization - \"</span> +</span><br><span class=\"line\">                  <span class=\"string\">\"cancelling refresh attempt: \"</span> + ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         // Destroy already created singletons to avoid dangling resources.</span><br><span class=\"line\">         //  singleton  Beans bean </span><br><span class=\"line\">         destroyBeans();</span><br><span class=\"line\"></span><br><span class=\"line\">         // Reset <span class=\"string\">'active'</span> flag.</span><br><span class=\"line\">         cancelRefresh(ex);</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         // Reset common introspection caches <span class=\"keyword\">in</span> Spring<span class=\"string\">'s core, since we</span></span><br><span class=\"line\"><span class=\"string\">         // might not ever need metadata for singleton beans anymore...</span></span><br><span class=\"line\"><span class=\"string\">         resetCommonCaches();</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">   &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p> refresh() </p>\n<hr>\n<h4 id=\"-Bean--Bean\"><a href=\"#-Bean--Bean\" class=\"headerlink\" title=\" Bean  Bean\"></a> Bean  Bean</h4><p> refresh()  obtainFreshBeanFactory()</p>\n<p><strong></strong> BeanFactory Bean Bean </p>\n<p>Bean  Bean </p>\n<p>// AbstractApplicationContext.java</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected ConfigurableListableBeanFactory <span class=\"function\"><span class=\"title\">obtainFreshBeanFactory</span></span>() &#123;</span><br><span class=\"line\">   //  BeanFactory () BeanFactory Bean  Bean </span><br><span class=\"line\">   refreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanFactory</span><br><span class=\"line\">   ConfigurableListableBeanFactory beanFactory = getBeanFactory();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Bean factory for \"</span> + getDisplayName() + <span class=\"string\">\": \"</span> + beanFactory);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> beanFactory;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>// AbstractRefreshableApplicationContext.java 120</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected final void refreshBeanFactory() throws BeansException &#123;</span><br><span class=\"line\">   //  ApplicationContext  BeanFactory  Bean BeanFactory</span><br><span class=\"line\">   //  BeanFactory  BeanFactory</span><br><span class=\"line\">   // ApplicationContext  BeanFactory</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (hasBeanFactory()) &#123;</span><br><span class=\"line\">      destroyBeans();</span><br><span class=\"line\">      closeBeanFactory();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  DefaultListableBeanFactory</span><br><span class=\"line\">      DefaultListableBeanFactory beanFactory = createBeanFactory();</span><br><span class=\"line\">      //  BeanFactory </span><br><span class=\"line\">      beanFactory.setSerializationId(getId());</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      //  BeanFactory  Bean </span><br><span class=\"line\">      customizeBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      loadBeanDefinitions(beanFactory);</span><br><span class=\"line\">      synchronized (this.beanFactoryMonitor) &#123;</span><br><span class=\"line\">         this.beanFactory = beanFactory;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (IOException ex) &#123;</span><br><span class=\"line\">      throw new ApplicationContextException(<span class=\"string\">\"I/O error parsing bean definition source for \"</span> + getDisplayName(), ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> ApplicationContext ApplicationContext  BeanFactory BeanFactory  BeanFactoryDefaultListableBeanFactory BeanFactory </p>\n</blockquote>\n<p> <strong>DefaultListableBeanFactory</strong>  ConfigurableListableBeanFactory BeanFactory <br><img src=\"/images/spring-ioc2.png\" alt=\"spring\"></p>\n<p> ConfigurableListableBeanFactory  DefaultListableBeanFactory DefaultListableBeanFactory  AbstractAutowireCapableBeanFactory  DefaultListableBeanFactory  BeanFactory </p>\n<blockquote>\n<p> Spring IOC  bean<br> ApplicationContext  AutowireCapableBeanFactory DefaultListableBeanFactory <br> ApplicationContext  Spring</p>\n</blockquote>\n<p> BeanDefinition<strong> BeanFactory  Bean  Bean </strong></p>\n<p> BeanDefinition  Spring  Bean Bean  BeanDefinition  Spring  BeanFactory </p>\n<p> Bean  Bean  BeanDefinition </p>\n<blockquote>\n<p>BeanDefinition  Bean  Bean  Bean  Bean </p>\n</blockquote>\n<p><strong>BeanDefinition </strong><br> BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface BeanDefinition extends AttributeAccessor, BeanMetadataElement &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  sington  prototype </span><br><span class=\"line\">   //  request, session, globalSession, application, websocket </span><br><span class=\"line\">   //  web </span><br><span class=\"line\">   String SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;</span><br><span class=\"line\">   String SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   int ROLE_APPLICATION = 0;</span><br><span class=\"line\">   int ROLE_SUPPORT = 1;</span><br><span class=\"line\">   int ROLE_INFRASTRUCTURE = 2;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean bean  java </span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   void setParentName(String parentName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean</span><br><span class=\"line\">   String getParentName();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   void setBeanClassName(String beanClassName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String getBeanClassName();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   //  bean  scope</span><br><span class=\"line\">   void setScope(String scope);</span><br><span class=\"line\"></span><br><span class=\"line\">   String getScope();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   void setLazyInit(boolean lazyInit);</span><br><span class=\"line\"></span><br><span class=\"line\">   boolean isLazyInit();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean( @Autowire )</span><br><span class=\"line\">   //  depends-on=<span class=\"string\">\"\"</span> </span><br><span class=\"line\">   void setDependsOn(String... dependsOn);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String[] getDependsOn();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean </span><br><span class=\"line\">   //  <span class=\"literal\">false</span></span><br><span class=\"line\">   void setAutowireCandidate(boolean autowireCandidate);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  Bean </span><br><span class=\"line\">   boolean isAutowireCandidate();</span><br><span class=\"line\"></span><br><span class=\"line\">   // Spring  primary  <span class=\"literal\">true</span>  bean</span><br><span class=\"line\">   void setPrimary(boolean primary);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  primary </span><br><span class=\"line\">   boolean isPrimary();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   void setFactoryBeanName(String factoryBeanName);</span><br><span class=\"line\">   // </span><br><span class=\"line\">   String getFactoryBeanName();</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   void setFactoryMethodName(String factoryMethodName);</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   String getFactoryMethodName();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   ConstructorArgumentValues getConstructorArgumentValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   // Bean  bean </span><br><span class=\"line\">   MutablePropertyValues getPropertyValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton</span><br><span class=\"line\">   boolean isSingleton();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  prototype</span><br><span class=\"line\">   boolean isPrototype();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  abstract</span><br><span class=\"line\">   //  bean ......</span><br><span class=\"line\">   boolean isAbstract();</span><br><span class=\"line\"></span><br><span class=\"line\">   int getRole();</span><br><span class=\"line\">   String getDescription();</span><br><span class=\"line\">   String getResourceDescription();</span><br><span class=\"line\">   BeanDefinition getOriginatingBeanDefinition();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> BeanDefinition <br> getInstance() </p>\n</blockquote>\n<p> BeanDefinition  refreshBeanFactory() </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">customizeBeanFactory(beanFactory);</span><br><span class=\"line\">loadBeanDefinitions(beanFactory);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><strong>customizeBeanFactory</strong></p>\n<p>customizeBeanFactory(beanFactory)  BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.allowBeanDefinitionOverriding != null) &#123;</span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      beanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.allowCircularReferences != null) &#123;</span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      beanFactory.setAllowCircularReferences(this.allowCircularReferences);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>BeanDefinition  bean  id  nameallowBeanDefinitionOverriding  null</p>\n<p>A  B B  A A  BB  C C  A</p>\n<p>Spring  A  B B  A </p>\n<p> Bean  Spring </p>\n<p></p>\n<p><strong>Bean:loadBeanDefinitions</strong></p>\n<p> loadBeanDefinitions(beanFactory)  Bean BeanFactory </p>\n<p> XmlBeanDefinitionReader </p>\n<p>// AbstractXmlApplicationContext.java 80</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**  XmlBeanDefinitionReader  Bean*/</span><br><span class=\"line\">@Override</span><br><span class=\"line\">protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException &#123;</span><br><span class=\"line\">   //  BeanFactory  XmlBeanDefinitionReader</span><br><span class=\"line\">   XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">   // Configure the bean definition reader with this context<span class=\"string\">'s</span></span><br><span class=\"line\"><span class=\"string\">   // resource loading environment.</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setEnvironment(this.getEnvironment());</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setResourceLoader(this);</span></span><br><span class=\"line\"><span class=\"string\">   beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">   //  BeanDefinitionReader</span></span><br><span class=\"line\"><span class=\"string\">   // </span></span><br><span class=\"line\"><span class=\"string\">   initBeanDefinitionReader(beanDefinitionReader);</span></span><br><span class=\"line\"><span class=\"string\">   // </span></span><br><span class=\"line\"><span class=\"string\">   loadBeanDefinitions(beanDefinitionReader);</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p> Reader  xml </p>\n<p>// AbstractXmlApplicationContext.java 120</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException &#123;</span><br><span class=\"line\">   Resource[] configResources = getConfigResources();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (configResources != null) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      reader.loadBeanDefinitions(configResources);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   String[] configLocations = getConfigLocations();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (configLocations != null) &#123;</span><br><span class=\"line\">      // 2</span><br><span class=\"line\">      reader.loadBeanDefinitions(configLocations);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  Resource </span><br><span class=\"line\">@Override</span><br><span class=\"line\">public int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   Assert.notNull(resources, <span class=\"string\">\"Resource array must not be null\"</span>);</span><br><span class=\"line\">   int counter = 0;</span><br><span class=\"line\">   //  <span class=\"keyword\">for</span>  resource</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (Resource resource : resources) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      counter += loadBeanDefinitions(resource);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  counter BeanDefinition</span><br><span class=\"line\">   <span class=\"built_in\">return</span> counter;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// XmlBeanDefinitionReader 303</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> loadBeanDefinitions(new EncodedResource(resource));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// XmlBeanDefinitionReader 314</span><br><span class=\"line\">public int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   Assert.notNull(encodedResource, <span class=\"string\">\"EncodedResource must not be null\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isInfoEnabled()) &#123;</span><br><span class=\"line\">      logger.info(<span class=\"string\">\"Loading XML bean definitions from \"</span> + encodedResource.getResource());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  ThreadLocal </span><br><span class=\"line\">   Set&lt;EncodedResource&gt; currentResources = this.resourcesCurrentlyBeingLoaded.get();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (currentResources == null) &#123;</span><br><span class=\"line\">      currentResources = new HashSet&lt;EncodedResource&gt;(4);</span><br><span class=\"line\">      this.resourcesCurrentlyBeingLoaded.set(currentResources);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!currentResources.add(encodedResource)) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(</span><br><span class=\"line\">            <span class=\"string\">\"Detected cyclic loading of \"</span> + encodedResource + <span class=\"string\">\" - check your import definitions!\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      InputStream inputStream = encodedResource.getResource().getInputStream();</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         InputSource inputSource = new InputSource(inputStream);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (encodedResource.getEncoding() != null) &#123;</span><br><span class=\"line\">            inputSource.setEncoding(encodedResource.getEncoding());</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> doLoadBeanDefinitions(inputSource, encodedResource.getResource());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         inputStream.close();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (IOException ex) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(</span><br><span class=\"line\">            <span class=\"string\">\"IOException parsing XML document from \"</span> + encodedResource.getResource(), ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   finally &#123;</span><br><span class=\"line\">      currentResources.remove(encodedResource);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (currentResources.isEmpty()) &#123;</span><br><span class=\"line\">         this.resourcesCurrentlyBeingLoaded.remove();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  388 </span><br><span class=\"line\">protected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  xml  Document </span><br><span class=\"line\">      Document doc = doLoadDocument(inputSource, resource);</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> registerBeanDefinitions(doc, resource);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//  505 </span><br><span class=\"line\">//  Bean</span><br><span class=\"line\">public int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\">   BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();</span><br><span class=\"line\">   int countBefore = getRegistry().getBeanDefinitionCount();</span><br><span class=\"line\">   // </span><br><span class=\"line\">   documentReader.registerBeanDefinitions(doc, createReaderContext(resource));</span><br><span class=\"line\">   <span class=\"built_in\">return</span> getRegistry().getBeanDefinitionCount() - countBefore;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// DefaultBeanDefinitionDocumentReader 90</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) &#123;</span><br><span class=\"line\">   this.readerContext = readerContext;</span><br><span class=\"line\">   logger.debug(<span class=\"string\">\"Loading bean definitions\"</span>);</span><br><span class=\"line\">   Element root = doc.getDocumentElement();</span><br><span class=\"line\">   //  xml </span><br><span class=\"line\">   doRegisterBeanDefinitions(root);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DOM  for </p>\n<p><strong>doRegisterBeanDefinitions</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// DefaultBeanDefinitionDocumentReader 116</span><br><span class=\"line\">protected void doRegisterBeanDefinitions(Element root) &#123;</span><br><span class=\"line\">   // BeanDefinitionParserDelegate  Bean </span><br><span class=\"line\">   //  parent? </span><br><span class=\"line\">   //  &lt;beans /&gt;  &lt;beans /&gt;  root  xml  &lt;beans /&gt; </span><br><span class=\"line\">   BeanDefinitionParserDelegate parent = this.delegate;</span><br><span class=\"line\">   this.delegate = createDelegate(getReaderContext(), root, parent);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.delegate.isDefaultNamespace(root)) &#123;</span><br><span class=\"line\">      //  &lt;beans ... profile=<span class=\"string\">\"dev\"</span> /&gt;  profile </span><br><span class=\"line\">      //  profile  profile <span class=\"built_in\">return</span>  &lt;beans /&gt; </span><br><span class=\"line\">      //  profile  profile </span><br><span class=\"line\">      String profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (StringUtils.hasText(profileSpec)) &#123;</span><br><span class=\"line\">         String[] specifiedProfiles = StringUtils.tokenizeToStringArray(</span><br><span class=\"line\">               profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isInfoEnabled()) &#123;</span><br><span class=\"line\">               logger.info(<span class=\"string\">\"Skipped XML bean definition file due to specified profiles [\"</span> + profileSpec +</span><br><span class=\"line\">                     <span class=\"string\">\"] not matching: \"</span> + getReaderContext().getResource());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">return</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   preProcessXml(root); // </span><br><span class=\"line\">   // </span><br><span class=\"line\">   parseBeanDefinitions(root, this.delegate);</span><br><span class=\"line\">   postProcessXml(root); // </span><br><span class=\"line\"></span><br><span class=\"line\">   this.delegate = parent;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>preProcessXml(root)  postProcessXml(root) </p>\n<p> profile  profile </p>\n<p> parseBeanDefinitions(root, this.delegate) :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// default namespace  &lt;import /&gt;&lt;<span class=\"built_in\">alias</span> /&gt;&lt;bean /&gt;  &lt;beans /&gt;</span><br><span class=\"line\">//  custom </span><br><span class=\"line\">protected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (delegate.isDefaultNamespace(root)) &#123;</span><br><span class=\"line\">      NodeList nl = root.getChildNodes();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (int i = 0; i &lt; nl.getLength(); i++) &#123;</span><br><span class=\"line\">         Node node = nl.item(i);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (node instanceof Element) &#123;</span><br><span class=\"line\">            Element ele = (Element) node;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (delegate.isDefaultNamespace(ele)) &#123;</span><br><span class=\"line\">               //  default namespace </span><br><span class=\"line\">               parseDefaultElement(ele, delegate);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               //  namespace </span><br><span class=\"line\">               delegate.parseCustomElement(ele);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      delegate.parseCustomElement(root);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> parseDefaultElement(ele, delegate);  delegate.parseCustomElement(ele); </p>\n<p>parseDefaultElement(ele, delegate)  <code>&lt;import /&gt;&lt;alias /&gt;&lt;bean /&gt;&lt;beans /&gt;</code></p>\n<blockquote>\n<p> default  namespace </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.springframework.org/schema/beans </span><br></pre></td></tr></table></figure>\n<p> namespace  xml xmlns </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">      xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">      xsi:schemaLocation=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">           http://www.springframework.org/schema/beans</span></span><br><span class=\"line\"><span class=\"string\">         http://www.springframework.org/schema/beans/spring-beans.xsd\"</span></span><br><span class=\"line\">      default-autowire=<span class=\"string\">\"byName\"</span>&gt; </span><br></pre></td></tr></table></figure>\n<p> delegate.parseCustomElement(element)  <code> &lt;mvc /&gt;&lt;task /&gt;&lt;context /&gt;&lt;aop /&gt;</code><br>  default  xml  namespace  .xsd  parser  MvcNamespaceHandlerTaskNamespaceHandlerContextNamespaceHandlerAopNamespaceHandler <br> <code>&lt;context:property-placeholder location=\"classpath:xx.properties\" /&gt;</code> ContextNamespaceHandler </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">     xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">     xmlns:context=<span class=\"string\">\"http://www.springframework.org/schema/context\"</span></span><br><span class=\"line\">     xmlns:mvc=<span class=\"string\">\"http://www.springframework.org/schema/mvc\"</span></span><br><span class=\"line\">     xsi:schemaLocation=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/beans </span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/context</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/mvc   </span></span><br><span class=\"line\"><span class=\"string\">          http://www.springframework.org/schema/mvc/spring-mvc.xsd  </span></span><br><span class=\"line\"><span class=\"string\">      \"</span></span><br><span class=\"line\">     default-autowire=<span class=\"string\">\"byName\"</span>&gt;</span><br><span class=\"line\">   &lt;/bean&gt; </span><br></pre></td></tr></table></figure>\n<p> <code>&lt;<dubbo /&gt;</code>  DubboNamespaceHandler <br> default </p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;import /&gt; </span><br><span class=\"line\">      importBeanDefinitionResource(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;<span class=\"built_in\">alias</span> /&gt; </span><br><span class=\"line\">      // &lt;<span class=\"built_in\">alias</span> name=<span class=\"string\">\"fromName\"</span> <span class=\"built_in\">alias</span>=<span class=\"string\">\"toName\"</span>/&gt;</span><br><span class=\"line\">      processAliasRegistration(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;bean /&gt; </span><br><span class=\"line\">      processBeanDefinition(ele, delegate);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) &#123;</span><br><span class=\"line\">      //  &lt;beans /&gt; </span><br><span class=\"line\">      doRegisterBeanDefinitions(ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <bean /> </p>\n<p><strong>processBeanDefinition  bean </strong><br> processBeanDefinition  <code>&lt;bean /&gt;</code> </p>\n<p>// DefaultBeanDefinitionDocumentReader 298</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinitionHolder </span><br><span class=\"line\">   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bdHolder != null) &#123;</span><br><span class=\"line\">      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         // Register the final decorated instance.</span><br><span class=\"line\">         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionStoreException ex) &#123;</span><br><span class=\"line\">         getReaderContext().error(<span class=\"string\">\"Failed to register bean definition with name '\"</span> +</span><br><span class=\"line\">               bdHolder.getBeanName() + <span class=\"string\">\"'\"</span>, ele, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // Send registration event.</span><br><span class=\"line\">      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code> </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Property</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">class</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">name</td>\n<td align=\"center\"> idname()</td>\n</tr>\n<tr>\n<td align=\"center\">scope</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">constructor arguments</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">properties</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">autowiring mode</td>\n<td align=\"center\">no()byNamebyType constructor</td>\n</tr>\n<tr>\n<td align=\"center\">lazy-initialization mode</td>\n<td align=\"center\">(bean)</td>\n</tr>\n<tr>\n<td align=\"center\">initialization method</td>\n<td align=\"center\">bean </td>\n</tr>\n<tr>\n<td align=\"center\">destruction method</td>\n<td align=\"center\">bean </td>\n</tr>\n</tbody></table>\n<p> Spring </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleBean\"</span> name=<span class=\"string\">\"name1, name2, name3\"</span> class=<span class=\"string\">\"com.loonycoder.ExampleBean\"</span></span><br><span class=\"line\">      scope=<span class=\"string\">\"singleton\"</span> lazy-init=<span class=\"string\">\"true\"</span> init-method=<span class=\"string\">\"init\"</span> destroy-method=<span class=\"string\">\"cleanup\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--  --&gt;</span><br><span class=\"line\">    &lt;constructor-arg <span class=\"built_in\">type</span>=<span class=\"string\">\"int\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\">    &lt;constructor-arg name=<span class=\"string\">\"years\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\">    &lt;constructor-arg index=<span class=\"string\">\"0\"</span> value=<span class=\"string\">\"7500000\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- property  --&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"beanOne\"</span>&gt;</span><br><span class=\"line\">        &lt;ref bean=<span class=\"string\">\"anotherExampleBean\"</span>/&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"beanTwo\"</span> ref=<span class=\"string\">\"yetAnotherBean\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"integerProperty\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p> factory-beanfactory-method<code>&lt;lockup-method /&gt;&lt;replaced-method /&gt;&lt;meta /&gt;&lt;qualifier /&gt;</code>  Spring  bean </p>\n<p> bean  BeanDefinitionHolder </p>\n<p>// BeanDefinitionParserDelegate 428</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public BeanDefinitionHolder parseBeanDefinitionElement(Element ele) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> parseBeanDefinitionElement(ele, null);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">public BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) &#123;</span><br><span class=\"line\">   String id = ele.getAttribute(ID_ATTRIBUTE);</span><br><span class=\"line\">   String nameAttr = ele.getAttribute(NAME_ATTRIBUTE);</span><br><span class=\"line\"></span><br><span class=\"line\">   List&lt;String&gt; aliases = new ArrayList&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">   //  name    </span><br><span class=\"line\">   //  name </span><br><span class=\"line\">   //  id  name 20</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (StringUtils.hasLength(nameAttr)) &#123;</span><br><span class=\"line\">      String[] nameArr = StringUtils.tokenizeToStringArray(nameAttr, MULTI_VALUE_ATTRIBUTE_DELIMITERS);</span><br><span class=\"line\">      aliases.addAll(Arrays.asList(nameArr));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   String beanName = id;</span><br><span class=\"line\">   // id, beanName</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!StringUtils.hasText(beanName) &amp;&amp; !aliases.isEmpty()) &#123;</span><br><span class=\"line\">      beanName = aliases.remove(0);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         logger.debug(<span class=\"string\">\"No XML 'id' specified - using '\"</span> + beanName +</span><br><span class=\"line\">               <span class=\"string\">\"' as bean name and \"</span> + aliases + <span class=\"string\">\" as aliases\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (containingBean == null) &#123;</span><br><span class=\"line\">      checkNameUniqueness(beanName, aliases, ele);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  &lt;bean ...&gt;...&lt;/bean&gt;  BeanDefinition,</span><br><span class=\"line\">   //  BeanDefinition </span><br><span class=\"line\">   AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinition </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanDefinition != null) &#123;</span><br><span class=\"line\">      //  id  name beanName  null</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!StringUtils.hasText(beanName)) &#123;</span><br><span class=\"line\">         try &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (containingBean != null) &#123;//  containingBean  null </span><br><span class=\"line\">               beanName = BeanDefinitionReaderUtils.generateBeanName(</span><br><span class=\"line\">                     beanDefinition, this.readerContext.getRegistry(), <span class=\"literal\">true</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               //  id  name</span><br><span class=\"line\">               //   1. beanName com.loonycoder.service.MessageServiceImpl<span class=\"comment\">#0</span></span><br><span class=\"line\">               //   2. beanClassName com.loonycoder.service.MessageServiceImpl</span><br><span class=\"line\"></span><br><span class=\"line\">               beanName = this.readerContext.generateBeanName(beanDefinition);</span><br><span class=\"line\"></span><br><span class=\"line\">               String beanClassName = beanDefinition.getBeanClassName();</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (beanClassName != null &amp;&amp;</span><br><span class=\"line\">                     beanName.startsWith(beanClassName) &amp;&amp; beanName.length() &gt; beanClassName.length() &amp;&amp;</span><br><span class=\"line\">                     !this.readerContext.getRegistry().isBeanNameInUse(beanClassName)) &#123;</span><br><span class=\"line\">                  //  beanClassName  Bean </span><br><span class=\"line\">                  aliases.add(beanClassName);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">               logger.debug(<span class=\"string\">\"Neither XML 'id' nor 'name' specified - \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"using generated bean name [\"</span> + beanName + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         catch (Exception ex) &#123;</span><br><span class=\"line\">            error(ex.getMessage(), ele);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      String[] aliasesArray = StringUtils.toStringArray(aliases);</span><br><span class=\"line\">      //  BeanDefinitionHolder</span><br><span class=\"line\">      <span class=\"built_in\">return</span> new BeanDefinitionHolder(beanDefinition, beanName, aliasesArray);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public AbstractBeanDefinition parseBeanDefinitionElement(</span><br><span class=\"line\">      Element ele, String beanName, BeanDefinition containingBean) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   this.parseState.push(new BeanEntry(beanName));</span><br><span class=\"line\"></span><br><span class=\"line\">   String className = null;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (ele.hasAttribute(CLASS_ATTRIBUTE)) &#123;</span><br><span class=\"line\">      className = ele.getAttribute(CLASS_ATTRIBUTE).trim();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      String parent = null;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ele.hasAttribute(PARENT_ATTRIBUTE)) &#123;</span><br><span class=\"line\">         parent = ele.getAttribute(PARENT_ATTRIBUTE);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      //  BeanDefinition</span><br><span class=\"line\">      AbstractBeanDefinition bd = createBeanDefinition(className, parent);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanDefinition  AbstractBeanDefinition </span><br><span class=\"line\">      parseBeanDefinitionAttributes(ele, beanName, containingBean, bd);</span><br><span class=\"line\">      bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT));</span><br><span class=\"line\"></span><br><span class=\"line\">      /**</span><br><span class=\"line\">       *  &lt;bean&gt;......&lt;/bean&gt; </span><br><span class=\"line\">       *  bd </span><br><span class=\"line\">       */</span><br><span class=\"line\"></span><br><span class=\"line\">      //  &lt;meta /&gt;</span><br><span class=\"line\">      parseMetaElements(ele, bd);</span><br><span class=\"line\">      //  &lt;lookup-method /&gt;</span><br><span class=\"line\">      parseLookupOverrideSubElements(ele, bd.getMethodOverrides());</span><br><span class=\"line\">      //  &lt;replaced-method /&gt;</span><br><span class=\"line\">      parseReplacedMethodSubElements(ele, bd.getMethodOverrides());</span><br><span class=\"line\">    //  &lt;constructor-arg /&gt;</span><br><span class=\"line\">      parseConstructorArgElements(ele, bd);</span><br><span class=\"line\">      //  &lt;property /&gt;</span><br><span class=\"line\">      parsePropertyElements(ele, bd);</span><br><span class=\"line\">      //  &lt;qualifier /&gt;</span><br><span class=\"line\">      parseQualifierElements(ele, bd);</span><br><span class=\"line\"></span><br><span class=\"line\">      bd.setResource(this.readerContext.getResource());</span><br><span class=\"line\">      bd.setSource(extractSource(ele));</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"built_in\">return</span> bd;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (ClassNotFoundException ex) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Bean class [\"</span> + className + <span class=\"string\">\"] not found\"</span>, ele, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (NoClassDefFoundError err) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Class that bean class [\"</span> + className + <span class=\"string\">\"] depends on not found\"</span>, ele, err);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      error(<span class=\"string\">\"Unexpected failure during bean definition parsing\"</span>, ele, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   finally &#123;</span><br><span class=\"line\">      this.parseState.pop();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  BeanDefinitionHolder </p>\n<p> <code>&lt;bean /&gt;</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) &#123;</span><br><span class=\"line\">   //  &lt;bean /&gt;  BeanDefinitionHolder</span><br><span class=\"line\">   BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bdHolder != null) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionStoreException ex) &#123;</span><br><span class=\"line\">         getReaderContext().error(<span class=\"string\">\"Failed to register bean definition with name '\"</span> +</span><br><span class=\"line\">               bdHolder.getBeanName() + <span class=\"string\">\"'\"</span>, ele, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  BeanDefinitionHolder  BeanDefinition  beanNamealiases  BeanDefinition </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class BeanDefinitionHolder implements BeanMetadataElement &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final BeanDefinition beanDefinition;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final String beanName;</span><br><span class=\"line\"></span><br><span class=\"line\">  private final String[] aliases;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p> BeanDefinition</p>\n<p> Bean </p>\n<p><strong> Bean</strong><br>// BeanDefinitionReaderUtils 143</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void registerBeanDefinition(</span><br><span class=\"line\">      BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   String beanName = definitionHolder.getBeanName();</span><br><span class=\"line\">   //  Bean</span><br><span class=\"line\">   registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   String[] aliases = definitionHolder.getAliases();</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (aliases != null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (String <span class=\"built_in\">alias</span> : aliases) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">alias</span> -&gt; beanName  map </span><br><span class=\"line\">         //  <span class=\"built_in\">alias</span>  beanName</span><br><span class=\"line\">         registry.registerAlias(beanName, <span class=\"built_in\">alias</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean</p>\n<p>// DefaultListableBeanFactory 793</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)</span><br><span class=\"line\">      throws BeanDefinitionStoreException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   Assert.hasText(beanName, <span class=\"string\">\"Bean name must not be empty\"</span>);</span><br><span class=\"line\">   Assert.notNull(beanDefinition, <span class=\"string\">\"BeanDefinition must not be null\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanDefinition instanceof AbstractBeanDefinition) &#123;</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         ((AbstractBeanDefinition) beanDefinition).validate();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">         throw new BeanDefinitionStoreException(...);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // old?   bean  allowBeanDefinitionOverriding</span><br><span class=\"line\">   BeanDefinition oldBeanDefinition;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean  beanDefinitionMap </span><br><span class=\"line\">   oldBeanDefinition = this.beanDefinitionMap.get(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (oldBeanDefinition != null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!isAllowBeanDefinitionOverriding()) &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription()...</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (oldBeanDefinition.getRole() &lt; beanDefinition.getRole()) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!beanDefinition.equals(oldBeanDefinition)) &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // <span class=\"built_in\">log</span>... Bean  Bean equals  <span class=\"literal\">true</span>  Bean</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  Bean .</span><br><span class=\"line\">      // <span class=\"string\">\"Bean\"</span> Bean </span><br><span class=\"line\">      //  Spring    singleton beans</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (hasBeanCreationStarted()) &#123;</span><br><span class=\"line\">         // Cannot modify startup-time collection elements anymore (<span class=\"keyword\">for</span> stable iteration)</span><br><span class=\"line\">         synchronized (this.beanDefinitionMap) &#123;</span><br><span class=\"line\">            this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">            List&lt;String&gt; updatedDefinitions = new ArrayList&lt;String&gt;(this.beanDefinitionNames.size() + 1);</span><br><span class=\"line\">            updatedDefinitions.addAll(this.beanDefinitionNames);</span><br><span class=\"line\">            updatedDefinitions.add(beanName);</span><br><span class=\"line\">            this.beanDefinitionNames = updatedDefinitions;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.manualSingletonNames.contains(beanName)) &#123;</span><br><span class=\"line\">               Set&lt;String&gt; updatedSingletons = new LinkedHashSet&lt;String&gt;(this.manualSingletonNames);</span><br><span class=\"line\">               updatedSingletons.remove(beanName);</span><br><span class=\"line\">               this.manualSingletonNames = updatedSingletons;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanDefinition  map  map  BeanDefinition</span><br><span class=\"line\">         this.beanDefinitionMap.put(beanName, beanDefinition);</span><br><span class=\"line\">         //  ArrayList bean  Bean </span><br><span class=\"line\">         this.beanDefinitionNames.add(beanName);</span><br><span class=\"line\">         //  LinkedHashSet singleton bean</span><br><span class=\"line\">         //  remove  Bean </span><br><span class=\"line\">         //  bean </span><br><span class=\"line\">         //     registerSingleton(String beanName, Object singletonObject)</span><br><span class=\"line\">         // Spring <span class=\"string\">\"\"</span> Bean</span><br><span class=\"line\">         //  <span class=\"string\">\"environment\"</span><span class=\"string\">\"systemProperties\"</span>  bean Bean </span><br><span class=\"line\">         this.manualSingletonNames.remove(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      this.frozenBeanDefinitionNames = null;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (oldBeanDefinition != null || containsSingleton(beanName)) &#123;</span><br><span class=\"line\">      resetBeanDefinition(beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean <code>&lt;bean /&gt;</code>  BeanDefinition BeanDefinition </p>\n<p>  </p>\n<p></p>\n<h4 id=\"Bean-\"><a href=\"#Bean-\" class=\"headerlink\" title=\"Bean \"></a>Bean </h4><p> refresh()  obtainFreshBeanFactory() </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void refresh() throws BeansException, IllegalStateException &#123;</span><br><span class=\"line\">   //  refresh() </span><br><span class=\"line\">   synchronized (this.startupShutdownMonitor) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  BeanFactory </span><br><span class=\"line\">      //  Bean </span><br><span class=\"line\">      // ( beanName-&gt; beanDefinition  map)</span><br><span class=\"line\">      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanFactory  BeanPostProcessor bean</span><br><span class=\"line\">      // </span><br><span class=\"line\">      prepareBeanFactory(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         //  BeanFactoryPostProcessor Bean </span><br><span class=\"line\">         // Spring  postProcessBeanFactory </span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         //  BeanFactoryPostProcessor </span><br><span class=\"line\">         postProcessBeanFactory(beanFactory);</span><br><span class=\"line\">         //  BeanFactoryPostProcessor  postProcessBeanFactory(factory) </span><br><span class=\"line\">         invokeBeanFactoryPostProcessors(beanFactory);          </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">         //  BeanPostProcessor  BeanFactoryPostProcessor </span><br><span class=\"line\">         // : postProcessBeforeInitialization  postProcessAfterInitialization</span><br><span class=\"line\">         //  Bean </span><br><span class=\"line\">         registerBeanPostProcessors(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext  MessageSource</span><br><span class=\"line\">         initMessageSource();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationContext </span><br><span class=\"line\">         initApplicationEventMulticaster();</span><br><span class=\"line\"></span><br><span class=\"line\">         // ()</span><br><span class=\"line\">         //  Bean singleton beans </span><br><span class=\"line\">         onRefresh();</span><br><span class=\"line\"></span><br><span class=\"line\">         //  ApplicationListener </span><br><span class=\"line\">         registerListeners();</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         //  singleton beans</span><br><span class=\"line\">         //lazy-init </span><br><span class=\"line\">         finishBeanFactoryInitialization(beanFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">         // ApplicationContext </span><br><span class=\"line\">         finishRefresh();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class=\"line\">            logger.warn(<span class=\"string\">\"Exception encountered during context initialization - \"</span> +</span><br><span class=\"line\">                  <span class=\"string\">\"cancelling refresh attempt: \"</span> + ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         // Destroy already created singletons to avoid dangling resources.</span><br><span class=\"line\">         //  singleton  Beans bean </span><br><span class=\"line\">         destroyBeans();</span><br><span class=\"line\"></span><br><span class=\"line\">         // Reset <span class=\"string\">'active'</span> flag.</span><br><span class=\"line\">         cancelRefresh(ex);</span><br><span class=\"line\"></span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      finally &#123;</span><br><span class=\"line\">         // Reset common introspection caches <span class=\"keyword\">in</span> Spring<span class=\"string\">'s core, since we</span></span><br><span class=\"line\"><span class=\"string\">         // might not ever need metadata for singleton beans anymore...</span></span><br><span class=\"line\"><span class=\"string\">         resetCommonCaches();</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">   &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean--prepareBeanFactory\"><a href=\"#-Bean--prepareBeanFactory\" class=\"headerlink\" title=\" Bean : prepareBeanFactory\"></a> Bean : prepareBeanFactory</h4><p>Spring  xml  bean  bean</p>\n<p> prepareBeanFactory(factory) </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Configure the factory<span class=\"string\">'s standard context characteristics,</span></span><br><span class=\"line\"><span class=\"string\"> * such as the context'</span>s ClassLoader and post-processors.</span><br><span class=\"line\"> * @param beanFactory the BeanFactory to configure</span><br><span class=\"line\"> */</span><br><span class=\"line\">protected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\">   //  BeanFactory  BeanFactory </span><br><span class=\"line\">   //  ApplicationContext </span><br><span class=\"line\">   beanFactory.setBeanClassLoader(getClassLoader());</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanExpressionResolver</span><br><span class=\"line\">   beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));</span><br><span class=\"line\">   // </span><br><span class=\"line\">   beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanPostProcessor processor </span><br><span class=\"line\">   //  Aware  beans  processor </span><br><span class=\"line\">   //  ApplicationContext  implement ApplicationContextAware</span><br><span class=\"line\">   //  ApplicationContextAware</span><br><span class=\"line\">   //    EnvironmentAwareResourceLoaderAware </span><br><span class=\"line\">   beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   // Spring </span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(EnvironmentAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(MessageSourceAware.class);</span><br><span class=\"line\">   beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);</span><br><span class=\"line\"></span><br><span class=\"line\">   /**</span><br><span class=\"line\">    *  bean  bean </span><br><span class=\"line\">    * <span class=\"string\">\" ApplicationContext  BeanFactory\"</span></span><br><span class=\"line\">    * ApplicationContext  ResourceLoaderApplicationEventPublisherMessageSource</span><br><span class=\"line\">    *  this this  ApplicationContext</span><br><span class=\"line\">    *  MessageSource  MessageSource  bean</span><br><span class=\"line\">    */</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ResourceLoader.class, this);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);</span><br><span class=\"line\">   beanFactory.registerResolvableDependency(ApplicationContext.class, this);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanPostProcessor  bean  ApplicationListener </span><br><span class=\"line\">   //  listener  </span><br><span class=\"line\">   beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));</span><br><span class=\"line\"></span><br><span class=\"line\">   //  beanloadTimeWeaver</span><br><span class=\"line\">   // tips: ltw  AspectJ  Spring AOP </span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));</span><br><span class=\"line\">      // Set a temporary ClassLoader <span class=\"keyword\">for</span> <span class=\"built_in\">type</span> matching.</span><br><span class=\"line\">      beanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   /**</span><br><span class=\"line\">    * Spring  <span class=\"string\">\"\"</span>  bean</span><br><span class=\"line\">    * </span><br><span class=\"line\">    */</span><br><span class=\"line\"></span><br><span class=\"line\">   //  <span class=\"string\">\"environment\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  <span class=\"string\">\"systemProperties\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  <span class=\"string\">\"systemEnvironment\"</span>  bean Spring  <span class=\"string\">\"\"</span> </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class=\"line\">      beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Spring  bean </p>\n<h4 id=\"-singleton-beans\"><a href=\"#-singleton-beans\" class=\"headerlink\" title=\" singleton beans\"></a> singleton beans</h4><p> <code>finishBeanFactoryInitialization(beanFactory);</code>  singleton beans</p>\n<p><strong></strong><strong></strong>Spring  singleton beans </p>\n<p> BeanFactory  BeanFactoryPostProcessor  Bean  postProcessBeanFactory(factory)  Spring  Bean <code>environment</code><code>systemProperties</code> </p>\n<p> singleton beans  Spring  singleton beans<br>// AbstractApplicationContext.java 834</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//  singleton beans</span><br><span class=\"line\">protected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  conversionService  Bean ConversionService</span><br><span class=\"line\">   //  Bean </span><br><span class=\"line\">   //  beanFactory.getBean(...) </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;</span><br><span class=\"line\">         beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123;</span><br><span class=\"line\">      beanFactory.setConversionService(</span><br><span class=\"line\">            beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Register a default embedded value resolver <span class=\"keyword\">if</span> no bean post-processor</span><br><span class=\"line\">   // (such as a PropertyPlaceholderConfigurer bean) registered any before:</span><br><span class=\"line\">   // at this point, primarily <span class=\"keyword\">for</span> resolution <span class=\"keyword\">in</span> annotation attribute values.</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!beanFactory.hasEmbeddedValueResolver()) &#123;</span><br><span class=\"line\">      beanFactory.addEmbeddedValueResolver(new <span class=\"function\"><span class=\"title\">StringValueResolver</span></span>() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public String resolveStringValue(String strVal) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> getEnvironment().resolvePlaceholders(strVal);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  LoadTimeWeaverAware  Bean</span><br><span class=\"line\">   //  AspectJ </span><br><span class=\"line\">   String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String weaverAwareName : weaverAwareNames) &#123;</span><br><span class=\"line\">      getBean(weaverAwareName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Stop using the temporary ClassLoader <span class=\"keyword\">for</span> <span class=\"built_in\">type</span> matching.</span><br><span class=\"line\">   beanFactory.setTempClassLoader(null);</span><br><span class=\"line\"></span><br><span class=\"line\">   // Spring  singleton beans </span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   beanFactory.freezeConfiguration();</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   beanFactory.preInstantiateSingletons();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> DefaultListableBeanFactory </p>\n<p><strong>preInstantiateSingletons</strong><br>// DefaultListableBeanFactory 728</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public void preInstantiateSingletons() throws BeansException &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (this.logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      this.logger.debug(<span class=\"string\">\"Pre-instantiating singletons in \"</span> + this);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   // this.beanDefinitionNames  beanNames</span><br><span class=\"line\">   List&lt;String&gt; beanNames = new ArrayList&lt;String&gt;(this.beanDefinitionNames);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton beans </span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      //  Bean  &lt;bean id=<span class=\"string\">\"\"</span> class=<span class=\"string\">\"\"</span> parent=<span class=\"string\">\"\"</span> /&gt;  parent</span><br><span class=\"line\">      //  <span class=\"string\">\"Bean \"</span></span><br><span class=\"line\">      RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  singletons <span class=\"string\">'abstract = true'</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123;</span><br><span class=\"line\">         //  FactoryBean( FactoryBean)</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (isFactoryBean(beanName)) &#123;</span><br><span class=\"line\">            // FactoryBean  beanName  &amp;  getBeangetBean </span><br><span class=\"line\">            final FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) getBean(FACTORY_BEAN_PREFIX + beanName);</span><br><span class=\"line\">            //  FactoryBean  SmartFactoryBean </span><br><span class=\"line\">            boolean isEagerInit;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (System.getSecurityManager() != null &amp;&amp; factory instanceof SmartFactoryBean) &#123;</span><br><span class=\"line\">               isEagerInit = AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() &#123;</span><br><span class=\"line\">                  @Override</span><br><span class=\"line\">                  public Boolean <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">                     <span class=\"built_in\">return</span> ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit();</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;, getAccessControlContext());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">               isEagerInit = (factory instanceof SmartFactoryBean &amp;&amp;</span><br><span class=\"line\">                     ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isEagerInit) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">               getBean(beanName);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            //  Bean getBean(beanName) </span><br><span class=\"line\">            getBean(beanName);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  singleton beans </span><br><span class=\"line\">   //  bean  SmartInitializingSingleton </span><br><span class=\"line\">   <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\">      Object singletonInstance = getSingleton(beanName);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (singletonInstance instanceof SmartInitializingSingleton) &#123;</span><br><span class=\"line\">         final SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">            AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">               @Override</span><br><span class=\"line\">               public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">                  smartSingleton.afterSingletonsInstantiated();</span><br><span class=\"line\">                  <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;, getAccessControlContext());</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            smartSingleton.afterSingletonsInstantiated();</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> getBean(beanName)  BeanFactory  Bean</p>\n<p><strong>getBean</strong><br> FactoryBean  FactoryBean</p>\n<p>// AbstractBeanFactory 196</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object getBean(String name) throws BeansException &#123;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> doGetBean(name, null, null, <span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//  Bean  getBean  Bean </span><br><span class=\"line\">// </span><br><span class=\"line\">@SuppressWarnings(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">protected &lt;T&gt; T doGetBean(</span><br><span class=\"line\">      final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly)</span><br><span class=\"line\">      throws BeansException &#123;</span><br><span class=\"line\">   //   beanName FactoryBean( &amp;)</span><br><span class=\"line\">   //  getBean Bean </span><br><span class=\"line\">   final String beanName = transformedBeanName(name);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Object bean; </span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Object sharedInstance = getSingleton(beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   //  args  getBean(beanName)</span><br><span class=\"line\">   //  args  null  args  Bean Bean</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (sharedInstance != null &amp;&amp; args == null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"Returning cached instance of singleton bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      //  Bean  sharedInstance</span><br><span class=\"line\">      //  FactoryBean </span><br><span class=\"line\">      // (FactoryBean )</span><br><span class=\"line\">      bean = getObjectForBeanInstance(sharedInstance, name, beanName, null);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isPrototypeCurrentlyInCreation(beanName)) &#123;</span><br><span class=\"line\">         //  beanName  prototype  bean</span><br><span class=\"line\">         // </span><br><span class=\"line\">         throw new BeanCurrentlyInCreationException(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      //  BeanDefinition </span><br><span class=\"line\">      BeanFactory parentBeanFactory = getParentBeanFactory();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (parentBeanFactory != null &amp;&amp; !containsBeanDefinition(beanName)) &#123;</span><br><span class=\"line\">         //  BeanDefinition</span><br><span class=\"line\">         String nameToLookup = originalBeanName(name);</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (args != null) &#123;</span><br><span class=\"line\">            // </span><br><span class=\"line\">            <span class=\"built_in\">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            // No args -&gt; delegate to standard getBean method.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!typeCheckOnly) &#123;</span><br><span class=\"line\">         // typeCheckOnly  <span class=\"literal\">false</span> beanName  alreadyCreated  Set </span><br><span class=\"line\">         markBeanAsCreated(beanName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      /*</span><br><span class=\"line\">       * </span><br><span class=\"line\">       *  Bean  singleton  Bean  Bean</span><br><span class=\"line\">       *  prototype  Bean  Bean</span><br><span class=\"line\">       */</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);</span><br><span class=\"line\">         checkMergedBeanDefinition(mbd, beanName, args);</span><br><span class=\"line\"></span><br><span class=\"line\">         //  Bean</span><br><span class=\"line\">         //  depends-on </span><br><span class=\"line\">         String[] dependsOn = mbd.getDependsOn();</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (dependsOn != null) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String dep : dependsOn) &#123;</span><br><span class=\"line\">               // </span><br><span class=\"line\">               <span class=\"keyword\">if</span> (isDependent(beanName, dep)) &#123;</span><br><span class=\"line\">                  throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">                        <span class=\"string\">\"'Circular depends-on relationship between '\"</span> + beanName + <span class=\"string\">\"' and '\"</span> + dep + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               // </span><br><span class=\"line\">               registerDependentBean(dep, beanName);</span><br><span class=\"line\">               // </span><br><span class=\"line\">               getBean(dep);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  singleton scope  singleton </span><br><span class=\"line\">         <span class=\"keyword\">if</span> (mbd.isSingleton()) &#123;</span><br><span class=\"line\">            sharedInstance = getSingleton(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">               @Override</span><br><span class=\"line\">               public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">                  try &#123;</span><br><span class=\"line\">                     //  Bean</span><br><span class=\"line\">                     <span class=\"built_in\">return</span> createBean(beanName, mbd, args);</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                  catch (BeansException ex) &#123;</span><br><span class=\"line\">                     destroySingleton(beanName);</span><br><span class=\"line\">                     throw ex;</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  prototype scope  prototype </span><br><span class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mbd.isPrototype()) &#123;</span><br><span class=\"line\">            // Its a prototype -&gt; create a new instance.</span><br><span class=\"line\">            Object prototypeInstance = null;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               beforePrototypeCreation(beanName);</span><br><span class=\"line\">               //  Bean</span><br><span class=\"line\">               prototypeInstance = createBean(beanName, mbd, args);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            finally &#123;</span><br><span class=\"line\">               afterPrototypeCreation(beanName);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         //  singleton  prototype </span><br><span class=\"line\">         <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            String scopeName = mbd.getScope();</span><br><span class=\"line\">            final Scope scope = this.scopes.get(scopeName);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (scope == null) &#123;</span><br><span class=\"line\">               throw new IllegalStateException(<span class=\"string\">\"No Scope registered for scope name '\"</span> + scopeName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               Object scopedInstance = scope.get(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">                  @Override</span><br><span class=\"line\">                  public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">                     beforePrototypeCreation(beanName);</span><br><span class=\"line\">                     try &#123;</span><br><span class=\"line\">                        //  Bean</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> createBean(beanName, mbd, args);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                     finally &#123;</span><br><span class=\"line\">                        afterPrototypeCreation(beanName);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">               &#125;);</span><br><span class=\"line\">               bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            catch (IllegalStateException ex) &#123;</span><br><span class=\"line\">               throw new BeanCreationException(beanName,</span><br><span class=\"line\">                     <span class=\"string\">\"Scope '\"</span> + scopeName + <span class=\"string\">\"' is not active for the current thread; consider \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"defining a scoped proxy for this bean if you intend to refer to it from a singleton\"</span>,</span><br><span class=\"line\">                     ex);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (BeansException ex) &#123;</span><br><span class=\"line\">         cleanupAfterBeanCreationFailure(beanName);</span><br><span class=\"line\">         throw ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (requiredType != null &amp;&amp; bean != null &amp;&amp; !requiredType.isInstance(bean)) &#123;</span><br><span class=\"line\">      try &#123;</span><br><span class=\"line\">         <span class=\"built_in\">return</span> getTypeConverter().convertIfNecessary(bean, requiredType);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      catch (TypeMismatchException ex) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">            logger.debug(<span class=\"string\">\"Failed to convert bean '\"</span> + name + <span class=\"string\">\"' to required type '\"</span> +</span><br><span class=\"line\">                  ClassUtils.getQualifiedName(requiredType) + <span class=\"string\">\"'\"</span>, ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> (T) bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> createBean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected abstract Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException;</span><br></pre></td></tr></table></figure>\n<p> args  Bean args  null</p>\n<p> AbstractAutowireCapableBeanFactoryAutowireCapable</p>\n<p> @Autowired </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MessageServiceImpl implements MessageService &#123;</span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    private UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getMessage</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userService.getMessage();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p> xml   Spring </p>\n<p></p>\n<p>// AbstractAutowireCapableBeanFactory 447</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Central method of this class: creates a bean instance,</span><br><span class=\"line\"> * populates the bean instance, applies post-processors, etc.</span><br><span class=\"line\"> * @see <span class=\"comment\">#doCreateBean</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">@Override</span><br><span class=\"line\">protected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Creating instance of bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   RootBeanDefinition mbdToUse = mbd;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  BeanDefinition  Class </span><br><span class=\"line\">   Class&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (resolvedClass != null &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != null) &#123;</span><br><span class=\"line\">      mbdToUse = new RootBeanDefinition(mbd);</span><br><span class=\"line\">      mbdToUse.setBeanClass(resolvedClass);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // MethodOverrides bean  &lt;lookup-method /&gt; </span><br><span class=\"line\">   //  &lt;replaced-method /&gt; bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      mbdToUse.prepareMethodOverrides();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">      throw new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),</span><br><span class=\"line\">            beanName, <span class=\"string\">\"Validation of method overrides failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  InstantiationAwareBeanPostProcessor </span><br><span class=\"line\">      //  Spring AOP </span><br><span class=\"line\">      Object bean = resolveBeforeInstantiation(beanName, mbdToUse);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (bean != null) &#123;</span><br><span class=\"line\">         <span class=\"built_in\">return</span> bean; </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(mbdToUse.getResourceDescription(), beanName,</span><br><span class=\"line\">            <span class=\"string\">\"BeanPostProcessor before instantiation of bean failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  bean</span><br><span class=\"line\">   Object beanInstance = doCreateBean(beanName, mbdToUse, args);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">      logger.debug(<span class=\"string\">\"Finished creating instance of bean '\"</span> + beanName + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> beanInstance;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Bean</strong><br> doCreateBean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * Actually create the specified bean. Pre-creation processing has already happened</span><br><span class=\"line\"> * at this point, e.g. checking &#123;@code postProcessBeforeInstantiation&#125; callbacks.</span><br><span class=\"line\"> * &lt;p&gt;Differentiates between default bean instantiation, use of a</span><br><span class=\"line\"> * factory method, and autowiring a constructor.</span><br><span class=\"line\"> * @param beanName the name of the bean</span><br><span class=\"line\"> * @param mbd the merged bean definition <span class=\"keyword\">for</span> the bean</span><br><span class=\"line\"> * @param args explicit arguments to use <span class=\"keyword\">for</span> constructor or factory method invocation</span><br><span class=\"line\"> * @<span class=\"built_in\">return</span> a new instance of the bean</span><br><span class=\"line\"> * @throws BeanCreationException <span class=\"keyword\">if</span> the bean could not be created</span><br><span class=\"line\"> * @see <span class=\"comment\">#instantiateBean</span></span><br><span class=\"line\"> * @see <span class=\"comment\">#instantiateUsingFactoryMethod</span></span><br><span class=\"line\"> * @see <span class=\"comment\">#autowireConstructor</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args)</span><br><span class=\"line\">      throws BeanCreationException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Instantiate the bean.</span><br><span class=\"line\">   BeanWrapper instanceWrapper = null;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.isSingleton()) &#123;</span><br><span class=\"line\">      instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (instanceWrapper == null) &#123;</span><br><span class=\"line\">      //  FactoryBean Bean</span><br><span class=\"line\">      instanceWrapper = createBeanInstance(beanName, mbd, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  Bean    <span class=\"string\">\"bean \"</span></span><br><span class=\"line\">   final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null);</span><br><span class=\"line\">   // </span><br><span class=\"line\">   Class&lt;?&gt; beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null);</span><br><span class=\"line\">   mbd.resolvedTargetType = beanType;</span><br><span class=\"line\"></span><br><span class=\"line\">   // MergedBeanDefinitionPostProcessor</span><br><span class=\"line\">   synchronized (mbd.postProcessingLock) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!mbd.postProcessed) &#123;</span><br><span class=\"line\">         try &#123;</span><br><span class=\"line\">            // MergedBeanDefinitionPostProcessor</span><br><span class=\"line\">            applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         catch (Throwable ex) &#123;</span><br><span class=\"line\">            throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">                  <span class=\"string\">\"Post-processing of merged bean definition failed\"</span>, ex);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         mbd.postProcessed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Eagerly cache singletons to be able to resolve circular references</span><br><span class=\"line\">   // even when triggered by lifecycle interfaces like BeanFactoryAware.</span><br><span class=\"line\">   // </span><br><span class=\"line\">   boolean earlySingletonExposure = (mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp;</span><br><span class=\"line\">         isSingletonCurrentlyInCreation(beanName));</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (earlySingletonExposure) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">         logger.debug(<span class=\"string\">\"Eagerly caching bean '\"</span> + beanName +</span><br><span class=\"line\">               <span class=\"string\">\"' to allow for resolving potential circular references\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      addSingletonFactory(beanName, new ObjectFactory&lt;Object&gt;() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public Object getObject() throws BeansException &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> getEarlyBeanReference(beanName, mbd, bean);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Initialize the bean instance.</span><br><span class=\"line\">   Object exposedObject = bean;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      populateBean(beanName, mbd, instanceWrapper);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (exposedObject != null) &#123;</span><br><span class=\"line\">         //  init-method  InitializingBean  BeanPostProcessor </span><br><span class=\"line\">         //  bean </span><br><span class=\"line\">         exposedObject = initializeBean(beanName, exposedObject, mbd);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123;</span><br><span class=\"line\">         throw (BeanCreationException) ex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         throw new BeanCreationException(</span><br><span class=\"line\">               mbd.getResourceDescription(), beanName, <span class=\"string\">\"Initialization of bean failed\"</span>, ex);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (earlySingletonExposure) &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      Object earlySingletonReference = getSingleton(beanName, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (earlySingletonReference != null) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (exposedObject == bean) &#123;</span><br><span class=\"line\">            exposedObject = earlySingletonReference;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123;</span><br><span class=\"line\">            String[] dependentBeans = getDependentBeans(beanName);</span><br><span class=\"line\">            Set&lt;String&gt; actualDependentBeans = new LinkedHashSet&lt;String&gt;(dependentBeans.length);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String dependentBean : dependentBeans) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;</span><br><span class=\"line\">                  actualDependentBeans.add(dependentBean);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!actualDependentBeans.isEmpty()) &#123;</span><br><span class=\"line\">               throw new BeanCurrentlyInCreationException(beanName,</span><br><span class=\"line\">                     <span class=\"string\">\"Bean with name '\"</span> + beanName + <span class=\"string\">\"' has been injected into other beans [\"</span> +</span><br><span class=\"line\">                     StringUtils.collectionToCommaDelimitedString(actualDependentBeans) +</span><br><span class=\"line\">                     <span class=\"string\">\"] in its raw version as part of a circular reference, but has eventually been \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"wrapped. This means that said other beans do not use the final version of the \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"bean. This is often the result of over-eager type matching - consider using \"</span> +</span><br><span class=\"line\">                     <span class=\"string\">\"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // Register bean as disposable.</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      registerDisposableBeanIfNecessary(beanName, bean, mbd);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (BeanDefinitionValidationException ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            mbd.getResourceDescription(), beanName, <span class=\"string\">\"Invalid destruction signature\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">return</span> exposedObject;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> doCreateBean </p>\n<p> doCreateBean  Bean  createBeanInstance  populateBean  initializeBean </p>\n<p></p>\n<p><strong> Bean </strong><br> createBeanInstance </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) &#123;</span><br><span class=\"line\">   //  class</span><br><span class=\"line\">   Class&lt;?&gt; beanClass = resolveBeanClass(mbd, beanName);</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (beanClass != null &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class=\"line\">            <span class=\"string\">\"Bean class isn't public, and non-public access not allowed: \"</span> + beanClass.getName());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.getFactoryMethodName() != null)  &#123;</span><br><span class=\"line\">      //  FactoryBean</span><br><span class=\"line\">      <span class=\"built_in\">return</span> instantiateUsingFactoryMethod(beanName, mbd, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  prototype bean</span><br><span class=\"line\">   //  </span><br><span class=\"line\">   boolean resolved = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   boolean autowireNecessary = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (args == null) &#123;</span><br><span class=\"line\">      synchronized (mbd.constructorArgumentLock) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (mbd.resolvedConstructorOrFactoryMethod != null) &#123;</span><br><span class=\"line\">            resolved = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            autowireNecessary = mbd.constructorArgumentsResolved;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (resolved) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (autowireNecessary) &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> autowireConstructor(beanName, mbd, null, null);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         <span class=\"built_in\">return</span> instantiateBean(beanName, mbd);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   Constructor&lt;?&gt;[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (ctors != null ||</span><br><span class=\"line\">         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR ||</span><br><span class=\"line\">         mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args))  &#123;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> autowireConstructor(beanName, mbd, ctors, args);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // </span><br><span class=\"line\">   <span class=\"built_in\">return</span> instantiateBean(beanName, mbd);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) &#123;</span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      Object beanInstance;</span><br><span class=\"line\">      final BeanFactory parent = this;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">         beanInstance = AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">            @Override</span><br><span class=\"line\">            public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"built_in\">return</span> getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;, getAccessControlContext());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // </span><br><span class=\"line\">         beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      BeanWrapper bw = new BeanWrapperImpl(beanInstance);</span><br><span class=\"line\">      initBeanWrapper(bw);</span><br><span class=\"line\">      <span class=\"built_in\">return</span> bw;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            mbd.getResourceDescription(), beanName, <span class=\"string\">\"Instantiation of bean failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<p>// SimpleInstantiationStrategy 59</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object instantiate(RootBeanDefinition bd, String beanName, BeanFactory owner) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   //  java  CGLIB,</span><br><span class=\"line\">   //  <span class=\"string\">\"\"</span> lookup-method  replaced-method </span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bd.getMethodOverrides().isEmpty()) &#123;</span><br><span class=\"line\">      Constructor&lt;?&gt; constructorToUse;</span><br><span class=\"line\">      synchronized (bd.constructorArgumentLock) &#123;</span><br><span class=\"line\">         constructorToUse = (Constructor&lt;?&gt;) bd.resolvedConstructorOrFactoryMethod;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (constructorToUse == null) &#123;</span><br><span class=\"line\">            final Class&lt;?&gt; clazz = bd.getBeanClass();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (clazz.isInterface()) &#123;</span><br><span class=\"line\">               throw new BeanInstantiationException(clazz, <span class=\"string\">\"Specified class is an interface\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">                  constructorToUse = AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Constructor&lt;?&gt;&gt;() &#123;</span><br><span class=\"line\">                     @Override</span><br><span class=\"line\">                     public Constructor&lt;?&gt; run() throws Exception &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">return</span> clazz.getDeclaredConstructor((Class[]) null);</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  constructorToUse = clazz.getDeclaredConstructor((Class[]) null);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               bd.resolvedConstructorOrFactoryMethod = constructorToUse;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            catch (Throwable ex) &#123;</span><br><span class=\"line\">               throw new BeanInstantiationException(clazz, <span class=\"string\">\"No default constructor found\"</span>, ex);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"built_in\">return</span> BeanUtils.instantiateClass(constructorToUse);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  CGLIB  CGLIB </span><br><span class=\"line\">      // tips:  CGLIB  override  JDK </span><br><span class=\"line\">      <span class=\"built_in\">return</span> instantiateWithMethodInjection(bd, beanName, owner);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>bean </strong><br> createBeanInstance()  populateBean() </p>\n<p>// AbstractAutowireCapableBeanFactory 1203</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) &#123;</span><br><span class=\"line\">   // bean </span><br><span class=\"line\">   PropertyValues pvs = mbd.getPropertyValues();</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (bw == null) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!pvs.isEmpty()) &#123;</span><br><span class=\"line\">         throw new BeanCreationException(</span><br><span class=\"line\">               mbd.getResourceDescription(), beanName, <span class=\"string\">\"Cannot apply property values to null instance\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         // Skip property population phase <span class=\"keyword\">for</span> null instance.</span><br><span class=\"line\">         <span class=\"built_in\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   // bean </span><br><span class=\"line\">   // InstantiationAwareBeanPostProcessor  bean </span><br><span class=\"line\">   // </span><br><span class=\"line\">   boolean continueWithPropertyPopulation = <span class=\"literal\">true</span>;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (bp instanceof InstantiationAwareBeanPostProcessor) &#123;</span><br><span class=\"line\">            InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;</span><br><span class=\"line\">            //  <span class=\"literal\">false</span> BeanPostProcessor </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123;</span><br><span class=\"line\">               continueWithPropertyPopulation = <span class=\"literal\">false</span>;</span><br><span class=\"line\">               <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!continueWithPropertyPopulation) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">return</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME ||</span><br><span class=\"line\">         mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123;</span><br><span class=\"line\">      MutablePropertyValues newPvs = new MutablePropertyValues(pvs);</span><br><span class=\"line\"></span><br><span class=\"line\">      //  bean  bean</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) &#123;</span><br><span class=\"line\">         autowireByName(beanName, mbd, bw, newPvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      // </span><br><span class=\"line\">      <span class=\"keyword\">if</span> (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123;</span><br><span class=\"line\">         autowireByType(beanName, mbd, bw, newPvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      pvs = newPvs;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();</span><br><span class=\"line\">   boolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (hasInstAwareBpps || needsDepCheck) &#123;</span><br><span class=\"line\">      PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (hasInstAwareBpps) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (bp instanceof InstantiationAwareBeanPostProcessor) &#123;</span><br><span class=\"line\">               InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;</span><br><span class=\"line\">               //  BeanPostProcessor : AutowiredAnnotationBeanPostProcessor</span><br><span class=\"line\">               //  @Autowired@Value </span><br><span class=\"line\">               pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (pvs == null) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">return</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (needsDepCheck) &#123;</span><br><span class=\"line\">         checkDependencies(beanName, mbd, filteredPds, pvs);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   //  bean </span><br><span class=\"line\">   applyPropertyValues(beanName, mbd, bw, pvs);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>initializeBean</strong><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (System.getSecurityManager() != null) &#123;</span><br><span class=\"line\">      AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123;</span><br><span class=\"line\">         @Override</span><br><span class=\"line\">         public Object <span class=\"function\"><span class=\"title\">run</span></span>() &#123;</span><br><span class=\"line\">            invokeAwareMethods(beanName, bean);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;, getAccessControlContext());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      //  bean  BeanNameAwareBeanClassLoaderAware  BeanFactoryAware </span><br><span class=\"line\">      invokeAwareMethods(beanName, bean);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object wrappedBean = bean;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd == null || !mbd.isSynthetic()) &#123;</span><br><span class=\"line\">      // BeanPostProcessor  postProcessBeforeInitialization </span><br><span class=\"line\">      wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   try &#123;</span><br><span class=\"line\">      //  bean  init-method</span><br><span class=\"line\">      //  bean  InitializingBean  afterPropertiesSet() </span><br><span class=\"line\">      invokeInitMethods(beanName, wrappedBean, mbd);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   catch (Throwable ex) &#123;</span><br><span class=\"line\">      throw new BeanCreationException(</span><br><span class=\"line\">            (mbd != null ? mbd.getResourceDescription() : null),</span><br><span class=\"line\">            beanName, <span class=\"string\">\"Invocation of init method failed\"</span>, ex);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (mbd == null || !mbd.isSynthetic()) &#123;</span><br><span class=\"line\">      // BeanPostProcessor  postProcessAfterInitialization </span><br><span class=\"line\">      wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">return</span> wrappedBean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>BeanPostProcessor  init-method</p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"idname\"><a href=\"#idname\" class=\"headerlink\" title=\"idname\"></a>idname</h4><p> Bean  Spring beanName 0 aliases</p>\n<p> Spring  Bean  beanName</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">beanFactory.getBean(<span class=\"string\">\"beanName or alias\"</span>);</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean /&gt;</code>  id  name</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> name=<span class=\"string\">\"m1, m2, m3\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  messageService 3  m1m2m3</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean name=<span class=\"string\">\"m1, m2, m3\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  m1 2  m2m3</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName com.loonycoder.service.MessageServiceImpl#0</p>\n<p> 1  com.loonycoder.service.MessageServiceImpl</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"messageService\"</span> class=<span class=\"string\">\"com.loonycoder.service.MessageServiceImpl\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>beanName  messageService</p>\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><p>allowBeanDefinitionOverriding  null Bean id  name </p>\n<p> Bean </p>\n<p> A  B B  A A  BB  C C  A allowCircularReferences  null</p>\n<p></p>\n<p> Juergen Hoeller  jira </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class NoBeanOverridingContextLoader extends ContextLoader &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) &#123;</span><br><span class=\"line\">    super.customizeContext(servletContext, applicationContext);</span><br><span class=\"line\">    AbstractRefreshableApplicationContext arac = (AbstractRefreshableApplicationContext) applicationContext;</span><br><span class=\"line\">    arac.setAllowBeanDefinitionOverriding(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyContextLoaderListener extends org.springframework.web.context.ContextLoaderListener &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  protected ContextLoader <span class=\"function\"><span class=\"title\">createContextLoader</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new NoBeanOverridingContextLoader();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">    &lt;listener-class&gt;com.loonycoder.MyContextLoaderListener&lt;/listener-class&gt;  </span><br><span class=\"line\">&lt;/listener&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"profile\"><a href=\"#profile\" class=\"headerlink\" title=\"profile\"></a>profile</h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans profile=<span class=\"string\">\"development\"</span></span><br><span class=\"line\">    xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jdbc=<span class=\"string\">\"http://www.springframework.org/schema/jdbc\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;jdbc:embedded-database id=<span class=\"string\">\"dataSource\"</span>&gt;</span><br><span class=\"line\">        &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/schema.sql\"</span>/&gt;</span><br><span class=\"line\">        &lt;jdbc:script location=<span class=\"string\">\"classpath:com/oonycoder/config/sql/test-data.sql\"</span>/&gt;</span><br><span class=\"line\">    &lt;/jdbc:embedded-database&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans profile=<span class=\"string\">\"production\"</span></span><br><span class=\"line\">    xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jee=<span class=\"string\">\"http://www.springframework.org/schema/jee\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;jee:jndi-lookup id=<span class=\"string\">\"dataSource\"</span> jndi-name=<span class=\"string\">\"java:comp/env/jdbc/datasource\"</span>/&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p> profile=</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;beans xmlns=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span><br><span class=\"line\">    xmlns:jdbc=<span class=\"string\">\"http://www.springframework.org/schema/jdbc\"</span></span><br><span class=\"line\">    xmlns:jee=<span class=\"string\">\"http://www.springframework.org/schema/jee\"</span></span><br><span class=\"line\">    xsi:schemaLocation=<span class=\"string\">\"...\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;beans profile=<span class=\"string\">\"development\"</span>&gt;</span><br><span class=\"line\">        &lt;jdbc:embedded-database id=<span class=\"string\">\"dataSource\"</span>&gt;</span><br><span class=\"line\">            &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/schema.sql\"</span>/&gt;</span><br><span class=\"line\">            &lt;jdbc:script location=<span class=\"string\">\"classpath:com/loonycoder/config/sql/test-data.sql\"</span>/&gt;</span><br><span class=\"line\">        &lt;/jdbc:embedded-database&gt;</span><br><span class=\"line\">    &lt;/beans&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;beans profile=<span class=\"string\">\"production\"</span>&gt;</span><br><span class=\"line\">        &lt;jee:jndi-lookup id=<span class=\"string\">\"dataSource\"</span> jndi-name=<span class=\"string\">\"java:comp/env/jdbc/datasource\"</span>/&gt;</span><br><span class=\"line\">    &lt;/beans&gt;</span><br><span class=\"line\">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p> profile Spring  spring.profiles.active </p>\n<p>Spring  spring.profiles.active JVM web.xml JNDI</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dspring.profiles.active=<span class=\"string\">\"profile1,profile2\"</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>profile </p>\n</blockquote>\n<p> Environment  profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();</span><br><span class=\"line\">ctx.getEnvironment().setActiveProfiles(<span class=\"string\">\"development\"</span>);</span><br><span class=\"line\">ctx.register(SomeConfig.class, StandaloneDataConfig.class, JndiDataConfig.class);</span><br><span class=\"line\">ctx.refresh(); // </span><br></pre></td></tr></table></figure>\n<p> Spring Boot  application.propertiesapplication-dev.propertiesapplication-prod.properties  application.properties application-{profile}.properties  profile</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -Dspring.profiles.active=prod -jar JavaDoop.jar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean\"><a href=\"#-Bean\" class=\"headerlink\" title=\" Bean\"></a> Bean</h4><p> factory-bean  FactoryBean  Spring  Bean FactoryBean</p>\n<p> Spring </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"clientService\"</span></span><br><span class=\"line\">    class=<span class=\"string\">\"examples.ClientService\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createInstance\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ClientService &#123;</span><br><span class=\"line\">    private static ClientService clientService = new ClientService();</span><br><span class=\"line\">    private <span class=\"function\"><span class=\"title\">ClientService</span></span>() &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // </span><br><span class=\"line\">    public static ClientService <span class=\"function\"><span class=\"title\">createInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> clientService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"serviceLocator\"</span> class=<span class=\"string\">\"examples.DefaultServiceLocator\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- inject any dependencies required by this locator bean --&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"clientService\"</span></span><br><span class=\"line\">    factory-bean=<span class=\"string\">\"serviceLocator\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createClientServiceInstance\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"accountService\"</span></span><br><span class=\"line\">    factory-bean=<span class=\"string\">\"serviceLocator\"</span></span><br><span class=\"line\">    factory-method=<span class=\"string\">\"createAccountServiceInstance\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class DefaultServiceLocator &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static ClientService clientService = new ClientServiceImpl();</span><br><span class=\"line\"></span><br><span class=\"line\">    private static AccountService accountService = new AccountServiceImpl();</span><br><span class=\"line\"></span><br><span class=\"line\">    public ClientService <span class=\"function\"><span class=\"title\">createClientServiceInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> clientService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public AccountService <span class=\"function\"><span class=\"title\">createAccountServiceInstance</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> accountService;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"FactoryBean\"><a href=\"#FactoryBean\" class=\"headerlink\" title=\"FactoryBean\"></a>FactoryBean</h4><p>FactoryBean  Bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface FactoryBean&lt;T&gt; &#123;</span><br><span class=\"line\">    T getObject() throws Exception;</span><br><span class=\"line\">    Class&lt;T&gt; getObjectType();</span><br><span class=\"line\">    boolean isSingleton();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Person &#123; </span><br><span class=\"line\">    private Car car ;</span><br><span class=\"line\">    private void setCar(Car car)&#123; this.car = car;  &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Person  Bean Car  Car  Car </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyCarFactoryBean implements FactoryBean&lt;Car&gt;&#123;</span><br><span class=\"line\">    private String make; </span><br><span class=\"line\">    private int year ;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setMake(String m)&#123; this.make =m ; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setYear(int y)&#123; this.year = y; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Car <span class=\"function\"><span class=\"title\">getObject</span></span>()&#123; </span><br><span class=\"line\">      //  Car </span><br><span class=\"line\">      CarBuilder cb = CarBuilder.car();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(year!=0) cb.setYear(this.year);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(StringUtils.hasText(this.make)) cb.setMake( this.make ); </span><br><span class=\"line\">      <span class=\"built_in\">return</span> cb.factory(); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Class&lt;Car&gt; <span class=\"function\"><span class=\"title\">getObjectType</span></span>() &#123; <span class=\"built_in\">return</span> Car.class ; &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean <span class=\"function\"><span class=\"title\">isSingleton</span></span>() &#123; <span class=\"built_in\">return</span> <span class=\"literal\">false</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean class = <span class=\"string\">\"com.loonycoder.MyCarFactoryBean\"</span> id = <span class=\"string\">\"car\"</span>&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"make\"</span> value =<span class=\"string\">\"Honda\"</span>/&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"year\"</span> value =<span class=\"string\">\"1994\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\">&lt;bean class = <span class=\"string\">\"com.loonycoder.Person\"</span> id = <span class=\"string\">\"josh\"</span>&gt;</span><br><span class=\"line\">  &lt;property name = <span class=\"string\">\"car\"</span> ref = <span class=\"string\">\"car\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>id  car  bean  FactoryBean Person  Bean  FactoryBean  Spring </p>\n<p> xml  Bean  java  config </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Configuration </span><br><span class=\"line\">public class CarConfiguration &#123; </span><br><span class=\"line\"></span><br><span class=\"line\">    @Bean </span><br><span class=\"line\">    public MyCarFactoryBean <span class=\"function\"><span class=\"title\">carFactoryBean</span></span>()&#123; </span><br><span class=\"line\">      MyCarFactoryBean cfb = new MyCarFactoryBean();</span><br><span class=\"line\">      cfb.setMake(<span class=\"string\">\"Honda\"</span>);</span><br><span class=\"line\">      cfb.setYear(1994);</span><br><span class=\"line\">      <span class=\"built_in\">return</span> cfb;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Bean</span><br><span class=\"line\">    public Person <span class=\"function\"><span class=\"title\">aPerson</span></span>()&#123; </span><br><span class=\"line\">    Person person = new Person();</span><br><span class=\"line\">      // </span><br><span class=\"line\">    person.setCar(carFactoryBean().getObject());</span><br><span class=\"line\">    <span class=\"built_in\">return</span> person; </span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> MyCarFactoryBean  Bean  FactoryBean FactoryBean </p>\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleInitBean\"</span> class=<span class=\"string\">\"examples.ExampleBean\"</span> init-method=<span class=\"string\">\"init\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AnotherExampleBean implements InitializingBean &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">afterPropertiesSet</span></span>() &#123;</span><br><span class=\"line\">        // <span class=\"keyword\">do</span> some initialization work</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean(initMethod = <span class=\"string\">\"init\"</span>)</span><br><span class=\"line\">public Foo <span class=\"function\"><span class=\"title\">foo</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Foo();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@PostConstruct</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">init</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-Bean-\"><a href=\"#-Bean-\" class=\"headerlink\" title=\" Bean \"></a> Bean </h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"exampleInitBean\"</span> class=<span class=\"string\">\"examples.ExampleBean\"</span> destroy-method=<span class=\"string\">\"cleanup\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AnotherExampleBean implements DisposableBean &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">destroy</span></span>() &#123;</span><br><span class=\"line\">        // <span class=\"keyword\">do</span> some destruction work (like releasing pooled connections)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Bean(destroyMethod = <span class=\"string\">\"cleanup\"</span>)</span><br><span class=\"line\">public Bar <span class=\"function\"><span class=\"title\">bar</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Bar();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@PreDestroy</span><br><span class=\"line\">public void <span class=\"function\"><span class=\"title\">cleanup</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ConversionService\"><a href=\"#ConversionService\" class=\"headerlink\" title=\"ConversionService\"></a>ConversionService</h4><p></p>\n<p> controller </p>\n<p> StringInteger  controller  Date  ConversionService </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"conversionService\"</span></span><br><span class=\"line\">  class=<span class=\"string\">\"org.springframework.context.support.ConversionServiceFactoryBean\"</span>&gt;</span><br><span class=\"line\">  &lt;property name=<span class=\"string\">\"converters\"</span>&gt;</span><br><span class=\"line\">    &lt;list&gt;</span><br><span class=\"line\">      &lt;bean class=<span class=\"string\">\"com.loonycoder.learning.utils.StringToEnumConverterFactory\"</span>/&gt;</span><br><span class=\"line\">    &lt;/list&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>ConversionService  convert </p>\n<p> Converter </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class StringToDateConverter implements Converter&lt;String, Date&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Date convert(String <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> DateUtils.parseDate(<span class=\"built_in\">source</span>, <span class=\"string\">\"yyyy-MM-dd\"</span>, <span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span>, <span class=\"string\">\"yyyy-MM-dd HH:mm\"</span>, <span class=\"string\">\"HH:mm:ss\"</span>, <span class=\"string\">\"HH:mm\"</span>);</span><br><span class=\"line\">        &#125; catch (ParseException e) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> Bean  Date </p>\n<h4 id=\"Bean-\"><a href=\"#Bean-\" class=\"headerlink\" title=\"Bean \"></a>Bean </h4><p> Bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);</span><br></pre></td></tr></table></figure>\n<p> <code>&lt;bean parent=\"\" /&gt;</code>  parent  Spring </p>\n<p> java child bean  parent bean </p>\n<p>Spring  AbstractBeanDefinition  <code>ChildBeanDefinition</code>  child bean</p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritedTestBean\"</span> abstract=<span class=\"string\">\"true\"</span> class=<span class=\"string\">\"org.springframework.beans.TestBean\"</span>&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"parent\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritsWithDifferentClass\"</span> class=<span class=\"string\">\"org.springframework.beans.DerivedTestBean\"</span></span><br><span class=\"line\">        parent=<span class=\"string\">\"inheritedTestBean\"</span> init-method=<span class=\"string\">\"initialize\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"override\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>parent bean  <code>abstract=\"true\"</code> child bean  parent bean  name </p>\n<p>child bean  scopeinit-methoddestroy-method </p>\n<p> parent bean  abstract = true  Spring  singleton beans  bean</p>\n<p> parent bean class bean  parent bean abstract = true</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"inheritedTestBeanWithoutClass\"</span> abstract=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"name\"</span> value=<span class=\"string\">\"parent\"</span>/&gt;</span><br><span class=\"line\">    &lt;property name=<span class=\"string\">\"age\"</span> value=<span class=\"string\">\"1\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Bean  singleton singleton  singleton prototype  prototype </p>\n<p> singleton  prototype  bean</p>\n<p> bean  BeanFactory  Spring </p>\n<p> Lookup method</p>\n<p><strong>lookup-method</strong><br> Spring Reference </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package fiona.apple;</span><br><span class=\"line\"></span><br><span class=\"line\">// no more Spring imports!</span><br><span class=\"line\"></span><br><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        // grab a new instance of the appropriate Command interface</span><br><span class=\"line\">        Command <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        // <span class=\"built_in\">set</span> the state on the (hopefully brand new) Command instance</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // okay... but <span class=\"built_in\">where</span> is the implementation of this method?</span><br><span class=\"line\">    protected abstract Command createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>xml  <code>&lt;lookup-method /&gt;</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- a stateful bean deployed as a prototype (non-singleton) --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"myCommand\"</span> class=<span class=\"string\">\"fiona.apple.AsyncCommand\"</span> scope=<span class=\"string\">\"prototype\"</span>&gt;</span><br><span class=\"line\">    &lt;!-- inject dependencies here as required --&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- commandProcessor uses statefulCommandHelper --&gt;</span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"commandManager\"</span> class=<span class=\"string\">\"fiona.apple.CommandManager\"</span>&gt;</span><br><span class=\"line\">    &lt;lookup-method name=<span class=\"string\">\"createCommand\"</span> bean=<span class=\"string\">\"myCommand\"</span>/&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>\n<p>Spring  <strong>CGLIB</strong>  final class final</p>\n<p>lookup-method  <code>&lt;lookup-method /&gt;</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        MyCommand <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Lookup(<span class=\"string\">\"myCommand\"</span>)</span><br><span class=\"line\">    protected abstract Command createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>&lt;context:component-scan base-package=\"com.loonycoder\" /&gt;</code></p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public abstract class CommandManager &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object process(Object commandState) &#123;</span><br><span class=\"line\">        MyCommand <span class=\"built_in\">command</span> = createCommand();</span><br><span class=\"line\">        command.setState(commandState);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> command.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Lookup</span><br><span class=\"line\">    protected abstract MyCommand createCommand();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p> MyCommand Command  Command</p>\n</blockquote>\n<p><strong>replaced-method</strong><br> bean </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyValueCalculator &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String computeValue(String input) &#123;</span><br><span class=\"line\">        // some real code...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // some other methods...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> MethodReplacer </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class ReplacementComputeValue implements org.springframework.beans.factory.support.MethodReplacer &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    public Object reimplement(Object o, Method m, Object[] args) throws Throwable &#123;</span><br><span class=\"line\">        // get the input value, work with it, and <span class=\"built_in\">return</span> a computed result</span><br><span class=\"line\">        String input = (String) args[0];</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ...;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;bean id=<span class=\"string\">\"myValueCalculator\"</span> class=<span class=\"string\">\"x.y.z.MyValueCalculator\"</span>&gt;</span><br><span class=\"line\">    &lt;!--  computeValue  --&gt;</span><br><span class=\"line\">    &lt;replaced-method name=<span class=\"string\">\"computeValue\"</span> replacer=<span class=\"string\">\"replacementComputeValue\"</span>&gt;</span><br><span class=\"line\">        &lt;arg-type&gt;String&lt;/arg-type&gt;</span><br><span class=\"line\">    &lt;/replaced-method&gt;</span><br><span class=\"line\">&lt;/bean&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;bean id=<span class=\"string\">\"replacementComputeValue\"</span> class=<span class=\"string\">\"a.b.c.ReplacementComputeValue\"</span>/&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>arg-type </p>\n</blockquote>\n<h4 id=\"BeanPostProcessor\"><a href=\"#BeanPostProcessor\" class=\"headerlink\" title=\"BeanPostProcessor\"></a>BeanPostProcessor</h4><p> BeanPostProcessor  Spring </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface BeanPostProcessor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;</span><br><span class=\"line\"></span><br><span class=\"line\">   Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> bean  postProcessBeforeInitialization  postProcessAfterInitialization </p>\n<p> BeanPostProcessor Spring  BeanFactory  obtainFactory()  prepareBeanFactory(factory)Spring  BeanPostProcessorApplicationContextAwareProcessorApplicationListenerDetector</p>\n<p> bean  bean  bean  null</p>\n<p> bean  Spring  bean </p>\n<p> bean  BeanPostProcessor </p>\n<p> bean  AbstractAutowireCapableBeanFactory#initBean </p>\n<p> Aware  bean BeanPostProcessor  postProcessBeforeInitialization  init-method BeanPostProcessor  postProcessAfterInitialization </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> Spring  Spring </p>\n<p> Spring  singleton beans  Spring </p>\n<p></p>\n"},{"title":"SpringAOP","date":"2018-11-06T16:00:00.000Z","_content":"> SpringBeanPostProcessorSpringAOPAOP\n\n![Spring](/images/spring_logo.jpg)\n\n### 1.AOP\nAOP**** OOP**** ****************AOP****\n\nSpring**AOP**SpringAOPSpring\n\n---\n\n### 2.AOP\n\nAOPAOP\n```bash\n<aop:aspectj-autoproxy />\n```\nAOPaop\n```bash\nxmlns:aop=\"http://www.springframework.org/schema/aop\"\n```\n<code>&lt;http\\://www.springframework.org/schema/aop&gt;</code>http \"\\\" **spring.handlers**handler\n```bash\nhttp\\://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler\n```\nhandler\n```bash\npublic class AopNamespaceHandler extends NamespaceHandlerSupport {\n\n  /**\n   * Register the {@link BeanDefinitionParser BeanDefinitionParsers} for the\n   * '{@code config}', '{@code spring-configured}', '{@code aspectj-autoproxy}'\n   * and '{@code scoped-proxy}' tags.\n   */\n  @Override\n  public void init() {\n    // In 2.0 XSD as well as in 2.1 XSD.\n    registerBeanDefinitionParser(\"config\", new ConfigBeanDefinitionParser());\n    registerBeanDefinitionParser(\"aspectj-autoproxy\", new AspectJAutoProxyBeanDefinitionParser());\n    registerBeanDefinitionDecorator(\"scoped-proxy\", new ScopedProxyBeanDefinitionDecorator());\n\n    // Only in 2.0 XSD: moved to context namespace as of 2.1\n    registerBeanDefinitionParser(\"spring-configured\", new SpringConfiguredBeanDefinitionParser());\n  }\n}\n```\n<code>aspectj-autoproxy</code>Parserinit<code>aspectj-autoproxy</code>Parser<code>AspectJAutoProxyBeanDefinitionParser</code>\n```bash\n@Override\n@Nullable\n//parse\npublic BeanDefinition parse(Element element, ParserContext parserContext) {\n    //IOC\n    AopNamespaceUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(parserContext, element);\n    extendBeanDefinition(element, parserContext);\n    return null;\n}\n```\n\n---\n\n### 3.AnnotationAwareAspectJAutoProxyCreator\n<code>AnnotationAwareAspectJAutoProxyCreator</code>AOP\n![spring](images/spring-aop1.png)\n<code>BeanPostProcessor</code>Bean**postProcessAfterInitialization**<code>BeanFactorAware</code><code>BeanFactory</code>\n\n```bash\npublic static void registerAspectJAnnotationAutoProxyCreatorIfNecessary(\n    ParserContext parserContext, Element sourceElement) {\n//BeanIOC\n    BeanDefinition beanDefinition = AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(\n        parserContext.getRegistry(), parserContext.extractSource(sourceElement));\n    //proxy-target-classexpose-proxy\n    useClassProxyingIfNecessary(parserContext.getRegistry(), sourceElement);\n    //\n    registerComponentIfNecessary(beanDefinition, parserContext);\n}\n```\n3\n1. <code>AnnotationAwareAspectJAutoProxyCreator</code>\n```bash\n@Nullable\npublic static BeanDefinition registerAspectJAnnotationAutoProxyCreatorIfNecessary(BeanDefinitionRegistry registry,\n                                                                                  @Nullable Object source) {\n//AnnotationAwareAspectJAutoProxyCreatorIOC\n    return registerOrEscalateApcAsRequired(AnnotationAwareAspectJAutoProxyCreator.class, registry, source);\n}\n```\n```bash\n@Nullable\nprivate static BeanDefinition registerOrEscalateApcAsRequired(Class<?> cls, BeanDefinitionRegistry registry,\n                                                              @Nullable Object source) {\n\n    Assert.notNull(registry, \"BeanDefinitionRegistry must not be null\");\n\n    //IOCBean\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanDefinition\n        BeanDefinition apcDefinition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //BeanClassNameAnnotationAwareAspectJAutoProxyCreator\n        //ClassName\n        if (!cls.getName().equals(apcDefinition.getBeanClassName())) {\n            int currentPriority = findPriorityForClass(apcDefinition.getBeanClassName());\n            int requiredPriority = findPriorityForClass(cls);\n            //BeanCreator\n            if (currentPriority < requiredPriority) {\n                //ClassNameCreator\n                apcDefinition.setBeanClassName(cls.getName());\n            }\n        }\n        //\n        return null;\n    }\n\n    //IOCCreator\n    //CrearirClassBeanDefinition\n    RootBeanDefinition beanDefinition = new RootBeanDefinition(cls);\n    beanDefinition.setSource(source);\n    //order\n    beanDefinition.getPropertyValues().add(\"order\", Ordered.HIGHEST_PRECEDENCE);\n    beanDefinition.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);\n    //BeanDefinitionIOC\n    registry.registerBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME, beanDefinition);\n    return beanDefinition;\n}\n```\n2. **proxy-target-class****expose-proxy**\n```bash\nprivate static void useClassProxyingIfNecessary(BeanDefinitionRegistry registry, @Nullable Element sourceElement) {\n    if (sourceElement != null) {\n        boolean proxyTargetClass = Boolean.valueOf(sourceElement.getAttribute(PROXY_TARGET_CLASS_ATTRIBUTE));\n        //proxy-target-class\n        if (proxyTargetClass) {\n            AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry);\n        }\n        boolean exposeProxy = Boolean.valueOf(sourceElement.getAttribute(EXPOSE_PROXY_ATTRIBUTE));\n        //expose-proxy\n        if (exposeProxy) {\n            AopConfigUtils.forceAutoProxyCreatorToExposeProxy(registry);\n        }\n    }\n}\n```\n\n```bash\npublic static void forceAutoProxyCreatorToUseClassProxying(BeanDefinitionRegistry registry) {\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanNameCreator\n        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //CreatorBeanDefinitionproxyTargetClasstrue\n        definition.getPropertyValues().add(\"proxyTargetClass\", Boolean.TRUE);\n    }\n}\n\npublic static void forceAutoProxyCreatorToExposeProxy(BeanDefinitionRegistry registry) {\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanNameCreator\n        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //CreatorBeanDefinitionexposeProxytrue\n        definition.getPropertyValues().add(\"exposeProxy\", Boolean.TRUE);\n    }\n}\n```\n\n- **proxy-target-class**SpringAOP**JDK**AOP**CGLib**AOPAOPCGLibproxy-target-class**true**\n\n1)**final**CGLibfinalfinalAOP\n2)CGLibJAR\n- **expose-proxy**AB**B**AOPAOP**expose-proxytrue**AB\n```bash\npublic class Service{\n    public void A(){\n        ((Service)AopContext.currentProxy()).B();\n    }\n\n    public void B(){\n    //do something...\n    }\n}\n```\nBAAOP<code>AopContext</code>**AOP**\n\n---\n\n### 4.AOP\n#### AOP\n**Creator**<code>BeanPostProcessor</code>IOCBean**postProcessAfterInitialization**AOP<code>AbstractAutoProxyCreator</code>\n```bash\n@Override\npublic Object postProcessAfterInitialization(@Nullable Object bean, String beanName) throws BeansException {\n    if (bean != null) {\n        //KeyBeanClassbenaName\n        Object cacheKey = getCacheKey(bean.getClass(), beanName);\n        //BeanIOC\n        //Bean\n        //\n        if (!this.earlyProxyReferences.contains(cacheKey)) {\n            //AOP\n            return wrapIfNecessary(bean, beanName, cacheKey);\n        }\n    }\n    return bean;\n}\n```\n```bash\nprotected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) {\n    //\n    if (StringUtils.hasLength(beanName) && this.targetSourcedBeans.contains(beanName)) {\n        return bean;\n    }\n    //Bean\n    if (Boolean.FALSE.equals(this.advisedBeans.get(cacheKey))) {\n        return bean;\n    }\n    //BeanAOP\n    if (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) {\n        //\n        this.advisedBeans.put(cacheKey, Boolean.FALSE);\n        return bean;\n    }\n\n    // Create proxy if we have advice.\n    //Bean\n    Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);\n    //DO_NOT_PROXY\n    if (specificInterceptors != DO_NOT_PROXY) {\n        //\n        this.advisedBeans.put(cacheKey, Boolean.TRUE);\n        //Bean\n        Object proxy = createProxy(\n            bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));\n        this.proxyTypes.put(cacheKey, proxy.getClass());\n        //BeanIOC\n        return proxy;\n    }\n  //\n    this.advisedBeans.put(cacheKey, Boolean.FALSE);\n    return bean;\n}\n```\nAOP\n- Bean\n- Bean\n\n#### \n\n```bash\n@Override\n@Nullable\nprotected Object[] getAdvicesAndAdvisorsForBean(Class<?> beanClass, String beanName, @Nullable TargetSource targetSource) {\n    //Advisor\n    List<Advisor> advisors = findEligibleAdvisors(beanClass, beanName);\n    if (advisors.isEmpty()) {\n        return DO_NOT_PROXY;\n    }\n    return advisors.toArray();\n}\n```\n<code>Advisor</code>Advisor**advise**\n```bash\nprotected List<Advisor> findEligibleAdvisors(Class<?> beanClass, String beanName) {\n    //Advisor\n    List<Advisor> candidateAdvisors = findCandidateAdvisors();\n    //AdvisorBeanAdvisor\n    List<Advisor> eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);\n    extendAdvisors(eligibleAdvisors);\n    if (!eligibleAdvisors.isEmpty()) {\n        eligibleAdvisors = sortAdvisors(eligibleAdvisors);\n    }\n    return eligibleAdvisors;\n}\n```\n\n##### Advisor\n<code>Advisor</code><code>Creator</code>\n```bash\n@Override\nprotected List<Advisor> findCandidateAdvisors() {\n    // Add all the Spring advisors found according to superclass rules.\n    //findCandidateAdvisorsIOCAdvisorBean\n    List<Advisor> advisors = super.findCandidateAdvisors();\n    // Build Advisors for all AspectJ aspects in the bean factory.\n    if (this.aspectJAdvisorsBuilder != null) {\n        //Advisor\n        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());\n    }\n    return advisors;\n}\n```\n**findCandidateAdvisors**<code>Advisor</code>\n```bash\nprotected List<Advisor> findCandidateAdvisors() {\n    Assert.state(this.advisorRetrievalHelper != null, \"No BeanFactoryAdvisorRetrievalHelper available\");\n    //Helper\n    return this.advisorRetrievalHelper.findAdvisorBeans();\n}\n```\n```bash\npublic List<Advisor> findAdvisorBeans() {\n    // Determine list of advisor bean names, if not cached already.\n    String[] advisorNames = null;\n    synchronized (this) {\n        //\n        advisorNames = this.cachedAdvisorBeanNames;\n        //IOC\n        if (advisorNames == null) {\n            // Do not initialize FactoryBeans here: We need to leave all regular beans\n            // uninitialized to let the auto-proxy creator apply to them!\n            //IOCAdvisorBeanName\n            advisorNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(\n                this.beanFactory, Advisor.class, true, false);\n            //\n            this.cachedAdvisorBeanNames = advisorNames;\n        }\n    }\n    //\n    if (advisorNames.length == 0) {\n        return new LinkedList<>();\n    }\n\n    List<Advisor> advisors = new LinkedList<>();\n    //BeanName\n    for (String name : advisorNames) {\n        if (isEligibleBean(name)) {\n            if (this.beanFactory.isCurrentlyInCreation(name)) {\n                if (logger.isDebugEnabled()) {\n                    logger.debug(\"Skipping currently created advisor '\" + name + \"'\");\n                }\n            }\n            else {\n                try {\n                    //BeanNameIOCBeanList\n                    advisors.add(this.beanFactory.getBean(name, Advisor.class));\n                }\n                //catch ...\n            }\n        }\n    }\n    return advisors;\n}\n```\n**IOCAdvisorBeanAdvisor**AOPAdvisorIOC\n\n##### Advisor\nAdvisor<code>AnnotationAwareAspectJAutoProxyCreatorS</code>**findCandidateAdvisors** <code>BeanFactoryAspectJAdvisorsBuilder</code>**buildAspectJAdvisors**Advisor\n```bash\n@Override\nprotected List<Advisor> findCandidateAdvisors() {\n    // Add all the Spring advisors found according to superclass rules.\n    List<Advisor> advisors = super.findCandidateAdvisors();\n    // Build Advisors for all AspectJ aspects in the bean factory.\n    if (this.aspectJAdvisorsBuilder != null) {\n        //BeanFactoryAspectJAdvisorsBuilderAdvisor\n        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());\n    }\n    return advisors;\n}\n```\n```bash\npublic List<Advisor> buildAspectJAdvisors() {\n    List<String> aspectNames = this.aspectBeanNames;\n\n    if (aspectNames == null) {\n        synchronized (this) {\n            aspectNames = this.aspectBeanNames;\n            //\n            if (aspectNames == null) {\n                List<Advisor> advisors = new LinkedList<>();\n                aspectNames = new LinkedList<>();\n                //IOCBeanName\n                String[] beanNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(\n                    this.beanFactory, Object.class, true, false);\n                //BeanName\n                for (String beanName : beanNames) {\n                    if (!isEligibleBean(beanName)) {\n                        continue;\n                    }\n                    // We must be careful not to instantiate beans eagerly as in this case they\n                    // would be cached by the Spring container but would not have been weaved.\n                    Class<?> beanType = this.beanFactory.getType(beanName);\n                    if (beanType == null) {\n                        continue;\n                    }\n                    //Bean@Aspect\n                    if (this.advisorFactory.isAspect(beanType)) {\n                        //Advisor\n                        aspectNames.add(beanName);\n                        AspectMetadata amd = new AspectMetadata(beanType, beanName);\n                        //\n                        if (amd.getAjType().getPerClause().getKind() == PerClauseKind.SINGLETON) {\n                            //\n                            MetadataAwareAspectInstanceFactory factory =\n                                new BeanFactoryAspectInstanceFactory(this.beanFactory, beanName);\n                            //advisorFactoryAdvisor\n                            List<Advisor> classAdvisors = this.advisorFactory.getAdvisors(factory);\n                            //\n                            if (this.beanFactory.isSingleton(beanName)) {\n                                this.advisorsCache.put(beanName, classAdvisors);\n                            }\n                            //factoryfactory\n                            //advisorFactoryAdvisorBeanfactory\n                            else {\n                                this.aspectFactoryCache.put(beanName, factory);\n                            }\n                            advisors.addAll(classAdvisors);\n                        }\n                        else {\n                            // Per target or per this.\n                            if (this.beanFactory.isSingleton(beanName)) {\n                                throw new IllegalArgumentException(\"Bean with name '\" + beanName +\n                                                                   \"' is a singleton, but aspect instantiation model is not singleton\");\n                            }\n                            MetadataAwareAspectInstanceFactory factory =\n                                new PrototypeAspectInstanceFactory(this.beanFactory, beanName);\n                            this.aspectFactoryCache.put(beanName, factory);\n                            advisors.addAll(this.advisorFactory.getAdvisors(factory));\n                        }\n                    }\n                }\n                this.aspectBeanNames = aspectNames;\n                return advisors;\n            }\n        }\n    }\n\n    //\n    if (aspectNames.isEmpty()) {\n        return Collections.emptyList();\n    }\n    List<Advisor> advisors = new LinkedList<>();\n    //\n    for (String aspectName : aspectNames) {\n        //Advisor\n        List<Advisor> cachedAdvisors = this.advisorsCache.get(aspectName);\n        //\n        if (cachedAdvisors != null) {\n            advisors.addAll(cachedAdvisors);\n        }\n        //factory\n        //factoryadvisorFactoryAdvisor\n        else {\n            MetadataAwareAspectInstanceFactory factory = this.aspectFactoryCache.get(aspectName);\n            advisors.addAll(this.advisorFactory.getAdvisors(factory));\n        }\n    }\n    return advisors;\n}\n```\n**Advisor****advisorFactory****Advisor**<code>ReflectiveAspectJAdvisorFactory</code>**getAdvisors**\n```bash\n@Override\npublic List<Advisor> getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) {\n    //\n    Class<?> aspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();\n    //Name\n    String aspectName = aspectInstanceFactory.getAspectMetadata().getAspectName();\n    //\n    validate(aspectClass);\n\n    // We need to wrap the MetadataAwareAspectInstanceFactory with a decorator\n    // so that it will only instantiate once.\n    MetadataAwareAspectInstanceFactory lazySingletonAspectInstanceFactory =\n        new LazySingletonAspectInstanceFactoryDecorator(aspectInstanceFactory);\n\n    List<Advisor> advisors = new LinkedList<>();\n    //@Pointcut\n    for (Method method : getAdvisorMethods(aspectClass)) {\n        //Advisor\n        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, advisors.size(), aspectName);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    // If it's a per target aspect, emit the dummy instantiating aspect.\n    if (!advisors.isEmpty() && lazySingletonAspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) {\n        Advisor instantiationAdvisor = new SyntheticInstantiationAdvisor(lazySingletonAspectInstanceFactory);\n        advisors.add(0, instantiationAdvisor);\n    }\n\n    // Find introduction fields.\n    //DeclareParentsfiled\n    for (Field field : aspectClass.getDeclaredFields()) {\n        Advisor advisor = getDeclareParentsAdvisor(field);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    return advisors;\n}\n```\n\n1. **getAdvisorMethods**<code>AdvisorMethods</code>\n```bash\nprivate List<Method> getAdvisorMethods(Class<?> aspectClass) {\n    final List<Method> methods = new LinkedList<>();\n    ReflectionUtils.doWithMethods(aspectClass, method -> {\n        // Exclude pointcuts\n        //Pointcut\n        if (AnnotationUtils.getAnnotation(method, Pointcut.class) == null) {\n            methods.add(method);\n        }\n    });\n    Collections.sort(methods, METHOD_COMPARATOR);\n    return methods;\n}\n```\n**PointcutAdvisorMethod**\n2. **getAdvisor**<code>Advisor</code>\n```bash\n@Override\n@Nullable\npublic Advisor getAdvisor(Method candidateAdviceMethod, MetadataAwareAspectInstanceFactory aspectInstanceFactory,\n                          int declarationOrderInAspect, String aspectName) {\n\n    validate(aspectInstanceFactory.getAspectMetadata().getAspectClass());\n\n    //\n    AspectJExpressionPointcut expressionPointcut = getPointcut(\n        candidateAdviceMethod, aspectInstanceFactory.getAspectMetadata().getAspectClass());\n    if (expressionPointcut == null) {\n        return null;\n    }\n\n    //\n    return new InstantiationModelAwarePointcutAdvisorImpl(expressionPointcut, candidateAdviceMethod,\n                                                          this, aspectInstanceFactory, declarationOrderInAspect, aspectName);\n}\n```\n\n\n- getPointcut****\n- InstantiationModelAwarePointcutAdvisorImpl****\n\n##### \n\nAdvisor**getPointcut**\n```bash\n@Nullable\nprivate AspectJExpressionPointcut getPointcut(Method candidateAdviceMethod, Class<?> candidateAspectClass) {\n    //\n    AspectJAnnotation<?> aspectJAnnotation =\n        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);\n    if (aspectJAnnotation == null) {\n        return null;\n    }\n\n    //\n    AspectJExpressionPointcut ajexp =\n        new AspectJExpressionPointcut(candidateAspectClass, new String[0], new Class<?>[0]);\n    //\n    //@Before\"test()\"test()\n    ajexp.setExpression(aspectJAnnotation.getPointcutExpression());\n    if (this.beanFactory != null) {\n        ajexp.setBeanFactory(this.beanFactory);\n    }\n    return ajexp;\n}\n```\n**findAspectJAnnotationOnMethod**\n```bash\n@SuppressWarnings(\"unchecked\")\n@Nullable\nprotected static AspectJAnnotation<?> findAspectJAnnotationOnMethod(Method method) {\n    //\n    Class<?>[] classesToLookFor = new Class<?>[] {\n        Before.class, Around.class, After.class, AfterReturning.class, AfterThrowing.class, Pointcut.class};\n    for (Class<?> c : classesToLookFor) {\n        //\n        AspectJAnnotation<?> foundAnnotation = findAnnotation(method, (Class<Annotation>) c);\n        //\n        if (foundAnnotation != null) {\n            return foundAnnotation;\n        }\n    }\n    return null;\n}\n```\n**findAnnotation **\n```bash\n@Nullable\nprivate static <A extends Annotation> AspectJAnnotation<A> findAnnotation(Method method, Class<A> toLookFor) {\n    //\n    A result = AnnotationUtils.findAnnotation(method, toLookFor);\n    if (result != null) {\n        //AspectJAnnotation\n        return new AspectJAnnotation<>(result);\n    }\n    else {\n        return null;\n    }\n}\n```\n****@Before(\"test()\")**test()**AspectJAnnotation****\n```bash\npublic AspectJAnnotation(A annotation) {\n    this.annotation = annotation;\n    this.annotationType = determineAnnotationType(annotation);\n    // We know these methods exist with the same name on each object,\n    // but need to invoke them reflectively as there isn't a common interface.\n    try {\n        //pointcut\n        this.pointcutExpression = resolveExpression(annotation);\n        this.argumentNames = (String) annotation.getClass().getMethod(\"argNames\").invoke(annotation);\n    }\n    catch (Exception ex) {\n        throw new IllegalArgumentException(annotation + \" cannot be an AspectJ annotation\", ex);\n    }\n}\n```\n```bash\nprivate String resolveExpression(A annotation) throws Exception {\n    //valuepointcut\n    for (String methodName : EXPRESSION_PROPERTIES) {\n        Method method;\n        try {\n            //method\n            method = annotation.getClass().getDeclaredMethod(methodName);\n        }\n        catch (NoSuchMethodException ex) {\n            method = null;\n        }\n        if (method != null) {\n            //@Before(\"test()\")\n            //\"test()\"\n            String candidate = (String) method.invoke(annotation);\n            if (StringUtils.hasText(candidate)) {\n                return candidate;\n            }\n        }\n    }\n    throw new IllegalStateException(\"Failed to resolve expression: \" + annotation);\n}\n```\n\n##### Advisor\n<code>InstantiationModelAwarePointcutAdvisorImpl</code><code>Advisor</code>\n```bash\npublic InstantiationModelAwarePointcutAdvisorImpl(AspectJExpressionPointcut declaredPointcut,\n                                                  Method aspectJAdviceMethod, AspectJAdvisorFactory aspectJAdvisorFactory,\n                                                  MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) {\n\n    //\n    this.declaredPointcut = declaredPointcut;\n    this.declaringClass = aspectJAdviceMethod.getDeclaringClass();\n    this.methodName = aspectJAdviceMethod.getName();\n    this.parameterTypes = aspectJAdviceMethod.getParameterTypes();\n    this.aspectJAdviceMethod = aspectJAdviceMethod;\n    this.aspectJAdvisorFactory = aspectJAdvisorFactory;\n    this.aspectInstanceFactory = aspectInstanceFactory;\n    this.declarationOrder = declarationOrder;\n    this.aspectName = aspectName;\n\n    if (aspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) {\n        // Static part of the pointcut is a lazy type.\n        Pointcut preInstantiationPointcut = Pointcuts.union(\n            aspectInstanceFactory.getAspectMetadata().getPerClausePointcut(), this.declaredPointcut);\n\n        // Make it dynamic: must mutate from pre-instantiation to post-instantiation state.\n        // If it's not a dynamic pointcut, it may be optimized out\n        // by the Spring AOP infrastructure after the first evaluation.\n        this.pointcut = new PerTargetInstantiationModelPointcut(\n            this.declaredPointcut, preInstantiationPointcut, aspectInstanceFactory);\n        this.lazy = true;\n    }\n    else {\n        // A singleton aspect.\n        this.pointcut = this.declaredPointcut;\n        this.lazy = false;\n        //AdviceinstantiatedAdvice\n        this.instantiatedAdvice = instantiateAdvice(this.declaredPointcut);\n    }\n}\n```\n\n******instantiateAdvice****Advise**@Before@AfterAdvice****Advice\n```bash\nprivate Advice instantiateAdvice(AspectJExpressionPointcut pointcut) {\n    //Advice\n    Advice advice = this.aspectJAdvisorFactory.getAdvice(this.aspectJAdviceMethod, pointcut,\n                                                         this.aspectInstanceFactory, this.declarationOrder, this.aspectName);\n    return (advice != null ? advice : EMPTY_ADVICE);\n}\n```\n<code>aspectJAdvisorFactory</code>Advice\n```bash\n@Override\n@Nullable\npublic Advice getAdvice(Method candidateAdviceMethod, AspectJExpressionPointcut expressionPointcut,\n                        MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) {\n\n    //\n    Class<?> candidateAspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();\n    validate(candidateAspectClass);\n\n    //\n    AspectJAnnotation<?> aspectJAnnotation =\n        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);\n    if (aspectJAnnotation == null) {\n        return null;\n    }\n\n    // If we get here, we know we have an AspectJ method.\n    // Check that its an AspectJ-annotated class\n    if (!isAspect(candidateAspectClass)) {\n        throw new AopConfigException(\"Advice must be declared inside an aspect type: \" +\n                                     \"Offending method '\" + candidateAdviceMethod + \"' in class [\" +\n                                     candidateAspectClass.getName() + \"]\");\n    }\n\n    if (logger.isDebugEnabled()) {\n        logger.debug(\"Found AspectJ method: \" + candidateAdviceMethod);\n    }\n\n    AbstractAspectJAdvice springAdvice;\n\n    //swich\n    switch (aspectJAnnotation.getAnnotationType()) {\n            //@Before\n        case AtBefore:\n            springAdvice = new AspectJMethodBeforeAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@After\n        case AtAfter:\n            springAdvice = new AspectJAfterAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@AfterReturning\n        case AtAfterReturning:\n            springAdvice = new AspectJAfterReturningAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            AfterReturning afterReturningAnnotation = (AfterReturning) aspectJAnnotation.getAnnotation();\n            if (StringUtils.hasText(afterReturningAnnotation.returning())) {\n                springAdvice.setReturningName(afterReturningAnnotation.returning());\n            }\n            break;\n            //@AfterThrowing\n        case AtAfterThrowing:\n            springAdvice = new AspectJAfterThrowingAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            AfterThrowing afterThrowingAnnotation = (AfterThrowing) aspectJAnnotation.getAnnotation();\n            if (StringUtils.hasText(afterThrowingAnnotation.throwing())) {\n                springAdvice.setThrowingName(afterThrowingAnnotation.throwing());\n            }\n            break;\n            //@Around\n        case AtAround:\n            springAdvice = new AspectJAroundAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@Pointcut\n        case AtPointcut:\n            if (logger.isDebugEnabled()) {\n                logger.debug(\"Processing pointcut '\" + candidateAdviceMethod.getName() + \"'\");\n            }\n            return null;\n        default:\n            throw new UnsupportedOperationException(\n                \"Unsupported advice type on method: \" + candidateAdviceMethod);\n    }\n\n    // Now to configure the advice...\n    //Advice\n    springAdvice.setAspectName(aspectName);\n    springAdvice.setDeclarationOrder(declarationOrder);\n    String[] argNames = this.parameterNameDiscoverer.getParameterNames(candidateAdviceMethod);\n    if (argNames != null) {\n        springAdvice.setArgumentNamesFromStringArray(argNames);\n    }\n    springAdvice.calculateArgumentBindings();\n    return springAdvice;\n}\n```\nAdviceadvice**Advisoradvice**\n\n#### \n********\n```bash\nprotected List<Advisor> findEligibleAdvisors(Class<?> beanClass, String beanName) {\n    //Advisor\n    //4.2\n    List<Advisor> candidateAdvisors = findCandidateAdvisors();\n    //AdvisorBeanAdvisor\n    List<Advisor> eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);\n    extendAdvisors(eligibleAdvisors);\n    if (!eligibleAdvisors.isEmpty()) {\n        eligibleAdvisors = sortAdvisors(eligibleAdvisors);\n    }\n    return eligibleAdvisors;\n}\n```\n**findAdvisorsThatCanApply**\n```bash\nprotected List<Advisor> findAdvisorsThatCanApply(\n    List<Advisor> candidateAdvisors, Class<?> beanClass, String beanName) {\n\n    ProxyCreationContext.setCurrentProxiedBeanName(beanName);\n    try {\n        //AopUtils\n        return AopUtils.findAdvisorsThatCanApply(candidateAdvisors, beanClass);\n    }\n    finally {\n        ProxyCreationContext.setCurrentProxiedBeanName(null);\n    }\n}\n```\n<code>AopUtils</code>\n```bash\npublic static List<Advisor> findAdvisorsThatCanApply(List<Advisor> candidateAdvisors, Class<?> clazz) {\n    if (candidateAdvisors.isEmpty()) {\n        return candidateAdvisors;\n    }\n    List<Advisor> eligibleAdvisors = new LinkedList<>();\n    //Advisor\n    for (Advisor candidate : candidateAdvisors) {\n        //AdvisorBean\n        if (candidate instanceof IntroductionAdvisor && canApply(candidate, clazz)) {\n            //List\n            eligibleAdvisors.add(candidate);\n        }\n    }\n    boolean hasIntroductions = !eligibleAdvisors.isEmpty();\n    for (Advisor candidate : candidateAdvisors) {\n        if (candidate instanceof IntroductionAdvisor) {\n            // already processed\n            //\n            continue;\n        }\n        //Advisor\n        if (canApply(candidate, clazz, hasIntroductions)) {\n            //List\n            eligibleAdvisors.add(candidate);\n        }\n    }\n    //Advisor List\n    return eligibleAdvisors;\n}\n```\n**canApply**\n```bash\npublic static boolean canApply(Advisor advisor, Class<?> targetClass, boolean hasIntroductions) {\n    if (advisor instanceof IntroductionAdvisor) {\n        //ClassFilterBean\n        return ((IntroductionAdvisor) advisor).getClassFilter().matches(targetClass);\n    }\n    else if (advisor instanceof PointcutAdvisor) {\n        //AdvisorPointcutAdvisor\n        //PointcutAdvisorgetPointcut\n        PointcutAdvisor pca = (PointcutAdvisor) advisor;\n        //\n        return canApply(pca.getPointcut(), targetClass, hasIntroductions);\n    }\n    else {\n        // It doesn't have a pointcut so we assume it applies.\n        //\n        return true;\n    }\n}\n```\nAdvisor**canApply**\n```bash\npublic static boolean canApply(Pointcut pc, Class<?> targetClass, boolean hasIntroductions) {\n    Assert.notNull(pc, \"Pointcut must not be null\");\n    //false\n    //\n    if (!pc.getClassFilter().matches(targetClass)) {\n        return false;\n    }\n\n    //\n    MethodMatcher methodMatcher = pc.getMethodMatcher();\n    //methodMatcherMethodMatcher.TRUEtrue\n    if (methodMatcher == MethodMatcher.TRUE) {\n        // No need to iterate the methods if were matching any method anyway...\n        return true;\n    }\n\n    IntroductionAwareMethodMatcher introductionAwareMethodMatcher = null;\n    if (methodMatcher instanceof IntroductionAwareMethodMatcher) {\n        introductionAwareMethodMatcher = (IntroductionAwareMethodMatcher) methodMatcher;\n    }\n\n    //\n    Set<Class<?>> classes = new LinkedHashSet<>(ClassUtils.getAllInterfacesForClassAsSet(targetClass));\n    //\n    classes.add(targetClass);\n    //\n    for (Class<?> clazz : classes) {\n        //class\n        Method[] methods = ReflectionUtils.getAllDeclaredMethods(clazz);\n        //\n        for (Method method : methods) {\n            //true\n            if ((introductionAwareMethodMatcher != null &&\n                 introductionAwareMethodMatcher.matches(method, targetClass, hasIntroductions)) ||\n                methodMatcher.matches(method, targetClass)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n```\n****Bean******Advisor**Advisor**Bean****AdvisorAdvisors**BeanAdvisorBeanAdvisorAdvisorAdvisoradvice@BeforeAdvisorAdvisor\n\n#### \n##### JDKCGLIB\n4.1**wrapIfNecessary**Bean**getAdvicesAndAdvisorsForBean**Advisor**createProxy**\n```bash\nprotected Object createProxy(Class<?> beanClass, @Nullable String beanName,\n                             @Nullable Object[] specificInterceptors, TargetSource targetSource) {\n\n    if (this.beanFactory instanceof ConfigurableListableBeanFactory) {\n        AutoProxyUtils.exposeTargetClass((ConfigurableListableBeanFactory) this.beanFactory, beanName, beanClass);\n    }\n\n    ProxyFactory proxyFactory = new ProxyFactory();\n    //CreatorproxyTargetClassexposeProxy\n    proxyFactory.copyFrom(this);\n\n    //proxyTargetClassfalse\n    //proxyTargetClasstrueCGLib\n    if (!proxyFactory.isProxyTargetClass()) {\n        //\n        if (shouldProxyTargetClass(beanClass, beanName)) {\n            //CGLib\n            proxyFactory.setProxyTargetClass(true);\n        }\n        //proxyFactory\n        else {\n            evaluateProxyInterfaces(beanClass, proxyFactory);\n        }\n    }\n\n    //Advisor\n    Advisor[] advisors = buildAdvisors(beanName, specificInterceptors);\n    //AdvisorsproxyFactory\n    proxyFactory.addAdvisors(advisors);\n    //BeanproxyFactory\n    proxyFactory.setTargetSource(targetSource);\n    //\n    customizeProxyFactory(proxyFactory);\n\n    proxyFactory.setFrozen(this.freezeProxy);\n    if (advisorsPreFiltered()) {\n        proxyFactory.setPreFiltered(true);\n    }\n\n    //proxyFactory\n    return proxyFactory.getProxy(getProxyClassLoader());\n}\n```\n<code>proxyFactory</code><code>proxyFactory</code>**getProxy**\n```bash\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    return createAopProxy().getProxy(classLoader);\n}\n```\n```bash\nprotected final synchronized AopProxy createAopProxy() {\n    if (!this.active) {\n        activate();\n    }\n    //aopProxyFactory\n    return getAopProxyFactory().createAopProxy(this);\n}\n```\n<code>aopProxyFactory</code>\n```bash\npublic ProxyCreatorSupport() {\n    this.aopProxyFactory = new DefaultAopProxyFactory();\n}\n```\n**createAopProxy**\n```bash\n@Override\npublic AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {\n    //ProxyTargetClass\n    if (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) {\n        Class<?> targetClass = config.getTargetClass();\n        if (targetClass == null) {\n            throw new AopConfigException(\"TargetSource cannot determine target class: \" +\n                                         \"Either an interface or a target is required for proxy creation.\");\n        }\n        if (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) {\n            return new JdkDynamicAopProxy(config);\n        }\n        return new ObjenesisCglibAopProxy(config);\n    }\n    else {\n        return new JdkDynamicAopProxy(config);\n    }\n}\n```\n> configproxyFactoryAdvisor\n\n****\n\n- optimizeCGLibJDKCGLib\n- proxyTargetClasstrueCGLib\n- hasNoUserSuppliedProxyInterfaces\n\nJDKCGLIB\n- JDK\n- proxyTargetClassCGLIB\n- CGLIB\n\n##### \n\n\n```bash\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    return createAopProxy().getProxy(classLoader);\n}\n```\n**createAopProxy**JDKJDK**getProxy**\n```bash\n@Override\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    if (logger.isDebugEnabled()) {\n        logger.debug(\"Creating JDK dynamic proxy: target source is \" + this.advised.getTargetSource());\n    }\n    //\n    Class<?>[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised, true);\n    //equalshashCode\n    findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);\n    //\n    return Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);\n}\n```\n<code>advised</code><code>config</code><code>proxyFactory</code>**Advisor**\n\n<code>InvocationHandler</code>**invoke**\n```bash\n@Override\n@Nullable\npublic Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n    MethodInvocation invocation;\n    Object oldProxy = null;\n    boolean setProxyContext = false;\n\n    //\n    TargetSource targetSource = this.advised.targetSource;\n    Object target = null;\n\n    try {\n        //eqauls()\n        if (!this.equalsDefined && AopUtils.isEqualsMethod(method)) {\n            // The target does not implement the equals(Object) method itself.\n            return equals(args[0]);\n        }\n        //hashCode()\n        else if (!this.hashCodeDefined && AopUtils.isHashCodeMethod(method)) {\n            // The target does not implement the hashCode() method itself.\n            return hashCode();\n        }\n        else if (method.getDeclaringClass() == DecoratingProxy.class) {\n            // There is only getDecoratedClass() declared -> dispatch to proxy config.\n            return AopProxyUtils.ultimateTargetClass(this.advised);\n        }\n        //Advised,,\n        else if (!this.advised.opaque && method.getDeclaringClass().isInterface() &&\n                 method.getDeclaringClass().isAssignableFrom(Advised.class)) {\n            // Service invocations on ProxyConfig with the proxy config...\n            return AopUtils.invokeJoinpointUsingReflection(this.advised, method, args);\n        }\n\n        Object retVal;\n\n        //exposeProxytrueproxy\n        //AOP\n        if (this.advised.exposeProxy) {\n            // Make invocation available if necessary.\n            oldProxy = AopContext.setCurrentProxy(proxy);\n            setProxyContext = true;\n        }\n\n        // Get as late as possible to minimize the time we \"own\" the target,\n        // in case it comes from a pool.\n        //\n        target = targetSource.getTarget();\n        Class<?> targetClass = (target != null ? target.getClass() : null);\n\n        // Get the interception chain for this method.\n        //Interceptor\n        List<Object> chain = this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);\n\n        // Check whether we have any advice. If we don't, we can fallback on direct\n        // reflective invocation of the target, and avoid creating a MethodInvocation.\n        //(Interceptor) method.invoke(target, args)\n        if (chain.isEmpty()) {\n            // We can skip creating a MethodInvocation: just invoke the target directly\n            // Note that the final invoker must be an InvokerInterceptor so we know it does\n            // nothing but a reflective operation on the target, and no hot swapping or fancy proxying.\n            Object[] argsToUse = AopProxyUtils.adaptArgumentsIfNecessary(method, args);\n            retVal = AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse);\n        }\n        else {\n            // We need to create a method invocation...\n            //MethodInvocation\n            //proceed\n            invocation = new ReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);\n            // Proceed to the joinpoint through the interceptor chain.\n            retVal = invocation.proceed();\n        }\n\n        // Massage return value if necessary.\n        Class<?> returnType = method.getReturnType();\n        if (retVal != null && retVal == target &&\n            returnType != Object.class && returnType.isInstance(proxy) &&\n            !RawTargetAccess.class.isAssignableFrom(method.getDeclaringClass())) {\n            // Special case: it returned \"this\" and the return type of the method\n            // is type-compatible. Note that we can't help if the target sets\n            // a reference to itself in another returned object.\n            retVal = proxy;\n        }\n        else if (retVal == null && returnType != Void.TYPE && returnType.isPrimitive()) {\n            throw new AopInvocationException(\n                \"Null return value from advice does not match primitive return type for: \" + method);\n        }\n        return retVal;\n    }\n    finally {\n        if (target != null && !targetSource.isStatic()) {\n            // Must have come from TargetSource.\n            targetSource.releaseTarget(target);\n        }\n        if (setProxyContext) {\n            // Restore old proxy.\n            AopContext.setCurrentProxy(oldProxy);\n        }\n    }\n}\n```\n\n1. **equalshashCodeAdvised**\n2. ****AopContextABBBBAOPBBBAOPAopContextBBAOPAopContext\n3. ****<code>advised</code>**********AOP******<code>ReflectiveMethodInvocation</code>**proceed**AOP\n\n#### AOP\n**BeanIOC**BeanAOP****<code>ReflectiveMethodInvocation</code>**proceed**AOP\n```bash\n//-1\nprivate int currentInterceptorIndex = -1;\n\n//interceptors\nprotected final List<?> interceptorsAndDynamicMethodMatchers;\n\n@Override\n@Nullable\npublic Object proceed() throws Throwable {\n    //  We start with an index of -1 and increment early.\n    //InterceptorjoinPoint\n    if (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) {\n        return invokeJoinpoint();\n    }\n\n    //Advice\n    Object interceptorOrInterceptionAdvice =\n        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);\n    //joinPoint\n    if (interceptorOrInterceptionAdvice instanceof InterceptorAndDynamicMethodMatcher) {\n        // Evaluate dynamic method matcher here: static part will already have\n        // been evaluated and found to match.\n        InterceptorAndDynamicMethodMatcher dm =\n            (InterceptorAndDynamicMethodMatcher) interceptorOrInterceptionAdvice;\n        //\n        if (dm.methodMatcher.matches(this.method, this.targetClass, this.arguments)) {\n            return dm.interceptor.invoke(this);\n        }\n        else {\n            // Dynamic matching failed.\n            // Skip this interceptor and invoke the next in the chain.\n            //,Intercetpor,Interceptor\n            return proceed();\n        }\n    }\n    else {\n        // Its an interceptor, so we just invoke it: The pointcut will have\n        // been evaluated statically before this object was constructed.\n        //IntercetporAdvice\n        //this\n        return ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(this);\n    }\n}\n```\n\n\n1. **currentInterceptorIndex**-1**interceptorsAndDynamicMethodMatchers**size11-1**invokeJoinpoint**\n```bash\nObject interceptorOrInterceptionAdvice =\n        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);\n```\n**currentInterceptorIndex**00Advice**invoke**BeforeAdvice**invoke**\n```bash\n@Override\npublic Object invoke(MethodInvocation mi) throws Throwable {\n    this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );\n    return mi.proceed();\n}\n```\n<code>mi</code><code>this</code><code>ReflectiveMethodInvocation</code><code>ReflectiveMethodInvocation</code>**proceed****proceed**0**currentInterceptorIndex=0,interceptorsAndDynamicMethodMatchers.size() - 1 = 0**\n```bash\nif (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) {\n    return invokeJoinpoint();\n}\n```\n**invokeJoinpoint**\n```bash\n@Nullable\nprotected Object invokeJoinpoint() throws Throwable {\n    return AopUtils.invokeJoinpointUsingReflection(this.target, this.method, this.arguments);\n}\n```\n******proceed**\n\n2. **@BeforeAdviceinvoke@AfterAdvice **\n1) <code>MethodBeforeAdviceInterceptor</code>\n```bash\npublic class MethodBeforeAdviceInterceptor implements MethodInterceptor, Serializable {\n\n    private MethodBeforeAdvice advice;\n\n    /**\n   * Create a new MethodBeforeAdviceInterceptor for the given advice.\n   * @param advice the MethodBeforeAdvice to wrap\n   */\n    //advice\n    public MethodBeforeAdviceInterceptor(MethodBeforeAdvice advice) {\n        Assert.notNull(advice, \"Advice must not be null\");\n        this.advice = advice;\n    }\n\n    @Override\n    public Object invoke(MethodInvocation mi) throws Throwable {\n        this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );\n        return mi.proceed();\n    }\n}\n```\n2)<code>AfterReturningAdviceInterceptor</code>\n```bash\npublic class AfterReturningAdviceInterceptor implements MethodInterceptor, AfterAdvice, Serializable {\n\n    private final AfterReturningAdvice advice;\n\n\n    /**\n   * Create a new AfterReturningAdviceInterceptor for the given advice.\n   * @param advice the AfterReturningAdvice to wrap\n   */\n    public AfterReturningAdviceInterceptor(AfterReturningAdvice advice) {\n        Assert.notNull(advice, \"Advice must not be null\");\n        this.advice = advice;\n    }\n\n    @Override\n    public Object invoke(MethodInvocation mi) throws Throwable {\n        Object retVal = mi.proceed();\n        this.advice.afterReturning(retVal, mi.getMethod(), mi.getArguments(), mi.getThis());\n        return retVal;\n    }\n\n}\n```\n<code>Advice</code>**invoke******invoke******proceed****@After**proceedAdviceinvoke**proceed********proceed**Adviceinvoke**advice.afterReturning******\n\n---\n\n### \nAOP****<code>Creator</code><code>Creator</code><code>BeanPostProcessor</code>BeanCreator\n\n**AOP**BeanBeanAdvisorAdvisorAdvisorBean\n\n**** JDKCGLIB\n\n**AOP**<code>ReflectiveMethodInvocation</code>**proceed**AdviceAOP\n","source":"_posts/Spring-3.md","raw":"---\ntitle: SpringAOP\ncategories:\n    - Java\n    \ndate: 2018-11-07\ntags:\n\t- \n    - Spring\n---\n> SpringBeanPostProcessorSpringAOPAOP\n\n![Spring](/images/spring_logo.jpg)\n\n### 1.AOP\nAOP**** OOP**** ****************AOP****\n\nSpring**AOP**SpringAOPSpring\n\n---\n\n### 2.AOP\n\nAOPAOP\n```bash\n<aop:aspectj-autoproxy />\n```\nAOPaop\n```bash\nxmlns:aop=\"http://www.springframework.org/schema/aop\"\n```\n<code>&lt;http\\://www.springframework.org/schema/aop&gt;</code>http \"\\\" **spring.handlers**handler\n```bash\nhttp\\://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler\n```\nhandler\n```bash\npublic class AopNamespaceHandler extends NamespaceHandlerSupport {\n\n  /**\n   * Register the {@link BeanDefinitionParser BeanDefinitionParsers} for the\n   * '{@code config}', '{@code spring-configured}', '{@code aspectj-autoproxy}'\n   * and '{@code scoped-proxy}' tags.\n   */\n  @Override\n  public void init() {\n    // In 2.0 XSD as well as in 2.1 XSD.\n    registerBeanDefinitionParser(\"config\", new ConfigBeanDefinitionParser());\n    registerBeanDefinitionParser(\"aspectj-autoproxy\", new AspectJAutoProxyBeanDefinitionParser());\n    registerBeanDefinitionDecorator(\"scoped-proxy\", new ScopedProxyBeanDefinitionDecorator());\n\n    // Only in 2.0 XSD: moved to context namespace as of 2.1\n    registerBeanDefinitionParser(\"spring-configured\", new SpringConfiguredBeanDefinitionParser());\n  }\n}\n```\n<code>aspectj-autoproxy</code>Parserinit<code>aspectj-autoproxy</code>Parser<code>AspectJAutoProxyBeanDefinitionParser</code>\n```bash\n@Override\n@Nullable\n//parse\npublic BeanDefinition parse(Element element, ParserContext parserContext) {\n    //IOC\n    AopNamespaceUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(parserContext, element);\n    extendBeanDefinition(element, parserContext);\n    return null;\n}\n```\n\n---\n\n### 3.AnnotationAwareAspectJAutoProxyCreator\n<code>AnnotationAwareAspectJAutoProxyCreator</code>AOP\n![spring](images/spring-aop1.png)\n<code>BeanPostProcessor</code>Bean**postProcessAfterInitialization**<code>BeanFactorAware</code><code>BeanFactory</code>\n\n```bash\npublic static void registerAspectJAnnotationAutoProxyCreatorIfNecessary(\n    ParserContext parserContext, Element sourceElement) {\n//BeanIOC\n    BeanDefinition beanDefinition = AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(\n        parserContext.getRegistry(), parserContext.extractSource(sourceElement));\n    //proxy-target-classexpose-proxy\n    useClassProxyingIfNecessary(parserContext.getRegistry(), sourceElement);\n    //\n    registerComponentIfNecessary(beanDefinition, parserContext);\n}\n```\n3\n1. <code>AnnotationAwareAspectJAutoProxyCreator</code>\n```bash\n@Nullable\npublic static BeanDefinition registerAspectJAnnotationAutoProxyCreatorIfNecessary(BeanDefinitionRegistry registry,\n                                                                                  @Nullable Object source) {\n//AnnotationAwareAspectJAutoProxyCreatorIOC\n    return registerOrEscalateApcAsRequired(AnnotationAwareAspectJAutoProxyCreator.class, registry, source);\n}\n```\n```bash\n@Nullable\nprivate static BeanDefinition registerOrEscalateApcAsRequired(Class<?> cls, BeanDefinitionRegistry registry,\n                                                              @Nullable Object source) {\n\n    Assert.notNull(registry, \"BeanDefinitionRegistry must not be null\");\n\n    //IOCBean\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanDefinition\n        BeanDefinition apcDefinition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //BeanClassNameAnnotationAwareAspectJAutoProxyCreator\n        //ClassName\n        if (!cls.getName().equals(apcDefinition.getBeanClassName())) {\n            int currentPriority = findPriorityForClass(apcDefinition.getBeanClassName());\n            int requiredPriority = findPriorityForClass(cls);\n            //BeanCreator\n            if (currentPriority < requiredPriority) {\n                //ClassNameCreator\n                apcDefinition.setBeanClassName(cls.getName());\n            }\n        }\n        //\n        return null;\n    }\n\n    //IOCCreator\n    //CrearirClassBeanDefinition\n    RootBeanDefinition beanDefinition = new RootBeanDefinition(cls);\n    beanDefinition.setSource(source);\n    //order\n    beanDefinition.getPropertyValues().add(\"order\", Ordered.HIGHEST_PRECEDENCE);\n    beanDefinition.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);\n    //BeanDefinitionIOC\n    registry.registerBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME, beanDefinition);\n    return beanDefinition;\n}\n```\n2. **proxy-target-class****expose-proxy**\n```bash\nprivate static void useClassProxyingIfNecessary(BeanDefinitionRegistry registry, @Nullable Element sourceElement) {\n    if (sourceElement != null) {\n        boolean proxyTargetClass = Boolean.valueOf(sourceElement.getAttribute(PROXY_TARGET_CLASS_ATTRIBUTE));\n        //proxy-target-class\n        if (proxyTargetClass) {\n            AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry);\n        }\n        boolean exposeProxy = Boolean.valueOf(sourceElement.getAttribute(EXPOSE_PROXY_ATTRIBUTE));\n        //expose-proxy\n        if (exposeProxy) {\n            AopConfigUtils.forceAutoProxyCreatorToExposeProxy(registry);\n        }\n    }\n}\n```\n\n```bash\npublic static void forceAutoProxyCreatorToUseClassProxying(BeanDefinitionRegistry registry) {\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanNameCreator\n        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //CreatorBeanDefinitionproxyTargetClasstrue\n        definition.getPropertyValues().add(\"proxyTargetClass\", Boolean.TRUE);\n    }\n}\n\npublic static void forceAutoProxyCreatorToExposeProxy(BeanDefinitionRegistry registry) {\n    if (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) {\n        //BeanNameCreator\n        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);\n        //CreatorBeanDefinitionexposeProxytrue\n        definition.getPropertyValues().add(\"exposeProxy\", Boolean.TRUE);\n    }\n}\n```\n\n- **proxy-target-class**SpringAOP**JDK**AOP**CGLib**AOPAOPCGLibproxy-target-class**true**\n\n1)**final**CGLibfinalfinalAOP\n2)CGLibJAR\n- **expose-proxy**AB**B**AOPAOP**expose-proxytrue**AB\n```bash\npublic class Service{\n    public void A(){\n        ((Service)AopContext.currentProxy()).B();\n    }\n\n    public void B(){\n    //do something...\n    }\n}\n```\nBAAOP<code>AopContext</code>**AOP**\n\n---\n\n### 4.AOP\n#### AOP\n**Creator**<code>BeanPostProcessor</code>IOCBean**postProcessAfterInitialization**AOP<code>AbstractAutoProxyCreator</code>\n```bash\n@Override\npublic Object postProcessAfterInitialization(@Nullable Object bean, String beanName) throws BeansException {\n    if (bean != null) {\n        //KeyBeanClassbenaName\n        Object cacheKey = getCacheKey(bean.getClass(), beanName);\n        //BeanIOC\n        //Bean\n        //\n        if (!this.earlyProxyReferences.contains(cacheKey)) {\n            //AOP\n            return wrapIfNecessary(bean, beanName, cacheKey);\n        }\n    }\n    return bean;\n}\n```\n```bash\nprotected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) {\n    //\n    if (StringUtils.hasLength(beanName) && this.targetSourcedBeans.contains(beanName)) {\n        return bean;\n    }\n    //Bean\n    if (Boolean.FALSE.equals(this.advisedBeans.get(cacheKey))) {\n        return bean;\n    }\n    //BeanAOP\n    if (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) {\n        //\n        this.advisedBeans.put(cacheKey, Boolean.FALSE);\n        return bean;\n    }\n\n    // Create proxy if we have advice.\n    //Bean\n    Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);\n    //DO_NOT_PROXY\n    if (specificInterceptors != DO_NOT_PROXY) {\n        //\n        this.advisedBeans.put(cacheKey, Boolean.TRUE);\n        //Bean\n        Object proxy = createProxy(\n            bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));\n        this.proxyTypes.put(cacheKey, proxy.getClass());\n        //BeanIOC\n        return proxy;\n    }\n  //\n    this.advisedBeans.put(cacheKey, Boolean.FALSE);\n    return bean;\n}\n```\nAOP\n- Bean\n- Bean\n\n#### \n\n```bash\n@Override\n@Nullable\nprotected Object[] getAdvicesAndAdvisorsForBean(Class<?> beanClass, String beanName, @Nullable TargetSource targetSource) {\n    //Advisor\n    List<Advisor> advisors = findEligibleAdvisors(beanClass, beanName);\n    if (advisors.isEmpty()) {\n        return DO_NOT_PROXY;\n    }\n    return advisors.toArray();\n}\n```\n<code>Advisor</code>Advisor**advise**\n```bash\nprotected List<Advisor> findEligibleAdvisors(Class<?> beanClass, String beanName) {\n    //Advisor\n    List<Advisor> candidateAdvisors = findCandidateAdvisors();\n    //AdvisorBeanAdvisor\n    List<Advisor> eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);\n    extendAdvisors(eligibleAdvisors);\n    if (!eligibleAdvisors.isEmpty()) {\n        eligibleAdvisors = sortAdvisors(eligibleAdvisors);\n    }\n    return eligibleAdvisors;\n}\n```\n\n##### Advisor\n<code>Advisor</code><code>Creator</code>\n```bash\n@Override\nprotected List<Advisor> findCandidateAdvisors() {\n    // Add all the Spring advisors found according to superclass rules.\n    //findCandidateAdvisorsIOCAdvisorBean\n    List<Advisor> advisors = super.findCandidateAdvisors();\n    // Build Advisors for all AspectJ aspects in the bean factory.\n    if (this.aspectJAdvisorsBuilder != null) {\n        //Advisor\n        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());\n    }\n    return advisors;\n}\n```\n**findCandidateAdvisors**<code>Advisor</code>\n```bash\nprotected List<Advisor> findCandidateAdvisors() {\n    Assert.state(this.advisorRetrievalHelper != null, \"No BeanFactoryAdvisorRetrievalHelper available\");\n    //Helper\n    return this.advisorRetrievalHelper.findAdvisorBeans();\n}\n```\n```bash\npublic List<Advisor> findAdvisorBeans() {\n    // Determine list of advisor bean names, if not cached already.\n    String[] advisorNames = null;\n    synchronized (this) {\n        //\n        advisorNames = this.cachedAdvisorBeanNames;\n        //IOC\n        if (advisorNames == null) {\n            // Do not initialize FactoryBeans here: We need to leave all regular beans\n            // uninitialized to let the auto-proxy creator apply to them!\n            //IOCAdvisorBeanName\n            advisorNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(\n                this.beanFactory, Advisor.class, true, false);\n            //\n            this.cachedAdvisorBeanNames = advisorNames;\n        }\n    }\n    //\n    if (advisorNames.length == 0) {\n        return new LinkedList<>();\n    }\n\n    List<Advisor> advisors = new LinkedList<>();\n    //BeanName\n    for (String name : advisorNames) {\n        if (isEligibleBean(name)) {\n            if (this.beanFactory.isCurrentlyInCreation(name)) {\n                if (logger.isDebugEnabled()) {\n                    logger.debug(\"Skipping currently created advisor '\" + name + \"'\");\n                }\n            }\n            else {\n                try {\n                    //BeanNameIOCBeanList\n                    advisors.add(this.beanFactory.getBean(name, Advisor.class));\n                }\n                //catch ...\n            }\n        }\n    }\n    return advisors;\n}\n```\n**IOCAdvisorBeanAdvisor**AOPAdvisorIOC\n\n##### Advisor\nAdvisor<code>AnnotationAwareAspectJAutoProxyCreatorS</code>**findCandidateAdvisors** <code>BeanFactoryAspectJAdvisorsBuilder</code>**buildAspectJAdvisors**Advisor\n```bash\n@Override\nprotected List<Advisor> findCandidateAdvisors() {\n    // Add all the Spring advisors found according to superclass rules.\n    List<Advisor> advisors = super.findCandidateAdvisors();\n    // Build Advisors for all AspectJ aspects in the bean factory.\n    if (this.aspectJAdvisorsBuilder != null) {\n        //BeanFactoryAspectJAdvisorsBuilderAdvisor\n        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());\n    }\n    return advisors;\n}\n```\n```bash\npublic List<Advisor> buildAspectJAdvisors() {\n    List<String> aspectNames = this.aspectBeanNames;\n\n    if (aspectNames == null) {\n        synchronized (this) {\n            aspectNames = this.aspectBeanNames;\n            //\n            if (aspectNames == null) {\n                List<Advisor> advisors = new LinkedList<>();\n                aspectNames = new LinkedList<>();\n                //IOCBeanName\n                String[] beanNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(\n                    this.beanFactory, Object.class, true, false);\n                //BeanName\n                for (String beanName : beanNames) {\n                    if (!isEligibleBean(beanName)) {\n                        continue;\n                    }\n                    // We must be careful not to instantiate beans eagerly as in this case they\n                    // would be cached by the Spring container but would not have been weaved.\n                    Class<?> beanType = this.beanFactory.getType(beanName);\n                    if (beanType == null) {\n                        continue;\n                    }\n                    //Bean@Aspect\n                    if (this.advisorFactory.isAspect(beanType)) {\n                        //Advisor\n                        aspectNames.add(beanName);\n                        AspectMetadata amd = new AspectMetadata(beanType, beanName);\n                        //\n                        if (amd.getAjType().getPerClause().getKind() == PerClauseKind.SINGLETON) {\n                            //\n                            MetadataAwareAspectInstanceFactory factory =\n                                new BeanFactoryAspectInstanceFactory(this.beanFactory, beanName);\n                            //advisorFactoryAdvisor\n                            List<Advisor> classAdvisors = this.advisorFactory.getAdvisors(factory);\n                            //\n                            if (this.beanFactory.isSingleton(beanName)) {\n                                this.advisorsCache.put(beanName, classAdvisors);\n                            }\n                            //factoryfactory\n                            //advisorFactoryAdvisorBeanfactory\n                            else {\n                                this.aspectFactoryCache.put(beanName, factory);\n                            }\n                            advisors.addAll(classAdvisors);\n                        }\n                        else {\n                            // Per target or per this.\n                            if (this.beanFactory.isSingleton(beanName)) {\n                                throw new IllegalArgumentException(\"Bean with name '\" + beanName +\n                                                                   \"' is a singleton, but aspect instantiation model is not singleton\");\n                            }\n                            MetadataAwareAspectInstanceFactory factory =\n                                new PrototypeAspectInstanceFactory(this.beanFactory, beanName);\n                            this.aspectFactoryCache.put(beanName, factory);\n                            advisors.addAll(this.advisorFactory.getAdvisors(factory));\n                        }\n                    }\n                }\n                this.aspectBeanNames = aspectNames;\n                return advisors;\n            }\n        }\n    }\n\n    //\n    if (aspectNames.isEmpty()) {\n        return Collections.emptyList();\n    }\n    List<Advisor> advisors = new LinkedList<>();\n    //\n    for (String aspectName : aspectNames) {\n        //Advisor\n        List<Advisor> cachedAdvisors = this.advisorsCache.get(aspectName);\n        //\n        if (cachedAdvisors != null) {\n            advisors.addAll(cachedAdvisors);\n        }\n        //factory\n        //factoryadvisorFactoryAdvisor\n        else {\n            MetadataAwareAspectInstanceFactory factory = this.aspectFactoryCache.get(aspectName);\n            advisors.addAll(this.advisorFactory.getAdvisors(factory));\n        }\n    }\n    return advisors;\n}\n```\n**Advisor****advisorFactory****Advisor**<code>ReflectiveAspectJAdvisorFactory</code>**getAdvisors**\n```bash\n@Override\npublic List<Advisor> getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) {\n    //\n    Class<?> aspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();\n    //Name\n    String aspectName = aspectInstanceFactory.getAspectMetadata().getAspectName();\n    //\n    validate(aspectClass);\n\n    // We need to wrap the MetadataAwareAspectInstanceFactory with a decorator\n    // so that it will only instantiate once.\n    MetadataAwareAspectInstanceFactory lazySingletonAspectInstanceFactory =\n        new LazySingletonAspectInstanceFactoryDecorator(aspectInstanceFactory);\n\n    List<Advisor> advisors = new LinkedList<>();\n    //@Pointcut\n    for (Method method : getAdvisorMethods(aspectClass)) {\n        //Advisor\n        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, advisors.size(), aspectName);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    // If it's a per target aspect, emit the dummy instantiating aspect.\n    if (!advisors.isEmpty() && lazySingletonAspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) {\n        Advisor instantiationAdvisor = new SyntheticInstantiationAdvisor(lazySingletonAspectInstanceFactory);\n        advisors.add(0, instantiationAdvisor);\n    }\n\n    // Find introduction fields.\n    //DeclareParentsfiled\n    for (Field field : aspectClass.getDeclaredFields()) {\n        Advisor advisor = getDeclareParentsAdvisor(field);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    return advisors;\n}\n```\n\n1. **getAdvisorMethods**<code>AdvisorMethods</code>\n```bash\nprivate List<Method> getAdvisorMethods(Class<?> aspectClass) {\n    final List<Method> methods = new LinkedList<>();\n    ReflectionUtils.doWithMethods(aspectClass, method -> {\n        // Exclude pointcuts\n        //Pointcut\n        if (AnnotationUtils.getAnnotation(method, Pointcut.class) == null) {\n            methods.add(method);\n        }\n    });\n    Collections.sort(methods, METHOD_COMPARATOR);\n    return methods;\n}\n```\n**PointcutAdvisorMethod**\n2. **getAdvisor**<code>Advisor</code>\n```bash\n@Override\n@Nullable\npublic Advisor getAdvisor(Method candidateAdviceMethod, MetadataAwareAspectInstanceFactory aspectInstanceFactory,\n                          int declarationOrderInAspect, String aspectName) {\n\n    validate(aspectInstanceFactory.getAspectMetadata().getAspectClass());\n\n    //\n    AspectJExpressionPointcut expressionPointcut = getPointcut(\n        candidateAdviceMethod, aspectInstanceFactory.getAspectMetadata().getAspectClass());\n    if (expressionPointcut == null) {\n        return null;\n    }\n\n    //\n    return new InstantiationModelAwarePointcutAdvisorImpl(expressionPointcut, candidateAdviceMethod,\n                                                          this, aspectInstanceFactory, declarationOrderInAspect, aspectName);\n}\n```\n\n\n- getPointcut****\n- InstantiationModelAwarePointcutAdvisorImpl****\n\n##### \n\nAdvisor**getPointcut**\n```bash\n@Nullable\nprivate AspectJExpressionPointcut getPointcut(Method candidateAdviceMethod, Class<?> candidateAspectClass) {\n    //\n    AspectJAnnotation<?> aspectJAnnotation =\n        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);\n    if (aspectJAnnotation == null) {\n        return null;\n    }\n\n    //\n    AspectJExpressionPointcut ajexp =\n        new AspectJExpressionPointcut(candidateAspectClass, new String[0], new Class<?>[0]);\n    //\n    //@Before\"test()\"test()\n    ajexp.setExpression(aspectJAnnotation.getPointcutExpression());\n    if (this.beanFactory != null) {\n        ajexp.setBeanFactory(this.beanFactory);\n    }\n    return ajexp;\n}\n```\n**findAspectJAnnotationOnMethod**\n```bash\n@SuppressWarnings(\"unchecked\")\n@Nullable\nprotected static AspectJAnnotation<?> findAspectJAnnotationOnMethod(Method method) {\n    //\n    Class<?>[] classesToLookFor = new Class<?>[] {\n        Before.class, Around.class, After.class, AfterReturning.class, AfterThrowing.class, Pointcut.class};\n    for (Class<?> c : classesToLookFor) {\n        //\n        AspectJAnnotation<?> foundAnnotation = findAnnotation(method, (Class<Annotation>) c);\n        //\n        if (foundAnnotation != null) {\n            return foundAnnotation;\n        }\n    }\n    return null;\n}\n```\n**findAnnotation **\n```bash\n@Nullable\nprivate static <A extends Annotation> AspectJAnnotation<A> findAnnotation(Method method, Class<A> toLookFor) {\n    //\n    A result = AnnotationUtils.findAnnotation(method, toLookFor);\n    if (result != null) {\n        //AspectJAnnotation\n        return new AspectJAnnotation<>(result);\n    }\n    else {\n        return null;\n    }\n}\n```\n****@Before(\"test()\")**test()**AspectJAnnotation****\n```bash\npublic AspectJAnnotation(A annotation) {\n    this.annotation = annotation;\n    this.annotationType = determineAnnotationType(annotation);\n    // We know these methods exist with the same name on each object,\n    // but need to invoke them reflectively as there isn't a common interface.\n    try {\n        //pointcut\n        this.pointcutExpression = resolveExpression(annotation);\n        this.argumentNames = (String) annotation.getClass().getMethod(\"argNames\").invoke(annotation);\n    }\n    catch (Exception ex) {\n        throw new IllegalArgumentException(annotation + \" cannot be an AspectJ annotation\", ex);\n    }\n}\n```\n```bash\nprivate String resolveExpression(A annotation) throws Exception {\n    //valuepointcut\n    for (String methodName : EXPRESSION_PROPERTIES) {\n        Method method;\n        try {\n            //method\n            method = annotation.getClass().getDeclaredMethod(methodName);\n        }\n        catch (NoSuchMethodException ex) {\n            method = null;\n        }\n        if (method != null) {\n            //@Before(\"test()\")\n            //\"test()\"\n            String candidate = (String) method.invoke(annotation);\n            if (StringUtils.hasText(candidate)) {\n                return candidate;\n            }\n        }\n    }\n    throw new IllegalStateException(\"Failed to resolve expression: \" + annotation);\n}\n```\n\n##### Advisor\n<code>InstantiationModelAwarePointcutAdvisorImpl</code><code>Advisor</code>\n```bash\npublic InstantiationModelAwarePointcutAdvisorImpl(AspectJExpressionPointcut declaredPointcut,\n                                                  Method aspectJAdviceMethod, AspectJAdvisorFactory aspectJAdvisorFactory,\n                                                  MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) {\n\n    //\n    this.declaredPointcut = declaredPointcut;\n    this.declaringClass = aspectJAdviceMethod.getDeclaringClass();\n    this.methodName = aspectJAdviceMethod.getName();\n    this.parameterTypes = aspectJAdviceMethod.getParameterTypes();\n    this.aspectJAdviceMethod = aspectJAdviceMethod;\n    this.aspectJAdvisorFactory = aspectJAdvisorFactory;\n    this.aspectInstanceFactory = aspectInstanceFactory;\n    this.declarationOrder = declarationOrder;\n    this.aspectName = aspectName;\n\n    if (aspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) {\n        // Static part of the pointcut is a lazy type.\n        Pointcut preInstantiationPointcut = Pointcuts.union(\n            aspectInstanceFactory.getAspectMetadata().getPerClausePointcut(), this.declaredPointcut);\n\n        // Make it dynamic: must mutate from pre-instantiation to post-instantiation state.\n        // If it's not a dynamic pointcut, it may be optimized out\n        // by the Spring AOP infrastructure after the first evaluation.\n        this.pointcut = new PerTargetInstantiationModelPointcut(\n            this.declaredPointcut, preInstantiationPointcut, aspectInstanceFactory);\n        this.lazy = true;\n    }\n    else {\n        // A singleton aspect.\n        this.pointcut = this.declaredPointcut;\n        this.lazy = false;\n        //AdviceinstantiatedAdvice\n        this.instantiatedAdvice = instantiateAdvice(this.declaredPointcut);\n    }\n}\n```\n\n******instantiateAdvice****Advise**@Before@AfterAdvice****Advice\n```bash\nprivate Advice instantiateAdvice(AspectJExpressionPointcut pointcut) {\n    //Advice\n    Advice advice = this.aspectJAdvisorFactory.getAdvice(this.aspectJAdviceMethod, pointcut,\n                                                         this.aspectInstanceFactory, this.declarationOrder, this.aspectName);\n    return (advice != null ? advice : EMPTY_ADVICE);\n}\n```\n<code>aspectJAdvisorFactory</code>Advice\n```bash\n@Override\n@Nullable\npublic Advice getAdvice(Method candidateAdviceMethod, AspectJExpressionPointcut expressionPointcut,\n                        MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) {\n\n    //\n    Class<?> candidateAspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();\n    validate(candidateAspectClass);\n\n    //\n    AspectJAnnotation<?> aspectJAnnotation =\n        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);\n    if (aspectJAnnotation == null) {\n        return null;\n    }\n\n    // If we get here, we know we have an AspectJ method.\n    // Check that its an AspectJ-annotated class\n    if (!isAspect(candidateAspectClass)) {\n        throw new AopConfigException(\"Advice must be declared inside an aspect type: \" +\n                                     \"Offending method '\" + candidateAdviceMethod + \"' in class [\" +\n                                     candidateAspectClass.getName() + \"]\");\n    }\n\n    if (logger.isDebugEnabled()) {\n        logger.debug(\"Found AspectJ method: \" + candidateAdviceMethod);\n    }\n\n    AbstractAspectJAdvice springAdvice;\n\n    //swich\n    switch (aspectJAnnotation.getAnnotationType()) {\n            //@Before\n        case AtBefore:\n            springAdvice = new AspectJMethodBeforeAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@After\n        case AtAfter:\n            springAdvice = new AspectJAfterAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@AfterReturning\n        case AtAfterReturning:\n            springAdvice = new AspectJAfterReturningAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            AfterReturning afterReturningAnnotation = (AfterReturning) aspectJAnnotation.getAnnotation();\n            if (StringUtils.hasText(afterReturningAnnotation.returning())) {\n                springAdvice.setReturningName(afterReturningAnnotation.returning());\n            }\n            break;\n            //@AfterThrowing\n        case AtAfterThrowing:\n            springAdvice = new AspectJAfterThrowingAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            AfterThrowing afterThrowingAnnotation = (AfterThrowing) aspectJAnnotation.getAnnotation();\n            if (StringUtils.hasText(afterThrowingAnnotation.throwing())) {\n                springAdvice.setThrowingName(afterThrowingAnnotation.throwing());\n            }\n            break;\n            //@Around\n        case AtAround:\n            springAdvice = new AspectJAroundAdvice(\n                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);\n            break;\n            //@Pointcut\n        case AtPointcut:\n            if (logger.isDebugEnabled()) {\n                logger.debug(\"Processing pointcut '\" + candidateAdviceMethod.getName() + \"'\");\n            }\n            return null;\n        default:\n            throw new UnsupportedOperationException(\n                \"Unsupported advice type on method: \" + candidateAdviceMethod);\n    }\n\n    // Now to configure the advice...\n    //Advice\n    springAdvice.setAspectName(aspectName);\n    springAdvice.setDeclarationOrder(declarationOrder);\n    String[] argNames = this.parameterNameDiscoverer.getParameterNames(candidateAdviceMethod);\n    if (argNames != null) {\n        springAdvice.setArgumentNamesFromStringArray(argNames);\n    }\n    springAdvice.calculateArgumentBindings();\n    return springAdvice;\n}\n```\nAdviceadvice**Advisoradvice**\n\n#### \n********\n```bash\nprotected List<Advisor> findEligibleAdvisors(Class<?> beanClass, String beanName) {\n    //Advisor\n    //4.2\n    List<Advisor> candidateAdvisors = findCandidateAdvisors();\n    //AdvisorBeanAdvisor\n    List<Advisor> eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);\n    extendAdvisors(eligibleAdvisors);\n    if (!eligibleAdvisors.isEmpty()) {\n        eligibleAdvisors = sortAdvisors(eligibleAdvisors);\n    }\n    return eligibleAdvisors;\n}\n```\n**findAdvisorsThatCanApply**\n```bash\nprotected List<Advisor> findAdvisorsThatCanApply(\n    List<Advisor> candidateAdvisors, Class<?> beanClass, String beanName) {\n\n    ProxyCreationContext.setCurrentProxiedBeanName(beanName);\n    try {\n        //AopUtils\n        return AopUtils.findAdvisorsThatCanApply(candidateAdvisors, beanClass);\n    }\n    finally {\n        ProxyCreationContext.setCurrentProxiedBeanName(null);\n    }\n}\n```\n<code>AopUtils</code>\n```bash\npublic static List<Advisor> findAdvisorsThatCanApply(List<Advisor> candidateAdvisors, Class<?> clazz) {\n    if (candidateAdvisors.isEmpty()) {\n        return candidateAdvisors;\n    }\n    List<Advisor> eligibleAdvisors = new LinkedList<>();\n    //Advisor\n    for (Advisor candidate : candidateAdvisors) {\n        //AdvisorBean\n        if (candidate instanceof IntroductionAdvisor && canApply(candidate, clazz)) {\n            //List\n            eligibleAdvisors.add(candidate);\n        }\n    }\n    boolean hasIntroductions = !eligibleAdvisors.isEmpty();\n    for (Advisor candidate : candidateAdvisors) {\n        if (candidate instanceof IntroductionAdvisor) {\n            // already processed\n            //\n            continue;\n        }\n        //Advisor\n        if (canApply(candidate, clazz, hasIntroductions)) {\n            //List\n            eligibleAdvisors.add(candidate);\n        }\n    }\n    //Advisor List\n    return eligibleAdvisors;\n}\n```\n**canApply**\n```bash\npublic static boolean canApply(Advisor advisor, Class<?> targetClass, boolean hasIntroductions) {\n    if (advisor instanceof IntroductionAdvisor) {\n        //ClassFilterBean\n        return ((IntroductionAdvisor) advisor).getClassFilter().matches(targetClass);\n    }\n    else if (advisor instanceof PointcutAdvisor) {\n        //AdvisorPointcutAdvisor\n        //PointcutAdvisorgetPointcut\n        PointcutAdvisor pca = (PointcutAdvisor) advisor;\n        //\n        return canApply(pca.getPointcut(), targetClass, hasIntroductions);\n    }\n    else {\n        // It doesn't have a pointcut so we assume it applies.\n        //\n        return true;\n    }\n}\n```\nAdvisor**canApply**\n```bash\npublic static boolean canApply(Pointcut pc, Class<?> targetClass, boolean hasIntroductions) {\n    Assert.notNull(pc, \"Pointcut must not be null\");\n    //false\n    //\n    if (!pc.getClassFilter().matches(targetClass)) {\n        return false;\n    }\n\n    //\n    MethodMatcher methodMatcher = pc.getMethodMatcher();\n    //methodMatcherMethodMatcher.TRUEtrue\n    if (methodMatcher == MethodMatcher.TRUE) {\n        // No need to iterate the methods if were matching any method anyway...\n        return true;\n    }\n\n    IntroductionAwareMethodMatcher introductionAwareMethodMatcher = null;\n    if (methodMatcher instanceof IntroductionAwareMethodMatcher) {\n        introductionAwareMethodMatcher = (IntroductionAwareMethodMatcher) methodMatcher;\n    }\n\n    //\n    Set<Class<?>> classes = new LinkedHashSet<>(ClassUtils.getAllInterfacesForClassAsSet(targetClass));\n    //\n    classes.add(targetClass);\n    //\n    for (Class<?> clazz : classes) {\n        //class\n        Method[] methods = ReflectionUtils.getAllDeclaredMethods(clazz);\n        //\n        for (Method method : methods) {\n            //true\n            if ((introductionAwareMethodMatcher != null &&\n                 introductionAwareMethodMatcher.matches(method, targetClass, hasIntroductions)) ||\n                methodMatcher.matches(method, targetClass)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n```\n****Bean******Advisor**Advisor**Bean****AdvisorAdvisors**BeanAdvisorBeanAdvisorAdvisorAdvisoradvice@BeforeAdvisorAdvisor\n\n#### \n##### JDKCGLIB\n4.1**wrapIfNecessary**Bean**getAdvicesAndAdvisorsForBean**Advisor**createProxy**\n```bash\nprotected Object createProxy(Class<?> beanClass, @Nullable String beanName,\n                             @Nullable Object[] specificInterceptors, TargetSource targetSource) {\n\n    if (this.beanFactory instanceof ConfigurableListableBeanFactory) {\n        AutoProxyUtils.exposeTargetClass((ConfigurableListableBeanFactory) this.beanFactory, beanName, beanClass);\n    }\n\n    ProxyFactory proxyFactory = new ProxyFactory();\n    //CreatorproxyTargetClassexposeProxy\n    proxyFactory.copyFrom(this);\n\n    //proxyTargetClassfalse\n    //proxyTargetClasstrueCGLib\n    if (!proxyFactory.isProxyTargetClass()) {\n        //\n        if (shouldProxyTargetClass(beanClass, beanName)) {\n            //CGLib\n            proxyFactory.setProxyTargetClass(true);\n        }\n        //proxyFactory\n        else {\n            evaluateProxyInterfaces(beanClass, proxyFactory);\n        }\n    }\n\n    //Advisor\n    Advisor[] advisors = buildAdvisors(beanName, specificInterceptors);\n    //AdvisorsproxyFactory\n    proxyFactory.addAdvisors(advisors);\n    //BeanproxyFactory\n    proxyFactory.setTargetSource(targetSource);\n    //\n    customizeProxyFactory(proxyFactory);\n\n    proxyFactory.setFrozen(this.freezeProxy);\n    if (advisorsPreFiltered()) {\n        proxyFactory.setPreFiltered(true);\n    }\n\n    //proxyFactory\n    return proxyFactory.getProxy(getProxyClassLoader());\n}\n```\n<code>proxyFactory</code><code>proxyFactory</code>**getProxy**\n```bash\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    return createAopProxy().getProxy(classLoader);\n}\n```\n```bash\nprotected final synchronized AopProxy createAopProxy() {\n    if (!this.active) {\n        activate();\n    }\n    //aopProxyFactory\n    return getAopProxyFactory().createAopProxy(this);\n}\n```\n<code>aopProxyFactory</code>\n```bash\npublic ProxyCreatorSupport() {\n    this.aopProxyFactory = new DefaultAopProxyFactory();\n}\n```\n**createAopProxy**\n```bash\n@Override\npublic AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {\n    //ProxyTargetClass\n    if (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) {\n        Class<?> targetClass = config.getTargetClass();\n        if (targetClass == null) {\n            throw new AopConfigException(\"TargetSource cannot determine target class: \" +\n                                         \"Either an interface or a target is required for proxy creation.\");\n        }\n        if (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) {\n            return new JdkDynamicAopProxy(config);\n        }\n        return new ObjenesisCglibAopProxy(config);\n    }\n    else {\n        return new JdkDynamicAopProxy(config);\n    }\n}\n```\n> configproxyFactoryAdvisor\n\n****\n\n- optimizeCGLibJDKCGLib\n- proxyTargetClasstrueCGLib\n- hasNoUserSuppliedProxyInterfaces\n\nJDKCGLIB\n- JDK\n- proxyTargetClassCGLIB\n- CGLIB\n\n##### \n\n\n```bash\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    return createAopProxy().getProxy(classLoader);\n}\n```\n**createAopProxy**JDKJDK**getProxy**\n```bash\n@Override\npublic Object getProxy(@Nullable ClassLoader classLoader) {\n    if (logger.isDebugEnabled()) {\n        logger.debug(\"Creating JDK dynamic proxy: target source is \" + this.advised.getTargetSource());\n    }\n    //\n    Class<?>[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised, true);\n    //equalshashCode\n    findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);\n    //\n    return Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);\n}\n```\n<code>advised</code><code>config</code><code>proxyFactory</code>**Advisor**\n\n<code>InvocationHandler</code>**invoke**\n```bash\n@Override\n@Nullable\npublic Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n    MethodInvocation invocation;\n    Object oldProxy = null;\n    boolean setProxyContext = false;\n\n    //\n    TargetSource targetSource = this.advised.targetSource;\n    Object target = null;\n\n    try {\n        //eqauls()\n        if (!this.equalsDefined && AopUtils.isEqualsMethod(method)) {\n            // The target does not implement the equals(Object) method itself.\n            return equals(args[0]);\n        }\n        //hashCode()\n        else if (!this.hashCodeDefined && AopUtils.isHashCodeMethod(method)) {\n            // The target does not implement the hashCode() method itself.\n            return hashCode();\n        }\n        else if (method.getDeclaringClass() == DecoratingProxy.class) {\n            // There is only getDecoratedClass() declared -> dispatch to proxy config.\n            return AopProxyUtils.ultimateTargetClass(this.advised);\n        }\n        //Advised,,\n        else if (!this.advised.opaque && method.getDeclaringClass().isInterface() &&\n                 method.getDeclaringClass().isAssignableFrom(Advised.class)) {\n            // Service invocations on ProxyConfig with the proxy config...\n            return AopUtils.invokeJoinpointUsingReflection(this.advised, method, args);\n        }\n\n        Object retVal;\n\n        //exposeProxytrueproxy\n        //AOP\n        if (this.advised.exposeProxy) {\n            // Make invocation available if necessary.\n            oldProxy = AopContext.setCurrentProxy(proxy);\n            setProxyContext = true;\n        }\n\n        // Get as late as possible to minimize the time we \"own\" the target,\n        // in case it comes from a pool.\n        //\n        target = targetSource.getTarget();\n        Class<?> targetClass = (target != null ? target.getClass() : null);\n\n        // Get the interception chain for this method.\n        //Interceptor\n        List<Object> chain = this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);\n\n        // Check whether we have any advice. If we don't, we can fallback on direct\n        // reflective invocation of the target, and avoid creating a MethodInvocation.\n        //(Interceptor) method.invoke(target, args)\n        if (chain.isEmpty()) {\n            // We can skip creating a MethodInvocation: just invoke the target directly\n            // Note that the final invoker must be an InvokerInterceptor so we know it does\n            // nothing but a reflective operation on the target, and no hot swapping or fancy proxying.\n            Object[] argsToUse = AopProxyUtils.adaptArgumentsIfNecessary(method, args);\n            retVal = AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse);\n        }\n        else {\n            // We need to create a method invocation...\n            //MethodInvocation\n            //proceed\n            invocation = new ReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);\n            // Proceed to the joinpoint through the interceptor chain.\n            retVal = invocation.proceed();\n        }\n\n        // Massage return value if necessary.\n        Class<?> returnType = method.getReturnType();\n        if (retVal != null && retVal == target &&\n            returnType != Object.class && returnType.isInstance(proxy) &&\n            !RawTargetAccess.class.isAssignableFrom(method.getDeclaringClass())) {\n            // Special case: it returned \"this\" and the return type of the method\n            // is type-compatible. Note that we can't help if the target sets\n            // a reference to itself in another returned object.\n            retVal = proxy;\n        }\n        else if (retVal == null && returnType != Void.TYPE && returnType.isPrimitive()) {\n            throw new AopInvocationException(\n                \"Null return value from advice does not match primitive return type for: \" + method);\n        }\n        return retVal;\n    }\n    finally {\n        if (target != null && !targetSource.isStatic()) {\n            // Must have come from TargetSource.\n            targetSource.releaseTarget(target);\n        }\n        if (setProxyContext) {\n            // Restore old proxy.\n            AopContext.setCurrentProxy(oldProxy);\n        }\n    }\n}\n```\n\n1. **equalshashCodeAdvised**\n2. ****AopContextABBBBAOPBBBAOPAopContextBBAOPAopContext\n3. ****<code>advised</code>**********AOP******<code>ReflectiveMethodInvocation</code>**proceed**AOP\n\n#### AOP\n**BeanIOC**BeanAOP****<code>ReflectiveMethodInvocation</code>**proceed**AOP\n```bash\n//-1\nprivate int currentInterceptorIndex = -1;\n\n//interceptors\nprotected final List<?> interceptorsAndDynamicMethodMatchers;\n\n@Override\n@Nullable\npublic Object proceed() throws Throwable {\n    //  We start with an index of -1 and increment early.\n    //InterceptorjoinPoint\n    if (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) {\n        return invokeJoinpoint();\n    }\n\n    //Advice\n    Object interceptorOrInterceptionAdvice =\n        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);\n    //joinPoint\n    if (interceptorOrInterceptionAdvice instanceof InterceptorAndDynamicMethodMatcher) {\n        // Evaluate dynamic method matcher here: static part will already have\n        // been evaluated and found to match.\n        InterceptorAndDynamicMethodMatcher dm =\n            (InterceptorAndDynamicMethodMatcher) interceptorOrInterceptionAdvice;\n        //\n        if (dm.methodMatcher.matches(this.method, this.targetClass, this.arguments)) {\n            return dm.interceptor.invoke(this);\n        }\n        else {\n            // Dynamic matching failed.\n            // Skip this interceptor and invoke the next in the chain.\n            //,Intercetpor,Interceptor\n            return proceed();\n        }\n    }\n    else {\n        // Its an interceptor, so we just invoke it: The pointcut will have\n        // been evaluated statically before this object was constructed.\n        //IntercetporAdvice\n        //this\n        return ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(this);\n    }\n}\n```\n\n\n1. **currentInterceptorIndex**-1**interceptorsAndDynamicMethodMatchers**size11-1**invokeJoinpoint**\n```bash\nObject interceptorOrInterceptionAdvice =\n        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);\n```\n**currentInterceptorIndex**00Advice**invoke**BeforeAdvice**invoke**\n```bash\n@Override\npublic Object invoke(MethodInvocation mi) throws Throwable {\n    this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );\n    return mi.proceed();\n}\n```\n<code>mi</code><code>this</code><code>ReflectiveMethodInvocation</code><code>ReflectiveMethodInvocation</code>**proceed****proceed**0**currentInterceptorIndex=0,interceptorsAndDynamicMethodMatchers.size() - 1 = 0**\n```bash\nif (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) {\n    return invokeJoinpoint();\n}\n```\n**invokeJoinpoint**\n```bash\n@Nullable\nprotected Object invokeJoinpoint() throws Throwable {\n    return AopUtils.invokeJoinpointUsingReflection(this.target, this.method, this.arguments);\n}\n```\n******proceed**\n\n2. **@BeforeAdviceinvoke@AfterAdvice **\n1) <code>MethodBeforeAdviceInterceptor</code>\n```bash\npublic class MethodBeforeAdviceInterceptor implements MethodInterceptor, Serializable {\n\n    private MethodBeforeAdvice advice;\n\n    /**\n   * Create a new MethodBeforeAdviceInterceptor for the given advice.\n   * @param advice the MethodBeforeAdvice to wrap\n   */\n    //advice\n    public MethodBeforeAdviceInterceptor(MethodBeforeAdvice advice) {\n        Assert.notNull(advice, \"Advice must not be null\");\n        this.advice = advice;\n    }\n\n    @Override\n    public Object invoke(MethodInvocation mi) throws Throwable {\n        this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );\n        return mi.proceed();\n    }\n}\n```\n2)<code>AfterReturningAdviceInterceptor</code>\n```bash\npublic class AfterReturningAdviceInterceptor implements MethodInterceptor, AfterAdvice, Serializable {\n\n    private final AfterReturningAdvice advice;\n\n\n    /**\n   * Create a new AfterReturningAdviceInterceptor for the given advice.\n   * @param advice the AfterReturningAdvice to wrap\n   */\n    public AfterReturningAdviceInterceptor(AfterReturningAdvice advice) {\n        Assert.notNull(advice, \"Advice must not be null\");\n        this.advice = advice;\n    }\n\n    @Override\n    public Object invoke(MethodInvocation mi) throws Throwable {\n        Object retVal = mi.proceed();\n        this.advice.afterReturning(retVal, mi.getMethod(), mi.getArguments(), mi.getThis());\n        return retVal;\n    }\n\n}\n```\n<code>Advice</code>**invoke******invoke******proceed****@After**proceedAdviceinvoke**proceed********proceed**Adviceinvoke**advice.afterReturning******\n\n---\n\n### \nAOP****<code>Creator</code><code>Creator</code><code>BeanPostProcessor</code>BeanCreator\n\n**AOP**BeanBeanAdvisorAdvisorAdvisorBean\n\n**** JDKCGLIB\n\n**AOP**<code>ReflectiveMethodInvocation</code>**proceed**AdviceAOP\n","slug":"Spring-3","published":1,"updated":"2020-02-21T16:16:49.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck6wdnc3m00003zs6ci44gx2g","content":"<blockquote>\n<p>SpringBeanPostProcessorSpringAOPAOP</p>\n</blockquote>\n<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<h3 id=\"1-AOP\"><a href=\"#1-AOP\" class=\"headerlink\" title=\"1.AOP\"></a>1.AOP</h3><p>AOP<strong></strong> OOP<strong></strong> <strong></strong><strong></strong><strong></strong><strong></strong>AOP<strong></strong></p>\n<p>Spring<strong>AOP</strong>SpringAOPSpring</p>\n<hr>\n<h3 id=\"2-AOP\"><a href=\"#2-AOP\" class=\"headerlink\" title=\"2.AOP\"></a>2.AOP</h3><p>AOPAOP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;aop:aspectj-autoproxy /&gt;</span><br></pre></td></tr></table></figure>\n<p>AOPaop</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xmlns:aop=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span><br></pre></td></tr></table></figure>\n<p><code>&lt;http://<a href=\"http://www.springframework.org/schema/aop\" target=\"_blank\" rel=\"noopener\">www.springframework.org/schema/aop</a>&gt;</code>http &quot; <strong>spring.handlers</strong>handler</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http\\://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler</span><br></pre></td></tr></table></figure>\n<p>handler</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AopNamespaceHandler extends NamespaceHandlerSupport &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  /**</span><br><span class=\"line\">   * Register the &#123;@link BeanDefinitionParser BeanDefinitionParsers&#125; <span class=\"keyword\">for</span> the</span><br><span class=\"line\">   * <span class=\"string\">'&#123;@code config&#125;'</span>, <span class=\"string\">'&#123;@code spring-configured&#125;'</span>, <span class=\"string\">'&#123;@code aspectj-autoproxy&#125;'</span></span><br><span class=\"line\">   * and <span class=\"string\">'&#123;@code scoped-proxy&#125;'</span> tags.</span><br><span class=\"line\">   */</span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  public void <span class=\"function\"><span class=\"title\">init</span></span>() &#123;</span><br><span class=\"line\">    // In 2.0 XSD as well as <span class=\"keyword\">in</span> 2.1 XSD.</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"config\"</span>, new ConfigBeanDefinitionParser());</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"aspectj-autoproxy\"</span>, new AspectJAutoProxyBeanDefinitionParser());</span><br><span class=\"line\">    registerBeanDefinitionDecorator(<span class=\"string\">\"scoped-proxy\"</span>, new ScopedProxyBeanDefinitionDecorator());</span><br><span class=\"line\"></span><br><span class=\"line\">    // Only <span class=\"keyword\">in</span> 2.0 XSD: moved to context namespace as of 2.1</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"spring-configured\"</span>, new SpringConfiguredBeanDefinitionParser());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aspectj-autoproxy</code>Parserinit<code>aspectj-autoproxy</code>Parser<code>AspectJAutoProxyBeanDefinitionParser</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">//parse</span><br><span class=\"line\">public BeanDefinition parse(Element element, ParserContext parserContext) &#123;</span><br><span class=\"line\">    //IOC</span><br><span class=\"line\">    AopNamespaceUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(parserContext, element);</span><br><span class=\"line\">    extendBeanDefinition(element, parserContext);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"3-AnnotationAwareAspectJAutoProxyCreator\"><a href=\"#3-AnnotationAwareAspectJAutoProxyCreator\" class=\"headerlink\" title=\"3.AnnotationAwareAspectJAutoProxyCreator\"></a>3.AnnotationAwareAspectJAutoProxyCreator</h3><p><code>AnnotationAwareAspectJAutoProxyCreator</code>AOP<br><img src=\"images/spring-aop1.png\" alt=\"spring\"><br><code>BeanPostProcessor</code>Bean<strong>postProcessAfterInitialization</strong><code>BeanFactorAware</code><code>BeanFactory</code><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void registerAspectJAnnotationAutoProxyCreatorIfNecessary(</span><br><span class=\"line\">    ParserContext parserContext, Element sourceElement) &#123;</span><br><span class=\"line\">//BeanIOC</span><br><span class=\"line\">    BeanDefinition beanDefinition = AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(</span><br><span class=\"line\">        parserContext.getRegistry(), parserContext.extractSource(sourceElement));</span><br><span class=\"line\">    //proxy-target-classexpose-proxy</span><br><span class=\"line\">    useClassProxyingIfNecessary(parserContext.getRegistry(), sourceElement);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    registerComponentIfNecessary(beanDefinition, parserContext);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3</p>\n<ol>\n<li><code>AnnotationAwareAspectJAutoProxyCreator</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">public static BeanDefinition registerAspectJAnnotationAutoProxyCreatorIfNecessary(BeanDefinitionRegistry registry,</span><br><span class=\"line\">                                                                                  @Nullable Object <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\">//AnnotationAwareAspectJAutoProxyCreatorIOC</span><br><span class=\"line\">    <span class=\"built_in\">return</span> registerOrEscalateApcAsRequired(AnnotationAwareAspectJAutoProxyCreator.class, registry, <span class=\"built_in\">source</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private static BeanDefinition registerOrEscalateApcAsRequired(Class&lt;?&gt; cls, BeanDefinitionRegistry registry,</span><br><span class=\"line\">                                                              @Nullable Object <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Assert.notNull(registry, <span class=\"string\">\"BeanDefinitionRegistry must not be null\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    //IOCBean</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanDefinition</span><br><span class=\"line\">        BeanDefinition apcDefinition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //BeanClassNameAnnotationAwareAspectJAutoProxyCreator</span><br><span class=\"line\">        //ClassName</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!cls.getName().equals(apcDefinition.getBeanClassName())) &#123;</span><br><span class=\"line\">            int currentPriority = findPriorityForClass(apcDefinition.getBeanClassName());</span><br><span class=\"line\">            int requiredPriority = findPriorityForClass(cls);</span><br><span class=\"line\">            //BeanCreator</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (currentPriority &lt; requiredPriority) &#123;</span><br><span class=\"line\">                //ClassNameCreator</span><br><span class=\"line\">                apcDefinition.setBeanClassName(cls.getName());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //IOCCreator</span><br><span class=\"line\">    //CrearirClassBeanDefinition</span><br><span class=\"line\">    RootBeanDefinition beanDefinition = new RootBeanDefinition(cls);</span><br><span class=\"line\">    beanDefinition.setSource(<span class=\"built_in\">source</span>);</span><br><span class=\"line\">    //order</span><br><span class=\"line\">    beanDefinition.getPropertyValues().add(<span class=\"string\">\"order\"</span>, Ordered.HIGHEST_PRECEDENCE);</span><br><span class=\"line\">    beanDefinition.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);</span><br><span class=\"line\">    //BeanDefinitionIOC</span><br><span class=\"line\">    registry.registerBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME, beanDefinition);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> beanDefinition;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><strong>proxy-target-class</strong><strong>expose-proxy</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private static void useClassProxyingIfNecessary(BeanDefinitionRegistry registry, @Nullable Element sourceElement) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sourceElement != null) &#123;</span><br><span class=\"line\">        boolean proxyTargetClass = Boolean.valueOf(sourceElement.getAttribute(PROXY_TARGET_CLASS_ATTRIBUTE));</span><br><span class=\"line\">        //proxy-target-class</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (proxyTargetClass) &#123;</span><br><span class=\"line\">            AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        boolean exposeProxy = Boolean.valueOf(sourceElement.getAttribute(EXPOSE_PROXY_ATTRIBUTE));</span><br><span class=\"line\">        //expose-proxy</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (exposeProxy) &#123;</span><br><span class=\"line\">            AopConfigUtils.forceAutoProxyCreatorToExposeProxy(registry);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void forceAutoProxyCreatorToUseClassProxying(BeanDefinitionRegistry registry) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanNameCreator</span><br><span class=\"line\">        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //CreatorBeanDefinitionproxyTargetClass<span class=\"literal\">true</span></span><br><span class=\"line\">        definition.getPropertyValues().add(<span class=\"string\">\"proxyTargetClass\"</span>, Boolean.TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">public static void forceAutoProxyCreatorToExposeProxy(BeanDefinitionRegistry registry) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanNameCreator</span><br><span class=\"line\">        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //CreatorBeanDefinitionexposeProxy<span class=\"literal\">true</span></span><br><span class=\"line\">        definition.getPropertyValues().add(<span class=\"string\">\"exposeProxy\"</span>, Boolean.TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li><strong>proxy-target-class</strong>SpringAOP<strong>JDK</strong>AOP<strong>CGLib</strong>AOPAOPCGLibproxy-target-class<strong>true</strong></li>\n</ul>\n<p>1)<strong>final</strong>CGLibfinalfinalAOP<br>2)CGLibJAR</p>\n<ul>\n<li><strong>expose-proxy</strong>AB<strong>B</strong>AOPAOP<strong>expose-proxytrue</strong>AB<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Service&#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">A</span></span>()&#123;</span><br><span class=\"line\">        ((Service)AopContext.currentProxy()).B();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">B</span></span>()&#123;</span><br><span class=\"line\">    //<span class=\"keyword\">do</span> something...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\nBAAOP<code>AopContext</code><strong>AOP</strong></li>\n</ul>\n<hr>\n<h3 id=\"4-AOP\"><a href=\"#4-AOP\" class=\"headerlink\" title=\"4.AOP\"></a>4.AOP</h3><h4 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h4><p><strong>Creator</strong><code>BeanPostProcessor</code>IOCBean<strong>postProcessAfterInitialization</strong>AOP<code>AbstractAutoProxyCreator</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object postProcessAfterInitialization(@Nullable Object bean, String beanName) throws BeansException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bean != null) &#123;</span><br><span class=\"line\">        //KeyBeanClassbenaName</span><br><span class=\"line\">        Object cacheKey = getCacheKey(bean.getClass(), beanName);</span><br><span class=\"line\">        //BeanIOC</span><br><span class=\"line\">        //Bean</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!this.earlyProxyReferences.contains(cacheKey)) &#123;</span><br><span class=\"line\">            //AOP</span><br><span class=\"line\">            <span class=\"built_in\">return</span> wrapIfNecessary(bean, beanName, cacheKey);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (StringUtils.hasLength(beanName) &amp;&amp; this.targetSourcedBeans.contains(beanName)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //Bean</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Boolean.FALSE.equals(this.advisedBeans.get(cacheKey))) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //BeanAOP</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        this.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // Create proxy <span class=\"keyword\">if</span> we have advice.</span><br><span class=\"line\">    //Bean</span><br><span class=\"line\">    Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);</span><br><span class=\"line\">    //DO_NOT_PROXY</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (specificInterceptors != DO_NOT_PROXY) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        this.advisedBeans.put(cacheKey, Boolean.TRUE);</span><br><span class=\"line\">        //Bean</span><br><span class=\"line\">        Object proxy = createProxy(</span><br><span class=\"line\">            bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));</span><br><span class=\"line\">        this.proxyTypes.put(cacheKey, proxy.getClass());</span><br><span class=\"line\">        //BeanIOC</span><br><span class=\"line\">        <span class=\"built_in\">return</span> proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  //</span><br><span class=\"line\">    this.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AOP</p>\n<ul>\n<li>Bean</li>\n<li>Bean</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">protected Object[] getAdvicesAndAdvisorsForBean(Class&lt;?&gt; beanClass, String beanName, @Nullable TargetSource targetSource) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = findEligibleAdvisors(beanClass, beanName);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisors.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> DO_NOT_PROXY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors.toArray();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Advisor</code>Advisor<strong>advise</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findEligibleAdvisors(Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors = findCandidateAdvisors();</span><br><span class=\"line\">    //AdvisorBeanAdvisor</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);</span><br><span class=\"line\">    extendAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!eligibleAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        eligibleAdvisors = sortAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p><code>Advisor</code><code>Creator</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    // Add all the Spring advisors found according to superclass rules.</span><br><span class=\"line\">    //findCandidateAdvisorsIOCAdvisorBean</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = super.findCandidateAdvisors();</span><br><span class=\"line\">    // Build Advisors <span class=\"keyword\">for</span> all AspectJ aspects <span class=\"keyword\">in</span> the bean factory.</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.aspectJAdvisorsBuilder != null) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findCandidateAdvisors</strong><code>Advisor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    Assert.state(this.advisorRetrievalHelper != null, <span class=\"string\">\"No BeanFactoryAdvisorRetrievalHelper available\"</span>);</span><br><span class=\"line\">    //Helper</span><br><span class=\"line\">    <span class=\"built_in\">return</span> this.advisorRetrievalHelper.findAdvisorBeans();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findAdvisorBeans</span></span>() &#123;</span><br><span class=\"line\">    // Determine list of advisor bean names, <span class=\"keyword\">if</span> not cached already.</span><br><span class=\"line\">    String[] advisorNames = null;</span><br><span class=\"line\">    synchronized (this) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        advisorNames = this.cachedAdvisorBeanNames;</span><br><span class=\"line\">        //IOC</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (advisorNames == null) &#123;</span><br><span class=\"line\">            // Do not initialize FactoryBeans here: We need to leave all regular beans</span><br><span class=\"line\">            // uninitialized to <span class=\"built_in\">let</span> the auto-proxy creator apply to them!</span><br><span class=\"line\">            //IOCAdvisorBeanName</span><br><span class=\"line\">            advisorNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(</span><br><span class=\"line\">                this.beanFactory, Advisor.class, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">            //</span><br><span class=\"line\">            this.cachedAdvisorBeanNames = advisorNames;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisorNames.length == 0) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new LinkedList&lt;&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //BeanName</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String name : advisorNames) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isEligibleBean(name)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.beanFactory.isCurrentlyInCreation(name)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">                    logger.debug(<span class=\"string\">\"Skipping currently created advisor '\"</span> + name + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    //BeanNameIOCBeanList</span><br><span class=\"line\">                    advisors.add(this.beanFactory.getBean(name, Advisor.class));</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                //catch ...</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>IOCAdvisorBeanAdvisor</strong>AOPAdvisorIOC</p>\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p>Advisor<code>AnnotationAwareAspectJAutoProxyCreatorS</code><strong>findCandidateAdvisors</strong> <code>BeanFactoryAspectJAdvisorsBuilder</code><strong>buildAspectJAdvisors</strong>Advisor</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    // Add all the Spring advisors found according to superclass rules.</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = super.findCandidateAdvisors();</span><br><span class=\"line\">    // Build Advisors <span class=\"keyword\">for</span> all AspectJ aspects <span class=\"keyword\">in</span> the bean factory.</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.aspectJAdvisorsBuilder != null) &#123;</span><br><span class=\"line\">        //BeanFactoryAspectJAdvisorsBuilderAdvisor</span><br><span class=\"line\">        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">buildAspectJAdvisors</span></span>() &#123;</span><br><span class=\"line\">    List&lt;String&gt; aspectNames = this.aspectBeanNames;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectNames == null) &#123;</span><br><span class=\"line\">        synchronized (this) &#123;</span><br><span class=\"line\">            aspectNames = this.aspectBeanNames;</span><br><span class=\"line\">            //</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (aspectNames == null) &#123;</span><br><span class=\"line\">                List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">                aspectNames = new LinkedList&lt;&gt;();</span><br><span class=\"line\">                //IOCBeanName</span><br><span class=\"line\">                String[] beanNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(</span><br><span class=\"line\">                    this.beanFactory, Object.class, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                //BeanName</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (!isEligibleBean(beanName)) &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    // We must be careful not to instantiate beans eagerly as <span class=\"keyword\">in</span> this <span class=\"keyword\">case</span> they</span><br><span class=\"line\">                    // would be cached by the Spring container but would not have been weaved.</span><br><span class=\"line\">                    Class&lt;?&gt; beanType = this.beanFactory.getType(beanName);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (beanType == null) &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //Bean@Aspect</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (this.advisorFactory.isAspect(beanType)) &#123;</span><br><span class=\"line\">                        //Advisor</span><br><span class=\"line\">                        aspectNames.add(beanName);</span><br><span class=\"line\">                        AspectMetadata amd = new AspectMetadata(beanType, beanName);</span><br><span class=\"line\">                        //</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (amd.getAjType().getPerClause().getKind() == PerClauseKind.SINGLETON) &#123;</span><br><span class=\"line\">                            //</span><br><span class=\"line\">                            MetadataAwareAspectInstanceFactory factory =</span><br><span class=\"line\">                                new BeanFactoryAspectInstanceFactory(this.beanFactory, beanName);</span><br><span class=\"line\">                            //advisorFactoryAdvisor</span><br><span class=\"line\">                            List&lt;Advisor&gt; classAdvisors = this.advisorFactory.getAdvisors(factory);</span><br><span class=\"line\">                            //</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (this.beanFactory.isSingleton(beanName)) &#123;</span><br><span class=\"line\">                                this.advisorsCache.put(beanName, classAdvisors);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            //factoryfactory</span><br><span class=\"line\">                            //advisorFactoryAdvisorBeanfactory</span><br><span class=\"line\">                            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                                this.aspectFactoryCache.put(beanName, factory);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            advisors.addAll(classAdvisors);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            // Per target or per this.</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (this.beanFactory.isSingleton(beanName)) &#123;</span><br><span class=\"line\">                                throw new IllegalArgumentException(<span class=\"string\">\"Bean with name '\"</span> + beanName +</span><br><span class=\"line\">                                                                   <span class=\"string\">\"' is a singleton, but aspect instantiation model is not singleton\"</span>);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            MetadataAwareAspectInstanceFactory factory =</span><br><span class=\"line\">                                new PrototypeAspectInstanceFactory(this.beanFactory, beanName);</span><br><span class=\"line\">                            this.aspectFactoryCache.put(beanName, factory);</span><br><span class=\"line\">                            advisors.addAll(this.advisorFactory.getAdvisors(factory));</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                this.aspectBeanNames = aspectNames;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectNames.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.emptyList();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String aspectName : aspectNames) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        List&lt;Advisor&gt; cachedAdvisors = this.advisorsCache.get(aspectName);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cachedAdvisors != null) &#123;</span><br><span class=\"line\">            advisors.addAll(cachedAdvisors);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //factory</span><br><span class=\"line\">        //factoryadvisorFactoryAdvisor</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            MetadataAwareAspectInstanceFactory factory = this.aspectFactoryCache.get(aspectName);</span><br><span class=\"line\">            advisors.addAll(this.advisorFactory.getAdvisors(factory));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Advisor</strong><strong>advisorFactory</strong><strong>Advisor</strong><code>ReflectiveAspectJAdvisorFactory</code><strong>getAdvisors</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public List&lt;Advisor&gt; getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt; aspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();</span><br><span class=\"line\">    //Name</span><br><span class=\"line\">    String aspectName = aspectInstanceFactory.getAspectMetadata().getAspectName();</span><br><span class=\"line\">    //</span><br><span class=\"line\">    validate(aspectClass);</span><br><span class=\"line\"></span><br><span class=\"line\">    // We need to wrap the MetadataAwareAspectInstanceFactory with a decorator</span><br><span class=\"line\">    // so that it will only instantiate once.</span><br><span class=\"line\">    MetadataAwareAspectInstanceFactory lazySingletonAspectInstanceFactory =</span><br><span class=\"line\">        new LazySingletonAspectInstanceFactoryDecorator(aspectInstanceFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //@Pointcut</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Method method : getAdvisorMethods(aspectClass)) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, advisors.size(), aspectName);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (advisor != null) &#123;</span><br><span class=\"line\">            advisors.add(advisor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // If it<span class=\"string\">'s a per target aspect, emit the dummy instantiating aspect.</span></span><br><span class=\"line\"><span class=\"string\">    if (!advisors.isEmpty() &amp;&amp; lazySingletonAspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        Advisor instantiationAdvisor = new SyntheticInstantiationAdvisor(lazySingletonAspectInstanceFactory);</span></span><br><span class=\"line\"><span class=\"string\">        advisors.add(0, instantiationAdvisor);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    // Find introduction fields.</span></span><br><span class=\"line\"><span class=\"string\">    //DeclareParentsfiled</span></span><br><span class=\"line\"><span class=\"string\">    for (Field field : aspectClass.getDeclaredFields()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        Advisor advisor = getDeclareParentsAdvisor(field);</span></span><br><span class=\"line\"><span class=\"string\">        if (advisor != null) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            advisors.add(advisor);</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    return advisors;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li><strong>getAdvisorMethods</strong><code>AdvisorMethods</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private List&lt;Method&gt; getAdvisorMethods(Class&lt;?&gt; aspectClass) &#123;</span><br><span class=\"line\">    final List&lt;Method&gt; methods = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    ReflectionUtils.doWithMethods(aspectClass, method -&gt; &#123;</span><br><span class=\"line\">        // Exclude pointcuts</span><br><span class=\"line\">        //Pointcut</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (AnnotationUtils.getAnnotation(method, Pointcut.class) == null) &#123;</span><br><span class=\"line\">            methods.add(method);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    Collections.sort(methods, METHOD_COMPARATOR);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> methods;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<strong>PointcutAdvisorMethod</strong></li>\n<li><strong>getAdvisor</strong><code>Advisor</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Advisor getAdvisor(Method candidateAdviceMethod, MetadataAwareAspectInstanceFactory aspectInstanceFactory,</span><br><span class=\"line\">                          int declarationOrderInAspect, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    validate(aspectInstanceFactory.getAspectMetadata().getAspectClass());</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJExpressionPointcut expressionPointcut = getPointcut(</span><br><span class=\"line\">        candidateAdviceMethod, aspectInstanceFactory.getAspectMetadata().getAspectClass());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (expressionPointcut == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new InstantiationModelAwarePointcutAdvisorImpl(expressionPointcut, candidateAdviceMethod,</span><br><span class=\"line\">                                                          this, aspectInstanceFactory, declarationOrderInAspect, aspectName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li>getPointcut<strong></strong></li>\n<li>InstantiationModelAwarePointcutAdvisorImpl<strong></strong></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Advisor<strong>getPointcut</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private AspectJExpressionPointcut getPointcut(Method candidateAdviceMethod, Class&lt;?&gt; candidateAspectClass) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJAnnotation&lt;?&gt; aspectJAnnotation =</span><br><span class=\"line\">        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectJAnnotation == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJExpressionPointcut ajexp =</span><br><span class=\"line\">        new AspectJExpressionPointcut(candidateAspectClass, new String[0], new Class&lt;?&gt;[0]);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    //@Before<span class=\"string\">\"test()\"</span><span class=\"built_in\">test</span>()</span><br><span class=\"line\">    ajexp.setExpression(aspectJAnnotation.getPointcutExpression());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.beanFactory != null) &#123;</span><br><span class=\"line\">        ajexp.setBeanFactory(this.beanFactory);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> ajexp;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAspectJAnnotationOnMethod</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@SuppressWarnings(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">protected static AspectJAnnotation&lt;?&gt; findAspectJAnnotationOnMethod(Method method) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt;[] classesToLookFor = new Class&lt;?&gt;[] &#123;</span><br><span class=\"line\">        Before.class, Around.class, After.class, AfterReturning.class, AfterThrowing.class, Pointcut.class&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Class&lt;?&gt; c : classesToLookFor) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        AspectJAnnotation&lt;?&gt; foundAnnotation = findAnnotation(method, (Class&lt;Annotation&gt;) c);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (foundAnnotation != null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> foundAnnotation;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAnnotation </strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private static &lt;A extends Annotation&gt; AspectJAnnotation&lt;A&gt; findAnnotation(Method method, Class&lt;A&gt; toLookFor) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    A result = AnnotationUtils.findAnnotation(method, toLookFor);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result != null) &#123;</span><br><span class=\"line\">        //AspectJAnnotation</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new AspectJAnnotation&lt;&gt;(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>@Before(test())<strong>test()</strong>AspectJAnnotation<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public AspectJAnnotation(A annotation) &#123;</span><br><span class=\"line\">    this.annotation = annotation;</span><br><span class=\"line\">    this.annotationType = determineAnnotationType(annotation);</span><br><span class=\"line\">    // We know these methods exist with the same name on each object,</span><br><span class=\"line\">    // but need to invoke them reflectively as there isn<span class=\"string\">'t a common interface.</span></span><br><span class=\"line\"><span class=\"string\">    try &#123;</span></span><br><span class=\"line\"><span class=\"string\">        //pointcut</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcutExpression = resolveExpression(annotation);</span></span><br><span class=\"line\"><span class=\"string\">        this.argumentNames = (String) annotation.getClass().getMethod(\"argNames\").invoke(annotation);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    catch (Exception ex) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        throw new IllegalArgumentException(annotation + \" cannot be an AspectJ annotation\", ex);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private String resolveExpression(A annotation) throws Exception &#123;</span><br><span class=\"line\">    //valuepointcut</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String methodName : EXPRESSION_PROPERTIES) &#123;</span><br><span class=\"line\">        Method method;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            //method</span><br><span class=\"line\">            method = annotation.getClass().getDeclaredMethod(methodName);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        catch (NoSuchMethodException ex) &#123;</span><br><span class=\"line\">            method = null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (method != null) &#123;</span><br><span class=\"line\">            //@Before(<span class=\"string\">\"test()\"</span>)</span><br><span class=\"line\">            //<span class=\"string\">\"test()\"</span></span><br><span class=\"line\">            String candidate = (String) method.invoke(annotation);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(candidate)) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> candidate;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    throw new IllegalStateException(<span class=\"string\">\"Failed to resolve expression: \"</span> + annotation);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p><code>InstantiationModelAwarePointcutAdvisorImpl</code><code>Advisor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public InstantiationModelAwarePointcutAdvisorImpl(AspectJExpressionPointcut declaredPointcut,</span><br><span class=\"line\">                                                  Method aspectJAdviceMethod, AspectJAdvisorFactory aspectJAdvisorFactory,</span><br><span class=\"line\">                                                  MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    this.declaredPointcut = declaredPointcut;</span><br><span class=\"line\">    this.declaringClass = aspectJAdviceMethod.getDeclaringClass();</span><br><span class=\"line\">    this.methodName = aspectJAdviceMethod.getName();</span><br><span class=\"line\">    this.parameterTypes = aspectJAdviceMethod.getParameterTypes();</span><br><span class=\"line\">    this.aspectJAdviceMethod = aspectJAdviceMethod;</span><br><span class=\"line\">    this.aspectJAdvisorFactory = aspectJAdvisorFactory;</span><br><span class=\"line\">    this.aspectInstanceFactory = aspectInstanceFactory;</span><br><span class=\"line\">    this.declarationOrder = declarationOrder;</span><br><span class=\"line\">    this.aspectName = aspectName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) &#123;</span><br><span class=\"line\">        // Static part of the pointcut is a lazy <span class=\"built_in\">type</span>.</span><br><span class=\"line\">        Pointcut preInstantiationPointcut = Pointcuts.union(</span><br><span class=\"line\">            aspectInstanceFactory.getAspectMetadata().getPerClausePointcut(), this.declaredPointcut);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Make it dynamic: must mutate from pre-instantiation to post-instantiation state.</span><br><span class=\"line\">        // If it<span class=\"string\">'s not a dynamic pointcut, it may be optimized out</span></span><br><span class=\"line\"><span class=\"string\">        // by the Spring AOP infrastructure after the first evaluation.</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcut = new PerTargetInstantiationModelPointcut(</span></span><br><span class=\"line\"><span class=\"string\">            this.declaredPointcut, preInstantiationPointcut, aspectInstanceFactory);</span></span><br><span class=\"line\"><span class=\"string\">        this.lazy = true;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    else &#123;</span></span><br><span class=\"line\"><span class=\"string\">        // A singleton aspect.</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcut = this.declaredPointcut;</span></span><br><span class=\"line\"><span class=\"string\">        this.lazy = false;</span></span><br><span class=\"line\"><span class=\"string\">        //AdviceinstantiatedAdvice</span></span><br><span class=\"line\"><span class=\"string\">        this.instantiatedAdvice = instantiateAdvice(this.declaredPointcut);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><strong>instantiateAdvice</strong><strong>Advise</strong>@Before@AfterAdvice<strong></strong>Advice</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private Advice instantiateAdvice(AspectJExpressionPointcut pointcut) &#123;</span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    Advice advice = this.aspectJAdvisorFactory.getAdvice(this.aspectJAdviceMethod, pointcut,</span><br><span class=\"line\">                                                         this.aspectInstanceFactory, this.declarationOrder, this.aspectName);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> (advice != null ? advice : EMPTY_ADVICE);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aspectJAdvisorFactory</code>Advice</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Advice getAdvice(Method candidateAdviceMethod, AspectJExpressionPointcut expressionPointcut,</span><br><span class=\"line\">                        MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt; candidateAspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();</span><br><span class=\"line\">    validate(candidateAspectClass);</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJAnnotation&lt;?&gt; aspectJAnnotation =</span><br><span class=\"line\">        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectJAnnotation == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // If we get here, we know we have an AspectJ method.</span><br><span class=\"line\">    // Check that its an AspectJ-annotated class</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isAspect(candidateAspectClass)) &#123;</span><br><span class=\"line\">        throw new AopConfigException(<span class=\"string\">\"Advice must be declared inside an aspect type: \"</span> +</span><br><span class=\"line\">                                     <span class=\"string\">\"Offending method '\"</span> + candidateAdviceMethod + <span class=\"string\">\"' in class [\"</span> +</span><br><span class=\"line\">                                     candidateAspectClass.getName() + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">        logger.debug(<span class=\"string\">\"Found AspectJ method: \"</span> + candidateAdviceMethod);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    AbstractAspectJAdvice springAdvice;</span><br><span class=\"line\"></span><br><span class=\"line\">    //swich</span><br><span class=\"line\">    switch (aspectJAnnotation.getAnnotationType()) &#123;</span><br><span class=\"line\">            //@Before</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtBefore:</span><br><span class=\"line\">            springAdvice = new AspectJMethodBeforeAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@After</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfter:</span><br><span class=\"line\">            springAdvice = new AspectJAfterAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@AfterReturning</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfterReturning:</span><br><span class=\"line\">            springAdvice = new AspectJAfterReturningAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            AfterReturning afterReturningAnnotation = (AfterReturning) aspectJAnnotation.getAnnotation();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(afterReturningAnnotation.returning())) &#123;</span><br><span class=\"line\">                springAdvice.setReturningName(afterReturningAnnotation.returning());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@AfterThrowing</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfterThrowing:</span><br><span class=\"line\">            springAdvice = new AspectJAfterThrowingAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            AfterThrowing afterThrowingAnnotation = (AfterThrowing) aspectJAnnotation.getAnnotation();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(afterThrowingAnnotation.throwing())) &#123;</span><br><span class=\"line\">                springAdvice.setThrowingName(afterThrowingAnnotation.throwing());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@Around</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAround:</span><br><span class=\"line\">            springAdvice = new AspectJAroundAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@Pointcut</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtPointcut:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">                logger.debug(<span class=\"string\">\"Processing pointcut '\"</span> + candidateAdviceMethod.getName() + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">        default:</span><br><span class=\"line\">            throw new UnsupportedOperationException(</span><br><span class=\"line\">                <span class=\"string\">\"Unsupported advice type on method: \"</span> + candidateAdviceMethod);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // Now to configure the advice...</span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    springAdvice.setAspectName(aspectName);</span><br><span class=\"line\">    springAdvice.setDeclarationOrder(declarationOrder);</span><br><span class=\"line\">    String[] argNames = this.parameterNameDiscoverer.getParameterNames(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (argNames != null) &#123;</span><br><span class=\"line\">        springAdvice.setArgumentNamesFromStringArray(argNames);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    springAdvice.calculateArgumentBindings();</span><br><span class=\"line\">    <span class=\"built_in\">return</span> springAdvice;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Adviceadvice<strong>Advisoradvice</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findEligibleAdvisors(Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    //4.2</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors = findCandidateAdvisors();</span><br><span class=\"line\">    //AdvisorBeanAdvisor</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);</span><br><span class=\"line\">    extendAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!eligibleAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        eligibleAdvisors = sortAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAdvisorsThatCanApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findAdvisorsThatCanApply(</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors, Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ProxyCreationContext.setCurrentProxiedBeanName(beanName);</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        //AopUtils</span><br><span class=\"line\">        <span class=\"built_in\">return</span> AopUtils.findAdvisorsThatCanApply(candidateAdvisors, beanClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    finally &#123;</span><br><span class=\"line\">        ProxyCreationContext.setCurrentProxiedBeanName(null);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>AopUtils</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static List&lt;Advisor&gt; findAdvisorsThatCanApply(List&lt;Advisor&gt; candidateAdvisors, Class&lt;?&gt; clazz) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (candidateAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> candidateAdvisors;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Advisor candidate : candidateAdvisors) &#123;</span><br><span class=\"line\">        //AdvisorBean</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidate instanceof IntroductionAdvisor &amp;&amp; canApply(candidate, clazz)) &#123;</span><br><span class=\"line\">            //List</span><br><span class=\"line\">            eligibleAdvisors.add(candidate);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    boolean hasIntroductions = !eligibleAdvisors.isEmpty();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Advisor candidate : candidateAdvisors) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidate instanceof IntroductionAdvisor) &#123;</span><br><span class=\"line\">            // already processed</span><br><span class=\"line\">            //</span><br><span class=\"line\">            <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (canApply(candidate, clazz, hasIntroductions)) &#123;</span><br><span class=\"line\">            //List</span><br><span class=\"line\">            eligibleAdvisors.add(candidate);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //Advisor List</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>canApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static boolean canApply(Advisor advisor, Class&lt;?&gt; targetClass, boolean hasIntroductions) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisor instanceof IntroductionAdvisor) &#123;</span><br><span class=\"line\">        //ClassFilterBean</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ((IntroductionAdvisor) advisor).getClassFilter().matches(targetClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (advisor instanceof PointcutAdvisor) &#123;</span><br><span class=\"line\">        //AdvisorPointcutAdvisor</span><br><span class=\"line\">        //PointcutAdvisorgetPointcut</span><br><span class=\"line\">        PointcutAdvisor pca = (PointcutAdvisor) advisor;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"built_in\">return</span> canApply(pca.getPointcut(), targetClass, hasIntroductions);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        // It doesn<span class=\"string\">'t have a pointcut so we assume it applies.</span></span><br><span class=\"line\"><span class=\"string\">        //</span></span><br><span class=\"line\"><span class=\"string\">        return true;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>Advisor<strong>canApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static boolean canApply(Pointcut pc, Class&lt;?&gt; targetClass, boolean hasIntroductions) &#123;</span><br><span class=\"line\">    Assert.notNull(pc, <span class=\"string\">\"Pointcut must not be null\"</span>);</span><br><span class=\"line\">    //<span class=\"literal\">false</span></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pc.getClassFilter().matches(targetClass)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    MethodMatcher methodMatcher = pc.getMethodMatcher();</span><br><span class=\"line\">    //methodMatcherMethodMatcher.TRUE<span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (methodMatcher == MethodMatcher.TRUE) &#123;</span><br><span class=\"line\">        // No need to iterate the methods <span class=\"keyword\">if</span> were matching any method anyway...</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    IntroductionAwareMethodMatcher introductionAwareMethodMatcher = null;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (methodMatcher instanceof IntroductionAwareMethodMatcher) &#123;</span><br><span class=\"line\">        introductionAwareMethodMatcher = (IntroductionAwareMethodMatcher) methodMatcher;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    Set&lt;Class&lt;?&gt;&gt; classes = new LinkedHashSet&lt;&gt;(ClassUtils.getAllInterfacesForClassAsSet(targetClass));</span><br><span class=\"line\">    //</span><br><span class=\"line\">    classes.add(targetClass);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Class&lt;?&gt; clazz : classes) &#123;</span><br><span class=\"line\">        //class</span><br><span class=\"line\">        Method[] methods = ReflectionUtils.getAllDeclaredMethods(clazz);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Method method : methods) &#123;</span><br><span class=\"line\">            //<span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((introductionAwareMethodMatcher != null &amp;&amp;</span><br><span class=\"line\">                 introductionAwareMethodMatcher.matches(method, targetClass, hasIntroductions)) ||</span><br><span class=\"line\">                methodMatcher.matches(method, targetClass)) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>Bean<strong></strong><strong>Advisor</strong>Advisor<strong>Bean</strong><strong>AdvisorAdvisors</strong>BeanAdvisorBeanAdvisorAdvisorAdvisoradvice@BeforeAdvisorAdvisor</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"JDKCGLIB\"><a href=\"#JDKCGLIB\" class=\"headerlink\" title=\"JDKCGLIB\"></a>JDKCGLIB</h5><p>4.1<strong>wrapIfNecessary</strong>Bean<strong>getAdvicesAndAdvisorsForBean</strong>Advisor<strong>createProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object createProxy(Class&lt;?&gt; beanClass, @Nullable String beanName,</span><br><span class=\"line\">                             @Nullable Object[] specificInterceptors, TargetSource targetSource) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.beanFactory instanceof ConfigurableListableBeanFactory) &#123;</span><br><span class=\"line\">        AutoProxyUtils.exposeTargetClass((ConfigurableListableBeanFactory) this.beanFactory, beanName, beanClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ProxyFactory proxyFactory = new ProxyFactory();</span><br><span class=\"line\">    //CreatorproxyTargetClassexposeProxy</span><br><span class=\"line\">    proxyFactory.copyFrom(this);</span><br><span class=\"line\"></span><br><span class=\"line\">    //proxyTargetClass<span class=\"literal\">false</span></span><br><span class=\"line\">    //proxyTargetClass<span class=\"literal\">true</span>CGLib</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!proxyFactory.isProxyTargetClass()) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (shouldProxyTargetClass(beanClass, beanName)) &#123;</span><br><span class=\"line\">            //CGLib</span><br><span class=\"line\">            proxyFactory.setProxyTargetClass(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //proxyFactory</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            evaluateProxyInterfaces(beanClass, proxyFactory);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    Advisor[] advisors = buildAdvisors(beanName, specificInterceptors);</span><br><span class=\"line\">    //AdvisorsproxyFactory</span><br><span class=\"line\">    proxyFactory.addAdvisors(advisors);</span><br><span class=\"line\">    //BeanproxyFactory</span><br><span class=\"line\">    proxyFactory.setTargetSource(targetSource);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    customizeProxyFactory(proxyFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">    proxyFactory.setFrozen(this.freezeProxy);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisorsPreFiltered()) &#123;</span><br><span class=\"line\">        proxyFactory.setPreFiltered(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //proxyFactory</span><br><span class=\"line\">    <span class=\"built_in\">return</span> proxyFactory.getProxy(getProxyClassLoader());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>proxyFactory</code><code>proxyFactory</code><strong>getProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> createAopProxy().getProxy(classLoader);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected final synchronized AopProxy <span class=\"function\"><span class=\"title\">createAopProxy</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!this.active) &#123;</span><br><span class=\"line\">        activate();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //aopProxyFactory</span><br><span class=\"line\">    <span class=\"built_in\">return</span> getAopProxyFactory().createAopProxy(this);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aopProxyFactory</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"function\"><span class=\"title\">ProxyCreatorSupport</span></span>() &#123;</span><br><span class=\"line\">    this.aopProxyFactory = new DefaultAopProxyFactory();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>createAopProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException &#123;</span><br><span class=\"line\">    //ProxyTargetClass</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) &#123;</span><br><span class=\"line\">        Class&lt;?&gt; targetClass = config.getTargetClass();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (targetClass == null) &#123;</span><br><span class=\"line\">            throw new AopConfigException(<span class=\"string\">\"TargetSource cannot determine target class: \"</span> +</span><br><span class=\"line\">                                         <span class=\"string\">\"Either an interface or a target is required for proxy creation.\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> new JdkDynamicAopProxy(config);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new ObjenesisCglibAopProxy(config);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new JdkDynamicAopProxy(config);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>configproxyFactoryAdvisor</p>\n</blockquote>\n<p><strong></strong></p>\n<ul>\n<li>optimizeCGLibJDKCGLib</li>\n<li>proxyTargetClasstrueCGLib</li>\n<li>hasNoUserSuppliedProxyInterfaces</li>\n</ul>\n<p>JDKCGLIB</p>\n<ul>\n<li>JDK</li>\n<li>proxyTargetClassCGLIB</li>\n<li>CGLIB</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> createAopProxy().getProxy(classLoader);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>createAopProxy</strong>JDKJDK<strong>getProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">        logger.debug(<span class=\"string\">\"Creating JDK dynamic proxy: target source is \"</span> + this.advised.getTargetSource());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt;[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    //equalshashCode</span><br><span class=\"line\">    findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"built_in\">return</span> Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>advised</code><code>config</code><code>proxyFactory</code><strong>Advisor</strong></p>\n<p><code>InvocationHandler</code><strong>invoke</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class=\"line\">    MethodInvocation invocation;</span><br><span class=\"line\">    Object oldProxy = null;</span><br><span class=\"line\">    boolean setProxyContext = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    TargetSource targetSource = this.advised.targetSource;</span><br><span class=\"line\">    Object target = null;</span><br><span class=\"line\"></span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        //eqauls()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!this.equalsDefined &amp;&amp; AopUtils.isEqualsMethod(method)) &#123;</span><br><span class=\"line\">            // The target does not implement the equals(Object) method itself.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> equals(args[0]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //hashCode()</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.hashCodeDefined &amp;&amp; AopUtils.isHashCodeMethod(method)) &#123;</span><br><span class=\"line\">            // The target does not implement the hashCode() method itself.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> hashCode();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (method.getDeclaringClass() == DecoratingProxy.class) &#123;</span><br><span class=\"line\">            // There is only getDecoratedClass() declared -&gt; dispatch to proxy config.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> AopProxyUtils.ultimateTargetClass(this.advised);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //Advised,,</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.advised.opaque &amp;&amp; method.getDeclaringClass().isInterface() &amp;&amp;</span><br><span class=\"line\">                 method.getDeclaringClass().isAssignableFrom(Advised.class)) &#123;</span><br><span class=\"line\">            // Service invocations on ProxyConfig with the proxy config...</span><br><span class=\"line\">            <span class=\"built_in\">return</span> AopUtils.invokeJoinpointUsingReflection(this.advised, method, args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Object retVal;</span><br><span class=\"line\"></span><br><span class=\"line\">        //exposeProxy<span class=\"literal\">true</span>proxy</span><br><span class=\"line\">        //AOP</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (this.advised.exposeProxy) &#123;</span><br><span class=\"line\">            // Make invocation available <span class=\"keyword\">if</span> necessary.</span><br><span class=\"line\">            oldProxy = AopContext.setCurrentProxy(proxy);</span><br><span class=\"line\">            setProxyContext = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        // Get as late as possible to minimize the time we <span class=\"string\">\"own\"</span> the target,</span><br><span class=\"line\">        // <span class=\"keyword\">in</span> <span class=\"keyword\">case</span> it comes from a pool.</span><br><span class=\"line\">        //</span><br><span class=\"line\">        target = targetSource.getTarget();</span><br><span class=\"line\">        Class&lt;?&gt; targetClass = (target != null ? target.getClass() : null);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Get the interception chain <span class=\"keyword\">for</span> this method.</span><br><span class=\"line\">        //Interceptor</span><br><span class=\"line\">        List&lt;Object&gt; chain = this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Check whether we have any advice. If we don<span class=\"string\">'t, we can fallback on direct</span></span><br><span class=\"line\"><span class=\"string\">        // reflective invocation of the target, and avoid creating a MethodInvocation.</span></span><br><span class=\"line\"><span class=\"string\">        //(Interceptor) method.invoke(target, args)</span></span><br><span class=\"line\"><span class=\"string\">        if (chain.isEmpty()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // We can skip creating a MethodInvocation: just invoke the target directly</span></span><br><span class=\"line\"><span class=\"string\">            // Note that the final invoker must be an InvokerInterceptor so we know it does</span></span><br><span class=\"line\"><span class=\"string\">            // nothing but a reflective operation on the target, and no hot swapping or fancy proxying.</span></span><br><span class=\"line\"><span class=\"string\">            Object[] argsToUse = AopProxyUtils.adaptArgumentsIfNecessary(method, args);</span></span><br><span class=\"line\"><span class=\"string\">            retVal = AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse);</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        else &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // We need to create a method invocation...</span></span><br><span class=\"line\"><span class=\"string\">            //MethodInvocation</span></span><br><span class=\"line\"><span class=\"string\">            //proceed</span></span><br><span class=\"line\"><span class=\"string\">            invocation = new ReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);</span></span><br><span class=\"line\"><span class=\"string\">            // Proceed to the joinpoint through the interceptor chain.</span></span><br><span class=\"line\"><span class=\"string\">            retVal = invocation.proceed();</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        // Massage return value if necessary.</span></span><br><span class=\"line\"><span class=\"string\">        Class&lt;?&gt; returnType = method.getReturnType();</span></span><br><span class=\"line\"><span class=\"string\">        if (retVal != null &amp;&amp; retVal == target &amp;&amp;</span></span><br><span class=\"line\"><span class=\"string\">            returnType != Object.class &amp;&amp; returnType.isInstance(proxy) &amp;&amp;</span></span><br><span class=\"line\"><span class=\"string\">            !RawTargetAccess.class.isAssignableFrom(method.getDeclaringClass())) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // Special case: it returned \"this\" and the return type of the method</span></span><br><span class=\"line\"><span class=\"string\">            // is type-compatible. Note that we can'</span>t <span class=\"built_in\">help</span> <span class=\"keyword\">if</span> the target sets</span><br><span class=\"line\">            // a reference to itself <span class=\"keyword\">in</span> another returned object.</span><br><span class=\"line\">            retVal = proxy;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (retVal == null &amp;&amp; returnType != Void.TYPE &amp;&amp; returnType.isPrimitive()) &#123;</span><br><span class=\"line\">            throw new AopInvocationException(</span><br><span class=\"line\">                <span class=\"string\">\"Null return value from advice does not match primitive return type for: \"</span> + method);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> retVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    finally &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target != null &amp;&amp; !targetSource.isStatic()) &#123;</span><br><span class=\"line\">            // Must have come from TargetSource.</span><br><span class=\"line\">            targetSource.releaseTarget(target);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (setProxyContext) &#123;</span><br><span class=\"line\">            // Restore old proxy.</span><br><span class=\"line\">            AopContext.setCurrentProxy(oldProxy);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li><strong>equalshashCodeAdvised</strong></li>\n<li><strong></strong>AopContextABBBBAOPBBBAOPAopContextBBAOPAopContext</li>\n<li><strong></strong><code>advised</code><strong></strong><strong></strong><strong>AOP</strong><strong></strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AOP</li>\n</ol>\n<h4 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h4><p><strong>BeanIOC</strong>BeanAOP<strong></strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AOP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//-1</span><br><span class=\"line\">private int currentInterceptorIndex = -1;</span><br><span class=\"line\"></span><br><span class=\"line\">//interceptors</span><br><span class=\"line\">protected final List&lt;?&gt; interceptorsAndDynamicMethodMatchers;</span><br><span class=\"line\"></span><br><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Object proceed() throws Throwable &#123;</span><br><span class=\"line\">    //  We start with an index of -1 and increment early.</span><br><span class=\"line\">    //InterceptorjoinPoint</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> invokeJoinpoint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    Object interceptorOrInterceptionAdvice =</span><br><span class=\"line\">        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);</span><br><span class=\"line\">    //joinPoint</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (interceptorOrInterceptionAdvice instanceof InterceptorAndDynamicMethodMatcher) &#123;</span><br><span class=\"line\">        // Evaluate dynamic method matcher here: static part will already have</span><br><span class=\"line\">        // been evaluated and found to match.</span><br><span class=\"line\">        InterceptorAndDynamicMethodMatcher dm =</span><br><span class=\"line\">            (InterceptorAndDynamicMethodMatcher) interceptorOrInterceptionAdvice;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (dm.methodMatcher.matches(this.method, this.targetClass, this.arguments)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> dm.interceptor.invoke(this);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            // Dynamic matching failed.</span><br><span class=\"line\">            // Skip this interceptor and invoke the next <span class=\"keyword\">in</span> the chain.</span><br><span class=\"line\">            //,Intercetpor,Interceptor</span><br><span class=\"line\">            <span class=\"built_in\">return</span> proceed();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        // Its an interceptor, so we just invoke it: The pointcut will have</span><br><span class=\"line\">        // been evaluated statically before this object was constructed.</span><br><span class=\"line\">        //IntercetporAdvice</span><br><span class=\"line\">        //this</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(this);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><p><strong>currentInterceptorIndex</strong>-1<strong>interceptorsAndDynamicMethodMatchers</strong>size11-1<strong>invokeJoinpoint</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Object interceptorOrInterceptionAdvice =</span><br><span class=\"line\">        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);</span><br></pre></td></tr></table></figure>\n<p><strong>currentInterceptorIndex</strong>00Advice<strong>invoke</strong>BeforeAdvice<strong>invoke</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">    this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );</span><br><span class=\"line\">    <span class=\"built_in\">return</span> mi.proceed();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>mi</code><code>this</code><code>ReflectiveMethodInvocation</code><code>ReflectiveMethodInvocation</code><strong>proceed</strong><strong>proceed</strong>0<strong>currentInterceptorIndex=0,interceptorsAndDynamicMethodMatchers.size() - 1 = 0</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> invokeJoinpoint();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>invokeJoinpoint</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">protected Object invokeJoinpoint() throws Throwable &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> AopUtils.invokeJoinpointUsingReflection(this.target, this.method, this.arguments);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><strong>proceed</strong></p>\n</li>\n<li><p><strong>@BeforeAdviceinvoke@AfterAdvice </strong><br>1) <code>MethodBeforeAdviceInterceptor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MethodBeforeAdviceInterceptor implements MethodInterceptor, Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private MethodBeforeAdvice advice;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">   * Create a new MethodBeforeAdviceInterceptor <span class=\"keyword\">for</span> the given advice.</span><br><span class=\"line\">   * @param advice the MethodBeforeAdvice to wrap</span><br><span class=\"line\">   */</span><br><span class=\"line\">    //advice</span><br><span class=\"line\">    public MethodBeforeAdviceInterceptor(MethodBeforeAdvice advice) &#123;</span><br><span class=\"line\">        Assert.notNull(advice, <span class=\"string\">\"Advice must not be null\"</span>);</span><br><span class=\"line\">        this.advice = advice;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">        this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );</span><br><span class=\"line\">        <span class=\"built_in\">return</span> mi.proceed();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2)<code>AfterReturningAdviceInterceptor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AfterReturningAdviceInterceptor implements MethodInterceptor, AfterAdvice, Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private final AfterReturningAdvice advice;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">   * Create a new AfterReturningAdviceInterceptor <span class=\"keyword\">for</span> the given advice.</span><br><span class=\"line\">   * @param advice the AfterReturningAdvice to wrap</span><br><span class=\"line\">   */</span><br><span class=\"line\">    public AfterReturningAdviceInterceptor(AfterReturningAdvice advice) &#123;</span><br><span class=\"line\">        Assert.notNull(advice, <span class=\"string\">\"Advice must not be null\"</span>);</span><br><span class=\"line\">        this.advice = advice;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">        Object retVal = mi.proceed();</span><br><span class=\"line\">        this.advice.afterReturning(retVal, mi.getMethod(), mi.getArguments(), mi.getThis());</span><br><span class=\"line\">        <span class=\"built_in\">return</span> retVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Advice</code><strong>invoke</strong><strong></strong>invoke<strong></strong><strong>proceed</strong><strong>@After</strong>proceedAdviceinvoke<strong>proceed</strong><strong></strong><strong>proceed</strong>Adviceinvoke<strong>advice.afterReturning</strong><strong></strong></p>\n</li>\n</ol>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AOP<strong></strong><code>Creator</code><code>Creator</code><code>BeanPostProcessor</code>BeanCreator</p>\n<p><strong>AOP</strong>BeanBeanAdvisorAdvisorAdvisorBean</p>\n<p><strong></strong> JDKCGLIB</p>\n<p><strong>AOP</strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AdviceAOP</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>SpringBeanPostProcessorSpringAOPAOP</p>\n</blockquote>\n<p><img src=\"/images/spring_logo.jpg\" alt=\"Spring\"></p>\n<h3 id=\"1-AOP\"><a href=\"#1-AOP\" class=\"headerlink\" title=\"1.AOP\"></a>1.AOP</h3><p>AOP<strong></strong> OOP<strong></strong> <strong></strong><strong></strong><strong></strong><strong></strong>AOP<strong></strong></p>\n<p>Spring<strong>AOP</strong>SpringAOPSpring</p>\n<hr>\n<h3 id=\"2-AOP\"><a href=\"#2-AOP\" class=\"headerlink\" title=\"2.AOP\"></a>2.AOP</h3><p>AOPAOP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;aop:aspectj-autoproxy /&gt;</span><br></pre></td></tr></table></figure>\n<p>AOPaop</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xmlns:aop=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span><br></pre></td></tr></table></figure>\n<p><code>&lt;http://<a href=\"http://www.springframework.org/schema/aop\" target=\"_blank\" rel=\"noopener\">www.springframework.org/schema/aop</a>&gt;</code>http &quot; <strong>spring.handlers</strong>handler</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http\\://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler</span><br></pre></td></tr></table></figure>\n<p>handler</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AopNamespaceHandler extends NamespaceHandlerSupport &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  /**</span><br><span class=\"line\">   * Register the &#123;@link BeanDefinitionParser BeanDefinitionParsers&#125; <span class=\"keyword\">for</span> the</span><br><span class=\"line\">   * <span class=\"string\">'&#123;@code config&#125;'</span>, <span class=\"string\">'&#123;@code spring-configured&#125;'</span>, <span class=\"string\">'&#123;@code aspectj-autoproxy&#125;'</span></span><br><span class=\"line\">   * and <span class=\"string\">'&#123;@code scoped-proxy&#125;'</span> tags.</span><br><span class=\"line\">   */</span><br><span class=\"line\">  @Override</span><br><span class=\"line\">  public void <span class=\"function\"><span class=\"title\">init</span></span>() &#123;</span><br><span class=\"line\">    // In 2.0 XSD as well as <span class=\"keyword\">in</span> 2.1 XSD.</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"config\"</span>, new ConfigBeanDefinitionParser());</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"aspectj-autoproxy\"</span>, new AspectJAutoProxyBeanDefinitionParser());</span><br><span class=\"line\">    registerBeanDefinitionDecorator(<span class=\"string\">\"scoped-proxy\"</span>, new ScopedProxyBeanDefinitionDecorator());</span><br><span class=\"line\"></span><br><span class=\"line\">    // Only <span class=\"keyword\">in</span> 2.0 XSD: moved to context namespace as of 2.1</span><br><span class=\"line\">    registerBeanDefinitionParser(<span class=\"string\">\"spring-configured\"</span>, new SpringConfiguredBeanDefinitionParser());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aspectj-autoproxy</code>Parserinit<code>aspectj-autoproxy</code>Parser<code>AspectJAutoProxyBeanDefinitionParser</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">//parse</span><br><span class=\"line\">public BeanDefinition parse(Element element, ParserContext parserContext) &#123;</span><br><span class=\"line\">    //IOC</span><br><span class=\"line\">    AopNamespaceUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(parserContext, element);</span><br><span class=\"line\">    extendBeanDefinition(element, parserContext);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"3-AnnotationAwareAspectJAutoProxyCreator\"><a href=\"#3-AnnotationAwareAspectJAutoProxyCreator\" class=\"headerlink\" title=\"3.AnnotationAwareAspectJAutoProxyCreator\"></a>3.AnnotationAwareAspectJAutoProxyCreator</h3><p><code>AnnotationAwareAspectJAutoProxyCreator</code>AOP<br><img src=\"images/spring-aop1.png\" alt=\"spring\"><br><code>BeanPostProcessor</code>Bean<strong>postProcessAfterInitialization</strong><code>BeanFactorAware</code><code>BeanFactory</code><br></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void registerAspectJAnnotationAutoProxyCreatorIfNecessary(</span><br><span class=\"line\">    ParserContext parserContext, Element sourceElement) &#123;</span><br><span class=\"line\">//BeanIOC</span><br><span class=\"line\">    BeanDefinition beanDefinition = AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(</span><br><span class=\"line\">        parserContext.getRegistry(), parserContext.extractSource(sourceElement));</span><br><span class=\"line\">    //proxy-target-classexpose-proxy</span><br><span class=\"line\">    useClassProxyingIfNecessary(parserContext.getRegistry(), sourceElement);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    registerComponentIfNecessary(beanDefinition, parserContext);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3</p>\n<ol>\n<li><code>AnnotationAwareAspectJAutoProxyCreator</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">public static BeanDefinition registerAspectJAnnotationAutoProxyCreatorIfNecessary(BeanDefinitionRegistry registry,</span><br><span class=\"line\">                                                                                  @Nullable Object <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\">//AnnotationAwareAspectJAutoProxyCreatorIOC</span><br><span class=\"line\">    <span class=\"built_in\">return</span> registerOrEscalateApcAsRequired(AnnotationAwareAspectJAutoProxyCreator.class, registry, <span class=\"built_in\">source</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private static BeanDefinition registerOrEscalateApcAsRequired(Class&lt;?&gt; cls, BeanDefinitionRegistry registry,</span><br><span class=\"line\">                                                              @Nullable Object <span class=\"built_in\">source</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Assert.notNull(registry, <span class=\"string\">\"BeanDefinitionRegistry must not be null\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    //IOCBean</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanDefinition</span><br><span class=\"line\">        BeanDefinition apcDefinition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //BeanClassNameAnnotationAwareAspectJAutoProxyCreator</span><br><span class=\"line\">        //ClassName</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!cls.getName().equals(apcDefinition.getBeanClassName())) &#123;</span><br><span class=\"line\">            int currentPriority = findPriorityForClass(apcDefinition.getBeanClassName());</span><br><span class=\"line\">            int requiredPriority = findPriorityForClass(cls);</span><br><span class=\"line\">            //BeanCreator</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (currentPriority &lt; requiredPriority) &#123;</span><br><span class=\"line\">                //ClassNameCreator</span><br><span class=\"line\">                apcDefinition.setBeanClassName(cls.getName());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //IOCCreator</span><br><span class=\"line\">    //CrearirClassBeanDefinition</span><br><span class=\"line\">    RootBeanDefinition beanDefinition = new RootBeanDefinition(cls);</span><br><span class=\"line\">    beanDefinition.setSource(<span class=\"built_in\">source</span>);</span><br><span class=\"line\">    //order</span><br><span class=\"line\">    beanDefinition.getPropertyValues().add(<span class=\"string\">\"order\"</span>, Ordered.HIGHEST_PRECEDENCE);</span><br><span class=\"line\">    beanDefinition.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);</span><br><span class=\"line\">    //BeanDefinitionIOC</span><br><span class=\"line\">    registry.registerBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME, beanDefinition);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> beanDefinition;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><strong>proxy-target-class</strong><strong>expose-proxy</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private static void useClassProxyingIfNecessary(BeanDefinitionRegistry registry, @Nullable Element sourceElement) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sourceElement != null) &#123;</span><br><span class=\"line\">        boolean proxyTargetClass = Boolean.valueOf(sourceElement.getAttribute(PROXY_TARGET_CLASS_ATTRIBUTE));</span><br><span class=\"line\">        //proxy-target-class</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (proxyTargetClass) &#123;</span><br><span class=\"line\">            AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        boolean exposeProxy = Boolean.valueOf(sourceElement.getAttribute(EXPOSE_PROXY_ATTRIBUTE));</span><br><span class=\"line\">        //expose-proxy</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (exposeProxy) &#123;</span><br><span class=\"line\">            AopConfigUtils.forceAutoProxyCreatorToExposeProxy(registry);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static void forceAutoProxyCreatorToUseClassProxying(BeanDefinitionRegistry registry) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanNameCreator</span><br><span class=\"line\">        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //CreatorBeanDefinitionproxyTargetClass<span class=\"literal\">true</span></span><br><span class=\"line\">        definition.getPropertyValues().add(<span class=\"string\">\"proxyTargetClass\"</span>, Boolean.TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">public static void forceAutoProxyCreatorToExposeProxy(BeanDefinitionRegistry registry) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (registry.containsBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME)) &#123;</span><br><span class=\"line\">        //BeanNameCreator</span><br><span class=\"line\">        BeanDefinition definition = registry.getBeanDefinition(AUTO_PROXY_CREATOR_BEAN_NAME);</span><br><span class=\"line\">        //CreatorBeanDefinitionexposeProxy<span class=\"literal\">true</span></span><br><span class=\"line\">        definition.getPropertyValues().add(<span class=\"string\">\"exposeProxy\"</span>, Boolean.TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li><strong>proxy-target-class</strong>SpringAOP<strong>JDK</strong>AOP<strong>CGLib</strong>AOPAOPCGLibproxy-target-class<strong>true</strong></li>\n</ul>\n<p>1)<strong>final</strong>CGLibfinalfinalAOP<br>2)CGLibJAR</p>\n<ul>\n<li><strong>expose-proxy</strong>AB<strong>B</strong>AOPAOP<strong>expose-proxytrue</strong>AB<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Service&#123;</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">A</span></span>()&#123;</span><br><span class=\"line\">        ((Service)AopContext.currentProxy()).B();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">B</span></span>()&#123;</span><br><span class=\"line\">    //<span class=\"keyword\">do</span> something...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\nBAAOP<code>AopContext</code><strong>AOP</strong></li>\n</ul>\n<hr>\n<h3 id=\"4-AOP\"><a href=\"#4-AOP\" class=\"headerlink\" title=\"4.AOP\"></a>4.AOP</h3><h4 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h4><p><strong>Creator</strong><code>BeanPostProcessor</code>IOCBean<strong>postProcessAfterInitialization</strong>AOP<code>AbstractAutoProxyCreator</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object postProcessAfterInitialization(@Nullable Object bean, String beanName) throws BeansException &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bean != null) &#123;</span><br><span class=\"line\">        //KeyBeanClassbenaName</span><br><span class=\"line\">        Object cacheKey = getCacheKey(bean.getClass(), beanName);</span><br><span class=\"line\">        //BeanIOC</span><br><span class=\"line\">        //Bean</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!this.earlyProxyReferences.contains(cacheKey)) &#123;</span><br><span class=\"line\">            //AOP</span><br><span class=\"line\">            <span class=\"built_in\">return</span> wrapIfNecessary(bean, beanName, cacheKey);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (StringUtils.hasLength(beanName) &amp;&amp; this.targetSourcedBeans.contains(beanName)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //Bean</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Boolean.FALSE.equals(this.advisedBeans.get(cacheKey))) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //BeanAOP</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        this.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // Create proxy <span class=\"keyword\">if</span> we have advice.</span><br><span class=\"line\">    //Bean</span><br><span class=\"line\">    Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);</span><br><span class=\"line\">    //DO_NOT_PROXY</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (specificInterceptors != DO_NOT_PROXY) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        this.advisedBeans.put(cacheKey, Boolean.TRUE);</span><br><span class=\"line\">        //Bean</span><br><span class=\"line\">        Object proxy = createProxy(</span><br><span class=\"line\">            bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));</span><br><span class=\"line\">        this.proxyTypes.put(cacheKey, proxy.getClass());</span><br><span class=\"line\">        //BeanIOC</span><br><span class=\"line\">        <span class=\"built_in\">return</span> proxy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  //</span><br><span class=\"line\">    this.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> bean;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AOP</p>\n<ul>\n<li>Bean</li>\n<li>Bean</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">protected Object[] getAdvicesAndAdvisorsForBean(Class&lt;?&gt; beanClass, String beanName, @Nullable TargetSource targetSource) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = findEligibleAdvisors(beanClass, beanName);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisors.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> DO_NOT_PROXY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors.toArray();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Advisor</code>Advisor<strong>advise</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findEligibleAdvisors(Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors = findCandidateAdvisors();</span><br><span class=\"line\">    //AdvisorBeanAdvisor</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);</span><br><span class=\"line\">    extendAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!eligibleAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        eligibleAdvisors = sortAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p><code>Advisor</code><code>Creator</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    // Add all the Spring advisors found according to superclass rules.</span><br><span class=\"line\">    //findCandidateAdvisorsIOCAdvisorBean</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = super.findCandidateAdvisors();</span><br><span class=\"line\">    // Build Advisors <span class=\"keyword\">for</span> all AspectJ aspects <span class=\"keyword\">in</span> the bean factory.</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.aspectJAdvisorsBuilder != null) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findCandidateAdvisors</strong><code>Advisor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    Assert.state(this.advisorRetrievalHelper != null, <span class=\"string\">\"No BeanFactoryAdvisorRetrievalHelper available\"</span>);</span><br><span class=\"line\">    //Helper</span><br><span class=\"line\">    <span class=\"built_in\">return</span> this.advisorRetrievalHelper.findAdvisorBeans();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findAdvisorBeans</span></span>() &#123;</span><br><span class=\"line\">    // Determine list of advisor bean names, <span class=\"keyword\">if</span> not cached already.</span><br><span class=\"line\">    String[] advisorNames = null;</span><br><span class=\"line\">    synchronized (this) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        advisorNames = this.cachedAdvisorBeanNames;</span><br><span class=\"line\">        //IOC</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (advisorNames == null) &#123;</span><br><span class=\"line\">            // Do not initialize FactoryBeans here: We need to leave all regular beans</span><br><span class=\"line\">            // uninitialized to <span class=\"built_in\">let</span> the auto-proxy creator apply to them!</span><br><span class=\"line\">            //IOCAdvisorBeanName</span><br><span class=\"line\">            advisorNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(</span><br><span class=\"line\">                this.beanFactory, Advisor.class, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">            //</span><br><span class=\"line\">            this.cachedAdvisorBeanNames = advisorNames;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisorNames.length == 0) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new LinkedList&lt;&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //BeanName</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String name : advisorNames) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isEligibleBean(name)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.beanFactory.isCurrentlyInCreation(name)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">                    logger.debug(<span class=\"string\">\"Skipping currently created advisor '\"</span> + name + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    //BeanNameIOCBeanList</span><br><span class=\"line\">                    advisors.add(this.beanFactory.getBean(name, Advisor.class));</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                //catch ...</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>IOCAdvisorBeanAdvisor</strong>AOPAdvisorIOC</p>\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p>Advisor<code>AnnotationAwareAspectJAutoProxyCreatorS</code><strong>findCandidateAdvisors</strong> <code>BeanFactoryAspectJAdvisorsBuilder</code><strong>buildAspectJAdvisors</strong>Advisor</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">findCandidateAdvisors</span></span>() &#123;</span><br><span class=\"line\">    // Add all the Spring advisors found according to superclass rules.</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = super.findCandidateAdvisors();</span><br><span class=\"line\">    // Build Advisors <span class=\"keyword\">for</span> all AspectJ aspects <span class=\"keyword\">in</span> the bean factory.</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.aspectJAdvisorsBuilder != null) &#123;</span><br><span class=\"line\">        //BeanFactoryAspectJAdvisorsBuilderAdvisor</span><br><span class=\"line\">        advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public List&lt;Advisor&gt; <span class=\"function\"><span class=\"title\">buildAspectJAdvisors</span></span>() &#123;</span><br><span class=\"line\">    List&lt;String&gt; aspectNames = this.aspectBeanNames;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectNames == null) &#123;</span><br><span class=\"line\">        synchronized (this) &#123;</span><br><span class=\"line\">            aspectNames = this.aspectBeanNames;</span><br><span class=\"line\">            //</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (aspectNames == null) &#123;</span><br><span class=\"line\">                List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">                aspectNames = new LinkedList&lt;&gt;();</span><br><span class=\"line\">                //IOCBeanName</span><br><span class=\"line\">                String[] beanNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(</span><br><span class=\"line\">                    this.beanFactory, Object.class, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                //BeanName</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (String beanName : beanNames) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (!isEligibleBean(beanName)) &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    // We must be careful not to instantiate beans eagerly as <span class=\"keyword\">in</span> this <span class=\"keyword\">case</span> they</span><br><span class=\"line\">                    // would be cached by the Spring container but would not have been weaved.</span><br><span class=\"line\">                    Class&lt;?&gt; beanType = this.beanFactory.getType(beanName);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (beanType == null) &#123;</span><br><span class=\"line\">                        <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //Bean@Aspect</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (this.advisorFactory.isAspect(beanType)) &#123;</span><br><span class=\"line\">                        //Advisor</span><br><span class=\"line\">                        aspectNames.add(beanName);</span><br><span class=\"line\">                        AspectMetadata amd = new AspectMetadata(beanType, beanName);</span><br><span class=\"line\">                        //</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (amd.getAjType().getPerClause().getKind() == PerClauseKind.SINGLETON) &#123;</span><br><span class=\"line\">                            //</span><br><span class=\"line\">                            MetadataAwareAspectInstanceFactory factory =</span><br><span class=\"line\">                                new BeanFactoryAspectInstanceFactory(this.beanFactory, beanName);</span><br><span class=\"line\">                            //advisorFactoryAdvisor</span><br><span class=\"line\">                            List&lt;Advisor&gt; classAdvisors = this.advisorFactory.getAdvisors(factory);</span><br><span class=\"line\">                            //</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (this.beanFactory.isSingleton(beanName)) &#123;</span><br><span class=\"line\">                                this.advisorsCache.put(beanName, classAdvisors);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            //factoryfactory</span><br><span class=\"line\">                            //advisorFactoryAdvisorBeanfactory</span><br><span class=\"line\">                            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                                this.aspectFactoryCache.put(beanName, factory);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            advisors.addAll(classAdvisors);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            // Per target or per this.</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (this.beanFactory.isSingleton(beanName)) &#123;</span><br><span class=\"line\">                                throw new IllegalArgumentException(<span class=\"string\">\"Bean with name '\"</span> + beanName +</span><br><span class=\"line\">                                                                   <span class=\"string\">\"' is a singleton, but aspect instantiation model is not singleton\"</span>);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            MetadataAwareAspectInstanceFactory factory =</span><br><span class=\"line\">                                new PrototypeAspectInstanceFactory(this.beanFactory, beanName);</span><br><span class=\"line\">                            this.aspectFactoryCache.put(beanName, factory);</span><br><span class=\"line\">                            advisors.addAll(this.advisorFactory.getAdvisors(factory));</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                this.aspectBeanNames = aspectNames;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectNames.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Collections.emptyList();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String aspectName : aspectNames) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        List&lt;Advisor&gt; cachedAdvisors = this.advisorsCache.get(aspectName);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cachedAdvisors != null) &#123;</span><br><span class=\"line\">            advisors.addAll(cachedAdvisors);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //factory</span><br><span class=\"line\">        //factoryadvisorFactoryAdvisor</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            MetadataAwareAspectInstanceFactory factory = this.aspectFactoryCache.get(aspectName);</span><br><span class=\"line\">            advisors.addAll(this.advisorFactory.getAdvisors(factory));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> advisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Advisor</strong><strong>advisorFactory</strong><strong>Advisor</strong><code>ReflectiveAspectJAdvisorFactory</code><strong>getAdvisors</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public List&lt;Advisor&gt; getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt; aspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();</span><br><span class=\"line\">    //Name</span><br><span class=\"line\">    String aspectName = aspectInstanceFactory.getAspectMetadata().getAspectName();</span><br><span class=\"line\">    //</span><br><span class=\"line\">    validate(aspectClass);</span><br><span class=\"line\"></span><br><span class=\"line\">    // We need to wrap the MetadataAwareAspectInstanceFactory with a decorator</span><br><span class=\"line\">    // so that it will only instantiate once.</span><br><span class=\"line\">    MetadataAwareAspectInstanceFactory lazySingletonAspectInstanceFactory =</span><br><span class=\"line\">        new LazySingletonAspectInstanceFactoryDecorator(aspectInstanceFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Advisor&gt; advisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //@Pointcut</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Method method : getAdvisorMethods(aspectClass)) &#123;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, advisors.size(), aspectName);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (advisor != null) &#123;</span><br><span class=\"line\">            advisors.add(advisor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // If it<span class=\"string\">'s a per target aspect, emit the dummy instantiating aspect.</span></span><br><span class=\"line\"><span class=\"string\">    if (!advisors.isEmpty() &amp;&amp; lazySingletonAspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        Advisor instantiationAdvisor = new SyntheticInstantiationAdvisor(lazySingletonAspectInstanceFactory);</span></span><br><span class=\"line\"><span class=\"string\">        advisors.add(0, instantiationAdvisor);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    // Find introduction fields.</span></span><br><span class=\"line\"><span class=\"string\">    //DeclareParentsfiled</span></span><br><span class=\"line\"><span class=\"string\">    for (Field field : aspectClass.getDeclaredFields()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        Advisor advisor = getDeclareParentsAdvisor(field);</span></span><br><span class=\"line\"><span class=\"string\">        if (advisor != null) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            advisors.add(advisor);</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    return advisors;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li><strong>getAdvisorMethods</strong><code>AdvisorMethods</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private List&lt;Method&gt; getAdvisorMethods(Class&lt;?&gt; aspectClass) &#123;</span><br><span class=\"line\">    final List&lt;Method&gt; methods = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    ReflectionUtils.doWithMethods(aspectClass, method -&gt; &#123;</span><br><span class=\"line\">        // Exclude pointcuts</span><br><span class=\"line\">        //Pointcut</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (AnnotationUtils.getAnnotation(method, Pointcut.class) == null) &#123;</span><br><span class=\"line\">            methods.add(method);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    Collections.sort(methods, METHOD_COMPARATOR);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> methods;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<strong>PointcutAdvisorMethod</strong></li>\n<li><strong>getAdvisor</strong><code>Advisor</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Advisor getAdvisor(Method candidateAdviceMethod, MetadataAwareAspectInstanceFactory aspectInstanceFactory,</span><br><span class=\"line\">                          int declarationOrderInAspect, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    validate(aspectInstanceFactory.getAspectMetadata().getAspectClass());</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJExpressionPointcut expressionPointcut = getPointcut(</span><br><span class=\"line\">        candidateAdviceMethod, aspectInstanceFactory.getAspectMetadata().getAspectClass());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (expressionPointcut == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new InstantiationModelAwarePointcutAdvisorImpl(expressionPointcut, candidateAdviceMethod,</span><br><span class=\"line\">                                                          this, aspectInstanceFactory, declarationOrderInAspect, aspectName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li>getPointcut<strong></strong></li>\n<li>InstantiationModelAwarePointcutAdvisorImpl<strong></strong></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Advisor<strong>getPointcut</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private AspectJExpressionPointcut getPointcut(Method candidateAdviceMethod, Class&lt;?&gt; candidateAspectClass) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJAnnotation&lt;?&gt; aspectJAnnotation =</span><br><span class=\"line\">        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectJAnnotation == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJExpressionPointcut ajexp =</span><br><span class=\"line\">        new AspectJExpressionPointcut(candidateAspectClass, new String[0], new Class&lt;?&gt;[0]);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    //@Before<span class=\"string\">\"test()\"</span><span class=\"built_in\">test</span>()</span><br><span class=\"line\">    ajexp.setExpression(aspectJAnnotation.getPointcutExpression());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.beanFactory != null) &#123;</span><br><span class=\"line\">        ajexp.setBeanFactory(this.beanFactory);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> ajexp;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAspectJAnnotationOnMethod</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@SuppressWarnings(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">protected static AspectJAnnotation&lt;?&gt; findAspectJAnnotationOnMethod(Method method) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt;[] classesToLookFor = new Class&lt;?&gt;[] &#123;</span><br><span class=\"line\">        Before.class, Around.class, After.class, AfterReturning.class, AfterThrowing.class, Pointcut.class&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Class&lt;?&gt; c : classesToLookFor) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        AspectJAnnotation&lt;?&gt; foundAnnotation = findAnnotation(method, (Class&lt;Annotation&gt;) c);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (foundAnnotation != null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> foundAnnotation;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAnnotation </strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">private static &lt;A extends Annotation&gt; AspectJAnnotation&lt;A&gt; findAnnotation(Method method, Class&lt;A&gt; toLookFor) &#123;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    A result = AnnotationUtils.findAnnotation(method, toLookFor);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result != null) &#123;</span><br><span class=\"line\">        //AspectJAnnotation</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new AspectJAnnotation&lt;&gt;(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>@Before(test())<strong>test()</strong>AspectJAnnotation<strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public AspectJAnnotation(A annotation) &#123;</span><br><span class=\"line\">    this.annotation = annotation;</span><br><span class=\"line\">    this.annotationType = determineAnnotationType(annotation);</span><br><span class=\"line\">    // We know these methods exist with the same name on each object,</span><br><span class=\"line\">    // but need to invoke them reflectively as there isn<span class=\"string\">'t a common interface.</span></span><br><span class=\"line\"><span class=\"string\">    try &#123;</span></span><br><span class=\"line\"><span class=\"string\">        //pointcut</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcutExpression = resolveExpression(annotation);</span></span><br><span class=\"line\"><span class=\"string\">        this.argumentNames = (String) annotation.getClass().getMethod(\"argNames\").invoke(annotation);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    catch (Exception ex) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        throw new IllegalArgumentException(annotation + \" cannot be an AspectJ annotation\", ex);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private String resolveExpression(A annotation) throws Exception &#123;</span><br><span class=\"line\">    //valuepointcut</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String methodName : EXPRESSION_PROPERTIES) &#123;</span><br><span class=\"line\">        Method method;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            //method</span><br><span class=\"line\">            method = annotation.getClass().getDeclaredMethod(methodName);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        catch (NoSuchMethodException ex) &#123;</span><br><span class=\"line\">            method = null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (method != null) &#123;</span><br><span class=\"line\">            //@Before(<span class=\"string\">\"test()\"</span>)</span><br><span class=\"line\">            //<span class=\"string\">\"test()\"</span></span><br><span class=\"line\">            String candidate = (String) method.invoke(annotation);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(candidate)) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> candidate;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    throw new IllegalStateException(<span class=\"string\">\"Failed to resolve expression: \"</span> + annotation);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Advisor\"><a href=\"#Advisor\" class=\"headerlink\" title=\"Advisor\"></a>Advisor</h5><p><code>InstantiationModelAwarePointcutAdvisorImpl</code><code>Advisor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public InstantiationModelAwarePointcutAdvisorImpl(AspectJExpressionPointcut declaredPointcut,</span><br><span class=\"line\">                                                  Method aspectJAdviceMethod, AspectJAdvisorFactory aspectJAdvisorFactory,</span><br><span class=\"line\">                                                  MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    this.declaredPointcut = declaredPointcut;</span><br><span class=\"line\">    this.declaringClass = aspectJAdviceMethod.getDeclaringClass();</span><br><span class=\"line\">    this.methodName = aspectJAdviceMethod.getName();</span><br><span class=\"line\">    this.parameterTypes = aspectJAdviceMethod.getParameterTypes();</span><br><span class=\"line\">    this.aspectJAdviceMethod = aspectJAdviceMethod;</span><br><span class=\"line\">    this.aspectJAdvisorFactory = aspectJAdvisorFactory;</span><br><span class=\"line\">    this.aspectInstanceFactory = aspectInstanceFactory;</span><br><span class=\"line\">    this.declarationOrder = declarationOrder;</span><br><span class=\"line\">    this.aspectName = aspectName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectInstanceFactory.getAspectMetadata().isLazilyInstantiated()) &#123;</span><br><span class=\"line\">        // Static part of the pointcut is a lazy <span class=\"built_in\">type</span>.</span><br><span class=\"line\">        Pointcut preInstantiationPointcut = Pointcuts.union(</span><br><span class=\"line\">            aspectInstanceFactory.getAspectMetadata().getPerClausePointcut(), this.declaredPointcut);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Make it dynamic: must mutate from pre-instantiation to post-instantiation state.</span><br><span class=\"line\">        // If it<span class=\"string\">'s not a dynamic pointcut, it may be optimized out</span></span><br><span class=\"line\"><span class=\"string\">        // by the Spring AOP infrastructure after the first evaluation.</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcut = new PerTargetInstantiationModelPointcut(</span></span><br><span class=\"line\"><span class=\"string\">            this.declaredPointcut, preInstantiationPointcut, aspectInstanceFactory);</span></span><br><span class=\"line\"><span class=\"string\">        this.lazy = true;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    else &#123;</span></span><br><span class=\"line\"><span class=\"string\">        // A singleton aspect.</span></span><br><span class=\"line\"><span class=\"string\">        this.pointcut = this.declaredPointcut;</span></span><br><span class=\"line\"><span class=\"string\">        this.lazy = false;</span></span><br><span class=\"line\"><span class=\"string\">        //AdviceinstantiatedAdvice</span></span><br><span class=\"line\"><span class=\"string\">        this.instantiatedAdvice = instantiateAdvice(this.declaredPointcut);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong></strong><strong>instantiateAdvice</strong><strong>Advise</strong>@Before@AfterAdvice<strong></strong>Advice</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">private Advice instantiateAdvice(AspectJExpressionPointcut pointcut) &#123;</span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    Advice advice = this.aspectJAdvisorFactory.getAdvice(this.aspectJAdviceMethod, pointcut,</span><br><span class=\"line\">                                                         this.aspectInstanceFactory, this.declarationOrder, this.aspectName);</span><br><span class=\"line\">    <span class=\"built_in\">return</span> (advice != null ? advice : EMPTY_ADVICE);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aspectJAdvisorFactory</code>Advice</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Advice getAdvice(Method candidateAdviceMethod, AspectJExpressionPointcut expressionPointcut,</span><br><span class=\"line\">                        MetadataAwareAspectInstanceFactory aspectInstanceFactory, int declarationOrder, String aspectName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt; candidateAspectClass = aspectInstanceFactory.getAspectMetadata().getAspectClass();</span><br><span class=\"line\">    validate(candidateAspectClass);</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    AspectJAnnotation&lt;?&gt; aspectJAnnotation =</span><br><span class=\"line\">        AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aspectJAnnotation == null) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // If we get here, we know we have an AspectJ method.</span><br><span class=\"line\">    // Check that its an AspectJ-annotated class</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isAspect(candidateAspectClass)) &#123;</span><br><span class=\"line\">        throw new AopConfigException(<span class=\"string\">\"Advice must be declared inside an aspect type: \"</span> +</span><br><span class=\"line\">                                     <span class=\"string\">\"Offending method '\"</span> + candidateAdviceMethod + <span class=\"string\">\"' in class [\"</span> +</span><br><span class=\"line\">                                     candidateAspectClass.getName() + <span class=\"string\">\"]\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">        logger.debug(<span class=\"string\">\"Found AspectJ method: \"</span> + candidateAdviceMethod);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    AbstractAspectJAdvice springAdvice;</span><br><span class=\"line\"></span><br><span class=\"line\">    //swich</span><br><span class=\"line\">    switch (aspectJAnnotation.getAnnotationType()) &#123;</span><br><span class=\"line\">            //@Before</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtBefore:</span><br><span class=\"line\">            springAdvice = new AspectJMethodBeforeAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@After</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfter:</span><br><span class=\"line\">            springAdvice = new AspectJAfterAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@AfterReturning</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfterReturning:</span><br><span class=\"line\">            springAdvice = new AspectJAfterReturningAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            AfterReturning afterReturningAnnotation = (AfterReturning) aspectJAnnotation.getAnnotation();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(afterReturningAnnotation.returning())) &#123;</span><br><span class=\"line\">                springAdvice.setReturningName(afterReturningAnnotation.returning());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@AfterThrowing</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAfterThrowing:</span><br><span class=\"line\">            springAdvice = new AspectJAfterThrowingAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            AfterThrowing afterThrowingAnnotation = (AfterThrowing) aspectJAnnotation.getAnnotation();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (StringUtils.hasText(afterThrowingAnnotation.throwing())) &#123;</span><br><span class=\"line\">                springAdvice.setThrowingName(afterThrowingAnnotation.throwing());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@Around</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtAround:</span><br><span class=\"line\">            springAdvice = new AspectJAroundAdvice(</span><br><span class=\"line\">                candidateAdviceMethod, expressionPointcut, aspectInstanceFactory);</span><br><span class=\"line\">            <span class=\"built_in\">break</span>;</span><br><span class=\"line\">            //@Pointcut</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AtPointcut:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">                logger.debug(<span class=\"string\">\"Processing pointcut '\"</span> + candidateAdviceMethod.getName() + <span class=\"string\">\"'\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> null;</span><br><span class=\"line\">        default:</span><br><span class=\"line\">            throw new UnsupportedOperationException(</span><br><span class=\"line\">                <span class=\"string\">\"Unsupported advice type on method: \"</span> + candidateAdviceMethod);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    // Now to configure the advice...</span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    springAdvice.setAspectName(aspectName);</span><br><span class=\"line\">    springAdvice.setDeclarationOrder(declarationOrder);</span><br><span class=\"line\">    String[] argNames = this.parameterNameDiscoverer.getParameterNames(candidateAdviceMethod);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (argNames != null) &#123;</span><br><span class=\"line\">        springAdvice.setArgumentNamesFromStringArray(argNames);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    springAdvice.calculateArgumentBindings();</span><br><span class=\"line\">    <span class=\"built_in\">return</span> springAdvice;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Adviceadvice<strong>Advisoradvice</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><strong></strong><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findEligibleAdvisors(Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    //4.2</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors = findCandidateAdvisors();</span><br><span class=\"line\">    //AdvisorBeanAdvisor</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = findAdvisorsThatCanApply(candidateAdvisors, beanClass, beanName);</span><br><span class=\"line\">    extendAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!eligibleAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        eligibleAdvisors = sortAdvisors(eligibleAdvisors);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>findAdvisorsThatCanApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected List&lt;Advisor&gt; findAdvisorsThatCanApply(</span><br><span class=\"line\">    List&lt;Advisor&gt; candidateAdvisors, Class&lt;?&gt; beanClass, String beanName) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    ProxyCreationContext.setCurrentProxiedBeanName(beanName);</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        //AopUtils</span><br><span class=\"line\">        <span class=\"built_in\">return</span> AopUtils.findAdvisorsThatCanApply(candidateAdvisors, beanClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    finally &#123;</span><br><span class=\"line\">        ProxyCreationContext.setCurrentProxiedBeanName(null);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>AopUtils</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static List&lt;Advisor&gt; findAdvisorsThatCanApply(List&lt;Advisor&gt; candidateAdvisors, Class&lt;?&gt; clazz) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (candidateAdvisors.isEmpty()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> candidateAdvisors;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    List&lt;Advisor&gt; eligibleAdvisors = new LinkedList&lt;&gt;();</span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Advisor candidate : candidateAdvisors) &#123;</span><br><span class=\"line\">        //AdvisorBean</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidate instanceof IntroductionAdvisor &amp;&amp; canApply(candidate, clazz)) &#123;</span><br><span class=\"line\">            //List</span><br><span class=\"line\">            eligibleAdvisors.add(candidate);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    boolean hasIntroductions = !eligibleAdvisors.isEmpty();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Advisor candidate : candidateAdvisors) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidate instanceof IntroductionAdvisor) &#123;</span><br><span class=\"line\">            // already processed</span><br><span class=\"line\">            //</span><br><span class=\"line\">            <span class=\"built_in\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //Advisor</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (canApply(candidate, clazz, hasIntroductions)) &#123;</span><br><span class=\"line\">            //List</span><br><span class=\"line\">            eligibleAdvisors.add(candidate);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //Advisor List</span><br><span class=\"line\">    <span class=\"built_in\">return</span> eligibleAdvisors;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>canApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static boolean canApply(Advisor advisor, Class&lt;?&gt; targetClass, boolean hasIntroductions) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisor instanceof IntroductionAdvisor) &#123;</span><br><span class=\"line\">        //ClassFilterBean</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ((IntroductionAdvisor) advisor).getClassFilter().matches(targetClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (advisor instanceof PointcutAdvisor) &#123;</span><br><span class=\"line\">        //AdvisorPointcutAdvisor</span><br><span class=\"line\">        //PointcutAdvisorgetPointcut</span><br><span class=\"line\">        PointcutAdvisor pca = (PointcutAdvisor) advisor;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"built_in\">return</span> canApply(pca.getPointcut(), targetClass, hasIntroductions);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        // It doesn<span class=\"string\">'t have a pointcut so we assume it applies.</span></span><br><span class=\"line\"><span class=\"string\">        //</span></span><br><span class=\"line\"><span class=\"string\">        return true;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>Advisor<strong>canApply</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static boolean canApply(Pointcut pc, Class&lt;?&gt; targetClass, boolean hasIntroductions) &#123;</span><br><span class=\"line\">    Assert.notNull(pc, <span class=\"string\">\"Pointcut must not be null\"</span>);</span><br><span class=\"line\">    //<span class=\"literal\">false</span></span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!pc.getClassFilter().matches(targetClass)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    MethodMatcher methodMatcher = pc.getMethodMatcher();</span><br><span class=\"line\">    //methodMatcherMethodMatcher.TRUE<span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (methodMatcher == MethodMatcher.TRUE) &#123;</span><br><span class=\"line\">        // No need to iterate the methods <span class=\"keyword\">if</span> were matching any method anyway...</span><br><span class=\"line\">        <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    IntroductionAwareMethodMatcher introductionAwareMethodMatcher = null;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (methodMatcher instanceof IntroductionAwareMethodMatcher) &#123;</span><br><span class=\"line\">        introductionAwareMethodMatcher = (IntroductionAwareMethodMatcher) methodMatcher;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    Set&lt;Class&lt;?&gt;&gt; classes = new LinkedHashSet&lt;&gt;(ClassUtils.getAllInterfacesForClassAsSet(targetClass));</span><br><span class=\"line\">    //</span><br><span class=\"line\">    classes.add(targetClass);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Class&lt;?&gt; clazz : classes) &#123;</span><br><span class=\"line\">        //class</span><br><span class=\"line\">        Method[] methods = ReflectionUtils.getAllDeclaredMethods(clazz);</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Method method : methods) &#123;</span><br><span class=\"line\">            //<span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((introductionAwareMethodMatcher != null &amp;&amp;</span><br><span class=\"line\">                 introductionAwareMethodMatcher.matches(method, targetClass, hasIntroductions)) ||</span><br><span class=\"line\">                methodMatcher.matches(method, targetClass)) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>Bean<strong></strong><strong>Advisor</strong>Advisor<strong>Bean</strong><strong>AdvisorAdvisors</strong>BeanAdvisorBeanAdvisorAdvisorAdvisoradvice@BeforeAdvisorAdvisor</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"JDKCGLIB\"><a href=\"#JDKCGLIB\" class=\"headerlink\" title=\"JDKCGLIB\"></a>JDKCGLIB</h5><p>4.1<strong>wrapIfNecessary</strong>Bean<strong>getAdvicesAndAdvisorsForBean</strong>Advisor<strong>createProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected Object createProxy(Class&lt;?&gt; beanClass, @Nullable String beanName,</span><br><span class=\"line\">                             @Nullable Object[] specificInterceptors, TargetSource targetSource) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.beanFactory instanceof ConfigurableListableBeanFactory) &#123;</span><br><span class=\"line\">        AutoProxyUtils.exposeTargetClass((ConfigurableListableBeanFactory) this.beanFactory, beanName, beanClass);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ProxyFactory proxyFactory = new ProxyFactory();</span><br><span class=\"line\">    //CreatorproxyTargetClassexposeProxy</span><br><span class=\"line\">    proxyFactory.copyFrom(this);</span><br><span class=\"line\"></span><br><span class=\"line\">    //proxyTargetClass<span class=\"literal\">false</span></span><br><span class=\"line\">    //proxyTargetClass<span class=\"literal\">true</span>CGLib</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!proxyFactory.isProxyTargetClass()) &#123;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (shouldProxyTargetClass(beanClass, beanName)) &#123;</span><br><span class=\"line\">            //CGLib</span><br><span class=\"line\">            proxyFactory.setProxyTargetClass(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //proxyFactory</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            evaluateProxyInterfaces(beanClass, proxyFactory);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //Advisor</span><br><span class=\"line\">    Advisor[] advisors = buildAdvisors(beanName, specificInterceptors);</span><br><span class=\"line\">    //AdvisorsproxyFactory</span><br><span class=\"line\">    proxyFactory.addAdvisors(advisors);</span><br><span class=\"line\">    //BeanproxyFactory</span><br><span class=\"line\">    proxyFactory.setTargetSource(targetSource);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    customizeProxyFactory(proxyFactory);</span><br><span class=\"line\"></span><br><span class=\"line\">    proxyFactory.setFrozen(this.freezeProxy);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (advisorsPreFiltered()) &#123;</span><br><span class=\"line\">        proxyFactory.setPreFiltered(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //proxyFactory</span><br><span class=\"line\">    <span class=\"built_in\">return</span> proxyFactory.getProxy(getProxyClassLoader());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>proxyFactory</code><code>proxyFactory</code><strong>getProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> createAopProxy().getProxy(classLoader);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected final synchronized AopProxy <span class=\"function\"><span class=\"title\">createAopProxy</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!this.active) &#123;</span><br><span class=\"line\">        activate();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //aopProxyFactory</span><br><span class=\"line\">    <span class=\"built_in\">return</span> getAopProxyFactory().createAopProxy(this);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>aopProxyFactory</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"function\"><span class=\"title\">ProxyCreatorSupport</span></span>() &#123;</span><br><span class=\"line\">    this.aopProxyFactory = new DefaultAopProxyFactory();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>createAopProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException &#123;</span><br><span class=\"line\">    //ProxyTargetClass</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) &#123;</span><br><span class=\"line\">        Class&lt;?&gt; targetClass = config.getTargetClass();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (targetClass == null) &#123;</span><br><span class=\"line\">            throw new AopConfigException(<span class=\"string\">\"TargetSource cannot determine target class: \"</span> +</span><br><span class=\"line\">                                         <span class=\"string\">\"Either an interface or a target is required for proxy creation.\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> new JdkDynamicAopProxy(config);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new ObjenesisCglibAopProxy(config);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> new JdkDynamicAopProxy(config);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>configproxyFactoryAdvisor</p>\n</blockquote>\n<p><strong></strong></p>\n<ul>\n<li>optimizeCGLibJDKCGLib</li>\n<li>proxyTargetClasstrueCGLib</li>\n<li>hasNoUserSuppliedProxyInterfaces</li>\n</ul>\n<p>JDKCGLIB</p>\n<ul>\n<li>JDK</li>\n<li>proxyTargetClassCGLIB</li>\n<li>CGLIB</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> createAopProxy().getProxy(classLoader);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>createAopProxy</strong>JDKJDK<strong>getProxy</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object getProxy(@Nullable ClassLoader classLoader) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class=\"line\">        logger.debug(<span class=\"string\">\"Creating JDK dynamic proxy: target source is \"</span> + this.advised.getTargetSource());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //</span><br><span class=\"line\">    Class&lt;?&gt;[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(this.advised, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    //equalshashCode</span><br><span class=\"line\">    findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);</span><br><span class=\"line\">    //</span><br><span class=\"line\">    <span class=\"built_in\">return</span> Proxy.newProxyInstance(classLoader, proxiedInterfaces, this);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>advised</code><code>config</code><code>proxyFactory</code><strong>Advisor</strong></p>\n<p><code>InvocationHandler</code><strong>invoke</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class=\"line\">    MethodInvocation invocation;</span><br><span class=\"line\">    Object oldProxy = null;</span><br><span class=\"line\">    boolean setProxyContext = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    //</span><br><span class=\"line\">    TargetSource targetSource = this.advised.targetSource;</span><br><span class=\"line\">    Object target = null;</span><br><span class=\"line\"></span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        //eqauls()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!this.equalsDefined &amp;&amp; AopUtils.isEqualsMethod(method)) &#123;</span><br><span class=\"line\">            // The target does not implement the equals(Object) method itself.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> equals(args[0]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //hashCode()</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.hashCodeDefined &amp;&amp; AopUtils.isHashCodeMethod(method)) &#123;</span><br><span class=\"line\">            // The target does not implement the hashCode() method itself.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> hashCode();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (method.getDeclaringClass() == DecoratingProxy.class) &#123;</span><br><span class=\"line\">            // There is only getDecoratedClass() declared -&gt; dispatch to proxy config.</span><br><span class=\"line\">            <span class=\"built_in\">return</span> AopProxyUtils.ultimateTargetClass(this.advised);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //Advised,,</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!this.advised.opaque &amp;&amp; method.getDeclaringClass().isInterface() &amp;&amp;</span><br><span class=\"line\">                 method.getDeclaringClass().isAssignableFrom(Advised.class)) &#123;</span><br><span class=\"line\">            // Service invocations on ProxyConfig with the proxy config...</span><br><span class=\"line\">            <span class=\"built_in\">return</span> AopUtils.invokeJoinpointUsingReflection(this.advised, method, args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Object retVal;</span><br><span class=\"line\"></span><br><span class=\"line\">        //exposeProxy<span class=\"literal\">true</span>proxy</span><br><span class=\"line\">        //AOP</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (this.advised.exposeProxy) &#123;</span><br><span class=\"line\">            // Make invocation available <span class=\"keyword\">if</span> necessary.</span><br><span class=\"line\">            oldProxy = AopContext.setCurrentProxy(proxy);</span><br><span class=\"line\">            setProxyContext = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        // Get as late as possible to minimize the time we <span class=\"string\">\"own\"</span> the target,</span><br><span class=\"line\">        // <span class=\"keyword\">in</span> <span class=\"keyword\">case</span> it comes from a pool.</span><br><span class=\"line\">        //</span><br><span class=\"line\">        target = targetSource.getTarget();</span><br><span class=\"line\">        Class&lt;?&gt; targetClass = (target != null ? target.getClass() : null);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Get the interception chain <span class=\"keyword\">for</span> this method.</span><br><span class=\"line\">        //Interceptor</span><br><span class=\"line\">        List&lt;Object&gt; chain = this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);</span><br><span class=\"line\"></span><br><span class=\"line\">        // Check whether we have any advice. If we don<span class=\"string\">'t, we can fallback on direct</span></span><br><span class=\"line\"><span class=\"string\">        // reflective invocation of the target, and avoid creating a MethodInvocation.</span></span><br><span class=\"line\"><span class=\"string\">        //(Interceptor) method.invoke(target, args)</span></span><br><span class=\"line\"><span class=\"string\">        if (chain.isEmpty()) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // We can skip creating a MethodInvocation: just invoke the target directly</span></span><br><span class=\"line\"><span class=\"string\">            // Note that the final invoker must be an InvokerInterceptor so we know it does</span></span><br><span class=\"line\"><span class=\"string\">            // nothing but a reflective operation on the target, and no hot swapping or fancy proxying.</span></span><br><span class=\"line\"><span class=\"string\">            Object[] argsToUse = AopProxyUtils.adaptArgumentsIfNecessary(method, args);</span></span><br><span class=\"line\"><span class=\"string\">            retVal = AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse);</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        else &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // We need to create a method invocation...</span></span><br><span class=\"line\"><span class=\"string\">            //MethodInvocation</span></span><br><span class=\"line\"><span class=\"string\">            //proceed</span></span><br><span class=\"line\"><span class=\"string\">            invocation = new ReflectiveMethodInvocation(proxy, target, method, args, targetClass, chain);</span></span><br><span class=\"line\"><span class=\"string\">            // Proceed to the joinpoint through the interceptor chain.</span></span><br><span class=\"line\"><span class=\"string\">            retVal = invocation.proceed();</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        // Massage return value if necessary.</span></span><br><span class=\"line\"><span class=\"string\">        Class&lt;?&gt; returnType = method.getReturnType();</span></span><br><span class=\"line\"><span class=\"string\">        if (retVal != null &amp;&amp; retVal == target &amp;&amp;</span></span><br><span class=\"line\"><span class=\"string\">            returnType != Object.class &amp;&amp; returnType.isInstance(proxy) &amp;&amp;</span></span><br><span class=\"line\"><span class=\"string\">            !RawTargetAccess.class.isAssignableFrom(method.getDeclaringClass())) &#123;</span></span><br><span class=\"line\"><span class=\"string\">            // Special case: it returned \"this\" and the return type of the method</span></span><br><span class=\"line\"><span class=\"string\">            // is type-compatible. Note that we can'</span>t <span class=\"built_in\">help</span> <span class=\"keyword\">if</span> the target sets</span><br><span class=\"line\">            // a reference to itself <span class=\"keyword\">in</span> another returned object.</span><br><span class=\"line\">            retVal = proxy;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (retVal == null &amp;&amp; returnType != Void.TYPE &amp;&amp; returnType.isPrimitive()) &#123;</span><br><span class=\"line\">            throw new AopInvocationException(</span><br><span class=\"line\">                <span class=\"string\">\"Null return value from advice does not match primitive return type for: \"</span> + method);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> retVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    finally &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target != null &amp;&amp; !targetSource.isStatic()) &#123;</span><br><span class=\"line\">            // Must have come from TargetSource.</span><br><span class=\"line\">            targetSource.releaseTarget(target);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (setProxyContext) &#123;</span><br><span class=\"line\">            // Restore old proxy.</span><br><span class=\"line\">            AopContext.setCurrentProxy(oldProxy);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li><strong>equalshashCodeAdvised</strong></li>\n<li><strong></strong>AopContextABBBBAOPBBBAOPAopContextBBAOPAopContext</li>\n<li><strong></strong><code>advised</code><strong></strong><strong></strong><strong>AOP</strong><strong></strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AOP</li>\n</ol>\n<h4 id=\"AOP\"><a href=\"#AOP\" class=\"headerlink\" title=\"AOP\"></a>AOP</h4><p><strong>BeanIOC</strong>BeanAOP<strong></strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AOP</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//-1</span><br><span class=\"line\">private int currentInterceptorIndex = -1;</span><br><span class=\"line\"></span><br><span class=\"line\">//interceptors</span><br><span class=\"line\">protected final List&lt;?&gt; interceptorsAndDynamicMethodMatchers;</span><br><span class=\"line\"></span><br><span class=\"line\">@Override</span><br><span class=\"line\">@Nullable</span><br><span class=\"line\">public Object proceed() throws Throwable &#123;</span><br><span class=\"line\">    //  We start with an index of -1 and increment early.</span><br><span class=\"line\">    //InterceptorjoinPoint</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> invokeJoinpoint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //Advice</span><br><span class=\"line\">    Object interceptorOrInterceptionAdvice =</span><br><span class=\"line\">        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);</span><br><span class=\"line\">    //joinPoint</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (interceptorOrInterceptionAdvice instanceof InterceptorAndDynamicMethodMatcher) &#123;</span><br><span class=\"line\">        // Evaluate dynamic method matcher here: static part will already have</span><br><span class=\"line\">        // been evaluated and found to match.</span><br><span class=\"line\">        InterceptorAndDynamicMethodMatcher dm =</span><br><span class=\"line\">            (InterceptorAndDynamicMethodMatcher) interceptorOrInterceptionAdvice;</span><br><span class=\"line\">        //</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (dm.methodMatcher.matches(this.method, this.targetClass, this.arguments)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> dm.interceptor.invoke(this);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            // Dynamic matching failed.</span><br><span class=\"line\">            // Skip this interceptor and invoke the next <span class=\"keyword\">in</span> the chain.</span><br><span class=\"line\">            //,Intercetpor,Interceptor</span><br><span class=\"line\">            <span class=\"built_in\">return</span> proceed();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        // Its an interceptor, so we just invoke it: The pointcut will have</span><br><span class=\"line\">        // been evaluated statically before this object was constructed.</span><br><span class=\"line\">        //IntercetporAdvice</span><br><span class=\"line\">        //this</span><br><span class=\"line\">        <span class=\"built_in\">return</span> ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(this);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><p><strong>currentInterceptorIndex</strong>-1<strong>interceptorsAndDynamicMethodMatchers</strong>size11-1<strong>invokeJoinpoint</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Object interceptorOrInterceptionAdvice =</span><br><span class=\"line\">        this.interceptorsAndDynamicMethodMatchers.get(++this.currentInterceptorIndex);</span><br></pre></td></tr></table></figure>\n<p><strong>currentInterceptorIndex</strong>00Advice<strong>invoke</strong>BeforeAdvice<strong>invoke</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">    this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );</span><br><span class=\"line\">    <span class=\"built_in\">return</span> mi.proceed();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>mi</code><code>this</code><code>ReflectiveMethodInvocation</code><code>ReflectiveMethodInvocation</code><strong>proceed</strong><strong>proceed</strong>0<strong>currentInterceptorIndex=0,interceptorsAndDynamicMethodMatchers.size() - 1 = 0</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (this.currentInterceptorIndex == this.interceptorsAndDynamicMethodMatchers.size() - 1) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> invokeJoinpoint();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>invokeJoinpoint</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Nullable</span><br><span class=\"line\">protected Object invokeJoinpoint() throws Throwable &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> AopUtils.invokeJoinpointUsingReflection(this.target, this.method, this.arguments);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><strong>proceed</strong></p>\n</li>\n<li><p><strong>@BeforeAdviceinvoke@AfterAdvice </strong><br>1) <code>MethodBeforeAdviceInterceptor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MethodBeforeAdviceInterceptor implements MethodInterceptor, Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private MethodBeforeAdvice advice;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">   * Create a new MethodBeforeAdviceInterceptor <span class=\"keyword\">for</span> the given advice.</span><br><span class=\"line\">   * @param advice the MethodBeforeAdvice to wrap</span><br><span class=\"line\">   */</span><br><span class=\"line\">    //advice</span><br><span class=\"line\">    public MethodBeforeAdviceInterceptor(MethodBeforeAdvice advice) &#123;</span><br><span class=\"line\">        Assert.notNull(advice, <span class=\"string\">\"Advice must not be null\"</span>);</span><br><span class=\"line\">        this.advice = advice;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">        this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis() );</span><br><span class=\"line\">        <span class=\"built_in\">return</span> mi.proceed();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2)<code>AfterReturningAdviceInterceptor</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AfterReturningAdviceInterceptor implements MethodInterceptor, AfterAdvice, Serializable &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private final AfterReturningAdvice advice;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">   * Create a new AfterReturningAdviceInterceptor <span class=\"keyword\">for</span> the given advice.</span><br><span class=\"line\">   * @param advice the AfterReturningAdvice to wrap</span><br><span class=\"line\">   */</span><br><span class=\"line\">    public AfterReturningAdviceInterceptor(AfterReturningAdvice advice) &#123;</span><br><span class=\"line\">        Assert.notNull(advice, <span class=\"string\">\"Advice must not be null\"</span>);</span><br><span class=\"line\">        this.advice = advice;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public Object invoke(MethodInvocation mi) throws Throwable &#123;</span><br><span class=\"line\">        Object retVal = mi.proceed();</span><br><span class=\"line\">        this.advice.afterReturning(retVal, mi.getMethod(), mi.getArguments(), mi.getThis());</span><br><span class=\"line\">        <span class=\"built_in\">return</span> retVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Advice</code><strong>invoke</strong><strong></strong>invoke<strong></strong><strong>proceed</strong><strong>@After</strong>proceedAdviceinvoke<strong>proceed</strong><strong></strong><strong>proceed</strong>Adviceinvoke<strong>advice.afterReturning</strong><strong></strong></p>\n</li>\n</ol>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AOP<strong></strong><code>Creator</code><code>Creator</code><code>BeanPostProcessor</code>BeanCreator</p>\n<p><strong>AOP</strong>BeanBeanAdvisorAdvisorAdvisorBean</p>\n<p><strong></strong> JDKCGLIB</p>\n<p><strong>AOP</strong><code>ReflectiveMethodInvocation</code><strong>proceed</strong>AdviceAOP</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ck529vsji0000be6kcklmdvfk","category_id":"ck4seojjv0001h7s67lt40541","_id":"ck529vsjz0003be6k8im7aw69"},{"post_id":"ck529vslf0004be6k1b8954cs","category_id":"ck4seojjv0001h7s67lt40541","_id":"ck529vslj0007be6k1tf2dsnz"},{"post_id":"ck57xfme50000d36kef11hpp8","category_id":"ck57xfmeb0001d36kf2xdg6sh","_id":"ck57xfmee0004d36keddvfi4r"},{"post_id":"ck6i13ob40000jns6gz7mgozn","category_id":"ck6i12sa90000iws60f4bhmz8","_id":"ck6i13ob80003jns61y0aex7i"},{"post_id":"ck6i8hlnq0000tks60gd499cg","category_id":"ck51vzg8z0001f96k47kf92dq","_id":"ck6i8hlo70004tks6g8hr1fuk"},{"post_id":"ck6i8hlo10001tks69xdqdx5y","category_id":"ck51vzg8z0001f96k47kf92dq","_id":"ck6i8hlo70005tks6ckfrfmld"},{"post_id":"ck6ivxamv0000n8s6a1re1k3g","category_id":"ck51vzg8z0001f96k47kf92dq","_id":"ck6ivxan40002n8s6fejxh2u8"},{"post_id":"ck6iw57kg0000ozs63qqa3d4k","category_id":"ck51vzg8z0001f96k47kf92dq","_id":"ck6iw57km0002ozs6hgu11g6s"},{"post_id":"ck6jadwgy0000gus642mv2prr","category_id":"ck6i12sa90000iws60f4bhmz8","_id":"ck6jadwh50003gus64dfw89q2"},{"post_id":"ck6jmftg20000sgs6bses2hfq","category_id":"ck6i12sa90000iws60f4bhmz8","_id":"ck6jmftg80003sgs650fgd9qq"},{"post_id":"ck6kiel0d0000eys6hx1edm7a","category_id":"ck6kiel0p0001eys69rx74l14","_id":"ck6kiel0t0004eys660f1f6bu"},{"post_id":"ck6kroww40000k5s67wajeknm","category_id":"ck6krowwc0001k5s65d5lar0s","_id":"ck6krowwh0004k5s6aqg5deu3"},{"post_id":"ck6ksnjp70000r3s61a960tn3","category_id":"ck6ksnjpc0001r3s68rx01zen","_id":"ck6ksnjpg0004r3s6b1j9g89d"},{"post_id":"ck6td8ged0000f8s63nte520m","category_id":"ck6td8gei0001f8s65gks78o1","_id":"ck6td8gel0004f8s67u0ldn9a"},{"post_id":"ck6w88hgm0000pos68yi7dcp4","category_id":"ck57xfmeb0001d36kf2xdg6sh","_id":"ck6w88hgu0002pos60css9bd3"},{"post_id":"ck6w95e2w0007pos6gq7g6nrp","category_id":"ck57xfmeb0001d36kf2xdg6sh","_id":"ck6w95e2x0009pos6csulh3fq"},{"post_id":"ck6wdnc3m00003zs6ci44gx2g","category_id":"ck57xfmeb0001d36kf2xdg6sh","_id":"ck6wdnc3u00023zs63ml0gf6d"}],"PostTag":[{"post_id":"ck529vsji0000be6kcklmdvfk","tag_id":"ck4seojjz0002h7s6bxv01y3n","_id":"ck529vsjy0001be6kdzhm5rpk"},{"post_id":"ck529vsji0000be6kcklmdvfk","tag_id":"ck4seojk00003h7s637qb86df","_id":"ck529vsjz0002be6kex3a9tsz"},{"post_id":"ck529vslf0004be6k1b8954cs","tag_id":"ck4seojjz0002h7s6bxv01y3n","_id":"ck529vslj0005be6kbbx466m5"},{"post_id":"ck529vslf0004be6k1b8954cs","tag_id":"ck4seojk00003h7s637qb86df","_id":"ck529vslj0006be6k43oceteu"},{"post_id":"ck57xfme50000d36kef11hpp8","tag_id":"ck57xfmed0002d36kggnc3bah","_id":"ck57xfmee0005d36k12xrbyke"},{"post_id":"ck57xfme50000d36kef11hpp8","tag_id":"ck57xfmed0003d36k6cp5g1f1","_id":"ck57xfmee0006d36k3ljh2ce4"},{"post_id":"ck6i13ob40000jns6gz7mgozn","tag_id":"ck4seojjz0002h7s6bxv01y3n","_id":"ck6i13ob80001jns6frj4d6cq"},{"post_id":"ck6i13ob40000jns6gz7mgozn","tag_id":"ck57yd84k0000vh6kfacxhvgv","_id":"ck6i13ob80002jns65e4w3oyk"},{"post_id":"ck6i8hlnq0000tks60gd499cg","tag_id":"ck51vzg930002f96kfcljd45q","_id":"ck6i8hlo40002tks6a0uw8cds"},{"post_id":"ck6i8hlo10001tks69xdqdx5y","tag_id":"ck51vzg930002f96kfcljd45q","_id":"ck6i8hlo60003tks60vcfdy4c"},{"post_id":"ck6ivxamv0000n8s6a1re1k3g","tag_id":"ck51vzg930002f96kfcljd45q","_id":"ck6ivxan40001n8s6abwbb6mg"},{"post_id":"ck6iw57kg0000ozs63qqa3d4k","tag_id":"ck51vzg930002f96kfcljd45q","_id":"ck6iw57kl0001ozs65q61g6dt"},{"post_id":"ck6jadwgy0000gus642mv2prr","tag_id":"ck4seojjz0002h7s6bxv01y3n","_id":"ck6jadwh40001gus6gu71e7go"},{"post_id":"ck6jadwgy0000gus642mv2prr","tag_id":"ck57yd84k0000vh6kfacxhvgv","_id":"ck6jadwh50002gus6cbrz8fgt"},{"post_id":"ck6jmftg20000sgs6bses2hfq","tag_id":"ck4seojjz0002h7s6bxv01y3n","_id":"ck6jmftg70001sgs6ar41dpj3"},{"post_id":"ck6jmftg20000sgs6bses2hfq","tag_id":"ck57yd84k0000vh6kfacxhvgv","_id":"ck6jmftg80002sgs609ya82om"},{"post_id":"ck6kiel0d0000eys6hx1edm7a","tag_id":"ck6kiel0s0002eys6ao227v4j","_id":"ck6kiel0t0003eys621wo5jv6"},{"post_id":"ck6kroww40000k5s67wajeknm","tag_id":"ck6krowwf0002k5s67sdh2lny","_id":"ck6krowwg0003k5s65pjh1ds4"},{"post_id":"ck6ksnjp70000r3s61a960tn3","tag_id":"ck6ksnjpf0002r3s68fszhwtb","_id":"ck6ksnjpg0003r3s65bm65sth"},{"post_id":"ck6td8ged0000f8s63nte520m","tag_id":"ck6td8gek0002f8s6fcpy09bm","_id":"ck6td8gek0003f8s66mbge2gl"},{"post_id":"ck6w88hgm0000pos68yi7dcp4","tag_id":"ck6w88hgs0001pos6gp1fhzws","_id":"ck6w88hgw0003pos67tau98jz"},{"post_id":"ck6w95e2w0007pos6gq7g6nrp","tag_id":"ck6w88hgs0001pos6gp1fhzws","_id":"ck6w95e2x0008pos64sppapop"},{"post_id":"ck6wdnc3m00003zs6ci44gx2g","tag_id":"ck6w88hgs0001pos6gp1fhzws","_id":"ck6wdnc3u00013zs65ogkhjsc"}],"Tag":[{"name":"web","_id":"ck4kwhov60000za6k3rpv13rx"},{"name":"hexo","_id":"ck4kwhov80001za6kgavbczb7"},{"name":"github","_id":"ck4kwhov80002za6kcdm2fyj7"},{"name":"Java","_id":"ck4seojjz0002h7s6bxv01y3n"},{"name":"Java","_id":"ck4seojk00003h7s637qb86df"},{"name":"Java","_id":"ck4xxfhf70001fs6k2pxr3lbr"},{"name":"","_id":"ck51vzg930002f96kfcljd45q"},{"name":"","_id":"ck57xfmed0002d36kggnc3bah"},{"name":"","_id":"ck57xfmed0003d36k6cp5g1f1"},{"name":"Java - ","_id":"ck57yd84k0000vh6kfacxhvgv"},{"name":"HTTP","_id":"ck6kiel0s0002eys6ao227v4j"},{"name":"DevOps - ","_id":"ck6krowwf0002k5s67sdh2lny"},{"name":" - ","_id":"ck6ksnjpf0002r3s68fszhwtb"},{"name":"Java - ","_id":"ck6td8gek0002f8s6fcpy09bm"},{"name":" - Spring","_id":"ck6w88hgs0001pos6gp1fhzws"}]}}